var gq=Object.create;var vh=Object.defineProperty;var vq=Object.getOwnPropertyDescriptor;var bq=Object.getOwnPropertyNames;var yq=Object.getPrototypeOf,wq=Object.prototype.hasOwnProperty;var T=(t,e)=>()=>(t&&(e=t(t=0)),e);var $=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ai=(t,e)=>{for(var i in e)vh(t,i,{get:e[i],enumerable:!0})},I5=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of bq(e))!wq.call(t,n)&&n!==i&&vh(t,n,{get:()=>e[n],enumerable:!(r=vq(e,n))||r.enumerable});return t};var ce=(t,e,i)=>(i=t!=null?gq(yq(t)):{},I5(e||!t||!t.__esModule?vh(i,"default",{value:t,enumerable:!0}):i,t)),Lc=t=>I5(vh({},"__esModule",{value:!0}),t);function ta(t,e){for(var i in e)t[i]=e[i];return t}function L5(t){var e=t.parentNode;e&&e.removeChild(t)}function Tt(t,e,i){var r,n,o,s={};for(o in e)o=="key"?r=e[o]:o=="ref"?n=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Hc.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return Fc(t,s,r,n,null)}function Fc(t,e,i,r,n){var o={type:t,props:e,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++R5};return n==null&&ze.vnode!=null&&ze.vnode(o),o}function me(){return{current:null}}function X(t){return t.children}function ae(t,e){this.props=t,this.context=e}function zc(t,e){if(e==null)return t.__?zc(t.__,t.__.__k.indexOf(t)+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?zc(t):null}function F5(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return F5(t)}}function s0(t){(!t.__d&&(t.__d=!0)&&Ts.push(t)&&!yh.__r++||T5!==ze.debounceRendering)&&((T5=ze.debounceRendering)||N5)(yh)}function yh(){var t,e,i,r,n,o,s,u;for(Ts.sort(a0);t=Ts.shift();)t.__d&&(e=Ts.length,r=void 0,n=void 0,s=(o=(i=t).__v).__e,(u=i.__P)&&(r=[],(n=ta({},o)).__v=o.__v+1,l0(u,o,n,i.__n,u.ownerSVGElement!==void 0,o.__h!=null?[s]:null,r,s??zc(o),o.__h),B5(r,o),o.__e!=s&&F5(o)),Ts.length>e&&Ts.sort(a0));yh.__r=0}function z5(t,e,i,r,n,o,s,u,c,d){var p,g,v,b,S,_,E,I=r&&r.__k||D5,F=I.length;for(i.__k=[],p=0;p<e.length;p++)if((b=i.__k[p]=(b=e[p])==null||typeof b=="boolean"||typeof b=="function"?null:typeof b=="string"||typeof b=="number"||typeof b=="bigint"?Fc(null,b,null,null,b):Array.isArray(b)?Fc(X,{children:b},null,null,null):b.__b>0?Fc(b.type,b.props,b.key,b.ref?b.ref:null,b.__v):b)!=null){if(b.__=i,b.__b=i.__b+1,(v=I[p])===null||v&&b.key==v.key&&b.type===v.type)I[p]=void 0;else for(g=0;g<F;g++){if((v=I[g])&&b.key==v.key&&b.type===v.type){I[g]=void 0;break}v=null}l0(t,b,v=v||bh,n,o,s,u,c,d),S=b.__e,(g=b.ref)&&v.ref!=g&&(E||(E=[]),v.ref&&E.push(v.ref,null,b),E.push(g,b.__c||S,b)),S!=null?(_==null&&(_=S),typeof b.type=="function"&&b.__k===v.__k?b.__d=c=H5(b,c,t):c=U5(t,b,v,I,S,c),typeof i.type=="function"&&(i.__d=c)):c&&v.__e==c&&c.parentNode!=t&&(c=zc(v))}for(i.__e=_,p=F;p--;)I[p]!=null&&(typeof i.type=="function"&&I[p].__e!=null&&I[p].__e==i.__d&&(i.__d=q5(r).nextSibling),V5(I[p],I[p]));if(E)for(p=0;p<E.length;p++)W5(E[p],E[++p],E[++p])}function H5(t,e,i){for(var r,n=t.__k,o=0;n&&o<n.length;o++)(r=n[o])&&(r.__=t,e=typeof r.type=="function"?H5(r,e,i):U5(i,r,r,n,r.__e,e));return e}function po(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(i){po(i,e)}):e.push(t)),e}function U5(t,e,i,r,n,o){var s,u,c;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(i==null||n!=o||n.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(n),s=null;else{for(u=o,c=0;(u=u.nextSibling)&&c<r.length;c+=1)if(u==n)break e;t.insertBefore(n,o),s=o}return s!==void 0?s:n.nextSibling}function q5(t){var e,i,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((i=t.__k[e])&&(r=q5(i)))return r}return null}function Cq(t,e,i,r,n){var o;for(o in i)o==="children"||o==="key"||o in e||wh(t,o,null,i[o],r);for(o in e)n&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||i[o]===e[o]||wh(t,o,e[o],i[o],r)}function A5(t,e,i){e[0]==="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||xq.test(e)?i:i+"px"}function wh(t,e,i,r,n){var o;e:if(e==="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)i&&e in i||A5(t.style,e,"");if(i)for(e in i)r&&i[e]===r[e]||A5(t.style,e,i[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=i,i?r||t.addEventListener(e,o?k5:M5,o):t.removeEventListener(e,o?k5:M5,o);else if(e!=="dangerouslySetInnerHTML"){if(n)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,i))}}function M5(t){return this.l[t.type+!1](ze.event?ze.event(t):t)}function k5(t){return this.l[t.type+!0](ze.event?ze.event(t):t)}function l0(t,e,i,r,n,o,s,u,c){var d,p,g,v,b,S,_,E,I,F,O,L,z,G,H,N=e.type;if(e.constructor!==void 0)return null;i.__h!=null&&(c=i.__h,u=e.__e=i.__e,e.__h=null,o=[u]),(d=ze.__b)&&d(e);try{e:if(typeof N=="function"){if(E=e.props,I=(d=N.contextType)&&r[d.__c],F=d?I?I.props.value:d.__:r,i.__c?_=(p=e.__c=i.__c).__=p.__E:("prototype"in N&&N.prototype.render?e.__c=p=new N(E,F):(e.__c=p=new ae(E,F),p.constructor=N,p.render=_q),I&&I.sub(p),p.props=E,p.state||(p.state={}),p.context=F,p.__n=r,g=p.__d=!0,p.__h=[],p._sb=[]),p.__s==null&&(p.__s=p.state),N.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=ta({},p.__s)),ta(p.__s,N.getDerivedStateFromProps(E,p.__s))),v=p.props,b=p.state,p.__v=e,g)N.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(N.getDerivedStateFromProps==null&&E!==v&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(E,F),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(E,p.__s,F)===!1||e.__v===i.__v){for(e.__v!==i.__v&&(p.props=E,p.state=p.__s,p.__d=!1),p.__e=!1,e.__e=i.__e,e.__k=i.__k,e.__k.forEach(function(J){J&&(J.__=e)}),O=0;O<p._sb.length;O++)p.__h.push(p._sb[O]);p._sb=[],p.__h.length&&s.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(E,p.__s,F),p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(v,b,S)})}if(p.context=F,p.props=E,p.__P=t,L=ze.__r,z=0,"prototype"in N&&N.prototype.render){for(p.state=p.__s,p.__d=!1,L&&L(e),d=p.render(p.props,p.state,p.context),G=0;G<p._sb.length;G++)p.__h.push(p._sb[G]);p._sb=[]}else do p.__d=!1,L&&L(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++z<25);p.state=p.__s,p.getChildContext!=null&&(r=ta(ta({},r),p.getChildContext())),g||p.getSnapshotBeforeUpdate==null||(S=p.getSnapshotBeforeUpdate(v,b)),H=d!=null&&d.type===X&&d.key==null?d.props.children:d,z5(t,Array.isArray(H)?H:[H],e,i,r,n,o,s,u,c),p.base=e.__e,e.__h=null,p.__h.length&&s.push(p),_&&(p.__E=p.__=null),p.__e=!1}else o==null&&e.__v===i.__v?(e.__k=i.__k,e.__e=i.__e):e.__e=Sq(i.__e,e,i,r,n,o,s,c);(d=ze.diffed)&&d(e)}catch(J){e.__v=null,(c||o!=null)&&(e.__e=u,e.__h=!!c,o[o.indexOf(u)]=null),ze.__e(J,e,i)}}function B5(t,e){ze.__c&&ze.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){ze.__e(r,i.__v)}})}function Sq(t,e,i,r,n,o,s,u){var c,d,p,g=i.props,v=e.props,b=e.type,S=0;if(b==="svg"&&(n=!0),o!=null){for(;S<o.length;S++)if((c=o[S])&&"setAttribute"in c==!!b&&(b?c.localName===b:c.nodeType===3)){t=c,o[S]=null;break}}if(t==null){if(b===null)return document.createTextNode(v);t=n?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,v.is&&v),o=null,u=!1}if(b===null)g===v||u&&t.data===v||(t.data=v);else{if(o=o&&Hc.call(t.childNodes),d=(g=i.props||bh).dangerouslySetInnerHTML,p=v.dangerouslySetInnerHTML,!u){if(o!=null)for(g={},S=0;S<t.attributes.length;S++)g[t.attributes[S].name]=t.attributes[S].value;(p||d)&&(p&&(d&&p.__html==d.__html||p.__html===t.innerHTML)||(t.innerHTML=p&&p.__html||""))}if(Cq(t,v,g,n,u),p)e.__k=[];else if(S=e.props.children,z5(t,Array.isArray(S)?S:[S],e,i,r,n&&b!=="foreignObject",o,s,o?o[0]:i.__k&&zc(i,0),u),o!=null)for(S=o.length;S--;)o[S]!=null&&L5(o[S]);u||("value"in v&&(S=v.value)!==void 0&&(S!==t.value||b==="progress"&&!S||b==="option"&&S!==g.value)&&wh(t,"value",S,g.value,!1),"checked"in v&&(S=v.checked)!==void 0&&S!==t.checked&&wh(t,"checked",S,g.checked,!1))}return t}function W5(t,e,i){try{typeof t=="function"?t(e):t.current=e}catch(r){ze.__e(r,i)}}function V5(t,e,i){var r,n;if(ze.unmount&&ze.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||W5(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){ze.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(n=0;n<r.length;n++)r[n]&&V5(r[n],e,i||typeof t.type!="function");i||t.__e==null||L5(t.__e),t.__=t.__e=t.__d=void 0}function _q(t,e,i){return this.constructor(t,i)}function Aa(t,e,i){var r,n,o;ze.__&&ze.__(t,e),n=(r=typeof i=="function")?null:i&&i.__k||e.__k,o=[],l0(e,t=(!r&&i||e).__k=Tt(X,null,[t]),n||bh,bh,e.ownerSVGElement!==void 0,!r&&i?[i]:n?null:e.firstChild?Hc.call(e.childNodes):null,o,!r&&i?i:n?n.__e:e.firstChild,r),B5(o,t)}function qc(t,e){Aa(t,e,qc)}function $5(t,e,i){var r,n,o,s=ta({},t.props);for(o in e)o=="key"?r=e[o]:o=="ref"?n=e[o]:s[o]=e[o];return arguments.length>2&&(s.children=arguments.length>3?Hc.call(arguments,2):i),Fc(t.type,s,r||t.key,n||t.ref,null)}function wn(t,e){var i={__c:e="__cC"+O5++,__:t,Consumer:function(r,n){return r.children(n)},Provider:function(r){var n,o;return this.getChildContext||(n=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&n.some(function(u){u.__e=!0,s0(u)})},this.sub=function(s){n.push(s);var u=s.componentWillUnmount;s.componentWillUnmount=function(){n.splice(n.indexOf(s),1),u&&u.call(s)}}),r.children}};return i.Provider.__=i.Consumer.contextType=i}var Hc,ze,R5,Uc,Ts,T5,N5,a0,O5,bh,D5,xq,Pe=T(()=>{bh={},D5=[],xq=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;Hc=D5.slice,ze={__e:function(t,e,i,r){for(var n,o,s;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,r||{}),s=n.__d),s)return n.__E=n}catch(u){t=u}throw t}},R5=0,Uc=function(t){return t!=null&&t.constructor===void 0},ae.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ta({},this.state),typeof t=="function"&&(t=t(ta({},i),this.props)),t&&ta(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),s0(this))},ae.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),s0(this))},ae.prototype.render=X,Ts=[],N5=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a0=function(t,e){return t.__v.__b-e.__v.__b},yh.__r=0,O5=0});function As(t,e){ze.__h&&ze.__h(Kt,t,Ll||e),Ll=0;var i=Kt.__H||(Kt.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:xh}),i.__[t]}function It(t){return Ll=1,ho(e3,t)}function ho(t,e,i){var r=As(Ma++,2);if(r.t=t,!r.__c&&(r.__=[i?i(e):e3(void 0,e),function(u){var c=r.__N?r.__N[0]:r.__[0],d=r.t(c,u);c!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=Kt,!Kt.u)){var n=function(u,c,d){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(v){return v.__c});if(p.every(function(v){return!v.__N}))return!o||o.call(this,u,c,d);var g=!1;return p.forEach(function(v){if(v.__N){var b=v.__[0];v.__=v.__N,v.__N=void 0,b!==v.__[0]&&(g=!0)}}),!(!g&&r.__c.props===u)&&(!o||o.call(this,u,c,d))};Kt.u=!0;var o=Kt.shouldComponentUpdate,s=Kt.componentWillUpdate;Kt.componentWillUpdate=function(u,c,d){if(this.__e){var p=o;o=void 0,n(u,c,d),o=p}s&&s.call(this,u,c,d)},Kt.shouldComponentUpdate=n}return r.__N||r.__}function Ke(t,e){var i=As(Ma++,3);!ze.__s&&p0(i.__H,e)&&(i.__=t,i.i=e,Kt.__H.__h.push(i))}function ir(t,e){var i=As(Ma++,4);!ze.__s&&p0(i.__H,e)&&(i.__=t,i.i=e,Kt.__h.push(i))}function At(t){return Ll=5,Vt(function(){return{current:t}},[])}function Ms(t,e,i){Ll=6,ir(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},i==null?i:i.concat(t))}function Vt(t,e){var i=As(Ma++,7);return p0(i.__H,e)?(i.__V=t(),i.i=e,i.__h=t,i.__V):i.__}function ka(t,e){return Ll=8,Vt(function(){return t},e)}function ki(t){var e=Kt.context[t.__c],i=As(Ma++,9);return i.c=t,e?(i.__==null&&(i.__=!0,e.sub(Kt)),e.props.value):t.__}function Sh(t,e){ze.useDebugValue&&ze.useDebugValue(e?e(t):t)}function Eq(t){var e=As(Ma++,10),i=It();return e.__=t,Kt.componentDidCatch||(Kt.componentDidCatch=function(r,n){e.__&&e.__(r,n),i[1](r)}),[i[0],function(){i[1](void 0)}]}function d0(){var t=As(Ma++,11);if(!t.__){for(var e=Kt.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var i=e.__m||(e.__m=[0,0]);t.__="P"+i[0]+"-"+i[1]++}return t.__}function Pq(){for(var t;t=Q5.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ch),t.__H.__h.forEach(c0),t.__H.__h=[]}catch(e){t.__H.__h=[],ze.__e(e,t.__v)}}function Iq(t){var e,i=function(){clearTimeout(r),J5&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(i,100);J5&&(e=requestAnimationFrame(i))}function Ch(t){var e=Kt,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),Kt=e}function c0(t){var e=Kt;t.__c=t.__(),Kt=e}function p0(t,e){return!t||t.length!==e.length||e.some(function(i,r){return i!==t[r]})}function e3(t,e){return typeof e=="function"?e(t):e}var Ma,Kt,u0,j5,Ll,Q5,xh,G5,K5,Y5,Z5,X5,J5,Ra=T(()=>{Pe();Ll=0,Q5=[],xh=[],G5=ze.__b,K5=ze.__r,Y5=ze.diffed,Z5=ze.__c,X5=ze.unmount;ze.__b=function(t){Kt=null,G5&&G5(t)},ze.__r=function(t){K5&&K5(t),Ma=0;var e=(Kt=t.__c).__H;e&&(u0===Kt?(e.__h=[],Kt.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.__V=xh,i.__N=i.i=void 0})):(e.__h.forEach(Ch),e.__h.forEach(c0),e.__h=[])),u0=Kt},ze.diffed=function(t){Y5&&Y5(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Q5.push(e)!==1&&j5===ze.requestAnimationFrame||((j5=ze.requestAnimationFrame)||Iq)(Pq)),e.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.__V!==xh&&(i.__=i.__V),i.i=void 0,i.__V=xh})),u0=Kt=null},ze.__c=function(t,e){e.some(function(i){try{i.__h.forEach(Ch),i.__h=i.__h.filter(function(r){return!r.__||c0(r)})}catch(r){e.some(function(n){n.__h&&(n.__h=[])}),e=[],ze.__e(r,i.__v)}}),Z5&&Z5(t,e)},ze.unmount=function(t){X5&&X5(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(r){try{Ch(r)}catch(n){e=n}}),i.__H=void 0,e&&ze.__e(e,i.__v))};J5=typeof requestAnimationFrame=="function"});var M3={};ai(M3,{Children:()=>ks,Component:()=>ae,Fragment:()=>X,PureComponent:()=>Ti,StrictMode:()=>E3,Suspense:()=>Bc,SuspenseList:()=>Fl,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:()=>y3,cloneElement:()=>x3,createContext:()=>wn,createElement:()=>Tt,createFactory:()=>w3,createPortal:()=>je,createRef:()=>me,default:()=>_e,findDOMNode:()=>S3,flushSync:()=>_3,forwardRef:()=>rr,hydrate:()=>b3,isValidElement:()=>g0,lazy:()=>m3,memo:()=>d3,render:()=>v3,startTransition:()=>v0,unmountComponentAtNode:()=>C3,unstable_batchedUpdates:()=>Wc,useCallback:()=>ka,useContext:()=>ki,useDebugValue:()=>Sh,useDeferredValue:()=>P3,useEffect:()=>Ke,useErrorBoundary:()=>Eq,useId:()=>d0,useImperativeHandle:()=>Ms,useInsertionEffect:()=>T3,useLayoutEffect:()=>ir,useMemo:()=>Vt,useReducer:()=>ho,useRef:()=>At,useState:()=>It,useSyncExternalStore:()=>A3,useTransition:()=>I3,version:()=>Uq});function c3(t,e){for(var i in e)t[i]=e[i];return t}function f0(t,e){for(var i in t)if(i!=="__source"&&!(i in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function h0(t,e){return t===e&&(t!==0||1/t==1/e)||t!=t&&e!=e}function Ti(t){this.props=t}function d3(t,e){function i(n){var o=this.props.ref,s=o==n.ref;return!s&&o&&(o.call?o(null):o.current=null),e?!e(this.props,n)||!s:f0(this.props,n)}function r(n){return this.shouldComponentUpdate=i,Tt(t,n)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}function rr(t){function e(i){var r=c3({},i);return delete r.ref,t(r,i.ref||null)}return e.$$typeof=Tq,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}function p3(t,e,i){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=c3({},t)).__c!=null&&(t.__c.__P===i&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return p3(r,e,i)})),t}function h3(t,e,i){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return h3(r,e,i)}),t.__c&&t.__c.__P===e&&(t.__e&&i.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=i)),t}function Bc(){this.__u=0,this.t=null,this.__b=null}function f3(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function m3(t){var e,i,r;function n(o){if(e||(e=t()).then(function(s){i=s.default||s},function(s){r=s}),r)throw r;if(!i)throw e;return Tt(i,o)}return n.displayName="Lazy",n.__f=!0,n}function Fl(){this.u=null,this.o=null}function Mq(t){return this.getChildContext=function(){return t.context},t.children}function kq(t){var e=this,i=t.i;e.componentWillUnmount=function(){Aa(null,e.l),e.l=null,e.i=null},e.i&&e.i!==i&&e.componentWillUnmount(),t.__v?(e.l||(e.i=i,e.l={nodeType:1,parentNode:i,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,n){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Aa(Tt(Mq,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function je(t,e){var i=Tt(kq,{__v:t,i:e});return i.containerInfo=e,i}function v3(t,e,i){return e.__k==null&&(e.textContent=""),Aa(t,e),typeof i=="function"&&i(),t?t.__c:null}function b3(t,e,i){return qc(t,e),typeof i=="function"&&i(),t?t.__c:null}function Fq(){}function zq(){return this.cancelBubble}function Hq(){return this.defaultPrevented}function w3(t){return Tt.bind(null,t)}function g0(t){return!!t&&t.$$typeof===g3}function x3(t){return g0(t)?$5.apply(null,arguments):t}function C3(t){return!!t.__k&&(Aa(null,t),!0)}function S3(t){return t&&(t.base||t.nodeType===1&&t)||null}function v0(t){t()}function P3(t){return t}function I3(){return[!1,v0]}function A3(t,e){var i=e(),r=It({h:{__:i,v:e}}),n=r[0].h,o=r[1];return ir(function(){n.__=i,n.v=e,h0(n.__,e())||o({h:n})},[t,i,e]),Ke(function(){return h0(n.__,n.v())||o({h:n}),t(function(){h0(n.__,n.v())||o({h:n})})},[t]),i}var t3,Tq,i3,ks,Aq,r3,n3,g3,Rq,Nq,Oq,Dq,Lq,o3,m0,a3,s3,l3,u3,y3,Uq,Wc,_3,E3,T3,_e,Se=T(()=>{Pe();Pe();Ra();Ra();(Ti.prototype=new ae).isPureReactComponent=!0,Ti.prototype.shouldComponentUpdate=function(t,e){return f0(this.props,t)||f0(this.state,e)};t3=ze.__b;ze.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),t3&&t3(t)};Tq=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;i3=function(t,e){return t==null?null:po(po(t).map(e))},ks={map:i3,forEach:i3,count:function(t){return t?po(t).length:0},only:function(t){var e=po(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:po},Aq=ze.__e;ze.__e=function(t,e,i,r){if(t.then){for(var n,o=e;o=o.__;)if((n=o.__c)&&n.__c)return e.__e==null&&(e.__e=i.__e,e.__k=i.__k),n.__c(t,e)}Aq(t,e,i,r)};r3=ze.unmount;ze.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),r3&&r3(t)},(Bc.prototype=new ae).__c=function(t,e){var i=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(i);var n=f3(r.__v),o=!1,s=function(){o||(o=!0,i.__R=null,n?n(u):u())};i.__R=s;var u=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=h3(d,d.__c.__P,d.__c.__O)}var p;for(r.setState({__a:r.__b=null});p=r.t.pop();)p.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(s,s)},Bc.prototype.componentWillUnmount=function(){this.t=[]},Bc.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=p3(this.__b,i,r.__O=r.__P)}this.__b=null}var n=e.__a&&Tt(X,null,t.fallback);return n&&(n.__h=null),[Tt(X,null,e.__a?null:t.children),n]};n3=function(t,e,i){if(++i[1]===i[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(i=t.u;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;t.u=i=i[2]}};(Fl.prototype=new ae).__a=function(t){var e=this,i=f3(e.__v),r=e.o.get(t);return r[0]++,function(n){var o=function(){e.props.revealOrder?(r.push(n),n3(e,t,r)):n()};i?i(o):o()}},Fl.prototype.render=function(t){this.u=null,this.o=new Map;var e=po(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var i=e.length;i--;)this.o.set(e[i],this.u=[1,0,this.u]);return t.children},Fl.prototype.componentDidUpdate=Fl.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,i){n3(t,i,e)})};g3=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Rq=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Nq=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Oq=/[A-Z0-9]/g,Dq=typeof document<"u",Lq=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};ae.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(ae.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});o3=ze.event;ze.event=function(t){return o3&&(t=o3(t)),t.persist=Fq,t.isPropagationStopped=zq,t.isDefaultPrevented=Hq,t.nativeEvent=t};a3={configurable:!0,get:function(){return this.class}},s3=ze.vnode;ze.vnode=function(t){var e=t.type,i=t.props,r=i;if(typeof e=="string"){for(var n in r={},i){var o=i[n];if(!(n==="value"&&"defaultValue"in i&&o==null||Dq&&n==="children"&&e==="noscript")){var s=n.toLowerCase();n==="defaultValue"&&"value"in i&&i.value==null?n="value":n==="download"&&o===!0?o="":s==="ondoubleclick"?n="ondblclick":s!=="onchange"||e!=="input"&&e!=="textarea"||Lq(i.type)?s==="onfocus"?n="onfocusin":s==="onblur"?n="onfocusout":Nq.test(n)?n=s:e.indexOf("-")===-1&&Rq.test(n)?n=n.replace(Oq,"-$&").toLowerCase():o===null&&(o=void 0):s=n="oninput",s==="oninput"&&r[n=s]&&(n="oninputCapture"),r[n]=o}}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=po(i.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=po(i.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),t.props=r,i.class!=i.className&&(a3.enumerable="className"in i,i.className!=null&&(r.class=i.className),Object.defineProperty(r,"className",a3))}t.$$typeof=g3,s3&&s3(t)};l3=ze.__r;ze.__r=function(t){l3&&l3(t),m0=t.__c};u3=ze.diffed;ze.diffed=function(t){u3&&u3(t);var e=t.props,i=t.__e;i!=null&&t.type==="textarea"&&"value"in e&&e.value!==i.value&&(i.value=e.value==null?"":e.value),m0=null};y3={ReactCurrentDispatcher:{current:{readContext:function(t){return m0.__n[t.__c].props.value}}}},Uq="17.0.2";Wc=function(t,e){return t(e)},_3=function(t,e){return t(e)},E3=X;T3=ir;_e={useState:It,useId:d0,useReducer:ho,useEffect:Ke,useLayoutEffect:ir,useInsertionEffect:T3,useTransition:I3,useDeferredValue:P3,useSyncExternalStore:A3,startTransition:v0,useRef:At,useImperativeHandle:Ms,useMemo:Vt,useCallback:ka,useContext:ki,useDebugValue:Sh,version:"17.0.2",Children:ks,render:v3,hydrate:b3,unmountComponentAtNode:C3,createPortal:je,createElement:Tt,createContext:wn,createFactory:w3,cloneElement:x3,createRef:me,Fragment:X,isValidElement:g0,findDOMNode:S3,Component:ae,PureComponent:Ti,memo:d3,forwardRef:rr,flushSync:_3,unstable_batchedUpdates:Wc,StrictMode:E3,Suspense:Bc,SuspenseList:Fl,lazy:m3,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:y3}});var R3=$((Zue,k3)=>{"use strict";var qq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";k3.exports=qq});var L3=$((Xue,D3)=>{"use strict";var Bq=R3();function N3(){}function O3(){}O3.resetWarningCache=N3;D3.exports=function(){function t(r,n,o,s,u,c){if(c!==Bq){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:O3,resetWarningCache:N3};return i.PropTypes=i,i}});var b0=$((ece,F3)=>{F3.exports=L3()();var Jue,Que});var xn,Na=T(()=>{Se();xn=_e.createContext(null)});function Wq(t){t()}var z3,H3,U3,y0=T(()=>{z3=Wq,H3=function(e){return z3=e},U3=function(){return z3}});function Vq(){var t=U3(),e=null,i=null;return{clear:function(){e=null,i=null},notify:function(){t(function(){for(var n=e;n;)n.callback(),n=n.next})},get:function(){for(var n=[],o=e;o;)n.push(o),o=o.next;return n},subscribe:function(n){var o=!0,s=i={callback:n,next:null,prev:i};return s.prev?s.prev.next=s:e=s,function(){!o||e===null||(o=!1,s.next?s.next.prev=s.prev:i=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}function Vc(t,e){var i,r=q3;function n(g){return c(),r.subscribe(g)}function o(){r.notify()}function s(){p.onStateChange&&p.onStateChange()}function u(){return!!i}function c(){i||(i=e?e.addNestedSub(s):t.subscribe(s),r=Vq())}function d(){i&&(i(),i=void 0,r.clear(),r=q3)}var p={addNestedSub:n,notifyNestedSubs:o,handleChangeWrapper:s,isSubscribed:u,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return r}};return p}var q3,_h=T(()=>{y0();q3={notify:function(){},get:function(){return[]}}});var $c,Eh=T(()=>{Se();$c=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ir:Ke});function $q(t){var e=t.store,i=t.context,r=t.children,n=Vt(function(){var u=Vc(e);return{store:e,subscription:u}},[e]),o=Vt(function(){return e.getState()},[e]);$c(function(){var u=n.subscription;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==e.getState()&&u.notifyNestedSubs(),function(){u.tryUnsubscribe(),u.onStateChange=null}},[n,o]);var s=i||xn;return _e.createElement(s.Provider,{value:n},r)}var w0,B3=T(()=>{Se();Na();_h();Eh();w0=$q});function qt(){return qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},qt.apply(this,arguments)}var Rs=T(()=>{});function Ir(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}var zl=T(()=>{});var V3=$(Bt=>{"use strict";var Hi=typeof Symbol=="function"&&Symbol.for,x0=Hi?Symbol.for("react.element"):60103,C0=Hi?Symbol.for("react.portal"):60106,Ph=Hi?Symbol.for("react.fragment"):60107,Ih=Hi?Symbol.for("react.strict_mode"):60108,Th=Hi?Symbol.for("react.profiler"):60114,Ah=Hi?Symbol.for("react.provider"):60109,Mh=Hi?Symbol.for("react.context"):60110,S0=Hi?Symbol.for("react.async_mode"):60111,kh=Hi?Symbol.for("react.concurrent_mode"):60111,Rh=Hi?Symbol.for("react.forward_ref"):60112,Nh=Hi?Symbol.for("react.suspense"):60113,jq=Hi?Symbol.for("react.suspense_list"):60120,Oh=Hi?Symbol.for("react.memo"):60115,Dh=Hi?Symbol.for("react.lazy"):60116,Gq=Hi?Symbol.for("react.block"):60121,Kq=Hi?Symbol.for("react.fundamental"):60117,Yq=Hi?Symbol.for("react.responder"):60118,Zq=Hi?Symbol.for("react.scope"):60119;function nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case x0:switch(t=t.type,t){case S0:case kh:case Ph:case Th:case Ih:case Nh:return t;default:switch(t=t&&t.$$typeof,t){case Mh:case Rh:case Dh:case Oh:case Ah:return t;default:return e}}case C0:return e}}}function W3(t){return nn(t)===kh}Bt.AsyncMode=S0;Bt.ConcurrentMode=kh;Bt.ContextConsumer=Mh;Bt.ContextProvider=Ah;Bt.Element=x0;Bt.ForwardRef=Rh;Bt.Fragment=Ph;Bt.Lazy=Dh;Bt.Memo=Oh;Bt.Portal=C0;Bt.Profiler=Th;Bt.StrictMode=Ih;Bt.Suspense=Nh;Bt.isAsyncMode=function(t){return W3(t)||nn(t)===S0};Bt.isConcurrentMode=W3;Bt.isContextConsumer=function(t){return nn(t)===Mh};Bt.isContextProvider=function(t){return nn(t)===Ah};Bt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===x0};Bt.isForwardRef=function(t){return nn(t)===Rh};Bt.isFragment=function(t){return nn(t)===Ph};Bt.isLazy=function(t){return nn(t)===Dh};Bt.isMemo=function(t){return nn(t)===Oh};Bt.isPortal=function(t){return nn(t)===C0};Bt.isProfiler=function(t){return nn(t)===Th};Bt.isStrictMode=function(t){return nn(t)===Ih};Bt.isSuspense=function(t){return nn(t)===Nh};Bt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ph||t===kh||t===Th||t===Ih||t===Nh||t===jq||typeof t=="object"&&t!==null&&(t.$$typeof===Dh||t.$$typeof===Oh||t.$$typeof===Ah||t.$$typeof===Mh||t.$$typeof===Rh||t.$$typeof===Kq||t.$$typeof===Yq||t.$$typeof===Zq||t.$$typeof===Gq)};Bt.typeOf=nn});var _0=$((gce,$3)=>{"use strict";$3.exports=V3()});var Lh=$((vce,X3)=>{"use strict";var E0=_0(),Xq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Jq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Qq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Y3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},P0={};P0[E0.ForwardRef]=Qq;P0[E0.Memo]=Y3;function j3(t){return E0.isMemo(t)?Y3:P0[t.$$typeof]||Xq}var eB=Object.defineProperty,tB=Object.getOwnPropertyNames,G3=Object.getOwnPropertySymbols,iB=Object.getOwnPropertyDescriptor,rB=Object.getPrototypeOf,K3=Object.prototype;function Z3(t,e,i){if(typeof e!="string"){if(K3){var r=rB(e);r&&r!==K3&&Z3(t,r,i)}var n=tB(e);G3&&(n=n.concat(G3(e)));for(var o=j3(t),s=j3(e),u=0;u<n.length;++u){var c=n[u];if(!Jq[c]&&!(i&&i[c])&&!(s&&s[c])&&!(o&&o[c])){var d=iB(e,c);try{eB(t,c,d)}catch{}}}}return t}X3.exports=Z3});var rC=$(Yt=>{"use strict";var Fh=60103,zh=60106,jc=60107,Gc=60108,Kc=60114,Yc=60109,Zc=60110,Xc=60112,Jc=60113,I0=60120,Qc=60115,ed=60116,J3=60121,Q3=60122,eC=60117,tC=60129,iC=60131;typeof Symbol=="function"&&Symbol.for&&(Ui=Symbol.for,Fh=Ui("react.element"),zh=Ui("react.portal"),jc=Ui("react.fragment"),Gc=Ui("react.strict_mode"),Kc=Ui("react.profiler"),Yc=Ui("react.provider"),Zc=Ui("react.context"),Xc=Ui("react.forward_ref"),Jc=Ui("react.suspense"),I0=Ui("react.suspense_list"),Qc=Ui("react.memo"),ed=Ui("react.lazy"),J3=Ui("react.block"),Q3=Ui("react.server.block"),eC=Ui("react.fundamental"),tC=Ui("react.debug_trace_mode"),iC=Ui("react.legacy_hidden"));var Ui;function Un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fh:switch(t=t.type,t){case jc:case Kc:case Gc:case Jc:case I0:return t;default:switch(t=t&&t.$$typeof,t){case Zc:case Xc:case ed:case Qc:case Yc:return t;default:return e}}case zh:return e}}}var nB=Yc,oB=Fh,aB=Xc,sB=jc,lB=ed,uB=Qc,cB=zh,dB=Kc,pB=Gc,hB=Jc;Yt.ContextConsumer=Zc;Yt.ContextProvider=nB;Yt.Element=oB;Yt.ForwardRef=aB;Yt.Fragment=sB;Yt.Lazy=lB;Yt.Memo=uB;Yt.Portal=cB;Yt.Profiler=dB;Yt.StrictMode=pB;Yt.Suspense=hB;Yt.isAsyncMode=function(){return!1};Yt.isConcurrentMode=function(){return!1};Yt.isContextConsumer=function(t){return Un(t)===Zc};Yt.isContextProvider=function(t){return Un(t)===Yc};Yt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fh};Yt.isForwardRef=function(t){return Un(t)===Xc};Yt.isFragment=function(t){return Un(t)===jc};Yt.isLazy=function(t){return Un(t)===ed};Yt.isMemo=function(t){return Un(t)===Qc};Yt.isPortal=function(t){return Un(t)===zh};Yt.isProfiler=function(t){return Un(t)===Kc};Yt.isStrictMode=function(t){return Un(t)===Gc};Yt.isSuspense=function(t){return Un(t)===Jc};Yt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jc||t===Kc||t===tC||t===Gc||t===Jc||t===I0||t===iC||typeof t=="object"&&t!==null&&(t.$$typeof===ed||t.$$typeof===Qc||t.$$typeof===Yc||t.$$typeof===Zc||t.$$typeof===Xc||t.$$typeof===eC||t.$$typeof===J3||t[0]===Q3)};Yt.typeOf=Un});var oC=$((yce,nC)=>{"use strict";nC.exports=rC()});function bB(t,e){var i=t[1];return[e.payload,i+1]}function aC(t,e,i){$c(function(){return t.apply(void 0,e)},i)}function yB(t,e,i,r,n,o,s){t.current=r,e.current=n,i.current=!1,o.current&&(o.current=null,s())}function wB(t,e,i,r,n,o,s,u,c,d){if(t){var p=!1,g=null,v=function(){if(!p){var _=e.getState(),E,I;try{E=r(_,n.current)}catch(F){I=F,g=F}I||(g=null),E===o.current?s.current||c():(o.current=E,u.current=E,s.current=!0,d({type:"STORE_UPDATED",payload:{error:I}}))}};i.onStateChange=v,i.trySubscribe(),v();var b=function(){if(p=!0,i.tryUnsubscribe(),i.onStateChange=null,g)throw g};return b}}function Hh(t,e){e===void 0&&(e={});var i=e,r=i.getDisplayName,n=r===void 0?function(G){return"ConnectAdvanced("+G+")"}:r,o=i.methodName,s=o===void 0?"connectAdvanced":o,u=i.renderCountProp,c=u===void 0?void 0:u,d=i.shouldHandleStateChanges,p=d===void 0?!0:d,g=i.storeKey,v=g===void 0?"store":g,b=i.withRef,S=b===void 0?!1:b,_=i.forwardRef,E=_===void 0?!1:_,I=i.context,F=I===void 0?xn:I,O=Ir(i,fB);if(0)var L;var z=F;return function(H){var N=H.displayName||H.name||"Component",J=n(N),oe=qt({},O,{getDisplayName:n,methodName:s,renderCountProp:c,shouldHandleStateChanges:p,storeKey:v,displayName:J,wrappedComponentName:N,WrappedComponent:H}),te=O.pure;function K(le){return t(le.dispatch,oe)}var U=te?Vt:function(le){return le()};function se(le){var j=Vt(function(){var ri=le.reactReduxForwardedRef,No=Ir(le,mB);return[le.context,ri,No]},[le]),B=j[0],Y=j[1],ie=j[2],de=Vt(function(){return B&&B.Consumer&&(0,sC.isContextConsumer)(_e.createElement(B.Consumer,null))?B:z},[B,z]),fe=ki(de),be=!!le.store&&!!le.store.getState&&!!le.store.dispatch,Me=!!fe&&!!fe.store,Ee=be?le.store:fe.store,Fe=Vt(function(){return K(Ee)},[Ee]),qe=Vt(function(){if(!p)return vB;var ri=Vc(Ee,be?null:fe.subscription),No=ri.notifyNestedSubs.bind(ri);return[ri,No]},[Ee,be,fe]),nt=qe[0],$e=qe[1],ot=Vt(function(){return be?fe:qt({},fe,{subscription:nt})},[be,fe,nt]),Ae=ho(bB,gB,xB),st=Ae[0],ct=st[0],ft=Ae[1];if(ct&&ct.error)throw ct.error;var Be=At(),mt=At(ie),Lt=At(),St=At(!1),Wt=U(function(){return Lt.current&&ie===mt.current?Lt.current:Fe(Ee.getState(),ie)},[Ee,ct,ie]);aC(yB,[mt,Be,St,ie,Wt,Lt,$e]),aC(wB,[p,Ee,nt,Fe,mt,Be,St,Lt,$e,ft],[Ee,nt,Fe]);var rt=Vt(function(){return _e.createElement(H,qt({},Wt,{ref:Y}))},[Y,H,Wt]),Ki=Vt(function(){return p?_e.createElement(de.Provider,{value:ot},rt):rt},[de,rt,ot]);return Ki}var re=te?_e.memo(se):se;if(re.WrappedComponent=H,re.displayName=se.displayName=J,E){var Q=_e.forwardRef(function(j,B){return _e.createElement(re,qt({},j,{reactReduxForwardedRef:B}))});return Q.displayName=J,Q.WrappedComponent=H,(0,T0.default)(Q,H)}return(0,T0.default)(re,H)}}var T0,sC,fB,mB,gB,vB,xB,A0=T(()=>{Rs();zl();T0=ce(Lh());Se();sC=ce(oC());_h();Eh();Na();fB=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],mB=["reactReduxForwardedRef"],gB=[],vB=[null,null];xB=function(){return[null,0]}});function lC(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Hl(t,e){if(lC(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(!Object.prototype.hasOwnProperty.call(e,i[n])||!lC(t[i[n]],e[i[n]]))return!1;return!0}var M0=T(()=>{});function k0(t,e){var i={},r=function(s){var u=t[s];typeof u=="function"&&(i[s]=function(){return e(u.apply(void 0,arguments))})};for(var n in t)r(n);return i}var uC=T(()=>{});var cC=T(()=>{});var R0=T(()=>{});var N0=T(()=>{cC();R0()});function td(t){return function(i,r){var n=t(i,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function dC(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function Uh(t,e){return function(r,n){var o=n.displayName,s=function(c,d){return s.dependsOnOwnProps?s.mapToProps(c,d):s.mapToProps(c)};return s.dependsOnOwnProps=!0,s.mapToProps=function(c,d){s.mapToProps=t,s.dependsOnOwnProps=dC(t);var p=s(c,d);return typeof p=="function"&&(s.mapToProps=p,s.dependsOnOwnProps=dC(p),p=s(c,d)),p},s}}var O0=T(()=>{N0()});function SB(t){return typeof t=="function"?Uh(t,"mapDispatchToProps"):void 0}function _B(t){return t?void 0:td(function(e){return{dispatch:e}})}function EB(t){return t&&typeof t=="object"?td(function(e){return k0(t,e)}):void 0}var pC,hC=T(()=>{uC();O0();pC=[SB,_B,EB]});function PB(t){return typeof t=="function"?Uh(t,"mapStateToProps"):void 0}function IB(t){return t?void 0:td(function(){return{}})}var fC,mC=T(()=>{O0();fC=[PB,IB]});function TB(t,e,i){return qt({},i,t,e)}function AB(t){return function(i,r){var n=r.displayName,o=r.pure,s=r.areMergedPropsEqual,u=!1,c;return function(p,g,v){var b=t(p,g,v);return u?(!o||!s(b,c))&&(c=b):(u=!0,c=b),c}}}function MB(t){return typeof t=="function"?AB(t):void 0}function kB(t){return t?void 0:function(){return TB}}var gC,vC=T(()=>{Rs();N0();gC=[MB,kB]});var bC=T(()=>{R0()});function NB(t,e,i,r){return function(o,s){return i(t(o,s),e(r,s),s)}}function OB(t,e,i,r,n){var o=n.areStatesEqual,s=n.areOwnPropsEqual,u=n.areStatePropsEqual,c=!1,d,p,g,v,b;function S(O,L){return d=O,p=L,g=t(d,p),v=e(r,p),b=i(g,v,p),c=!0,b}function _(){return g=t(d,p),e.dependsOnOwnProps&&(v=e(r,p)),b=i(g,v,p),b}function E(){return t.dependsOnOwnProps&&(g=t(d,p)),e.dependsOnOwnProps&&(v=e(r,p)),b=i(g,v,p),b}function I(){var O=t(d,p),L=!u(O,g);return g=O,L&&(b=i(g,v,p)),b}function F(O,L){var z=!s(L,p),G=!o(O,d,L,p);return d=O,p=L,z&&G?_():z?E():G?I():b}return function(L,z){return c?F(L,z):S(L,z)}}function D0(t,e){var i=e.initMapStateToProps,r=e.initMapDispatchToProps,n=e.initMergeProps,o=Ir(e,RB),s=i(t,o),u=r(t,o),c=n(t,o),d=o.pure?OB:NB;return d(s,u,c,t,o)}var RB,yC=T(()=>{zl();bC();RB=["initMapStateToProps","initMapDispatchToProps","initMergeProps"]});function L0(t,e,i){for(var r=e.length-1;r>=0;r--){var n=e[r](t);if(n)return n}return function(o,s){throw new Error("Invalid value of type "+typeof t+" for "+i+" argument when connecting component "+s.wrappedComponentName+".")}}function LB(t,e){return t===e}function FB(t){var e=t===void 0?{}:t,i=e.connectHOC,r=i===void 0?Hh:i,n=e.mapStateToPropsFactories,o=n===void 0?fC:n,s=e.mapDispatchToPropsFactories,u=s===void 0?pC:s,c=e.mergePropsFactories,d=c===void 0?gC:c,p=e.selectorFactory,g=p===void 0?D0:p;return function(b,S,_,E){E===void 0&&(E={});var I=E,F=I.pure,O=F===void 0?!0:F,L=I.areStatesEqual,z=L===void 0?LB:L,G=I.areOwnPropsEqual,H=G===void 0?Hl:G,N=I.areStatePropsEqual,J=N===void 0?Hl:N,oe=I.areMergedPropsEqual,te=oe===void 0?Hl:oe,K=Ir(I,DB),U=L0(b,o,"mapStateToProps"),se=L0(S,u,"mapDispatchToProps"),re=L0(_,d,"mergeProps");return r(g,qt({methodName:"connect",getDisplayName:function(le){return"Connect("+le+")"},shouldHandleStateChanges:!!b,initMapStateToProps:U,initMapDispatchToProps:se,initMergeProps:re,pure:O,areStatesEqual:z,areOwnPropsEqual:H,areStatePropsEqual:J,areMergedPropsEqual:te},K))}}var DB,De,wC=T(()=>{Rs();zl();A0();M0();hC();mC();vC();yC();DB=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];De=FB()});function F0(){var t=ki(xn);return t}var z0=T(()=>{Se();Na()});function H0(t){t===void 0&&(t=xn);var e=t===xn?F0:function(){return ki(t)};return function(){var r=e(),n=r.store;return n}}var qh,U0=T(()=>{Se();Na();z0();qh=H0()});var xC=T(()=>{Na();U0()});var CC=T(()=>{Se();z0();_h();Eh();Na()});var SC=T(()=>{B3();A0();Na();wC();xC();CC();U0();M0()});var _C=T(()=>{Se()});var ht=T(()=>{SC();_C();y0();H3(Wc)});var Bh=$(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.frontloadConnect=Os.Frontload=void 0;var q0=function(){function t(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();Os.frontloadServerRender=KB;var zB=(Se(),Lc(M3)),id=PC(zB),HB=b0(),EC=PC(HB);function PC(t){return t&&t.__esModule?t:{default:t}}function IC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TC(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function AC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var UB=function(){return typeof window>"u"||!window.document||!window.document.createElement},qB=UB(),Ul=[],Ns={MOUNT:0,UPDATE:1},BB=!1,MC=function(e,i){for(var r=[],n=0;n<e.length;n++)r.push(i(e[n],n));return r};function WB(t,e){var i=e.withLogging,r=e.continueRenderingOnError,n=void 0;return Promise.all(MC(t,function(o){return o.catch(function(s){return n||(n=s),i&&BB("frontloadServerRender info","ERROR:",s),s})})).then(function(){if(r!==!0&&n)throw n})}var VB=Os.Frontload=function(t){AC(e,t),q0(e,[{key:"getChildContext",value:function(){var r=this;return{frontload:{isServer:this.isServer,firstClientRenderDone:this.isServer?!0:this.firstClientRenderDone,pushFrontload:function(o,s,u,c,d){var p=u===Ns.MOUNT,g=u===Ns.UPDATE,v=r.props.noServerRender||s.noServerRender;r.isServer&&v||p&&s.onMount===!1||g&&!s.onUpdate||(r.isServer?Ul.unshift({fn:function(){return o(c,{isMount:p,isUpdate:g})},options:s,componentDisplayName:c.displayName}):(v||r.firstClientRenderDone)&&o(c,{isMount:p,isUpdate:g}))}}}}}]);function e(i,r){IC(this,e);var n=TC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,r));return n.isServer=i.isServer===void 0?qB:i.isServer,n.componentDidMount=function(){n.firstClientRenderDone=!0},n}return q0(e,[{key:"render",value:function(){return id.default.Children.only(this.props.children)}}]),e}(id.default.Component);VB.childContextTypes={frontload:EC.default.object};var kC=function(t){AC(e,t);function e(i,r){IC(this,e);var n=TC(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,r));return n.pushFrontload=function(o){return function(s){if(o===Ns.UPDATE){var u=n.props.options._experimental_updateFunc;if(u&&!u(s.componentProps,n.props.componentProps))return}var c="for component: ["+(n.props.component.displayName||"anonymous")+"] on ["+(o===Ns.MOUNT?"mount":"update")+"]";n.context.frontload.pushFrontload(n.props.frontload,n.props.options,o,n.props.componentProps,c)}},r.frontload.isServer?n.componentWillMount=n.pushFrontload(Ns.MOUNT):(n.componentDidMount=n.pushFrontload(Ns.MOUNT),n.componentDidUpdate=n.pushFrontload(Ns.UPDATE)),n}return q0(e,[{key:"render",value:function(){return id.default.createElement(this.props.component,this.props.componentProps)}}]),e}(id.default.Component);kC.contextTypes={frontload:EC.default.object};var Vde=Os.frontloadConnect=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){return function(n){return id.default.createElement(kC,{frontload:e,component:r,componentProps:n,options:i})}}};function $B(t){t(!0);var e=Ul;return Ul=[],e}function jB(t,e){return WB(MC(t,function(i){return i.fn()}),e)}function GB(t){var e=t(!1);return Ul=[],e}function RC(t,e){var i=e.withLogging,r=e.maxNestedFrontloadComponents,n=e.continueRenderingOnError,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=$B(t),c=u.length+0,d=c-s;if(!d){var p=GB(t);return Promise.resolve(p)}var g=i&&Date.now();return jB(u,{withLogging:i,continueRenderingOnError:n}).then(function(){if(o===r){var v=t(!1),b=Ul.length+0,S=b-c;return Ul=[],v}return RC(t,{withLogging:i,maxNestedFrontloadComponents:r,continueRenderingOnError:n},o+1,c)})}function KB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.maxNestedFrontloadComponents||(e.maxNestedFrontloadComponents=1),RC(t,e)}});function rd(t,e){return rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},rd(t,e)}var NC=T(()=>{});function Hr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rd(t,e)}var Wh=T(()=>{NC()});function Vh(t){return t.charAt(0)==="/"}function B0(t,e){for(var i=e,r=i+1,n=t.length;r<n;i+=1,r+=1)t[i]=t[r];t.pop()}function YB(t,e){e===void 0&&(e="");var i=t&&t.split("/")||[],r=e&&e.split("/")||[],n=t&&Vh(t),o=e&&Vh(e),s=n||o;if(t&&Vh(t)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";var u;if(r.length){var c=r[r.length-1];u=c==="."||c===".."||c===""}else u=!1;for(var d=0,p=r.length;p>=0;p--){var g=r[p];g==="."?B0(r,p):g===".."?(B0(r,p),d++):d&&(B0(r,p),d--)}if(!s)for(;d--;d)r.unshift("..");s&&r[0]!==""&&(!r[0]||!Vh(r[0]))&&r.unshift("");var v=r.join("/");return u&&v.substr(-1)!=="/"&&(v+="/"),v}var OC,DC=T(()=>{OC=YB});var LC=T(()=>{});function XB(t,e){if(!ZB){if(t)return;var i="Warning: "+e;typeof console<"u"&&console.warn(i);try{throw Error(i)}catch{}}}var ZB,W0,FC=T(()=>{ZB=!0;W0=XB});function qn(t,e){if(!t){if(JB)throw new Error(V0);var i=typeof e=="function"?e():e,r=i?"".concat(V0,": ").concat(i):V0;throw new Error(r)}}var JB,V0,$h=T(()=>{JB=!0,V0="Invariant failed"});function od(t){return t.charAt(0)==="/"?t:"/"+t}function zC(t){return t.charAt(0)==="/"?t.substr(1):t}function QB(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function VC(t,e){return QB(t,e)?t.substr(e.length):t}function $C(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function eW(t){var e=t||"/",i="",r="",n=e.indexOf("#");n!==-1&&(r=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");return o!==-1&&(i=e.substr(o),e=e.substr(0,o)),{pathname:e,search:i==="?"?"":i,hash:r==="#"?"":r}}function dr(t){var e=t.pathname,i=t.search,r=t.hash,n=e||"/";return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Tr(t,e,i,r){var n;typeof t=="string"?(n=eW(t),n.state=e):(n=qt({},t),n.pathname===void 0&&(n.pathname=""),n.search?n.search.charAt(0)!=="?"&&(n.search="?"+n.search):n.search="",n.hash?n.hash.charAt(0)!=="#"&&(n.hash="#"+n.hash):n.hash="",e!==void 0&&n.state===void 0&&(n.state=e));try{n.pathname=decodeURI(n.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+n.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return i&&(n.key=i),r?n.pathname?n.pathname.charAt(0)!=="/"&&(n.pathname=OC(n.pathname,r.pathname)):n.pathname=r.pathname:n.pathname||(n.pathname="/"),n}function j0(){var t=null;function e(s){return t=s,function(){t===s&&(t=null)}}function i(s,u,c,d){if(t!=null){var p=typeof t=="function"?t(s,u):t;typeof p=="string"?typeof c=="function"?c(p,d):d(!0):d(p!==!1)}else d(!0)}var r=[];function n(s){var u=!0;function c(){u&&s.apply(void 0,arguments)}return r.push(c),function(){u=!1,r=r.filter(function(d){return d!==c})}}function o(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];r.forEach(function(d){return d.apply(void 0,u)})}return{setPrompt:e,confirmTransitionTo:i,appendListener:n,notifyListeners:o}}function GC(t,e){e(window.confirm(t))}function tW(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function iW(){return window.navigator.userAgent.indexOf("Trident")===-1}function rW(){return window.navigator.userAgent.indexOf("Firefox")===-1}function nW(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}function qC(){try{return window.history.state||{}}catch{return{}}}function jh(t){t===void 0&&(t={}),jC||qn(!1);var e=window.history,i=tW(),r=!iW(),n=t,o=n.forceRefresh,s=o===void 0?!1:o,u=n.getUserConfirmation,c=u===void 0?GC:u,d=n.keyLength,p=d===void 0?6:d,g=t.basename?$C(od(t.basename)):"";function v(B){var Y=B||{},ie=Y.key,de=Y.state,fe=window.location,be=fe.pathname,Me=fe.search,Ee=fe.hash,Fe=be+Me+Ee;return g&&(Fe=VC(Fe,g)),Tr(Fe,de,ie)}function b(){return Math.random().toString(36).substr(2,p)}var S=j0();function _(B){qt(j,B),j.length=e.length,S.notifyListeners(j.location,j.action)}function E(B){nW(B)||O(v(B.state))}function I(){O(v(qC()))}var F=!1;function O(B){if(F)F=!1,_();else{var Y="POP";S.confirmTransitionTo(B,Y,c,function(ie){ie?_({action:Y,location:B}):L(B)})}}function L(B){var Y=j.location,ie=G.indexOf(Y.key);ie===-1&&(ie=0);var de=G.indexOf(B.key);de===-1&&(de=0);var fe=ie-de;fe&&(F=!0,oe(fe))}var z=v(qC()),G=[z.key];function H(B){return g+dr(B)}function N(B,Y){var ie="PUSH",de=Tr(B,Y,b(),j.location);S.confirmTransitionTo(de,ie,c,function(fe){if(fe){var be=H(de),Me=de.key,Ee=de.state;if(i)if(e.pushState({key:Me,state:Ee},null,be),s)window.location.href=be;else{var Fe=G.indexOf(j.location.key),qe=G.slice(0,Fe+1);qe.push(de.key),G=qe,_({action:ie,location:de})}else window.location.href=be}})}function J(B,Y){var ie="REPLACE",de=Tr(B,Y,b(),j.location);S.confirmTransitionTo(de,ie,c,function(fe){if(fe){var be=H(de),Me=de.key,Ee=de.state;if(i)if(e.replaceState({key:Me,state:Ee},null,be),s)window.location.replace(be);else{var Fe=G.indexOf(j.location.key);Fe!==-1&&(G[Fe]=de.key),_({action:ie,location:de})}else window.location.replace(be)}})}function oe(B){e.go(B)}function te(){oe(-1)}function K(){oe(1)}var U=0;function se(B){U+=B,U===1&&B===1?(window.addEventListener(HC,E),r&&window.addEventListener(UC,I)):U===0&&(window.removeEventListener(HC,E),r&&window.removeEventListener(UC,I))}var re=!1;function Q(B){B===void 0&&(B=!1);var Y=S.setPrompt(B);return re||(se(1),re=!0),function(){return re&&(re=!1,se(-1)),Y()}}function le(B){var Y=S.appendListener(B);return se(1),function(){se(-1),Y()}}var j={length:e.length,action:"POP",location:z,createHref:H,push:N,replace:J,go:oe,goBack:te,goForward:K,block:Q,listen:le};return j}function KC(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function nd(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function aW(t){window.location.hash=t}function $0(t){window.location.replace(KC(window.location.href)+"#"+t)}function YC(t){t===void 0&&(t={}),jC||qn(!1);var e=window.history,i=rW(),r=t,n=r.getUserConfirmation,o=n===void 0?GC:n,s=r.hashType,u=s===void 0?"slash":s,c=t.basename?$C(od(t.basename)):"",d=oW[u],p=d.encodePath,g=d.decodePath;function v(){var ie=g(nd());return c&&(ie=VC(ie,c)),Tr(ie)}var b=j0();function S(ie){qt(Y,ie),Y.length=e.length,b.notifyListeners(Y.location,Y.action)}var _=!1,E=null;function I(ie,de){return ie.pathname===de.pathname&&ie.search===de.search&&ie.hash===de.hash}function F(){var ie=nd(),de=p(ie);if(ie!==de)$0(de);else{var fe=v(),be=Y.location;if(!_&&I(be,fe)||E===dr(fe))return;E=null,O(fe)}}function O(ie){if(_)_=!1,S();else{var de="POP";b.confirmTransitionTo(ie,de,o,function(fe){fe?S({action:de,location:ie}):L(ie)})}}function L(ie){var de=Y.location,fe=N.lastIndexOf(dr(de));fe===-1&&(fe=0);var be=N.lastIndexOf(dr(ie));be===-1&&(be=0);var Me=fe-be;Me&&(_=!0,K(Me))}var z=nd(),G=p(z);z!==G&&$0(G);var H=v(),N=[dr(H)];function J(ie){var de=document.querySelector("base"),fe="";return de&&de.getAttribute("href")&&(fe=KC(window.location.href)),fe+"#"+p(c+dr(ie))}function oe(ie,de){var fe="PUSH",be=Tr(ie,void 0,void 0,Y.location);b.confirmTransitionTo(be,fe,o,function(Me){if(Me){var Ee=dr(be),Fe=p(c+Ee),qe=nd()!==Fe;if(qe){E=Ee,aW(Fe);var nt=N.lastIndexOf(dr(Y.location)),$e=N.slice(0,nt+1);$e.push(Ee),N=$e,S({action:fe,location:be})}else S()}})}function te(ie,de){var fe="REPLACE",be=Tr(ie,void 0,void 0,Y.location);b.confirmTransitionTo(be,fe,o,function(Me){if(Me){var Ee=dr(be),Fe=p(c+Ee),qe=nd()!==Fe;qe&&(E=Ee,$0(Fe));var nt=N.indexOf(dr(Y.location));nt!==-1&&(N[nt]=Ee),S({action:fe,location:be})}})}function K(ie){e.go(ie)}function U(){K(-1)}function se(){K(1)}var re=0;function Q(ie){re+=ie,re===1&&ie===1?window.addEventListener(BC,F):re===0&&window.removeEventListener(BC,F)}var le=!1;function j(ie){ie===void 0&&(ie=!1);var de=b.setPrompt(ie);return le||(Q(1),le=!0),function(){return le&&(le=!1,Q(-1)),de()}}function B(ie){var de=b.appendListener(ie);return Q(1),function(){Q(-1),de()}}var Y={length:e.length,action:"POP",location:H,createHref:J,push:oe,replace:te,go:K,goBack:U,goForward:se,block:j,listen:B};return Y}function WC(t,e,i){return Math.min(Math.max(t,e),i)}function ZC(t){t===void 0&&(t={});var e=t,i=e.getUserConfirmation,r=e.initialEntries,n=r===void 0?["/"]:r,o=e.initialIndex,s=o===void 0?0:o,u=e.keyLength,c=u===void 0?6:u,d=j0();function p(N){qt(H,N),H.length=H.entries.length,d.notifyListeners(H.location,H.action)}function g(){return Math.random().toString(36).substr(2,c)}var v=WC(s,0,n.length-1),b=n.map(function(N){return typeof N=="string"?Tr(N,void 0,g()):Tr(N,void 0,N.key||g())}),S=dr;function _(N,J){var oe="PUSH",te=Tr(N,J,g(),H.location);d.confirmTransitionTo(te,oe,i,function(K){if(K){var U=H.index,se=U+1,re=H.entries.slice(0);re.length>se?re.splice(se,re.length-se,te):re.push(te),p({action:oe,location:te,index:se,entries:re})}})}function E(N,J){var oe="REPLACE",te=Tr(N,J,g(),H.location);d.confirmTransitionTo(te,oe,i,function(K){K&&(H.entries[H.index]=te,p({action:oe,location:te}))})}function I(N){var J=WC(H.index+N,0,H.entries.length-1),oe="POP",te=H.entries[J];d.confirmTransitionTo(te,oe,i,function(K){K?p({action:oe,location:te,index:J}):p()})}function F(){I(-1)}function O(){I(1)}function L(N){var J=H.index+N;return J>=0&&J<H.entries.length}function z(N){return N===void 0&&(N=!1),d.setPrompt(N)}function G(N){return d.appendListener(N)}var H={length:b.length,action:"POP",location:b[v],index:v,entries:b,createHref:S,push:_,replace:E,go:I,goBack:F,goForward:O,canGo:L,block:z,listen:G};return H}var jC,HC,UC,BC,oW,Gh=T(()=>{Rs();DC();LC();$h();jC=!!(typeof window<"u"&&window.document&&window.document.createElement);HC="popstate",UC="hashchange";BC="hashchange",oW={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+zC(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:zC,decodePath:od},slash:{encodePath:od,decodePath:od}}});function sW(){var t="__global_unique_id__";return XC[t]=(XC[t]||0)+1}function lW(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function uW(t){var e=[];return{on:function(r){e.push(r)},off:function(r){e=e.filter(function(n){return n!==r})},get:function(){return t},set:function(r,n){t=r,e.forEach(function(o){return o(t,n)})}}}function cW(t){return Array.isArray(t)?t[0]:t}function dW(t,e){var i,r,n="__create-react-context-"+sW()+"__",o=function(u){Hr(c,u);function c(){var p;return p=u.apply(this,arguments)||this,p.emitter=uW(p.props.value),p}var d=c.prototype;return d.getChildContext=function(){var g;return g={},g[n]=this.emitter,g},d.componentWillReceiveProps=function(g){if(this.props.value!==g.value){var v=this.props.value,b=g.value,S;lW(v,b)?S=0:(S=typeof e=="function"?e(v,b):G0,S|=0,S!==0&&this.emitter.set(g.value,S))}},d.render=function(){return this.props.children},c}(ae);o.childContextTypes=(i={},i[n]=K0.default.object.isRequired,i);var s=function(u){Hr(c,u);function c(){var p;return p=u.apply(this,arguments)||this,p.state={value:p.getValue()},p.onUpdate=function(g,v){var b=p.observedBits|0;b&v&&p.setState({value:p.getValue()})},p}var d=c.prototype;return d.componentWillReceiveProps=function(g){var v=g.observedBits;this.observedBits=v??G0},d.componentDidMount=function(){this.context[n]&&this.context[n].on(this.onUpdate);var g=this.props.observedBits;this.observedBits=g??G0},d.componentWillUnmount=function(){this.context[n]&&this.context[n].off(this.onUpdate)},d.getValue=function(){return this.context[n]?this.context[n].get():t},d.render=function(){return cW(this.props.children)(this.state.value)},c}(ae);return s.contextTypes=(r={},r[n]=K0.default.object,r),{Provider:o,Consumer:s}}var K0,G0,XC,pW,JC,QC=T(()=>{Se();Wh();K0=ce(b0()),G0=1073741823,XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};pW=_e.createContext||dW,JC=pW});var t6=$((lpe,e6)=>{e6.exports=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"}});var o6=$((upe,ql)=>{var Yh=t6();ql.exports=n6;ql.exports.parse=Y0;ql.exports.compile=fW;ql.exports.tokensToFunction=i6;ql.exports.tokensToRegExp=r6;var hW=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Y0(t,e){for(var i=[],r=0,n=0,o="",s=e&&e.delimiter||"/",u;(u=hW.exec(t))!=null;){var c=u[0],d=u[1],p=u.index;if(o+=t.slice(n,p),n=p+c.length,d){o+=d[1];continue}var g=t[n],v=u[2],b=u[3],S=u[4],_=u[5],E=u[6],I=u[7];o&&(i.push(o),o="");var F=v!=null&&g!=null&&g!==v,O=E==="+"||E==="*",L=E==="?"||E==="*",z=u[2]||s,G=S||_;i.push({name:b||r++,prefix:v||"",delimiter:z,optional:L,repeat:O,partial:F,asterisk:!!I,pattern:G?vW(G):I?".*":"[^"+Kh(z)+"]+?"})}return n<t.length&&(o+=t.substr(n)),o&&i.push(o),i}function fW(t,e){return i6(Y0(t,e),e)}function mW(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function gW(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i6(t,e){for(var i=new Array(t.length),r=0;r<t.length;r++)typeof t[r]=="object"&&(i[r]=new RegExp("^(?:"+t[r].pattern+")$",X0(e)));return function(n,o){for(var s="",u=n||{},c=o||{},d=c.pretty?mW:encodeURIComponent,p=0;p<t.length;p++){var g=t[p];if(typeof g=="string"){s+=g;continue}var v=u[g.name],b;if(v==null)if(g.optional){g.partial&&(s+=g.prefix);continue}else throw new TypeError('Expected "'+g.name+'" to be defined');if(Yh(v)){if(!g.repeat)throw new TypeError('Expected "'+g.name+'" to not repeat, but received `'+JSON.stringify(v)+"`");if(v.length===0){if(g.optional)continue;throw new TypeError('Expected "'+g.name+'" to not be empty')}for(var S=0;S<v.length;S++){if(b=d(v[S]),!i[p].test(b))throw new TypeError('Expected all "'+g.name+'" to match "'+g.pattern+'", but received `'+JSON.stringify(b)+"`");s+=(S===0?g.prefix:g.delimiter)+b}continue}if(b=g.asterisk?gW(v):d(v),!i[p].test(b))throw new TypeError('Expected "'+g.name+'" to match "'+g.pattern+'", but received "'+b+'"');s+=g.prefix+b}return s}}function Kh(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function vW(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function Z0(t,e){return t.keys=e,t}function X0(t){return t&&t.sensitive?"":"i"}function bW(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var r=0;r<i.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return Z0(t,e)}function yW(t,e,i){for(var r=[],n=0;n<t.length;n++)r.push(n6(t[n],e,i).source);var o=new RegExp("(?:"+r.join("|")+")",X0(i));return Z0(o,e)}function wW(t,e,i){return r6(Y0(t,i),e,i)}function r6(t,e,i){Yh(e)||(i=e||i,e=[]),i=i||{};for(var r=i.strict,n=i.end!==!1,o="",s=0;s<t.length;s++){var u=t[s];if(typeof u=="string")o+=Kh(u);else{var c=Kh(u.prefix),d="(?:"+u.pattern+")";e.push(u),u.repeat&&(d+="(?:"+c+d+")*"),u.optional?u.partial?d=c+"("+d+")?":d="(?:"+c+"("+d+"))?":d=c+"("+d+")",o+=d}}var p=Kh(i.delimiter||"/"),g=o.slice(-p.length)===p;return r||(o=(g?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),n?o+="$":o+=r&&g?"":"(?="+p+"|$)",Z0(new RegExp("^"+o,X0(i)),e)}function n6(t,e,i){return Yh(e)||(i=e||i,e=[]),i=i||{},t instanceof RegExp?bW(t,e):Yh(t)?yW(t,e,i):wW(t,e,i)}});function _W(t,e){var i=""+e.end+e.strict+e.sensitive,r=a6[i]||(a6[i]={});if(r[t])return r[t];var n=[],o=(0,c6.default)(t,n,e),s={regexp:o,keys:n};return s6<SW&&(r[t]=s,s6++),s}function Ds(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var i=e,r=i.path,n=i.exact,o=n===void 0?!1:n,s=i.strict,u=s===void 0?!1:s,c=i.sensitive,d=c===void 0?!1:c,p=[].concat(r);return p.reduce(function(g,v){if(!v&&v!=="")return null;if(g)return g;var b=_W(v,{end:o,strict:u,sensitive:d}),S=b.regexp,_=b.keys,E=S.exec(t);if(!E)return null;var I=E[0],F=E.slice(1),O=t===I;return o&&!O?null:{path:v,url:v==="/"&&I===""?"/":I,isExact:O,params:_.reduce(function(L,z,G){return L[z.name]=F[G],L},{})}},null)}function EW(t){return _e.Children.count(t)===0}function Q0(t){return t.charAt(0)==="/"?t:"/"+t}function PW(t,e){return t?qt({},e,{pathname:Q0(t)+e.pathname}):e}function IW(t,e){if(!t)return e;var i=Q0(t);return e.pathname.indexOf(i)!==0?e:qt({},e,{pathname:e.pathname.substr(i.length)})}function l6(t){return typeof t=="string"?t:dr(t)}function J0(t){return function(){qn(!1)}}function u6(){}function Bn(t){var e="withRouter("+(t.displayName||t.name)+")",i=function(n){var o=n.wrappedComponentRef,s=Ir(n,["wrappedComponentRef"]);return _e.createElement(Oa.Consumer,null,function(u){return u||qn(!1),_e.createElement(t,qt({},s,u,{ref:o}))})};return i.displayName=e,i.WrappedComponent=t,(0,d6.default)(i,t)}var c6,vpe,d6,p6,xW,Oa,Da,CW,wpe,a6,SW,s6,Cn,TW,Zh,xpe,ia=T(()=>{Wh();Se();Gh();QC();$h();Rs();c6=ce(o6()),vpe=ce(_0());zl();d6=ce(Lh()),p6=function(e){var i=JC();return i.displayName=e,i},xW=p6("Router-History"),Oa=p6("Router"),Da=function(t){Hr(e,t),e.computeRootMatch=function(n){return{path:"/",url:"/",params:{},isExact:n==="/"}};function e(r){var n;return n=t.call(this,r)||this,n.state={location:r.history.location},n._isMounted=!1,n._pendingLocation=null,r.staticContext||(n.unlisten=r.history.listen(function(o){n._pendingLocation=o})),n}var i=e.prototype;return i.componentDidMount=function(){var n=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(o){n._isMounted&&n.setState({location:o})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return _e.createElement(Oa.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},_e.createElement(xW.Provider,{children:this.props.children||null,value:this.props.history}))},e}(_e.Component),CW=function(t){Hr(e,t);function e(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r=t.call.apply(t,[this].concat(o))||this,r.history=ZC(r.props),r}var i=e.prototype;return i.render=function(){return _e.createElement(Da,{history:this.history,children:this.props.children})},e}(_e.Component),wpe=function(t){Hr(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},i.componentDidUpdate=function(n){this.props.onUpdate&&this.props.onUpdate.call(this,this,n)},i.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},i.render=function(){return null},e}(_e.Component),a6={},SW=1e4,s6=0;Cn=function(t){Hr(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.render=function(){var n=this;return _e.createElement(Oa.Consumer,null,function(o){o||qn(!1);var s=n.props.location||o.location,u=n.props.computedMatch?n.props.computedMatch:n.props.path?Ds(s.pathname,n.props):o.match,c=qt({},o,{location:s,match:u}),d=n.props,p=d.children,g=d.component,v=d.render;return Array.isArray(p)&&EW(p)&&(p=null),_e.createElement(Oa.Provider,{value:c},c.match?p?typeof p=="function"?p(c):p:g?_e.createElement(g,c):v?v(c):null:typeof p=="function"?p(c):null)})},e}(_e.Component);TW=function(t){Hr(e,t);function e(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r=t.call.apply(t,[this].concat(o))||this,r.handlePush=function(u){return r.navigateTo(u,"PUSH")},r.handleReplace=function(u){return r.navigateTo(u,"REPLACE")},r.handleListen=function(){return u6},r.handleBlock=function(){return u6},r}var i=e.prototype;return i.navigateTo=function(n,o){var s=this.props,u=s.basename,c=u===void 0?"":u,d=s.context,p=d===void 0?{}:d;p.action=o,p.location=PW(c,Tr(n)),p.url=l6(p.location)},i.render=function(){var n=this.props,o=n.basename,s=o===void 0?"":o,u=n.context,c=u===void 0?{}:u,d=n.location,p=d===void 0?"/":d,g=Ir(n,["basename","context","location"]),v={createHref:function(S){return Q0(s+l6(S))},action:"POP",location:IW(s,Tr(p)),push:this.handlePush,replace:this.handleReplace,go:J0("go"),goBack:J0("goBack"),goForward:J0("goForward"),listen:this.handleListen,block:this.handleBlock};return _e.createElement(Da,qt({},g,{history:v,staticContext:c}))},e}(_e.Component),Zh=function(t){Hr(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;return i.render=function(){var n=this;return _e.createElement(Oa.Consumer,null,function(o){o||qn(!1);var s=n.props.location||o.location,u,c;return _e.Children.forEach(n.props.children,function(d){if(c==null&&_e.isValidElement(d)){u=d;var p=d.props.path||d.props.from;c=p?Ds(s.pathname,qt({},d.props,{path:p})):o.match}}),c?_e.cloneElement(u,{location:s,computedMatch:c}):null})},e}(_e.Component);xpe=_e.useContext});var ve=$((Bl,ad)=>{(function(){var t,e="4.17.21",i=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",d=1,p=2,g=4,v=1,b=2,S=1,_=2,E=4,I=8,F=16,O=32,L=64,z=128,G=256,H=512,N=30,J="...",oe=800,te=16,K=1,U=2,se=3,re=1/0,Q=9007199254740991,le=17976931348623157e292,j=NaN,B=4294967295,Y=B-1,ie=B>>>1,de=[["ary",z],["bind",S],["bindKey",_],["curry",I],["curryRight",F],["flip",H],["partial",O],["partialRight",L],["rearg",G]],fe="[object Arguments]",be="[object Array]",Me="[object AsyncFunction]",Ee="[object Boolean]",Fe="[object Date]",qe="[object DOMException]",nt="[object Error]",$e="[object Function]",ot="[object GeneratorFunction]",Ae="[object Map]",st="[object Number]",ct="[object Null]",ft="[object Object]",Be="[object Promise]",mt="[object Proxy]",Lt="[object RegExp]",St="[object Set]",Wt="[object String]",rt="[object Symbol]",Ki="[object Undefined]",ri="[object WeakMap]",No="[object WeakSet]",Gr="[object ArrayBuffer]",Mn="[object DataView]",fa="[object Float32Array]",Oo="[object Float64Array]",Ei="[object Int8Array]",vt="[object Int16Array]",kr="[object Int32Array]",gr="[object Uint8Array]",dl="[object Uint8ClampedArray]",fi="[object Uint16Array]",io="[object Uint32Array]",ma=/\b__p \+= '';/g,pl=/\b(__p \+=) '' \+/g,ec=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yi=/&(?:amp|lt|gt|quot|#39);/g,tc=/[&<>"']/g,ic=RegExp(Yi.source),rc=RegExp(tc.source),e1=/<%-([\s\S]+?)%>/g,t1=/<%([\s\S]+?)%>/g,hl=/<%=([\s\S]+?)%>/g,xp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cp=/^\w*$/,Sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nc=/[\\^$.*+?()[\]{}|]/g,i1=RegExp(nc.source),oc=/^\s+/,_p=/\s/,vr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Do=/\{\n\/\* \[wrapped with (.+)\] \*/,ns=/,? & /,ac=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,os=/[()=,{}\[\]\/\s]/,ga=/\\(\\)?/g,r1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sc=/\w*$/,lc=/^[-+]0x[0-9a-f]+$/i,Ep=/^0b[01]+$/i,fl=/^\[object .+?Constructor\]$/,or=/^0o[0-7]+$/i,Lo=/^(?:0|[1-9]\d*)$/,ar=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,Fo=/['\n\r\u2028\u2029\\]/g,Kr="\\ud800-\\udfff",zo="\\u0300-\\u036f",as="\\ufe20-\\ufe2f",Ho="\\u20d0-\\u20ff",Uo=zo+as+Ho,ml="\\u2700-\\u27bf",va="a-z\\xdf-\\xf6\\xf8-\\xff",ss="\\xac\\xb1\\xd7\\xf7",gl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vl="\\u2000-\\u206f",uc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",br="A-Z\\xc0-\\xd6\\xd8-\\xde",bl="\\ufe0e\\ufe0f",ro=ss+gl+vl+uc,kn="['\u2019]",yl="["+Kr+"]",Rn="["+ro+"]",Li="["+Uo+"]",cn="\\d+",Pp="["+ml+"]",cc="["+va+"]",dt="[^"+Kr+ro+cn+ml+va+br+"]",Yr="\\ud83c[\\udffb-\\udfff]",yr="(?:"+Li+"|"+Yr+")",Zi="[^"+Kr+"]",qo="(?:\\ud83c[\\udde6-\\uddff]){2}",no="[\\ud800-\\udbff][\\udc00-\\udfff]",Xi="["+br+"]",wl="\\u200d",ls="(?:"+cc+"|"+dt+")",us="(?:"+Xi+"|"+dt+")",cs="(?:"+kn+"(?:d|ll|m|re|s|t|ve))?",Ip="(?:"+kn+"(?:D|LL|M|RE|S|T|VE))?",Tp=yr+"?",dc="["+bl+"]?",pc="(?:"+wl+"(?:"+[Zi,qo,no].join("|")+")"+dc+Tp+")*",Ap="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",n1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hc=dc+Tp+pc,fc="(?:"+[Pp,qo,no].join("|")+")"+hc,Mp="(?:"+[Zi+Li+"?",Li,qo,no,yl].join("|")+")",kp=RegExp(kn,"g"),Rp=RegExp(Li,"g"),mc=RegExp(Yr+"(?="+Yr+")|"+Mp+hc,"g"),Np=RegExp([Xi+"?"+cc+"+"+cs+"(?="+[Rn,Xi,"$"].join("|")+")",us+"+"+Ip+"(?="+[Rn,Xi+ls,"$"].join("|")+")",Xi+"?"+ls+"+"+cs,Xi+"+"+Ip,n1,Ap,cn,fc].join("|"),"g"),ba=RegExp("["+wl+Kr+Uo+bl+"]"),o1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xl=-1,Ft={};Ft[fa]=Ft[Oo]=Ft[Ei]=Ft[vt]=Ft[kr]=Ft[gr]=Ft[dl]=Ft[fi]=Ft[io]=!0,Ft[fe]=Ft[be]=Ft[Gr]=Ft[Ee]=Ft[Mn]=Ft[Fe]=Ft[nt]=Ft[$e]=Ft[Ae]=Ft[st]=Ft[ft]=Ft[Lt]=Ft[St]=Ft[Wt]=Ft[ri]=!1;var zt={};zt[fe]=zt[be]=zt[Gr]=zt[Mn]=zt[Ee]=zt[Fe]=zt[fa]=zt[Oo]=zt[Ei]=zt[vt]=zt[kr]=zt[Ae]=zt[st]=zt[ft]=zt[Lt]=zt[St]=zt[Wt]=zt[rt]=zt[gr]=zt[dl]=zt[fi]=zt[io]=!0,zt[nt]=zt[$e]=zt[ri]=!1;var Op={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},a1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},l1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},u1=parseFloat,c1=parseInt,Dp=typeof global=="object"&&global&&global.Object===Object&&global,d1=typeof self=="object"&&self&&self.Object===Object&&self,Pi=Dp||d1||Function("return this")(),gc=typeof Bl=="object"&&Bl&&!Bl.nodeType&&Bl,wr=gc&&typeof ad=="object"&&ad&&!ad.nodeType&&ad,vc=wr&&wr.exports===gc,ao=vc&&Dp.process,Ht=function(){try{var Z=wr&&wr.require&&wr.require("util").types;return Z||ao&&ao.binding&&ao.binding("util")}catch{}}(),so=Ht&&Ht.isArrayBuffer,Cl=Ht&&Ht.isDate,Bo=Ht&&Ht.isMap,Lp=Ht&&Ht.isRegExp,dn=Ht&&Ht.isSet,sr=Ht&&Ht.isTypedArray;function xr(Z,he,ue){switch(ue.length){case 0:return Z.call(he);case 1:return Z.call(he,ue[0]);case 2:return Z.call(he,ue[0],ue[1]);case 3:return Z.call(he,ue[0],ue[1],ue[2])}return Z.apply(he,ue)}function p1(Z,he,ue,Ie){for(var et=-1,wt=Z==null?0:Z.length;++et<wt;){var oi=Z[et];he(Ie,oi,ue(oi),Z)}return Ie}function Rr(Z,he){for(var ue=-1,Ie=Z==null?0:Z.length;++ue<Ie&&he(Z[ue],ue,Z)!==!1;);return Z}function ya(Z,he){for(var ue=Z==null?0:Z.length;ue--&&he(Z[ue],ue,Z)!==!1;);return Z}function ds(Z,he){for(var ue=-1,Ie=Z==null?0:Z.length;++ue<Ie;)if(!he(Z[ue],ue,Z))return!1;return!0}function Nn(Z,he){for(var ue=-1,Ie=Z==null?0:Z.length,et=0,wt=[];++ue<Ie;){var oi=Z[ue];he(oi,ue,Z)&&(wt[et++]=oi)}return wt}function ps(Z,he){var ue=Z==null?0:Z.length;return!!ue&&Zr(Z,he,0)>-1}function pn(Z,he,ue){for(var Ie=-1,et=Z==null?0:Z.length;++Ie<et;)if(ue(he,Z[Ie]))return!0;return!1}function Gt(Z,he){for(var ue=-1,Ie=Z==null?0:Z.length,et=Array(Ie);++ue<Ie;)et[ue]=he(Z[ue],ue,Z);return et}function On(Z,he){for(var ue=-1,Ie=he.length,et=Z.length;++ue<Ie;)Z[et+ue]=he[ue];return Z}function hn(Z,he,ue,Ie){var et=-1,wt=Z==null?0:Z.length;for(Ie&&wt&&(ue=Z[++et]);++et<wt;)ue=he(ue,Z[et],et,Z);return ue}function bc(Z,he,ue,Ie){var et=Z==null?0:Z.length;for(Ie&&et&&(ue=Z[--et]);et--;)ue=he(ue,Z[et],et,Z);return ue}function hs(Z,he){for(var ue=-1,Ie=Z==null?0:Z.length;++ue<Ie;)if(he(Z[ue],ue,Z))return!0;return!1}var Sl=ms("length");function fs(Z){return Z.split("")}function yc(Z){return Z.match(ac)||[]}function Ji(Z,he,ue){var Ie;return ue(Z,function(et,wt,oi){if(he(et,wt,oi))return Ie=wt,!1}),Ie}function wa(Z,he,ue,Ie){for(var et=Z.length,wt=ue+(Ie?1:-1);Ie?wt--:++wt<et;)if(he(Z[wt],wt,Z))return wt;return-1}function Zr(Z,he,ue){return he===he?ui(Z,he,ue):wa(Z,Wo,ue)}function Xr(Z,he,ue,Ie){for(var et=ue-1,wt=Z.length;++et<wt;)if(Ie(Z[et],he))return et;return-1}function Wo(Z){return Z!==Z}function fn(Z,he){var ue=Z==null?0:Z.length;return ue?Dn(Z,he)/ue:j}function ms(Z){return function(he){return he==null?t:he[Z]}}function Vo(Z){return function(he){return Z==null?t:Z[he]}}function _l(Z,he,ue,Ie,et){return et(Z,function(wt,oi,Et){ue=Ie?(Ie=!1,wt):he(ue,wt,oi,Et)}),ue}function wc(Z,he){var ue=Z.length;for(Z.sort(he);ue--;)Z[ue]=Z[ue].value;return Z}function Dn(Z,he){for(var ue,Ie=-1,et=Z.length;++Ie<et;){var wt=he(Z[Ie]);wt!==t&&(ue=ue===t?wt:ue+wt)}return ue}function gs(Z,he){for(var ue=-1,Ie=Array(Z);++ue<Z;)Ie[ue]=he(ue);return Ie}function Fp(Z,he){return Gt(he,function(ue){return[ue,Z[ue]]})}function vs(Z){return Z&&Z.slice(0,xa(Z)+1).replace(oc,"")}function Cr(Z){return function(he){return Z(he)}}function Nr(Z,he){return Gt(he,function(ue){return Z[ue]})}function yi(Z,he){return Z.has(he)}function C(Z,he){for(var ue=-1,Ie=Z.length;++ue<Ie&&Zr(he,Z[ue],0)>-1;);return ue}function M(Z,he){for(var ue=Z.length;ue--&&Zr(he,Z[ue],0)>-1;);return ue}function D(Z,he){for(var ue=Z.length,Ie=0;ue--;)Z[ue]===he&&++Ie;return Ie}var R=Vo(Op),pe=Vo(a1);function Ce(Z){return"\\"+l1[Z]}function ke(Z,he){return Z==null?t:Z[he]}function We(Z){return ba.test(Z)}function Ye(Z){return o1.test(Z)}function lt(Z){for(var he,ue=[];!(he=Z.next()).done;)ue.push(he.value);return ue}function ut(Z){var he=-1,ue=Array(Z.size);return Z.forEach(function(Ie,et){ue[++he]=[et,Ie]}),ue}function wi(Z,he){return function(ue){return Z(he(ue))}}function kt(Z,he){for(var ue=-1,Ie=Z.length,et=0,wt=[];++ue<Ie;){var oi=Z[ue];(oi===he||oi===c)&&(Z[ue]=c,wt[et++]=ue)}return wt}function Ii(Z){var he=-1,ue=Array(Z.size);return Z.forEach(function(Ie){ue[++he]=Ie}),ue}function Sr(Z){var he=-1,ue=Array(Z.size);return Z.forEach(function(Ie){ue[++he]=[Ie,Ie]}),ue}function ui(Z,he,ue){for(var Ie=ue-1,et=Z.length;++Ie<et;)if(Z[Ie]===he)return Ie;return-1}function ni(Z,he,ue){for(var Ie=ue+1;Ie--;)if(Z[Ie]===he)return Ie;return Ie}function mi(Z){return We(Z)?Pl(Z):Sl(Z)}function Fi(Z){return We(Z)?xc(Z):fs(Z)}function xa(Z){for(var he=Z.length;he--&&_p.test(Z.charAt(he)););return he}var El=Vo(s1);function Pl(Z){for(var he=mc.lastIndex=0;mc.test(Z);)++he;return he}function xc(Z){return Z.match(mc)||[]}function bs(Z){return Z.match(Np)||[]}var Jr=function Z(he){he=he==null?Pi:lr.defaults(Pi.Object(),he,lr.pick(Pi,oo));var ue=he.Array,Ie=he.Date,et=he.Error,wt=he.Function,oi=he.Math,Et=he.Object,$o=he.RegExp,Qi=he.String,er=he.TypeError,Ln=ue.prototype,Ca=wt.prototype,Or=Et.prototype,ys=he["__core-js_shared__"],Il=Ca.toString,Ut=Or.hasOwnProperty,dD=0,z2=function(){var a=/[^.]+$/.exec(ys&&ys.keys&&ys.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),zp=Or.toString,pD=Il.call(Et),hD=Pi._,fD=$o("^"+Il.call(Ut).replace(nc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hp=vc?he.Buffer:t,Sa=he.Symbol,Up=he.Uint8Array,H2=Hp?Hp.allocUnsafe:t,qp=wi(Et.getPrototypeOf,Et),U2=Et.create,q2=Or.propertyIsEnumerable,Bp=Ln.splice,B2=Sa?Sa.isConcatSpreadable:t,Cc=Sa?Sa.iterator:t,ws=Sa?Sa.toStringTag:t,Wp=function(){try{var a=Es(Et,"defineProperty");return a({},"",{}),a}catch{}}(),mD=he.clearTimeout!==Pi.clearTimeout&&he.clearTimeout,gD=Ie&&Ie.now!==Pi.Date.now&&Ie.now,vD=he.setTimeout!==Pi.setTimeout&&he.setTimeout,Vp=oi.ceil,$p=oi.floor,h1=Et.getOwnPropertySymbols,bD=Hp?Hp.isBuffer:t,W2=he.isFinite,yD=Ln.join,wD=wi(Et.keys,Et),Mi=oi.max,ur=oi.min,xD=Ie.now,CD=he.parseInt,V2=oi.random,SD=Ln.reverse,f1=Es(he,"DataView"),Sc=Es(he,"Map"),m1=Es(he,"Promise"),Tl=Es(he,"Set"),_c=Es(he,"WeakMap"),Ec=Es(Et,"create"),jp=_c&&new _c,Al={},_D=Ps(f1),ED=Ps(Sc),PD=Ps(m1),ID=Ps(Tl),TD=Ps(_c),Gp=Sa?Sa.prototype:t,Pc=Gp?Gp.valueOf:t,$2=Gp?Gp.toString:t;function A(a){if(gi(a)&&!pt(a)&&!(a instanceof Ct)){if(a instanceof mn)return a;if(Ut.call(a,"__wrapped__"))return jx(a)}return new mn(a)}var Ml=function(){function a(){}return function(l){if(!ci(l))return{};if(U2)return U2(l);a.prototype=l;var f=new a;return a.prototype=t,f}}();function Kp(){}function mn(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=t}A.templateSettings={escape:e1,evaluate:t1,interpolate:hl,variable:"",imports:{_:A}},A.prototype=Kp.prototype,A.prototype.constructor=A,mn.prototype=Ml(Kp.prototype),mn.prototype.constructor=mn;function Ct(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function AD(){var a=new Ct(this.__wrapped__);return a.__actions__=Dr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Dr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Dr(this.__views__),a}function MD(){if(this.__filtered__){var a=new Ct(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function kD(){var a=this.__wrapped__.value(),l=this.__dir__,f=pt(a),x=l<0,P=f?a.length:0,k=WL(0,P,this.__views__),q=k.start,V=k.end,ee=V-q,ge=x?V:q-1,ye=this.__iteratees__,xe=ye.length,Ne=0,Ve=ur(ee,this.__takeCount__);if(!f||!x&&P==ee&&Ve==ee)return mx(a,this.__actions__);var tt=[];e:for(;ee--&&Ne<Ve;){ge+=l;for(var bt=-1,it=a[ge];++bt<xe;){var xt=ye[bt],_t=xt.iteratee,tn=xt.type,Pr=_t(it);if(tn==U)it=Pr;else if(!Pr){if(tn==K)continue e;break e}}tt[Ne++]=it}return tt}Ct.prototype=Ml(Kp.prototype),Ct.prototype.constructor=Ct;function xs(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var x=a[l];this.set(x[0],x[1])}}function RD(){this.__data__=Ec?Ec(null):{},this.size=0}function ND(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function OD(a){var l=this.__data__;if(Ec){var f=l[a];return f===s?t:f}return Ut.call(l,a)?l[a]:t}function DD(a){var l=this.__data__;return Ec?l[a]!==t:Ut.call(l,a)}function LD(a,l){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Ec&&l===t?s:l,this}xs.prototype.clear=RD,xs.prototype.delete=ND,xs.prototype.get=OD,xs.prototype.has=DD,xs.prototype.set=LD;function jo(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var x=a[l];this.set(x[0],x[1])}}function FD(){this.__data__=[],this.size=0}function zD(a){var l=this.__data__,f=Yp(l,a);if(f<0)return!1;var x=l.length-1;return f==x?l.pop():Bp.call(l,f,1),--this.size,!0}function HD(a){var l=this.__data__,f=Yp(l,a);return f<0?t:l[f][1]}function UD(a){return Yp(this.__data__,a)>-1}function qD(a,l){var f=this.__data__,x=Yp(f,a);return x<0?(++this.size,f.push([a,l])):f[x][1]=l,this}jo.prototype.clear=FD,jo.prototype.delete=zD,jo.prototype.get=HD,jo.prototype.has=UD,jo.prototype.set=qD;function Go(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var x=a[l];this.set(x[0],x[1])}}function BD(){this.size=0,this.__data__={hash:new xs,map:new(Sc||jo),string:new xs}}function WD(a){var l=sh(this,a).delete(a);return this.size-=l?1:0,l}function VD(a){return sh(this,a).get(a)}function $D(a){return sh(this,a).has(a)}function jD(a,l){var f=sh(this,a),x=f.size;return f.set(a,l),this.size+=f.size==x?0:1,this}Go.prototype.clear=BD,Go.prototype.delete=WD,Go.prototype.get=VD,Go.prototype.has=$D,Go.prototype.set=jD;function Cs(a){var l=-1,f=a==null?0:a.length;for(this.__data__=new Go;++l<f;)this.add(a[l])}function GD(a){return this.__data__.set(a,s),this}function KD(a){return this.__data__.has(a)}Cs.prototype.add=Cs.prototype.push=GD,Cs.prototype.has=KD;function Fn(a){var l=this.__data__=new jo(a);this.size=l.size}function YD(){this.__data__=new jo,this.size=0}function ZD(a){var l=this.__data__,f=l.delete(a);return this.size=l.size,f}function XD(a){return this.__data__.get(a)}function JD(a){return this.__data__.has(a)}function QD(a,l){var f=this.__data__;if(f instanceof jo){var x=f.__data__;if(!Sc||x.length<i-1)return x.push([a,l]),this.size=++f.size,this;f=this.__data__=new Go(x)}return f.set(a,l),this.size=f.size,this}Fn.prototype.clear=YD,Fn.prototype.delete=ZD,Fn.prototype.get=XD,Fn.prototype.has=JD,Fn.prototype.set=QD;function j2(a,l){var f=pt(a),x=!f&&Is(a),P=!f&&!x&&Ta(a),k=!f&&!x&&!P&&Ol(a),q=f||x||P||k,V=q?gs(a.length,Qi):[],ee=V.length;for(var ge in a)(l||Ut.call(a,ge))&&!(q&&(ge=="length"||P&&(ge=="offset"||ge=="parent")||k&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||Xo(ge,ee)))&&V.push(ge);return V}function G2(a){var l=a.length;return l?a[P1(0,l-1)]:t}function eL(a,l){return lh(Dr(a),Ss(l,0,a.length))}function tL(a){return lh(Dr(a))}function g1(a,l,f){(f!==t&&!zn(a[l],f)||f===t&&!(l in a))&&Ko(a,l,f)}function Ic(a,l,f){var x=a[l];(!(Ut.call(a,l)&&zn(x,f))||f===t&&!(l in a))&&Ko(a,l,f)}function Yp(a,l){for(var f=a.length;f--;)if(zn(a[f][0],l))return f;return-1}function iL(a,l,f,x){return _a(a,function(P,k,q){l(x,P,f(P),q)}),x}function K2(a,l){return a&&uo(l,zi(l),a)}function rL(a,l){return a&&uo(l,Fr(l),a)}function Ko(a,l,f){l=="__proto__"&&Wp?Wp(a,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[l]=f}function v1(a,l){for(var f=-1,x=l.length,P=ue(x),k=a==null;++f<x;)P[f]=k?t:X1(a,l[f]);return P}function Ss(a,l,f){return a===a&&(f!==t&&(a=a<=f?a:f),l!==t&&(a=a>=l?a:l)),a}function gn(a,l,f,x,P,k){var q,V=l&d,ee=l&p,ge=l&g;if(f&&(q=P?f(a,x,P,k):f(a)),q!==t)return q;if(!ci(a))return a;var ye=pt(a);if(ye){if(q=$L(a),!V)return Dr(a,q)}else{var xe=cr(a),Ne=xe==$e||xe==ot;if(Ta(a))return bx(a,V);if(xe==ft||xe==fe||Ne&&!P){if(q=ee||Ne?{}:Fx(a),!V)return ee?OL(a,rL(q,a)):NL(a,K2(q,a))}else{if(!zt[xe])return P?a:{};q=jL(a,xe,V)}}k||(k=new Fn);var Ve=k.get(a);if(Ve)return Ve;k.set(a,q),p5(a)?a.forEach(function(it){q.add(gn(it,l,f,it,a,k))}):c5(a)&&a.forEach(function(it,xt){q.set(xt,gn(it,l,f,xt,a,k))});var tt=ge?ee?F1:L1:ee?Fr:zi,bt=ye?t:tt(a);return Rr(bt||a,function(it,xt){bt&&(xt=it,it=a[xt]),Ic(q,xt,gn(it,l,f,xt,a,k))}),q}function nL(a){var l=zi(a);return function(f){return Y2(f,a,l)}}function Y2(a,l,f){var x=f.length;if(a==null)return!x;for(a=Et(a);x--;){var P=f[x],k=l[P],q=a[P];if(q===t&&!(P in a)||!k(q))return!1}return!0}function Z2(a,l,f){if(typeof a!="function")throw new er(n);return Oc(function(){a.apply(t,f)},l)}function Tc(a,l,f,x){var P=-1,k=ps,q=!0,V=a.length,ee=[],ge=l.length;if(!V)return ee;f&&(l=Gt(l,Cr(f))),x?(k=pn,q=!1):l.length>=i&&(k=yi,q=!1,l=new Cs(l));e:for(;++P<V;){var ye=a[P],xe=f==null?ye:f(ye);if(ye=x||ye!==0?ye:0,q&&xe===xe){for(var Ne=ge;Ne--;)if(l[Ne]===xe)continue e;ee.push(ye)}else k(l,xe,x)||ee.push(ye)}return ee}var _a=Sx(lo),X2=Sx(y1,!0);function oL(a,l){var f=!0;return _a(a,function(x,P,k){return f=!!l(x,P,k),f}),f}function Zp(a,l,f){for(var x=-1,P=a.length;++x<P;){var k=a[x],q=l(k);if(q!=null&&(V===t?q===q&&!en(q):f(q,V)))var V=q,ee=k}return ee}function aL(a,l,f,x){var P=a.length;for(f=gt(f),f<0&&(f=-f>P?0:P+f),x=x===t||x>P?P:gt(x),x<0&&(x+=P),x=f>x?0:f5(x);f<x;)a[f++]=l;return a}function J2(a,l){var f=[];return _a(a,function(x,P,k){l(x,P,k)&&f.push(x)}),f}function tr(a,l,f,x,P){var k=-1,q=a.length;for(f||(f=KL),P||(P=[]);++k<q;){var V=a[k];l>0&&f(V)?l>1?tr(V,l-1,f,x,P):On(P,V):x||(P[P.length]=V)}return P}var b1=_x(),Q2=_x(!0);function lo(a,l){return a&&b1(a,l,zi)}function y1(a,l){return a&&Q2(a,l,zi)}function Xp(a,l){return Nn(l,function(f){return Jo(a[f])})}function _s(a,l){l=Pa(l,a);for(var f=0,x=l.length;a!=null&&f<x;)a=a[co(l[f++])];return f&&f==x?a:t}function ex(a,l,f){var x=l(a);return pt(a)?x:On(x,f(a))}function _r(a){return a==null?a===t?Ki:ct:ws&&ws in Et(a)?BL(a):tF(a)}function w1(a,l){return a>l}function sL(a,l){return a!=null&&Ut.call(a,l)}function lL(a,l){return a!=null&&l in Et(a)}function uL(a,l,f){return a>=ur(l,f)&&a<Mi(l,f)}function x1(a,l,f){for(var x=f?pn:ps,P=a[0].length,k=a.length,q=k,V=ue(k),ee=1/0,ge=[];q--;){var ye=a[q];q&&l&&(ye=Gt(ye,Cr(l))),ee=ur(ye.length,ee),V[q]=!f&&(l||P>=120&&ye.length>=120)?new Cs(q&&ye):t}ye=a[0];var xe=-1,Ne=V[0];e:for(;++xe<P&&ge.length<ee;){var Ve=ye[xe],tt=l?l(Ve):Ve;if(Ve=f||Ve!==0?Ve:0,!(Ne?yi(Ne,tt):x(ge,tt,f))){for(q=k;--q;){var bt=V[q];if(!(bt?yi(bt,tt):x(a[q],tt,f)))continue e}Ne&&Ne.push(tt),ge.push(Ve)}}return ge}function cL(a,l,f,x){return lo(a,function(P,k,q){l(x,f(P),k,q)}),x}function Ac(a,l,f){l=Pa(l,a),a=qx(a,l);var x=a==null?a:a[co(bn(l))];return x==null?t:xr(x,a,f)}function tx(a){return gi(a)&&_r(a)==fe}function dL(a){return gi(a)&&_r(a)==Gr}function pL(a){return gi(a)&&_r(a)==Fe}function Mc(a,l,f,x,P){return a===l?!0:a==null||l==null||!gi(a)&&!gi(l)?a!==a&&l!==l:hL(a,l,f,x,Mc,P)}function hL(a,l,f,x,P,k){var q=pt(a),V=pt(l),ee=q?be:cr(a),ge=V?be:cr(l);ee=ee==fe?ft:ee,ge=ge==fe?ft:ge;var ye=ee==ft,xe=ge==ft,Ne=ee==ge;if(Ne&&Ta(a)){if(!Ta(l))return!1;q=!0,ye=!1}if(Ne&&!ye)return k||(k=new Fn),q||Ol(a)?Ox(a,l,f,x,P,k):UL(a,l,ee,f,x,P,k);if(!(f&v)){var Ve=ye&&Ut.call(a,"__wrapped__"),tt=xe&&Ut.call(l,"__wrapped__");if(Ve||tt){var bt=Ve?a.value():a,it=tt?l.value():l;return k||(k=new Fn),P(bt,it,f,x,k)}}return Ne?(k||(k=new Fn),qL(a,l,f,x,P,k)):!1}function fL(a){return gi(a)&&cr(a)==Ae}function C1(a,l,f,x){var P=f.length,k=P,q=!x;if(a==null)return!k;for(a=Et(a);P--;){var V=f[P];if(q&&V[2]?V[1]!==a[V[0]]:!(V[0]in a))return!1}for(;++P<k;){V=f[P];var ee=V[0],ge=a[ee],ye=V[1];if(q&&V[2]){if(ge===t&&!(ee in a))return!1}else{var xe=new Fn;if(x)var Ne=x(ge,ye,ee,a,l,xe);if(!(Ne===t?Mc(ye,ge,v|b,x,xe):Ne))return!1}}return!0}function ix(a){if(!ci(a)||ZL(a))return!1;var l=Jo(a)?fD:fl;return l.test(Ps(a))}function mL(a){return gi(a)&&_r(a)==Lt}function gL(a){return gi(a)&&cr(a)==St}function vL(a){return gi(a)&&fh(a.length)&&!!Ft[_r(a)]}function rx(a){return typeof a=="function"?a:a==null?zr:typeof a=="object"?pt(a)?ax(a[0],a[1]):ox(a):E5(a)}function S1(a){if(!Nc(a))return wD(a);var l=[];for(var f in Et(a))Ut.call(a,f)&&f!="constructor"&&l.push(f);return l}function bL(a){if(!ci(a))return eF(a);var l=Nc(a),f=[];for(var x in a)x=="constructor"&&(l||!Ut.call(a,x))||f.push(x);return f}function _1(a,l){return a<l}function nx(a,l){var f=-1,x=Lr(a)?ue(a.length):[];return _a(a,function(P,k,q){x[++f]=l(P,k,q)}),x}function ox(a){var l=H1(a);return l.length==1&&l[0][2]?Hx(l[0][0],l[0][1]):function(f){return f===a||C1(f,a,l)}}function ax(a,l){return q1(a)&&zx(l)?Hx(co(a),l):function(f){var x=X1(f,a);return x===t&&x===l?J1(f,a):Mc(l,x,v|b)}}function Jp(a,l,f,x,P){a!==l&&b1(l,function(k,q){if(P||(P=new Fn),ci(k))yL(a,l,q,f,Jp,x,P);else{var V=x?x(W1(a,q),k,q+"",a,l,P):t;V===t&&(V=k),g1(a,q,V)}},Fr)}function yL(a,l,f,x,P,k,q){var V=W1(a,f),ee=W1(l,f),ge=q.get(ee);if(ge){g1(a,f,ge);return}var ye=k?k(V,ee,f+"",a,l,q):t,xe=ye===t;if(xe){var Ne=pt(ee),Ve=!Ne&&Ta(ee),tt=!Ne&&!Ve&&Ol(ee);ye=ee,Ne||Ve||tt?pt(V)?ye=V:xi(V)?ye=Dr(V):Ve?(xe=!1,ye=bx(ee,!0)):tt?(xe=!1,ye=yx(ee,!0)):ye=[]:Dc(ee)||Is(ee)?(ye=V,Is(V)?ye=m5(V):(!ci(V)||Jo(V))&&(ye=Fx(ee))):xe=!1}xe&&(q.set(ee,ye),P(ye,ee,x,k,q),q.delete(ee)),g1(a,f,ye)}function sx(a,l){var f=a.length;if(f)return l+=l<0?f:0,Xo(l,f)?a[l]:t}function lx(a,l,f){l.length?l=Gt(l,function(k){return pt(k)?function(q){return _s(q,k.length===1?k[0]:k)}:k}):l=[zr];var x=-1;l=Gt(l,Cr(Ze()));var P=nx(a,function(k,q,V){var ee=Gt(l,function(ge){return ge(k)});return{criteria:ee,index:++x,value:k}});return wc(P,function(k,q){return RL(k,q,f)})}function wL(a,l){return ux(a,l,function(f,x){return J1(a,x)})}function ux(a,l,f){for(var x=-1,P=l.length,k={};++x<P;){var q=l[x],V=_s(a,q);f(V,q)&&kc(k,Pa(q,a),V)}return k}function xL(a){return function(l){return _s(l,a)}}function E1(a,l,f,x){var P=x?Xr:Zr,k=-1,q=l.length,V=a;for(a===l&&(l=Dr(l)),f&&(V=Gt(a,Cr(f)));++k<q;)for(var ee=0,ge=l[k],ye=f?f(ge):ge;(ee=P(V,ye,ee,x))>-1;)V!==a&&Bp.call(V,ee,1),Bp.call(a,ee,1);return a}function cx(a,l){for(var f=a?l.length:0,x=f-1;f--;){var P=l[f];if(f==x||P!==k){var k=P;Xo(P)?Bp.call(a,P,1):A1(a,P)}}return a}function P1(a,l){return a+$p(V2()*(l-a+1))}function CL(a,l,f,x){for(var P=-1,k=Mi(Vp((l-a)/(f||1)),0),q=ue(k);k--;)q[x?k:++P]=a,a+=f;return q}function I1(a,l){var f="";if(!a||l<1||l>Q)return f;do l%2&&(f+=a),l=$p(l/2),l&&(a+=a);while(l);return f}function yt(a,l){return V1(Ux(a,l,zr),a+"")}function SL(a){return G2(Dl(a))}function _L(a,l){var f=Dl(a);return lh(f,Ss(l,0,f.length))}function kc(a,l,f,x){if(!ci(a))return a;l=Pa(l,a);for(var P=-1,k=l.length,q=k-1,V=a;V!=null&&++P<k;){var ee=co(l[P]),ge=f;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return a;if(P!=q){var ye=V[ee];ge=x?x(ye,ee,V):t,ge===t&&(ge=ci(ye)?ye:Xo(l[P+1])?[]:{})}Ic(V,ee,ge),V=V[ee]}return a}var dx=jp?function(a,l){return jp.set(a,l),a}:zr,EL=Wp?function(a,l){return Wp(a,"toString",{configurable:!0,enumerable:!1,value:e0(l),writable:!0})}:zr;function PL(a){return lh(Dl(a))}function vn(a,l,f){var x=-1,P=a.length;l<0&&(l=-l>P?0:P+l),f=f>P?P:f,f<0&&(f+=P),P=l>f?0:f-l>>>0,l>>>=0;for(var k=ue(P);++x<P;)k[x]=a[x+l];return k}function IL(a,l){var f;return _a(a,function(x,P,k){return f=l(x,P,k),!f}),!!f}function Qp(a,l,f){var x=0,P=a==null?x:a.length;if(typeof l=="number"&&l===l&&P<=ie){for(;x<P;){var k=x+P>>>1,q=a[k];q!==null&&!en(q)&&(f?q<=l:q<l)?x=k+1:P=k}return P}return T1(a,l,zr,f)}function T1(a,l,f,x){var P=0,k=a==null?0:a.length;if(k===0)return 0;l=f(l);for(var q=l!==l,V=l===null,ee=en(l),ge=l===t;P<k;){var ye=$p((P+k)/2),xe=f(a[ye]),Ne=xe!==t,Ve=xe===null,tt=xe===xe,bt=en(xe);if(q)var it=x||tt;else ge?it=tt&&(x||Ne):V?it=tt&&Ne&&(x||!Ve):ee?it=tt&&Ne&&!Ve&&(x||!bt):Ve||bt?it=!1:it=x?xe<=l:xe<l;it?P=ye+1:k=ye}return ur(k,Y)}function px(a,l){for(var f=-1,x=a.length,P=0,k=[];++f<x;){var q=a[f],V=l?l(q):q;if(!f||!zn(V,ee)){var ee=V;k[P++]=q===0?0:q}}return k}function hx(a){return typeof a=="number"?a:en(a)?j:+a}function Qr(a){if(typeof a=="string")return a;if(pt(a))return Gt(a,Qr)+"";if(en(a))return $2?$2.call(a):"";var l=a+"";return l=="0"&&1/a==-re?"-0":l}function Ea(a,l,f){var x=-1,P=ps,k=a.length,q=!0,V=[],ee=V;if(f)q=!1,P=pn;else if(k>=i){var ge=l?null:zL(a);if(ge)return Ii(ge);q=!1,P=yi,ee=new Cs}else ee=l?[]:V;e:for(;++x<k;){var ye=a[x],xe=l?l(ye):ye;if(ye=f||ye!==0?ye:0,q&&xe===xe){for(var Ne=ee.length;Ne--;)if(ee[Ne]===xe)continue e;l&&ee.push(xe),V.push(ye)}else P(ee,xe,f)||(ee!==V&&ee.push(xe),V.push(ye))}return V}function A1(a,l){return l=Pa(l,a),a=qx(a,l),a==null||delete a[co(bn(l))]}function fx(a,l,f,x){return kc(a,l,f(_s(a,l)),x)}function eh(a,l,f,x){for(var P=a.length,k=x?P:-1;(x?k--:++k<P)&&l(a[k],k,a););return f?vn(a,x?0:k,x?k+1:P):vn(a,x?k+1:0,x?P:k)}function mx(a,l){var f=a;return f instanceof Ct&&(f=f.value()),hn(l,function(x,P){return P.func.apply(P.thisArg,On([x],P.args))},f)}function M1(a,l,f){var x=a.length;if(x<2)return x?Ea(a[0]):[];for(var P=-1,k=ue(x);++P<x;)for(var q=a[P],V=-1;++V<x;)V!=P&&(k[P]=Tc(k[P]||q,a[V],l,f));return Ea(tr(k,1),l,f)}function gx(a,l,f){for(var x=-1,P=a.length,k=l.length,q={};++x<P;){var V=x<k?l[x]:t;f(q,a[x],V)}return q}function k1(a){return xi(a)?a:[]}function R1(a){return typeof a=="function"?a:zr}function Pa(a,l){return pt(a)?a:q1(a,l)?[a]:$x(Rt(a))}var TL=yt;function Ia(a,l,f){var x=a.length;return f=f===t?x:f,!l&&f>=x?a:vn(a,l,f)}var vx=mD||function(a){return Pi.clearTimeout(a)};function bx(a,l){if(l)return a.slice();var f=a.length,x=H2?H2(f):new a.constructor(f);return a.copy(x),x}function N1(a){var l=new a.constructor(a.byteLength);return new Up(l).set(new Up(a)),l}function AL(a,l){var f=l?N1(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function ML(a){var l=new a.constructor(a.source,sc.exec(a));return l.lastIndex=a.lastIndex,l}function kL(a){return Pc?Et(Pc.call(a)):{}}function yx(a,l){var f=l?N1(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function wx(a,l){if(a!==l){var f=a!==t,x=a===null,P=a===a,k=en(a),q=l!==t,V=l===null,ee=l===l,ge=en(l);if(!V&&!ge&&!k&&a>l||k&&q&&ee&&!V&&!ge||x&&q&&ee||!f&&ee||!P)return 1;if(!x&&!k&&!ge&&a<l||ge&&f&&P&&!x&&!k||V&&f&&P||!q&&P||!ee)return-1}return 0}function RL(a,l,f){for(var x=-1,P=a.criteria,k=l.criteria,q=P.length,V=f.length;++x<q;){var ee=wx(P[x],k[x]);if(ee){if(x>=V)return ee;var ge=f[x];return ee*(ge=="desc"?-1:1)}}return a.index-l.index}function xx(a,l,f,x){for(var P=-1,k=a.length,q=f.length,V=-1,ee=l.length,ge=Mi(k-q,0),ye=ue(ee+ge),xe=!x;++V<ee;)ye[V]=l[V];for(;++P<q;)(xe||P<k)&&(ye[f[P]]=a[P]);for(;ge--;)ye[V++]=a[P++];return ye}function Cx(a,l,f,x){for(var P=-1,k=a.length,q=-1,V=f.length,ee=-1,ge=l.length,ye=Mi(k-V,0),xe=ue(ye+ge),Ne=!x;++P<ye;)xe[P]=a[P];for(var Ve=P;++ee<ge;)xe[Ve+ee]=l[ee];for(;++q<V;)(Ne||P<k)&&(xe[Ve+f[q]]=a[P++]);return xe}function Dr(a,l){var f=-1,x=a.length;for(l||(l=ue(x));++f<x;)l[f]=a[f];return l}function uo(a,l,f,x){var P=!f;f||(f={});for(var k=-1,q=l.length;++k<q;){var V=l[k],ee=x?x(f[V],a[V],V,f,a):t;ee===t&&(ee=a[V]),P?Ko(f,V,ee):Ic(f,V,ee)}return f}function NL(a,l){return uo(a,U1(a),l)}function OL(a,l){return uo(a,Dx(a),l)}function th(a,l){return function(f,x){var P=pt(f)?p1:iL,k=l?l():{};return P(f,a,Ze(x,2),k)}}function kl(a){return yt(function(l,f){var x=-1,P=f.length,k=P>1?f[P-1]:t,q=P>2?f[2]:t;for(k=a.length>3&&typeof k=="function"?(P--,k):t,q&&Er(f[0],f[1],q)&&(k=P<3?t:k,P=1),l=Et(l);++x<P;){var V=f[x];V&&a(l,V,x,k)}return l})}function Sx(a,l){return function(f,x){if(f==null)return f;if(!Lr(f))return a(f,x);for(var P=f.length,k=l?P:-1,q=Et(f);(l?k--:++k<P)&&x(q[k],k,q)!==!1;);return f}}function _x(a){return function(l,f,x){for(var P=-1,k=Et(l),q=x(l),V=q.length;V--;){var ee=q[a?V:++P];if(f(k[ee],ee,k)===!1)break}return l}}function DL(a,l,f){var x=l&S,P=Rc(a);function k(){var q=this&&this!==Pi&&this instanceof k?P:a;return q.apply(x?f:this,arguments)}return k}function Ex(a){return function(l){l=Rt(l);var f=We(l)?Fi(l):t,x=f?f[0]:l.charAt(0),P=f?Ia(f,1).join(""):l.slice(1);return x[a]()+P}}function Rl(a){return function(l){return hn(S5(C5(l).replace(kp,"")),a,"")}}function Rc(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=Ml(a.prototype),x=a.apply(f,l);return ci(x)?x:f}}function LL(a,l,f){var x=Rc(a);function P(){for(var k=arguments.length,q=ue(k),V=k,ee=Nl(P);V--;)q[V]=arguments[V];var ge=k<3&&q[0]!==ee&&q[k-1]!==ee?[]:kt(q,ee);if(k-=ge.length,k<f)return Mx(a,l,ih,P.placeholder,t,q,ge,t,t,f-k);var ye=this&&this!==Pi&&this instanceof P?x:a;return xr(ye,this,q)}return P}function Px(a){return function(l,f,x){var P=Et(l);if(!Lr(l)){var k=Ze(f,3);l=zi(l),f=function(V){return k(P[V],V,P)}}var q=a(l,f,x);return q>-1?P[k?l[q]:q]:t}}function Ix(a){return Zo(function(l){var f=l.length,x=f,P=mn.prototype.thru;for(a&&l.reverse();x--;){var k=l[x];if(typeof k!="function")throw new er(n);if(P&&!q&&ah(k)=="wrapper")var q=new mn([],!0)}for(x=q?x:f;++x<f;){k=l[x];var V=ah(k),ee=V=="wrapper"?z1(k):t;ee&&B1(ee[0])&&ee[1]==(z|I|O|G)&&!ee[4].length&&ee[9]==1?q=q[ah(ee[0])].apply(q,ee[3]):q=k.length==1&&B1(k)?q[V]():q.thru(k)}return function(){var ge=arguments,ye=ge[0];if(q&&ge.length==1&&pt(ye))return q.plant(ye).value();for(var xe=0,Ne=f?l[xe].apply(this,ge):ye;++xe<f;)Ne=l[xe].call(this,Ne);return Ne}})}function ih(a,l,f,x,P,k,q,V,ee,ge){var ye=l&z,xe=l&S,Ne=l&_,Ve=l&(I|F),tt=l&H,bt=Ne?t:Rc(a);function it(){for(var xt=arguments.length,_t=ue(xt),tn=xt;tn--;)_t[tn]=arguments[tn];if(Ve)var Pr=Nl(it),rn=D(_t,Pr);if(x&&(_t=xx(_t,x,P,Ve)),k&&(_t=Cx(_t,k,q,Ve)),xt-=rn,Ve&&xt<ge){var Ci=kt(_t,Pr);return Mx(a,l,ih,it.placeholder,f,_t,Ci,V,ee,ge-xt)}var Hn=xe?f:this,ea=Ne?Hn[a]:a;return xt=_t.length,V?_t=iF(_t,V):tt&&xt>1&&_t.reverse(),ye&&ee<xt&&(_t.length=ee),this&&this!==Pi&&this instanceof it&&(ea=bt||Rc(ea)),ea.apply(Hn,_t)}return it}function Tx(a,l){return function(f,x){return cL(f,a,l(x),{})}}function rh(a,l){return function(f,x){var P;if(f===t&&x===t)return l;if(f!==t&&(P=f),x!==t){if(P===t)return x;typeof f=="string"||typeof x=="string"?(f=Qr(f),x=Qr(x)):(f=hx(f),x=hx(x)),P=a(f,x)}return P}}function O1(a){return Zo(function(l){return l=Gt(l,Cr(Ze())),yt(function(f){var x=this;return a(l,function(P){return xr(P,x,f)})})})}function nh(a,l){l=l===t?" ":Qr(l);var f=l.length;if(f<2)return f?I1(l,a):l;var x=I1(l,Vp(a/mi(l)));return We(l)?Ia(Fi(x),0,a).join(""):x.slice(0,a)}function FL(a,l,f,x){var P=l&S,k=Rc(a);function q(){for(var V=-1,ee=arguments.length,ge=-1,ye=x.length,xe=ue(ye+ee),Ne=this&&this!==Pi&&this instanceof q?k:a;++ge<ye;)xe[ge]=x[ge];for(;ee--;)xe[ge++]=arguments[++V];return xr(Ne,P?f:this,xe)}return q}function Ax(a){return function(l,f,x){return x&&typeof x!="number"&&Er(l,f,x)&&(f=x=t),l=Qo(l),f===t?(f=l,l=0):f=Qo(f),x=x===t?l<f?1:-1:Qo(x),CL(l,f,x,a)}}function oh(a){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=yn(l),f=yn(f)),a(l,f)}}function Mx(a,l,f,x,P,k,q,V,ee,ge){var ye=l&I,xe=ye?q:t,Ne=ye?t:q,Ve=ye?k:t,tt=ye?t:k;l|=ye?O:L,l&=~(ye?L:O),l&E||(l&=~(S|_));var bt=[a,l,P,Ve,xe,tt,Ne,V,ee,ge],it=f.apply(t,bt);return B1(a)&&Bx(it,bt),it.placeholder=x,Wx(it,a,l)}function D1(a){var l=oi[a];return function(f,x){if(f=yn(f),x=x==null?0:ur(gt(x),292),x&&W2(f)){var P=(Rt(f)+"e").split("e"),k=l(P[0]+"e"+(+P[1]+x));return P=(Rt(k)+"e").split("e"),+(P[0]+"e"+(+P[1]-x))}return l(f)}}var zL=Tl&&1/Ii(new Tl([,-0]))[1]==re?function(a){return new Tl(a)}:r0;function kx(a){return function(l){var f=cr(l);return f==Ae?ut(l):f==St?Sr(l):Fp(l,a(l))}}function Yo(a,l,f,x,P,k,q,V){var ee=l&_;if(!ee&&typeof a!="function")throw new er(n);var ge=x?x.length:0;if(ge||(l&=~(O|L),x=P=t),q=q===t?q:Mi(gt(q),0),V=V===t?V:gt(V),ge-=P?P.length:0,l&L){var ye=x,xe=P;x=P=t}var Ne=ee?t:z1(a),Ve=[a,l,f,x,P,ye,xe,k,q,V];if(Ne&&QL(Ve,Ne),a=Ve[0],l=Ve[1],f=Ve[2],x=Ve[3],P=Ve[4],V=Ve[9]=Ve[9]===t?ee?0:a.length:Mi(Ve[9]-ge,0),!V&&l&(I|F)&&(l&=~(I|F)),!l||l==S)var tt=DL(a,l,f);else l==I||l==F?tt=LL(a,l,V):(l==O||l==(S|O))&&!P.length?tt=FL(a,l,f,x):tt=ih.apply(t,Ve);var bt=Ne?dx:Bx;return Wx(bt(tt,Ve),a,l)}function Rx(a,l,f,x){return a===t||zn(a,Or[f])&&!Ut.call(x,f)?l:a}function Nx(a,l,f,x,P,k){return ci(a)&&ci(l)&&(k.set(l,a),Jp(a,l,t,Nx,k),k.delete(l)),a}function HL(a){return Dc(a)?t:a}function Ox(a,l,f,x,P,k){var q=f&v,V=a.length,ee=l.length;if(V!=ee&&!(q&&ee>V))return!1;var ge=k.get(a),ye=k.get(l);if(ge&&ye)return ge==l&&ye==a;var xe=-1,Ne=!0,Ve=f&b?new Cs:t;for(k.set(a,l),k.set(l,a);++xe<V;){var tt=a[xe],bt=l[xe];if(x)var it=q?x(bt,tt,xe,l,a,k):x(tt,bt,xe,a,l,k);if(it!==t){if(it)continue;Ne=!1;break}if(Ve){if(!hs(l,function(xt,_t){if(!yi(Ve,_t)&&(tt===xt||P(tt,xt,f,x,k)))return Ve.push(_t)})){Ne=!1;break}}else if(!(tt===bt||P(tt,bt,f,x,k))){Ne=!1;break}}return k.delete(a),k.delete(l),Ne}function UL(a,l,f,x,P,k,q){switch(f){case Mn:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case Gr:return!(a.byteLength!=l.byteLength||!k(new Up(a),new Up(l)));case Ee:case Fe:case st:return zn(+a,+l);case nt:return a.name==l.name&&a.message==l.message;case Lt:case Wt:return a==l+"";case Ae:var V=ut;case St:var ee=x&v;if(V||(V=Ii),a.size!=l.size&&!ee)return!1;var ge=q.get(a);if(ge)return ge==l;x|=b,q.set(a,l);var ye=Ox(V(a),V(l),x,P,k,q);return q.delete(a),ye;case rt:if(Pc)return Pc.call(a)==Pc.call(l)}return!1}function qL(a,l,f,x,P,k){var q=f&v,V=L1(a),ee=V.length,ge=L1(l),ye=ge.length;if(ee!=ye&&!q)return!1;for(var xe=ee;xe--;){var Ne=V[xe];if(!(q?Ne in l:Ut.call(l,Ne)))return!1}var Ve=k.get(a),tt=k.get(l);if(Ve&&tt)return Ve==l&&tt==a;var bt=!0;k.set(a,l),k.set(l,a);for(var it=q;++xe<ee;){Ne=V[xe];var xt=a[Ne],_t=l[Ne];if(x)var tn=q?x(_t,xt,Ne,l,a,k):x(xt,_t,Ne,a,l,k);if(!(tn===t?xt===_t||P(xt,_t,f,x,k):tn)){bt=!1;break}it||(it=Ne=="constructor")}if(bt&&!it){var Pr=a.constructor,rn=l.constructor;Pr!=rn&&"constructor"in a&&"constructor"in l&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof rn=="function"&&rn instanceof rn)&&(bt=!1)}return k.delete(a),k.delete(l),bt}function Zo(a){return V1(Ux(a,t,Yx),a+"")}function L1(a){return ex(a,zi,U1)}function F1(a){return ex(a,Fr,Dx)}var z1=jp?function(a){return jp.get(a)}:r0;function ah(a){for(var l=a.name+"",f=Al[l],x=Ut.call(Al,l)?f.length:0;x--;){var P=f[x],k=P.func;if(k==null||k==a)return P.name}return l}function Nl(a){var l=Ut.call(A,"placeholder")?A:a;return l.placeholder}function Ze(){var a=A.iteratee||t0;return a=a===t0?rx:a,arguments.length?a(arguments[0],arguments[1]):a}function sh(a,l){var f=a.__data__;return YL(l)?f[typeof l=="string"?"string":"hash"]:f.map}function H1(a){for(var l=zi(a),f=l.length;f--;){var x=l[f],P=a[x];l[f]=[x,P,zx(P)]}return l}function Es(a,l){var f=ke(a,l);return ix(f)?f:t}function BL(a){var l=Ut.call(a,ws),f=a[ws];try{a[ws]=t;var x=!0}catch{}var P=zp.call(a);return x&&(l?a[ws]=f:delete a[ws]),P}var U1=h1?function(a){return a==null?[]:(a=Et(a),Nn(h1(a),function(l){return q2.call(a,l)}))}:n0,Dx=h1?function(a){for(var l=[];a;)On(l,U1(a)),a=qp(a);return l}:n0,cr=_r;(f1&&cr(new f1(new ArrayBuffer(1)))!=Mn||Sc&&cr(new Sc)!=Ae||m1&&cr(m1.resolve())!=Be||Tl&&cr(new Tl)!=St||_c&&cr(new _c)!=ri)&&(cr=function(a){var l=_r(a),f=l==ft?a.constructor:t,x=f?Ps(f):"";if(x)switch(x){case _D:return Mn;case ED:return Ae;case PD:return Be;case ID:return St;case TD:return ri}return l});function WL(a,l,f){for(var x=-1,P=f.length;++x<P;){var k=f[x],q=k.size;switch(k.type){case"drop":a+=q;break;case"dropRight":l-=q;break;case"take":l=ur(l,a+q);break;case"takeRight":a=Mi(a,l-q);break}}return{start:a,end:l}}function VL(a){var l=a.match(Do);return l?l[1].split(ns):[]}function Lx(a,l,f){l=Pa(l,a);for(var x=-1,P=l.length,k=!1;++x<P;){var q=co(l[x]);if(!(k=a!=null&&f(a,q)))break;a=a[q]}return k||++x!=P?k:(P=a==null?0:a.length,!!P&&fh(P)&&Xo(q,P)&&(pt(a)||Is(a)))}function $L(a){var l=a.length,f=new a.constructor(l);return l&&typeof a[0]=="string"&&Ut.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function Fx(a){return typeof a.constructor=="function"&&!Nc(a)?Ml(qp(a)):{}}function jL(a,l,f){var x=a.constructor;switch(l){case Gr:return N1(a);case Ee:case Fe:return new x(+a);case Mn:return AL(a,f);case fa:case Oo:case Ei:case vt:case kr:case gr:case dl:case fi:case io:return yx(a,f);case Ae:return new x;case st:case Wt:return new x(a);case Lt:return ML(a);case St:return new x;case rt:return kL(a)}}function GL(a,l){var f=l.length;if(!f)return a;var x=f-1;return l[x]=(f>1?"& ":"")+l[x],l=l.join(f>2?", ":" "),a.replace(vr,`{
/* [wrapped with `+l+`] */
`)}function KL(a){return pt(a)||Is(a)||!!(B2&&a&&a[B2])}function Xo(a,l){var f=typeof a;return l=l??Q,!!l&&(f=="number"||f!="symbol"&&Lo.test(a))&&a>-1&&a%1==0&&a<l}function Er(a,l,f){if(!ci(f))return!1;var x=typeof l;return(x=="number"?Lr(f)&&Xo(l,f.length):x=="string"&&l in f)?zn(f[l],a):!1}function q1(a,l){if(pt(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||en(a)?!0:Cp.test(a)||!xp.test(a)||l!=null&&a in Et(l)}function YL(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function B1(a){var l=ah(a),f=A[l];if(typeof f!="function"||!(l in Ct.prototype))return!1;if(a===f)return!0;var x=z1(f);return!!x&&a===x[0]}function ZL(a){return!!z2&&z2 in a}var XL=ys?Jo:o0;function Nc(a){var l=a&&a.constructor,f=typeof l=="function"&&l.prototype||Or;return a===f}function zx(a){return a===a&&!ci(a)}function Hx(a,l){return function(f){return f==null?!1:f[a]===l&&(l!==t||a in Et(f))}}function JL(a){var l=ph(a,function(x){return f.size===u&&f.clear(),x}),f=l.cache;return l}function QL(a,l){var f=a[1],x=l[1],P=f|x,k=P<(S|_|z),q=x==z&&f==I||x==z&&f==G&&a[7].length<=l[8]||x==(z|G)&&l[7].length<=l[8]&&f==I;if(!(k||q))return a;x&S&&(a[2]=l[2],P|=f&S?0:E);var V=l[3];if(V){var ee=a[3];a[3]=ee?xx(ee,V,l[4]):V,a[4]=ee?kt(a[3],c):l[4]}return V=l[5],V&&(ee=a[5],a[5]=ee?Cx(ee,V,l[6]):V,a[6]=ee?kt(a[5],c):l[6]),V=l[7],V&&(a[7]=V),x&z&&(a[8]=a[8]==null?l[8]:ur(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=P,a}function eF(a){var l=[];if(a!=null)for(var f in Et(a))l.push(f);return l}function tF(a){return zp.call(a)}function Ux(a,l,f){return l=Mi(l===t?a.length-1:l,0),function(){for(var x=arguments,P=-1,k=Mi(x.length-l,0),q=ue(k);++P<k;)q[P]=x[l+P];P=-1;for(var V=ue(l+1);++P<l;)V[P]=x[P];return V[l]=f(q),xr(a,this,V)}}function qx(a,l){return l.length<2?a:_s(a,vn(l,0,-1))}function iF(a,l){for(var f=a.length,x=ur(l.length,f),P=Dr(a);x--;){var k=l[x];a[x]=Xo(k,f)?P[k]:t}return a}function W1(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var Bx=Vx(dx),Oc=vD||function(a,l){return Pi.setTimeout(a,l)},V1=Vx(EL);function Wx(a,l,f){var x=l+"";return V1(a,GL(x,rF(VL(x),f)))}function Vx(a){var l=0,f=0;return function(){var x=xD(),P=te-(x-f);if(f=x,P>0){if(++l>=oe)return arguments[0]}else l=0;return a.apply(t,arguments)}}function lh(a,l){var f=-1,x=a.length,P=x-1;for(l=l===t?x:l;++f<l;){var k=P1(f,P),q=a[k];a[k]=a[f],a[f]=q}return a.length=l,a}var $x=JL(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(Sp,function(f,x,P,k){l.push(P?k.replace(ga,"$1"):x||f)}),l});function co(a){if(typeof a=="string"||en(a))return a;var l=a+"";return l=="0"&&1/a==-re?"-0":l}function Ps(a){if(a!=null){try{return Il.call(a)}catch{}try{return a+""}catch{}}return""}function rF(a,l){return Rr(de,function(f){var x="_."+f[0];l&f[1]&&!ps(a,x)&&a.push(x)}),a.sort()}function jx(a){if(a instanceof Ct)return a.clone();var l=new mn(a.__wrapped__,a.__chain__);return l.__actions__=Dr(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function nF(a,l,f){(f?Er(a,l,f):l===t)?l=1:l=Mi(gt(l),0);var x=a==null?0:a.length;if(!x||l<1)return[];for(var P=0,k=0,q=ue(Vp(x/l));P<x;)q[k++]=vn(a,P,P+=l);return q}function oF(a){for(var l=-1,f=a==null?0:a.length,x=0,P=[];++l<f;){var k=a[l];k&&(P[x++]=k)}return P}function aF(){var a=arguments.length;if(!a)return[];for(var l=ue(a-1),f=arguments[0],x=a;x--;)l[x-1]=arguments[x];return On(pt(f)?Dr(f):[f],tr(l,1))}var sF=yt(function(a,l){return xi(a)?Tc(a,tr(l,1,xi,!0)):[]}),lF=yt(function(a,l){var f=bn(l);return xi(f)&&(f=t),xi(a)?Tc(a,tr(l,1,xi,!0),Ze(f,2)):[]}),uF=yt(function(a,l){var f=bn(l);return xi(f)&&(f=t),xi(a)?Tc(a,tr(l,1,xi,!0),t,f):[]});function cF(a,l,f){var x=a==null?0:a.length;return x?(l=f||l===t?1:gt(l),vn(a,l<0?0:l,x)):[]}function dF(a,l,f){var x=a==null?0:a.length;return x?(l=f||l===t?1:gt(l),l=x-l,vn(a,0,l<0?0:l)):[]}function pF(a,l){return a&&a.length?eh(a,Ze(l,3),!0,!0):[]}function hF(a,l){return a&&a.length?eh(a,Ze(l,3),!0):[]}function fF(a,l,f,x){var P=a==null?0:a.length;return P?(f&&typeof f!="number"&&Er(a,l,f)&&(f=0,x=P),aL(a,l,f,x)):[]}function Gx(a,l,f){var x=a==null?0:a.length;if(!x)return-1;var P=f==null?0:gt(f);return P<0&&(P=Mi(x+P,0)),wa(a,Ze(l,3),P)}function Kx(a,l,f){var x=a==null?0:a.length;if(!x)return-1;var P=x-1;return f!==t&&(P=gt(f),P=f<0?Mi(x+P,0):ur(P,x-1)),wa(a,Ze(l,3),P,!0)}function Yx(a){var l=a==null?0:a.length;return l?tr(a,1):[]}function mF(a){var l=a==null?0:a.length;return l?tr(a,re):[]}function gF(a,l){var f=a==null?0:a.length;return f?(l=l===t?1:gt(l),tr(a,l)):[]}function vF(a){for(var l=-1,f=a==null?0:a.length,x={};++l<f;){var P=a[l];x[P[0]]=P[1]}return x}function Zx(a){return a&&a.length?a[0]:t}function bF(a,l,f){var x=a==null?0:a.length;if(!x)return-1;var P=f==null?0:gt(f);return P<0&&(P=Mi(x+P,0)),Zr(a,l,P)}function yF(a){var l=a==null?0:a.length;return l?vn(a,0,-1):[]}var wF=yt(function(a){var l=Gt(a,k1);return l.length&&l[0]===a[0]?x1(l):[]}),xF=yt(function(a){var l=bn(a),f=Gt(a,k1);return l===bn(f)?l=t:f.pop(),f.length&&f[0]===a[0]?x1(f,Ze(l,2)):[]}),CF=yt(function(a){var l=bn(a),f=Gt(a,k1);return l=typeof l=="function"?l:t,l&&f.pop(),f.length&&f[0]===a[0]?x1(f,t,l):[]});function SF(a,l){return a==null?"":yD.call(a,l)}function bn(a){var l=a==null?0:a.length;return l?a[l-1]:t}function _F(a,l,f){var x=a==null?0:a.length;if(!x)return-1;var P=x;return f!==t&&(P=gt(f),P=P<0?Mi(x+P,0):ur(P,x-1)),l===l?ni(a,l,P):wa(a,Wo,P,!0)}function EF(a,l){return a&&a.length?sx(a,gt(l)):t}var PF=yt(Xx);function Xx(a,l){return a&&a.length&&l&&l.length?E1(a,l):a}function IF(a,l,f){return a&&a.length&&l&&l.length?E1(a,l,Ze(f,2)):a}function TF(a,l,f){return a&&a.length&&l&&l.length?E1(a,l,t,f):a}var AF=Zo(function(a,l){var f=a==null?0:a.length,x=v1(a,l);return cx(a,Gt(l,function(P){return Xo(P,f)?+P:P}).sort(wx)),x});function MF(a,l){var f=[];if(!(a&&a.length))return f;var x=-1,P=[],k=a.length;for(l=Ze(l,3);++x<k;){var q=a[x];l(q,x,a)&&(f.push(q),P.push(x))}return cx(a,P),f}function $1(a){return a==null?a:SD.call(a)}function kF(a,l,f){var x=a==null?0:a.length;return x?(f&&typeof f!="number"&&Er(a,l,f)?(l=0,f=x):(l=l==null?0:gt(l),f=f===t?x:gt(f)),vn(a,l,f)):[]}function RF(a,l){return Qp(a,l)}function NF(a,l,f){return T1(a,l,Ze(f,2))}function OF(a,l){var f=a==null?0:a.length;if(f){var x=Qp(a,l);if(x<f&&zn(a[x],l))return x}return-1}function DF(a,l){return Qp(a,l,!0)}function LF(a,l,f){return T1(a,l,Ze(f,2),!0)}function FF(a,l){var f=a==null?0:a.length;if(f){var x=Qp(a,l,!0)-1;if(zn(a[x],l))return x}return-1}function zF(a){return a&&a.length?px(a):[]}function HF(a,l){return a&&a.length?px(a,Ze(l,2)):[]}function UF(a){var l=a==null?0:a.length;return l?vn(a,1,l):[]}function qF(a,l,f){return a&&a.length?(l=f||l===t?1:gt(l),vn(a,0,l<0?0:l)):[]}function BF(a,l,f){var x=a==null?0:a.length;return x?(l=f||l===t?1:gt(l),l=x-l,vn(a,l<0?0:l,x)):[]}function WF(a,l){return a&&a.length?eh(a,Ze(l,3),!1,!0):[]}function VF(a,l){return a&&a.length?eh(a,Ze(l,3)):[]}var $F=yt(function(a){return Ea(tr(a,1,xi,!0))}),jF=yt(function(a){var l=bn(a);return xi(l)&&(l=t),Ea(tr(a,1,xi,!0),Ze(l,2))}),GF=yt(function(a){var l=bn(a);return l=typeof l=="function"?l:t,Ea(tr(a,1,xi,!0),t,l)});function KF(a){return a&&a.length?Ea(a):[]}function YF(a,l){return a&&a.length?Ea(a,Ze(l,2)):[]}function ZF(a,l){return l=typeof l=="function"?l:t,a&&a.length?Ea(a,t,l):[]}function j1(a){if(!(a&&a.length))return[];var l=0;return a=Nn(a,function(f){if(xi(f))return l=Mi(f.length,l),!0}),gs(l,function(f){return Gt(a,ms(f))})}function Jx(a,l){if(!(a&&a.length))return[];var f=j1(a);return l==null?f:Gt(f,function(x){return xr(l,t,x)})}var XF=yt(function(a,l){return xi(a)?Tc(a,l):[]}),JF=yt(function(a){return M1(Nn(a,xi))}),QF=yt(function(a){var l=bn(a);return xi(l)&&(l=t),M1(Nn(a,xi),Ze(l,2))}),ez=yt(function(a){var l=bn(a);return l=typeof l=="function"?l:t,M1(Nn(a,xi),t,l)}),tz=yt(j1);function iz(a,l){return gx(a||[],l||[],Ic)}function rz(a,l){return gx(a||[],l||[],kc)}var nz=yt(function(a){var l=a.length,f=l>1?a[l-1]:t;return f=typeof f=="function"?(a.pop(),f):t,Jx(a,f)});function Qx(a){var l=A(a);return l.__chain__=!0,l}function oz(a,l){return l(a),a}function uh(a,l){return l(a)}var az=Zo(function(a){var l=a.length,f=l?a[0]:0,x=this.__wrapped__,P=function(k){return v1(k,a)};return l>1||this.__actions__.length||!(x instanceof Ct)||!Xo(f)?this.thru(P):(x=x.slice(f,+f+(l?1:0)),x.__actions__.push({func:uh,args:[P],thisArg:t}),new mn(x,this.__chain__).thru(function(k){return l&&!k.length&&k.push(t),k}))});function sz(){return Qx(this)}function lz(){return new mn(this.value(),this.__chain__)}function uz(){this.__values__===t&&(this.__values__=h5(this.value()));var a=this.__index__>=this.__values__.length,l=a?t:this.__values__[this.__index__++];return{done:a,value:l}}function cz(){return this}function dz(a){for(var l,f=this;f instanceof Kp;){var x=jx(f);x.__index__=0,x.__values__=t,l?P.__wrapped__=x:l=x;var P=x;f=f.__wrapped__}return P.__wrapped__=a,l}function pz(){var a=this.__wrapped__;if(a instanceof Ct){var l=a;return this.__actions__.length&&(l=new Ct(this)),l=l.reverse(),l.__actions__.push({func:uh,args:[$1],thisArg:t}),new mn(l,this.__chain__)}return this.thru($1)}function hz(){return mx(this.__wrapped__,this.__actions__)}var fz=th(function(a,l,f){Ut.call(a,f)?++a[f]:Ko(a,f,1)});function mz(a,l,f){var x=pt(a)?ds:oL;return f&&Er(a,l,f)&&(l=t),x(a,Ze(l,3))}function gz(a,l){var f=pt(a)?Nn:J2;return f(a,Ze(l,3))}var vz=Px(Gx),bz=Px(Kx);function yz(a,l){return tr(ch(a,l),1)}function wz(a,l){return tr(ch(a,l),re)}function xz(a,l,f){return f=f===t?1:gt(f),tr(ch(a,l),f)}function e5(a,l){var f=pt(a)?Rr:_a;return f(a,Ze(l,3))}function t5(a,l){var f=pt(a)?ya:X2;return f(a,Ze(l,3))}var Cz=th(function(a,l,f){Ut.call(a,f)?a[f].push(l):Ko(a,f,[l])});function Sz(a,l,f,x){a=Lr(a)?a:Dl(a),f=f&&!x?gt(f):0;var P=a.length;return f<0&&(f=Mi(P+f,0)),mh(a)?f<=P&&a.indexOf(l,f)>-1:!!P&&Zr(a,l,f)>-1}var _z=yt(function(a,l,f){var x=-1,P=typeof l=="function",k=Lr(a)?ue(a.length):[];return _a(a,function(q){k[++x]=P?xr(l,q,f):Ac(q,l,f)}),k}),Ez=th(function(a,l,f){Ko(a,f,l)});function ch(a,l){var f=pt(a)?Gt:nx;return f(a,Ze(l,3))}function Pz(a,l,f,x){return a==null?[]:(pt(l)||(l=l==null?[]:[l]),f=x?t:f,pt(f)||(f=f==null?[]:[f]),lx(a,l,f))}var Iz=th(function(a,l,f){a[f?0:1].push(l)},function(){return[[],[]]});function Tz(a,l,f){var x=pt(a)?hn:_l,P=arguments.length<3;return x(a,Ze(l,4),f,P,_a)}function Az(a,l,f){var x=pt(a)?bc:_l,P=arguments.length<3;return x(a,Ze(l,4),f,P,X2)}function Mz(a,l){var f=pt(a)?Nn:J2;return f(a,hh(Ze(l,3)))}function kz(a){var l=pt(a)?G2:SL;return l(a)}function Rz(a,l,f){(f?Er(a,l,f):l===t)?l=1:l=gt(l);var x=pt(a)?eL:_L;return x(a,l)}function Nz(a){var l=pt(a)?tL:PL;return l(a)}function Oz(a){if(a==null)return 0;if(Lr(a))return mh(a)?mi(a):a.length;var l=cr(a);return l==Ae||l==St?a.size:S1(a).length}function Dz(a,l,f){var x=pt(a)?hs:IL;return f&&Er(a,l,f)&&(l=t),x(a,Ze(l,3))}var Lz=yt(function(a,l){if(a==null)return[];var f=l.length;return f>1&&Er(a,l[0],l[1])?l=[]:f>2&&Er(l[0],l[1],l[2])&&(l=[l[0]]),lx(a,tr(l,1),[])}),dh=gD||function(){return Pi.Date.now()};function Fz(a,l){if(typeof l!="function")throw new er(n);return a=gt(a),function(){if(--a<1)return l.apply(this,arguments)}}function i5(a,l,f){return l=f?t:l,l=a&&l==null?a.length:l,Yo(a,z,t,t,t,t,l)}function r5(a,l){var f;if(typeof l!="function")throw new er(n);return a=gt(a),function(){return--a>0&&(f=l.apply(this,arguments)),a<=1&&(l=t),f}}var G1=yt(function(a,l,f){var x=S;if(f.length){var P=kt(f,Nl(G1));x|=O}return Yo(a,x,l,f,P)}),n5=yt(function(a,l,f){var x=S|_;if(f.length){var P=kt(f,Nl(n5));x|=O}return Yo(l,x,a,f,P)});function o5(a,l,f){l=f?t:l;var x=Yo(a,I,t,t,t,t,t,l);return x.placeholder=o5.placeholder,x}function a5(a,l,f){l=f?t:l;var x=Yo(a,F,t,t,t,t,t,l);return x.placeholder=a5.placeholder,x}function s5(a,l,f){var x,P,k,q,V,ee,ge=0,ye=!1,xe=!1,Ne=!0;if(typeof a!="function")throw new er(n);l=yn(l)||0,ci(f)&&(ye=!!f.leading,xe="maxWait"in f,k=xe?Mi(yn(f.maxWait)||0,l):k,Ne="trailing"in f?!!f.trailing:Ne);function Ve(Ci){var Hn=x,ea=P;return x=P=t,ge=Ci,q=a.apply(ea,Hn),q}function tt(Ci){return ge=Ci,V=Oc(xt,l),ye?Ve(Ci):q}function bt(Ci){var Hn=Ci-ee,ea=Ci-ge,P5=l-Hn;return xe?ur(P5,k-ea):P5}function it(Ci){var Hn=Ci-ee,ea=Ci-ge;return ee===t||Hn>=l||Hn<0||xe&&ea>=k}function xt(){var Ci=dh();if(it(Ci))return _t(Ci);V=Oc(xt,bt(Ci))}function _t(Ci){return V=t,Ne&&x?Ve(Ci):(x=P=t,q)}function tn(){V!==t&&vx(V),ge=0,x=ee=P=V=t}function Pr(){return V===t?q:_t(dh())}function rn(){var Ci=dh(),Hn=it(Ci);if(x=arguments,P=this,ee=Ci,Hn){if(V===t)return tt(ee);if(xe)return vx(V),V=Oc(xt,l),Ve(ee)}return V===t&&(V=Oc(xt,l)),q}return rn.cancel=tn,rn.flush=Pr,rn}var zz=yt(function(a,l){return Z2(a,1,l)}),Hz=yt(function(a,l,f){return Z2(a,yn(l)||0,f)});function Uz(a){return Yo(a,H)}function ph(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new er(n);var f=function(){var x=arguments,P=l?l.apply(this,x):x[0],k=f.cache;if(k.has(P))return k.get(P);var q=a.apply(this,x);return f.cache=k.set(P,q)||k,q};return f.cache=new(ph.Cache||Go),f}ph.Cache=Go;function hh(a){if(typeof a!="function")throw new er(n);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function qz(a){return r5(2,a)}var Bz=TL(function(a,l){l=l.length==1&&pt(l[0])?Gt(l[0],Cr(Ze())):Gt(tr(l,1),Cr(Ze()));var f=l.length;return yt(function(x){for(var P=-1,k=ur(x.length,f);++P<k;)x[P]=l[P].call(this,x[P]);return xr(a,this,x)})}),K1=yt(function(a,l){var f=kt(l,Nl(K1));return Yo(a,O,t,l,f)}),l5=yt(function(a,l){var f=kt(l,Nl(l5));return Yo(a,L,t,l,f)}),Wz=Zo(function(a,l){return Yo(a,G,t,t,t,l)});function Vz(a,l){if(typeof a!="function")throw new er(n);return l=l===t?l:gt(l),yt(a,l)}function $z(a,l){if(typeof a!="function")throw new er(n);return l=l==null?0:Mi(gt(l),0),yt(function(f){var x=f[l],P=Ia(f,0,l);return x&&On(P,x),xr(a,this,P)})}function jz(a,l,f){var x=!0,P=!0;if(typeof a!="function")throw new er(n);return ci(f)&&(x="leading"in f?!!f.leading:x,P="trailing"in f?!!f.trailing:P),s5(a,l,{leading:x,maxWait:l,trailing:P})}function Gz(a){return i5(a,1)}function Kz(a,l){return K1(R1(l),a)}function Yz(){if(!arguments.length)return[];var a=arguments[0];return pt(a)?a:[a]}function Zz(a){return gn(a,g)}function Xz(a,l){return l=typeof l=="function"?l:t,gn(a,g,l)}function Jz(a){return gn(a,d|g)}function Qz(a,l){return l=typeof l=="function"?l:t,gn(a,d|g,l)}function eH(a,l){return l==null||Y2(a,l,zi(l))}function zn(a,l){return a===l||a!==a&&l!==l}var tH=oh(w1),iH=oh(function(a,l){return a>=l}),Is=tx(function(){return arguments}())?tx:function(a){return gi(a)&&Ut.call(a,"callee")&&!q2.call(a,"callee")},pt=ue.isArray,rH=so?Cr(so):dL;function Lr(a){return a!=null&&fh(a.length)&&!Jo(a)}function xi(a){return gi(a)&&Lr(a)}function nH(a){return a===!0||a===!1||gi(a)&&_r(a)==Ee}var Ta=bD||o0,oH=Cl?Cr(Cl):pL;function aH(a){return gi(a)&&a.nodeType===1&&!Dc(a)}function sH(a){if(a==null)return!0;if(Lr(a)&&(pt(a)||typeof a=="string"||typeof a.splice=="function"||Ta(a)||Ol(a)||Is(a)))return!a.length;var l=cr(a);if(l==Ae||l==St)return!a.size;if(Nc(a))return!S1(a).length;for(var f in a)if(Ut.call(a,f))return!1;return!0}function lH(a,l){return Mc(a,l)}function uH(a,l,f){f=typeof f=="function"?f:t;var x=f?f(a,l):t;return x===t?Mc(a,l,t,f):!!x}function Y1(a){if(!gi(a))return!1;var l=_r(a);return l==nt||l==qe||typeof a.message=="string"&&typeof a.name=="string"&&!Dc(a)}function cH(a){return typeof a=="number"&&W2(a)}function Jo(a){if(!ci(a))return!1;var l=_r(a);return l==$e||l==ot||l==Me||l==mt}function u5(a){return typeof a=="number"&&a==gt(a)}function fh(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function ci(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function gi(a){return a!=null&&typeof a=="object"}var c5=Bo?Cr(Bo):fL;function dH(a,l){return a===l||C1(a,l,H1(l))}function pH(a,l,f){return f=typeof f=="function"?f:t,C1(a,l,H1(l),f)}function hH(a){return d5(a)&&a!=+a}function fH(a){if(XL(a))throw new et(r);return ix(a)}function mH(a){return a===null}function gH(a){return a==null}function d5(a){return typeof a=="number"||gi(a)&&_r(a)==st}function Dc(a){if(!gi(a)||_r(a)!=ft)return!1;var l=qp(a);if(l===null)return!0;var f=Ut.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&Il.call(f)==pD}var Z1=Lp?Cr(Lp):mL;function vH(a){return u5(a)&&a>=-Q&&a<=Q}var p5=dn?Cr(dn):gL;function mh(a){return typeof a=="string"||!pt(a)&&gi(a)&&_r(a)==Wt}function en(a){return typeof a=="symbol"||gi(a)&&_r(a)==rt}var Ol=sr?Cr(sr):vL;function bH(a){return a===t}function yH(a){return gi(a)&&cr(a)==ri}function wH(a){return gi(a)&&_r(a)==No}var xH=oh(_1),CH=oh(function(a,l){return a<=l});function h5(a){if(!a)return[];if(Lr(a))return mh(a)?Fi(a):Dr(a);if(Cc&&a[Cc])return lt(a[Cc]());var l=cr(a),f=l==Ae?ut:l==St?Ii:Dl;return f(a)}function Qo(a){if(!a)return a===0?a:0;if(a=yn(a),a===re||a===-re){var l=a<0?-1:1;return l*le}return a===a?a:0}function gt(a){var l=Qo(a),f=l%1;return l===l?f?l-f:l:0}function f5(a){return a?Ss(gt(a),0,B):0}function yn(a){if(typeof a=="number")return a;if(en(a))return j;if(ci(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=ci(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=vs(a);var f=Ep.test(a);return f||or.test(a)?c1(a.slice(2),f?2:8):lc.test(a)?j:+a}function m5(a){return uo(a,Fr(a))}function SH(a){return a?Ss(gt(a),-Q,Q):a===0?a:0}function Rt(a){return a==null?"":Qr(a)}var _H=kl(function(a,l){if(Nc(l)||Lr(l)){uo(l,zi(l),a);return}for(var f in l)Ut.call(l,f)&&Ic(a,f,l[f])}),g5=kl(function(a,l){uo(l,Fr(l),a)}),gh=kl(function(a,l,f,x){uo(l,Fr(l),a,x)}),EH=kl(function(a,l,f,x){uo(l,zi(l),a,x)}),PH=Zo(v1);function IH(a,l){var f=Ml(a);return l==null?f:K2(f,l)}var TH=yt(function(a,l){a=Et(a);var f=-1,x=l.length,P=x>2?l[2]:t;for(P&&Er(l[0],l[1],P)&&(x=1);++f<x;)for(var k=l[f],q=Fr(k),V=-1,ee=q.length;++V<ee;){var ge=q[V],ye=a[ge];(ye===t||zn(ye,Or[ge])&&!Ut.call(a,ge))&&(a[ge]=k[ge])}return a}),AH=yt(function(a){return a.push(t,Nx),xr(v5,t,a)});function MH(a,l){return Ji(a,Ze(l,3),lo)}function kH(a,l){return Ji(a,Ze(l,3),y1)}function RH(a,l){return a==null?a:b1(a,Ze(l,3),Fr)}function NH(a,l){return a==null?a:Q2(a,Ze(l,3),Fr)}function OH(a,l){return a&&lo(a,Ze(l,3))}function DH(a,l){return a&&y1(a,Ze(l,3))}function LH(a){return a==null?[]:Xp(a,zi(a))}function FH(a){return a==null?[]:Xp(a,Fr(a))}function X1(a,l,f){var x=a==null?t:_s(a,l);return x===t?f:x}function zH(a,l){return a!=null&&Lx(a,l,sL)}function J1(a,l){return a!=null&&Lx(a,l,lL)}var HH=Tx(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=zp.call(l)),a[l]=f},e0(zr)),UH=Tx(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=zp.call(l)),Ut.call(a,l)?a[l].push(f):a[l]=[f]},Ze),qH=yt(Ac);function zi(a){return Lr(a)?j2(a):S1(a)}function Fr(a){return Lr(a)?j2(a,!0):bL(a)}function BH(a,l){var f={};return l=Ze(l,3),lo(a,function(x,P,k){Ko(f,l(x,P,k),x)}),f}function WH(a,l){var f={};return l=Ze(l,3),lo(a,function(x,P,k){Ko(f,P,l(x,P,k))}),f}var VH=kl(function(a,l,f){Jp(a,l,f)}),v5=kl(function(a,l,f,x){Jp(a,l,f,x)}),$H=Zo(function(a,l){var f={};if(a==null)return f;var x=!1;l=Gt(l,function(k){return k=Pa(k,a),x||(x=k.length>1),k}),uo(a,F1(a),f),x&&(f=gn(f,d|p|g,HL));for(var P=l.length;P--;)A1(f,l[P]);return f});function jH(a,l){return b5(a,hh(Ze(l)))}var GH=Zo(function(a,l){return a==null?{}:wL(a,l)});function b5(a,l){if(a==null)return{};var f=Gt(F1(a),function(x){return[x]});return l=Ze(l),ux(a,f,function(x,P){return l(x,P[0])})}function KH(a,l,f){l=Pa(l,a);var x=-1,P=l.length;for(P||(P=1,a=t);++x<P;){var k=a==null?t:a[co(l[x])];k===t&&(x=P,k=f),a=Jo(k)?k.call(a):k}return a}function YH(a,l,f){return a==null?a:kc(a,l,f)}function ZH(a,l,f,x){return x=typeof x=="function"?x:t,a==null?a:kc(a,l,f,x)}var y5=kx(zi),w5=kx(Fr);function XH(a,l,f){var x=pt(a),P=x||Ta(a)||Ol(a);if(l=Ze(l,4),f==null){var k=a&&a.constructor;P?f=x?new k:[]:ci(a)?f=Jo(k)?Ml(qp(a)):{}:f={}}return(P?Rr:lo)(a,function(q,V,ee){return l(f,q,V,ee)}),f}function JH(a,l){return a==null?!0:A1(a,l)}function QH(a,l,f){return a==null?a:fx(a,l,R1(f))}function eU(a,l,f,x){return x=typeof x=="function"?x:t,a==null?a:fx(a,l,R1(f),x)}function Dl(a){return a==null?[]:Nr(a,zi(a))}function tU(a){return a==null?[]:Nr(a,Fr(a))}function iU(a,l,f){return f===t&&(f=l,l=t),f!==t&&(f=yn(f),f=f===f?f:0),l!==t&&(l=yn(l),l=l===l?l:0),Ss(yn(a),l,f)}function rU(a,l,f){return l=Qo(l),f===t?(f=l,l=0):f=Qo(f),a=yn(a),uL(a,l,f)}function nU(a,l,f){if(f&&typeof f!="boolean"&&Er(a,l,f)&&(l=f=t),f===t&&(typeof l=="boolean"?(f=l,l=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&l===t?(a=0,l=1):(a=Qo(a),l===t?(l=a,a=0):l=Qo(l)),a>l){var x=a;a=l,l=x}if(f||a%1||l%1){var P=V2();return ur(a+P*(l-a+u1("1e-"+((P+"").length-1))),l)}return P1(a,l)}var oU=Rl(function(a,l,f){return l=l.toLowerCase(),a+(f?x5(l):l)});function x5(a){return Q1(Rt(a).toLowerCase())}function C5(a){return a=Rt(a),a&&a.replace(ar,R).replace(Rp,"")}function aU(a,l,f){a=Rt(a),l=Qr(l);var x=a.length;f=f===t?x:Ss(gt(f),0,x);var P=f;return f-=l.length,f>=0&&a.slice(f,P)==l}function sU(a){return a=Rt(a),a&&rc.test(a)?a.replace(tc,pe):a}function lU(a){return a=Rt(a),a&&i1.test(a)?a.replace(nc,"\\$&"):a}var uU=Rl(function(a,l,f){return a+(f?"-":"")+l.toLowerCase()}),cU=Rl(function(a,l,f){return a+(f?" ":"")+l.toLowerCase()}),dU=Ex("toLowerCase");function pU(a,l,f){a=Rt(a),l=gt(l);var x=l?mi(a):0;if(!l||x>=l)return a;var P=(l-x)/2;return nh($p(P),f)+a+nh(Vp(P),f)}function hU(a,l,f){a=Rt(a),l=gt(l);var x=l?mi(a):0;return l&&x<l?a+nh(l-x,f):a}function fU(a,l,f){a=Rt(a),l=gt(l);var x=l?mi(a):0;return l&&x<l?nh(l-x,f)+a:a}function mU(a,l,f){return f||l==null?l=0:l&&(l=+l),CD(Rt(a).replace(oc,""),l||0)}function gU(a,l,f){return(f?Er(a,l,f):l===t)?l=1:l=gt(l),I1(Rt(a),l)}function vU(){var a=arguments,l=Rt(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var bU=Rl(function(a,l,f){return a+(f?"_":"")+l.toLowerCase()});function yU(a,l,f){return f&&typeof f!="number"&&Er(a,l,f)&&(l=f=t),f=f===t?B:f>>>0,f?(a=Rt(a),a&&(typeof l=="string"||l!=null&&!Z1(l))&&(l=Qr(l),!l&&We(a))?Ia(Fi(a),0,f):a.split(l,f)):[]}var wU=Rl(function(a,l,f){return a+(f?" ":"")+Q1(l)});function xU(a,l,f){return a=Rt(a),f=f==null?0:Ss(gt(f),0,a.length),l=Qr(l),a.slice(f,f+l.length)==l}function CU(a,l,f){var x=A.templateSettings;f&&Er(a,l,f)&&(l=t),a=Rt(a),l=gh({},l,x,Rx);var P=gh({},l.imports,x.imports,Rx),k=zi(P),q=Nr(P,k),V,ee,ge=0,ye=l.interpolate||bi,xe="__p += '",Ne=$o((l.escape||bi).source+"|"+ye.source+"|"+(ye===hl?r1:bi).source+"|"+(l.evaluate||bi).source+"|$","g"),Ve="//# sourceURL="+(Ut.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xl+"]")+`
`;a.replace(Ne,function(it,xt,_t,tn,Pr,rn){return _t||(_t=tn),xe+=a.slice(ge,rn).replace(Fo,Ce),xt&&(V=!0,xe+=`' +
__e(`+xt+`) +
'`),Pr&&(ee=!0,xe+=`';
`+Pr+`;
__p += '`),_t&&(xe+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),ge=rn+it.length,it}),xe+=`';
`;var tt=Ut.call(l,"variable")&&l.variable;if(!tt)xe=`with (obj) {
`+xe+`
}
`;else if(os.test(tt))throw new et(o);xe=(ee?xe.replace(ma,""):xe).replace(pl,"$1").replace(ec,"$1;"),xe="function("+(tt||"obj")+`) {
`+(tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var bt=_5(function(){return wt(k,Ve+"return "+xe).apply(t,q)});if(bt.source=xe,Y1(bt))throw bt;return bt}function SU(a){return Rt(a).toLowerCase()}function _U(a){return Rt(a).toUpperCase()}function EU(a,l,f){if(a=Rt(a),a&&(f||l===t))return vs(a);if(!a||!(l=Qr(l)))return a;var x=Fi(a),P=Fi(l),k=C(x,P),q=M(x,P)+1;return Ia(x,k,q).join("")}function PU(a,l,f){if(a=Rt(a),a&&(f||l===t))return a.slice(0,xa(a)+1);if(!a||!(l=Qr(l)))return a;var x=Fi(a),P=M(x,Fi(l))+1;return Ia(x,0,P).join("")}function IU(a,l,f){if(a=Rt(a),a&&(f||l===t))return a.replace(oc,"");if(!a||!(l=Qr(l)))return a;var x=Fi(a),P=C(x,Fi(l));return Ia(x,P).join("")}function TU(a,l){var f=N,x=J;if(ci(l)){var P="separator"in l?l.separator:P;f="length"in l?gt(l.length):f,x="omission"in l?Qr(l.omission):x}a=Rt(a);var k=a.length;if(We(a)){var q=Fi(a);k=q.length}if(f>=k)return a;var V=f-mi(x);if(V<1)return x;var ee=q?Ia(q,0,V).join(""):a.slice(0,V);if(P===t)return ee+x;if(q&&(V+=ee.length-V),Z1(P)){if(a.slice(V).search(P)){var ge,ye=ee;for(P.global||(P=$o(P.source,Rt(sc.exec(P))+"g")),P.lastIndex=0;ge=P.exec(ye);)var xe=ge.index;ee=ee.slice(0,xe===t?V:xe)}}else if(a.indexOf(Qr(P),V)!=V){var Ne=ee.lastIndexOf(P);Ne>-1&&(ee=ee.slice(0,Ne))}return ee+x}function AU(a){return a=Rt(a),a&&ic.test(a)?a.replace(Yi,El):a}var MU=Rl(function(a,l,f){return a+(f?" ":"")+l.toUpperCase()}),Q1=Ex("toUpperCase");function S5(a,l,f){return a=Rt(a),l=f?t:l,l===t?Ye(a)?bs(a):yc(a):a.match(l)||[]}var _5=yt(function(a,l){try{return xr(a,t,l)}catch(f){return Y1(f)?f:new et(f)}}),kU=Zo(function(a,l){return Rr(l,function(f){f=co(f),Ko(a,f,G1(a[f],a))}),a});function RU(a){var l=a==null?0:a.length,f=Ze();return a=l?Gt(a,function(x){if(typeof x[1]!="function")throw new er(n);return[f(x[0]),x[1]]}):[],yt(function(x){for(var P=-1;++P<l;){var k=a[P];if(xr(k[0],this,x))return xr(k[1],this,x)}})}function NU(a){return nL(gn(a,d))}function e0(a){return function(){return a}}function OU(a,l){return a==null||a!==a?l:a}var DU=Ix(),LU=Ix(!0);function zr(a){return a}function t0(a){return rx(typeof a=="function"?a:gn(a,d))}function FU(a){return ox(gn(a,d))}function zU(a,l){return ax(a,gn(l,d))}var HU=yt(function(a,l){return function(f){return Ac(f,a,l)}}),UU=yt(function(a,l){return function(f){return Ac(a,f,l)}});function i0(a,l,f){var x=zi(l),P=Xp(l,x);f==null&&!(ci(l)&&(P.length||!x.length))&&(f=l,l=a,a=this,P=Xp(l,zi(l)));var k=!(ci(f)&&"chain"in f)||!!f.chain,q=Jo(a);return Rr(P,function(V){var ee=l[V];a[V]=ee,q&&(a.prototype[V]=function(){var ge=this.__chain__;if(k||ge){var ye=a(this.__wrapped__),xe=ye.__actions__=Dr(this.__actions__);return xe.push({func:ee,args:arguments,thisArg:a}),ye.__chain__=ge,ye}return ee.apply(a,On([this.value()],arguments))})}),a}function qU(){return Pi._===this&&(Pi._=hD),this}function r0(){}function BU(a){return a=gt(a),yt(function(l){return sx(l,a)})}var WU=O1(Gt),VU=O1(ds),$U=O1(hs);function E5(a){return q1(a)?ms(co(a)):xL(a)}function jU(a){return function(l){return a==null?t:_s(a,l)}}var GU=Ax(),KU=Ax(!0);function n0(){return[]}function o0(){return!1}function YU(){return{}}function ZU(){return""}function XU(){return!0}function JU(a,l){if(a=gt(a),a<1||a>Q)return[];var f=B,x=ur(a,B);l=Ze(l),a-=B;for(var P=gs(x,l);++f<a;)l(f);return P}function QU(a){return pt(a)?Gt(a,co):en(a)?[a]:Dr($x(Rt(a)))}function eq(a){var l=++dD;return Rt(a)+l}var tq=rh(function(a,l){return a+l},0),iq=D1("ceil"),rq=rh(function(a,l){return a/l},1),nq=D1("floor");function oq(a){return a&&a.length?Zp(a,zr,w1):t}function aq(a,l){return a&&a.length?Zp(a,Ze(l,2),w1):t}function sq(a){return fn(a,zr)}function lq(a,l){return fn(a,Ze(l,2))}function uq(a){return a&&a.length?Zp(a,zr,_1):t}function cq(a,l){return a&&a.length?Zp(a,Ze(l,2),_1):t}var dq=rh(function(a,l){return a*l},1),pq=D1("round"),hq=rh(function(a,l){return a-l},0);function fq(a){return a&&a.length?Dn(a,zr):0}function mq(a,l){return a&&a.length?Dn(a,Ze(l,2)):0}return A.after=Fz,A.ary=i5,A.assign=_H,A.assignIn=g5,A.assignInWith=gh,A.assignWith=EH,A.at=PH,A.before=r5,A.bind=G1,A.bindAll=kU,A.bindKey=n5,A.castArray=Yz,A.chain=Qx,A.chunk=nF,A.compact=oF,A.concat=aF,A.cond=RU,A.conforms=NU,A.constant=e0,A.countBy=fz,A.create=IH,A.curry=o5,A.curryRight=a5,A.debounce=s5,A.defaults=TH,A.defaultsDeep=AH,A.defer=zz,A.delay=Hz,A.difference=sF,A.differenceBy=lF,A.differenceWith=uF,A.drop=cF,A.dropRight=dF,A.dropRightWhile=pF,A.dropWhile=hF,A.fill=fF,A.filter=gz,A.flatMap=yz,A.flatMapDeep=wz,A.flatMapDepth=xz,A.flatten=Yx,A.flattenDeep=mF,A.flattenDepth=gF,A.flip=Uz,A.flow=DU,A.flowRight=LU,A.fromPairs=vF,A.functions=LH,A.functionsIn=FH,A.groupBy=Cz,A.initial=yF,A.intersection=wF,A.intersectionBy=xF,A.intersectionWith=CF,A.invert=HH,A.invertBy=UH,A.invokeMap=_z,A.iteratee=t0,A.keyBy=Ez,A.keys=zi,A.keysIn=Fr,A.map=ch,A.mapKeys=BH,A.mapValues=WH,A.matches=FU,A.matchesProperty=zU,A.memoize=ph,A.merge=VH,A.mergeWith=v5,A.method=HU,A.methodOf=UU,A.mixin=i0,A.negate=hh,A.nthArg=BU,A.omit=$H,A.omitBy=jH,A.once=qz,A.orderBy=Pz,A.over=WU,A.overArgs=Bz,A.overEvery=VU,A.overSome=$U,A.partial=K1,A.partialRight=l5,A.partition=Iz,A.pick=GH,A.pickBy=b5,A.property=E5,A.propertyOf=jU,A.pull=PF,A.pullAll=Xx,A.pullAllBy=IF,A.pullAllWith=TF,A.pullAt=AF,A.range=GU,A.rangeRight=KU,A.rearg=Wz,A.reject=Mz,A.remove=MF,A.rest=Vz,A.reverse=$1,A.sampleSize=Rz,A.set=YH,A.setWith=ZH,A.shuffle=Nz,A.slice=kF,A.sortBy=Lz,A.sortedUniq=zF,A.sortedUniqBy=HF,A.split=yU,A.spread=$z,A.tail=UF,A.take=qF,A.takeRight=BF,A.takeRightWhile=WF,A.takeWhile=VF,A.tap=oz,A.throttle=jz,A.thru=uh,A.toArray=h5,A.toPairs=y5,A.toPairsIn=w5,A.toPath=QU,A.toPlainObject=m5,A.transform=XH,A.unary=Gz,A.union=$F,A.unionBy=jF,A.unionWith=GF,A.uniq=KF,A.uniqBy=YF,A.uniqWith=ZF,A.unset=JH,A.unzip=j1,A.unzipWith=Jx,A.update=QH,A.updateWith=eU,A.values=Dl,A.valuesIn=tU,A.without=XF,A.words=S5,A.wrap=Kz,A.xor=JF,A.xorBy=QF,A.xorWith=ez,A.zip=tz,A.zipObject=iz,A.zipObjectDeep=rz,A.zipWith=nz,A.entries=y5,A.entriesIn=w5,A.extend=g5,A.extendWith=gh,i0(A,A),A.add=tq,A.attempt=_5,A.camelCase=oU,A.capitalize=x5,A.ceil=iq,A.clamp=iU,A.clone=Zz,A.cloneDeep=Jz,A.cloneDeepWith=Qz,A.cloneWith=Xz,A.conformsTo=eH,A.deburr=C5,A.defaultTo=OU,A.divide=rq,A.endsWith=aU,A.eq=zn,A.escape=sU,A.escapeRegExp=lU,A.every=mz,A.find=vz,A.findIndex=Gx,A.findKey=MH,A.findLast=bz,A.findLastIndex=Kx,A.findLastKey=kH,A.floor=nq,A.forEach=e5,A.forEachRight=t5,A.forIn=RH,A.forInRight=NH,A.forOwn=OH,A.forOwnRight=DH,A.get=X1,A.gt=tH,A.gte=iH,A.has=zH,A.hasIn=J1,A.head=Zx,A.identity=zr,A.includes=Sz,A.indexOf=bF,A.inRange=rU,A.invoke=qH,A.isArguments=Is,A.isArray=pt,A.isArrayBuffer=rH,A.isArrayLike=Lr,A.isArrayLikeObject=xi,A.isBoolean=nH,A.isBuffer=Ta,A.isDate=oH,A.isElement=aH,A.isEmpty=sH,A.isEqual=lH,A.isEqualWith=uH,A.isError=Y1,A.isFinite=cH,A.isFunction=Jo,A.isInteger=u5,A.isLength=fh,A.isMap=c5,A.isMatch=dH,A.isMatchWith=pH,A.isNaN=hH,A.isNative=fH,A.isNil=gH,A.isNull=mH,A.isNumber=d5,A.isObject=ci,A.isObjectLike=gi,A.isPlainObject=Dc,A.isRegExp=Z1,A.isSafeInteger=vH,A.isSet=p5,A.isString=mh,A.isSymbol=en,A.isTypedArray=Ol,A.isUndefined=bH,A.isWeakMap=yH,A.isWeakSet=wH,A.join=SF,A.kebabCase=uU,A.last=bn,A.lastIndexOf=_F,A.lowerCase=cU,A.lowerFirst=dU,A.lt=xH,A.lte=CH,A.max=oq,A.maxBy=aq,A.mean=sq,A.meanBy=lq,A.min=uq,A.minBy=cq,A.stubArray=n0,A.stubFalse=o0,A.stubObject=YU,A.stubString=ZU,A.stubTrue=XU,A.multiply=dq,A.nth=EF,A.noConflict=qU,A.noop=r0,A.now=dh,A.pad=pU,A.padEnd=hU,A.padStart=fU,A.parseInt=mU,A.random=nU,A.reduce=Tz,A.reduceRight=Az,A.repeat=gU,A.replace=vU,A.result=KH,A.round=pq,A.runInContext=Z,A.sample=kz,A.size=Oz,A.snakeCase=bU,A.some=Dz,A.sortedIndex=RF,A.sortedIndexBy=NF,A.sortedIndexOf=OF,A.sortedLastIndex=DF,A.sortedLastIndexBy=LF,A.sortedLastIndexOf=FF,A.startCase=wU,A.startsWith=xU,A.subtract=hq,A.sum=fq,A.sumBy=mq,A.template=CU,A.times=JU,A.toFinite=Qo,A.toInteger=gt,A.toLength=f5,A.toLower=SU,A.toNumber=yn,A.toSafeInteger=SH,A.toString=Rt,A.toUpper=_U,A.trim=EU,A.trimEnd=PU,A.trimStart=IU,A.truncate=TU,A.unescape=AU,A.uniqueId=eq,A.upperCase=MU,A.upperFirst=Q1,A.each=e5,A.eachRight=t5,A.first=Zx,i0(A,function(){var a={};return lo(A,function(l,f){Ut.call(A.prototype,f)||(a[f]=l)}),a}(),{chain:!1}),A.VERSION=e,Rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){A[a].placeholder=A}),Rr(["drop","take"],function(a,l){Ct.prototype[a]=function(f){f=f===t?1:Mi(gt(f),0);var x=this.__filtered__&&!l?new Ct(this):this.clone();return x.__filtered__?x.__takeCount__=ur(f,x.__takeCount__):x.__views__.push({size:ur(f,B),type:a+(x.__dir__<0?"Right":"")}),x},Ct.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),Rr(["filter","map","takeWhile"],function(a,l){var f=l+1,x=f==K||f==se;Ct.prototype[a]=function(P){var k=this.clone();return k.__iteratees__.push({iteratee:Ze(P,3),type:f}),k.__filtered__=k.__filtered__||x,k}}),Rr(["head","last"],function(a,l){var f="take"+(l?"Right":"");Ct.prototype[a]=function(){return this[f](1).value()[0]}}),Rr(["initial","tail"],function(a,l){var f="drop"+(l?"":"Right");Ct.prototype[a]=function(){return this.__filtered__?new Ct(this):this[f](1)}}),Ct.prototype.compact=function(){return this.filter(zr)},Ct.prototype.find=function(a){return this.filter(a).head()},Ct.prototype.findLast=function(a){return this.reverse().find(a)},Ct.prototype.invokeMap=yt(function(a,l){return typeof a=="function"?new Ct(this):this.map(function(f){return Ac(f,a,l)})}),Ct.prototype.reject=function(a){return this.filter(hh(Ze(a)))},Ct.prototype.slice=function(a,l){a=gt(a);var f=this;return f.__filtered__&&(a>0||l<0)?new Ct(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),l!==t&&(l=gt(l),f=l<0?f.dropRight(-l):f.take(l-a)),f)},Ct.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ct.prototype.toArray=function(){return this.take(B)},lo(Ct.prototype,function(a,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),x=/^(?:head|last)$/.test(l),P=A[x?"take"+(l=="last"?"Right":""):l],k=x||/^find/.test(l);P&&(A.prototype[l]=function(){var q=this.__wrapped__,V=x?[1]:arguments,ee=q instanceof Ct,ge=V[0],ye=ee||pt(q),xe=function(xt){var _t=P.apply(A,On([xt],V));return x&&Ne?_t[0]:_t};ye&&f&&typeof ge=="function"&&ge.length!=1&&(ee=ye=!1);var Ne=this.__chain__,Ve=!!this.__actions__.length,tt=k&&!Ne,bt=ee&&!Ve;if(!k&&ye){q=bt?q:new Ct(this);var it=a.apply(q,V);return it.__actions__.push({func:uh,args:[xe],thisArg:t}),new mn(it,Ne)}return tt&&bt?a.apply(this,V):(it=this.thru(xe),tt?x?it.value()[0]:it.value():it)})}),Rr(["pop","push","shift","sort","splice","unshift"],function(a){var l=Ln[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",x=/^(?:pop|shift)$/.test(a);A.prototype[a]=function(){var P=arguments;if(x&&!this.__chain__){var k=this.value();return l.apply(pt(k)?k:[],P)}return this[f](function(q){return l.apply(pt(q)?q:[],P)})}}),lo(Ct.prototype,function(a,l){var f=A[l];if(f){var x=f.name+"";Ut.call(Al,x)||(Al[x]=[]),Al[x].push({name:l,func:f})}}),Al[ih(t,_).name]=[{name:"wrapper",func:t}],Ct.prototype.clone=AD,Ct.prototype.reverse=MD,Ct.prototype.value=kD,A.prototype.at=az,A.prototype.chain=sz,A.prototype.commit=lz,A.prototype.next=uz,A.prototype.plant=dz,A.prototype.reverse=pz,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=hz,A.prototype.first=A.prototype.head,Cc&&(A.prototype[Cc]=cz),A},lr=Jr();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Pi._=lr,define(function(){return lr})):wr?((wr.exports=lr)._=lr,gc._=lr):Pi._=lr}).call(Bl)});var Ge={};ai(Ge,{closest:()=>Fs,collapseOptions:()=>at,constrain:()=>jW,contentIsIndexable:()=>ef,convertToEpoch:()=>QW,convertTransformIntoMatrixStyleString:()=>qW,decompose:()=>Xh,deviceType:()=>Wl,easeInOutCubic:()=>iv,easeInOutSine:()=>nv,easeOutCubic:()=>rv,filterZoomLinks:()=>KW,formatDate:()=>JW,getCSSValueAndUnit:()=>Jt,getCorrectRenderContextForGivenPID:()=>ov,getFiletypeAndOembedFromURL:()=>BW,getHeight:()=>$W,getWidth:()=>VW,handleHomePageScrollLock:()=>XW,isAdminEdit:()=>Ri,isChrome:()=>OW,isDateInFuture:()=>ZW,isDevEnv:()=>AW,isEdge:()=>DW,isFirefox:()=>NW,isIE:()=>g6,isIE8:()=>LW,isIOS:()=>ld,isIOSWebView:()=>FW,isLocalEnv:()=>ev,isMac:()=>sd,isMobile:()=>fo,isMobileWindowSize:()=>HW,isProduction:()=>Qh,isProductionTestingAcct:()=>MW,isPromoCodeTransitionPeriod:()=>GW,isSafari:()=>mo,isServer:()=>ne,isServerRendered:()=>kW,isSitePreview:()=>Ls,mergeRefs:()=>WW,parseMatrixStyleString:()=>UW,sitePreviewHostname:()=>tv,stringReplaceMultiple:()=>zW,stripTLD:()=>YW,viewportOrientation:()=>RW});var Jh,ev,AW,Qh,MW,ne,kW,h6,Ri,f6,m6,Ls,tv,fo,RW,Wl,sd,NW,mo,OW,g6,DW,LW,ld,FW,zW,ef,HW,UW,qW,Xh,Jt,iv,rv,nv,at,BW,WW,VW,$W,Fs,jW,GW,KW,YW,ZW,ov,XW,JW,QW,Re=T(()=>{Jh=ce(ve()),ev=/^local.*/.test("production"),AW=/^dev.*/.test("production"),Qh=!0,MW=t=>[1,12,14494300,14502618,18,39,75,13933487,14497410,14065331,14229062,14313249].includes(t)||!1,ne=!(typeof window<"u"&&window.document&&window.document.createElement),kW=!ne&&window.hasOwnProperty("__PRELOADED_STATE__"),h6=!1;try{window.parent!==window&&window.location.host===window.parent.location.host&&window.parent.location.pathname.startsWith("/edit")&&(h6=!0)}catch{}Ri=h6,f6=!1;try{if(typeof window<"u"&&window.location.pathname.match("site.preview")!==null){let t=window.location.pathname.match(/^\/site\.preview\/(?<hostname>[^\/]+)/i);t?.groups?.hostname&&(m6=t.groups?.hostname,f6=!0)}}catch{}Ls=f6,tv=m6,fo=function(){if(ne)return!1;var t=!1,e=window.navigator.userAgent||window.navigator.vendor||window.opera;return function(i){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(t=!0)}(e),t=t||!t&&/(android)/i.test(e.substr(0,40)),t}(),RW=()=>ne?!1:window.matchMedia("(max-aspect-ratio: 1:1)")?"portrait":"landscape",Wl=()=>{if(ne)return"mouse";let t=window.matchMedia("(hover:hover)"),e=window.matchMedia("(hover:none)"),i=window.matchMedia("(any-pointer:fine)"),r=window.matchMedia("(pointer:coarse)"),n=window.matchMedia("(pointer:none)");if(e.matches&&r.matches&&!i.matches)return"touch";if(t.matches&&i.matches)return"mouse"},sd=()=>ne?!1:navigator?.userAgent?.includes("Mac"),NW=()=>ne?!1:/Firefox\/\d+\.\d+/.test(navigator.userAgent),mo=()=>ne?!1:navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1,OW=()=>ne?!1:window.chrome!==null&&navigator.userAgent.indexOf("Chrome")!=-1&&navigator.vendor==="Google Inc."&&typeof window.opr>"u"&&navigator.userAgent.indexOf("Edg")==-1,g6=()=>ne?!1:/MSIE (\d+\.\d+);/.test(navigator.userAgent),DW=()=>ne?!1:/Edge/.test(navigator.userAgent),LW=()=>{if(ne)return!1;var t=-1;if(g6()){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");e.exec(navigator.userAgent)!=null&&(t=parseFloat(RegExp.$1))}return t<9&&t>0},ld=()=>ne?!1:!!navigator.userAgent.match(/i(Phone|Pod|Pad)/i),FW=()=>{if(ne)return!1;var t=window.navigator.standalone,e=window.navigator.userAgent.toLowerCase(),i=/safari/.test(e),r=/iphone|ipod|ipad/.test(e);if(r){if(!t&&i)return!1;if(t&&!i)return!1;if(!t&&!i)return!0}return!1},zW=(t,e)=>{for(var i in e)t=t.replace(new RegExp(i,"g"),e[i]);return t},ef=t=>t?t.page_type==="set"?!0:!(t.display===!1||t.pin||t.overlay):!1,HW=t=>t<770,UW=t=>{let e=t.indexOf("matrix(")>-1,i=t.indexOf("matrix3d(")>-1,r,n;return e?(r=t.replace("matrix(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Xh(r[0],r[1],r[2],r[3],r[4],r[5],!1)):i?(r=t.replace("matrix3d(","").replace(")").split(", ").map(o=>parseFloat(o)),n=Xh(r[0],r[1],r[4],r[5],r[12],r[13],!1),n.translate.z=r[14]):n=Xh(0,0,0,0,0,0,!1),n},qW=t=>{let e=t.hasOwnProperty("translate"),i=t.hasOwnProperty("scale"),r=i&&t.scale.x||1,n=i&&t.scale.y||1,o=e&&t.translate.x||0,s=e&&t.translate.y||0,u=e&&t.translate.z||0,c=t.rotation||0,d=e&&t.translate.hasOwnProperty("z"),p;if(d){let g=[Math.cos(c)/r,-Math.sin(c),0,o,Math.sin(c),Math.cos(c)/n,0,s,0,0,1,u,0,0,0,1];p=`matrix3d(${g[0]}, ${g[4]}, ${g[8]}, ${g[12]}, ${g[1]}, ${g[5]}, ${g[9]}, ${g[13]}, ${g[2]}, ${g[6]}, ${g[10]}, ${g[14]}, ${g[3]}, ${g[7]}, ${g[11]}, ${g[15]})`}else{let g=[Math.cos(c)/r,-Math.sin(c),o,Math.sin(c),Math.cos(c)/n,s,0,0,1];p=`matrix(${g[0]}, ${g[3]}, ${g[1]}, ${g[4]}, ${g[2]}, ${g[5]})`}return p},Xh=(t=0,e=0,i=0,r=0,n=0,o=0,s=!1)=>{var u=Math.acos,c=Math.atan,d=Math.sqrt,p=Math.PI,g={x:n,y:o},v=0,b={x:1,y:1},S={x:0,y:0},_=t*r-e*i;if(s)t?(S={x:c(i/t),y:c(e/t)},b={x:t,y:_/t}):e?(v=p*.5,b={x:e,y:_/e},S.x=c(r/e)):(b={x:i,y:r},S.x=p*.25);else if(t||e){var E=d(t*t+e*e);v=e>0?u(t/E):-u(t/E),b={x:E,y:_/E},S.x=c((t*i+e*r)/(E*E))}else if(i||r){var I=d(i*i+r*r);v=p*.5-(r>0?u(-i/I):-u(i/I)),b={x:_/I,y:I},S.y=c((t*i+e*r)/(I*I))}else b={x:0,y:0};return{scale:b,translate:g,rotation:v,skew:S}},Jt=(t,e)=>{t=t?.toString()||"",t=t.replace(/^\.(\d+)/,"0.$1");let i=t.replace(/[^\d.-]/g,""),r=t.replace(i+"","").trim();return i=parseFloat(i),r===""&&e!==void 0?r=e:(r.indexOf("var(")>-1||r.indexOf("calc(")>-1)&&(i="",r=t),[i,r]},iv=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,rv=t=>1-Math.pow(-1*t+1,3),nv=t=>t>=1?1:-(Math.cos(Math.PI*t)-1)/2,at=t=>{let e={},i=r=>{r.forEach(n=>{if(n.type=="color"&&n.tabs?n.tabs.forEach(o=>{e[o.name]=o.value}):n.type=="checkbox-color"&&i([n.checkbox,n.color]),n.value!=null&&n.value!=null){e[n.name]={value:n.value},n.values&&(n.type==="radio"||n.type==="select")&&(e[n.name].values=n.values.map(s=>s.value)),e[n.name].type=n.type,n.excludeFromShuffle!==void 0&&(e[n.name].excludeFromShuffle=n.excludeFromShuffle);let o;n.defaultUnit!==void 0&&(o=e.unit=n.defaultUnit),n.min!==void 0&&(typeof n.min=="object"?e[n.name].min=n.min[o]??n.min.etc??0:e[n.name].min=n.min),n.max!==void 0&&(typeof n.max=="object"?e[n.name].max=n.max[o]??n.max.etc??0:e[n.name].max=n.max),typeof n.step=="object"?e[n.name].step=n.step[o]??n.step.etc??1:e[n.name].step=n.step,n.inheritsFrom&&(e[n.name].inheritsFrom=n.inheritsFrom),n.unit&&(e[n.name].unit=n.unit)}n.toggle&&i([n.toggle]),n.children&&i(n.children)})};return i(t),e},BW=(t,e={width:250})=>{let i=null,r=null,n=t.toLowerCase();if(n.endsWith(".mov")||n.endsWith(".mp4")||n.endsWith(".webm"))return{fileType:"video",oembedURL:null,id:null};if(n.endsWith(".png")||n.endsWith(".webp")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".avif")||n.endsWith(".apng")||n.endsWith(".svg"))return{fileType:"image",oembedURL:null,id:null};i="url";var o="",s="",u="",c=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,g=t.match(c);if(g&&g[0]){let v=g[0].split(/\/|\?h=|&|\?/);for(var d=0;d<v.length;d++)!v[d].includes(":")&&!v[d].includes(".")&&!v[d].includes("vimeo")&&!v[d].includes("=")&&!v[d].includes("video")&&!v[d].includes("showcase")&&!v[d].includes("player")&&v[d].length>3&&(o.length==0?o=v[d]:o+="/"+v[d]);i="vimeo",r="https://vimeo.com/api/oembed.json?url=https://vimeo.com/"+o+"&width="+e.width}var p=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,g=t.match(p);return g&&g[7].length==11&&(o=g[7],i="youtube",o?r="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+o:r="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+(t.indexOf("?")>-1?t.split("?")[0]:t)),{fileType:i,oembedURL:r,id:o}},WW=(...t)=>{let e=t.filter(Boolean);return e.length?e.length===0?e[0]:i=>{for(let r of e)typeof r=="function"?r(i):r&&(r.current=i)}:null},VW=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.width)-((parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0)+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0)):parseFloat(e.width)},$W=t=>{var e=getComputedStyle(t,null);return e.getPropertyValue("box-sizing")==="border-box"?parseFloat(e.height)-((parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)):parseFloat(e.height)},Fs=(t,e)=>{var i=t&&(e(t)?t:Fs(t.parentNode,e));return i||null},jW=(t,e,i)=>t>i?i:t<e?e:t,GW=t=>{let e=new Date,r=new Date(t).getTime()-e.getTime(),n=Math.floor(r/(1e3*60*60*24));return n>0&&n<=15},KW=t=>(t=Jh.default.filter(t,e=>{var i=e.getAttribute("href");return!(i&&(i===""||i=="#"||i.indexOf("mailto:")==0||i.indexOf("tel:")==0))}),t),YW=t=>{if(!t)return[null,null];let e=/(\.[^.]+)$/,i=t.match(e);if(i){let r=i[1],n=t.slice(0,-r.length);return[r,n]}else return[null,t]},ZW=t=>{if(!t)return!0;let e=new Date(t),i=Math.floor(e.getTime()/1e3),n=Math.floor(Date.now()/1e3)-15*24*60*60;return i>=n},ov=(t,e,i)=>{let r=t.pages.byId[i],n=e.getHomepageId(t),o=e.getHiddenHomepageId(t),s=t.sets.byId[Jh.default.findKey(t.structure.byParent,d=>d.includes(n))],u=t.sets.byId[Jh.default.findKey(t.structure.byParent,d=>d.includes(i))],c=i;if(t.sets.byId.root?.stack===!0)r?.display===!1?c=r.id:c=u?.id||"root";else if(r){if(r.pin||r.overlay||u?.stack)if(c=u?.id,(r.pin||r.overlay)&&u?.stack===!1){if(u?.id===s?.id&&(c="root"),u.page_count>=1){let d=t.structure.byParent[u.id]?.filter(p=>t.structure.indexById[p]!==null&&t.sets.byId[p]===void 0&&t.pages.byId[p]?.password_enabled!==!0&&p!==o);d.length>0&&(d.includes(n)?c=n:c=d[0])}}else r?.display===!1&&u?.stack===!0&&(c=r.id);else c=r.id;c==="root"&&n&&(c=n)}return c},XW=(t=!0)=>{if(ne)return;document.querySelectorAll("html, body, #templates, #siteslist").forEach(i=>{if(i.scrollHeight>i.clientHeight)if(t){if(i.style.overflow==="hidden")return;!i.dataset.originalOverflow&&i.style.overflow!==""&&(i.dataset.originalOverflow=i.style.overflow),i.style.overflow="hidden"}else if(i.dataset.originalOverflow!==void 0)i.style.overflow=i.dataset.originalOverflow,delete i.dataset.originalOverflow;else{if(i.style.overflow!=="hidden")return;i.style.removeProperty("overflow")}})},JW=(t,e=!0)=>{let i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(!t)return;let r=new Date(t),n=r.getDate(),o=parseInt(r.getMonth()),s=i[o],u=r.getFullYear(),c=r.getHours()%12===0?12:r.getHours()%12,d=r.getMinutes().toString().match(/\d/g).length===1?"0"+r.getMinutes():r.getMinutes(),p="0"+r.getSeconds(),g=r.getHours()>=12?"pm":"am",v=new Date().setHours(0,0,0,0),b=v-864e5,S=null;return t>=v&&(S="today"),t<=v&&t>=b&&(S="yesterday"),e?S!==null?S+", "+c+":"+d+g:s+" "+n+" "+u+", "+c+":"+d+g:(u=u.toString().slice(2),s+" "+n+" \u2018"+u)},QW=t=>{if(!isNaN(Number(t))&&Number(t)>1e9)return Math.floor(Number(t));typeof t=="string"&&t.includes(".")&&(t=t.split(".")[0]+"Z");let e=new Date(t);return isNaN(e.getTime())?(console.warn("Invalid timestamp format"),0):Math.floor(e.getTime()/1e3)}});var av=$((Spe,v6)=>{"use strict";v6.exports=function(e,i){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(i,n)}}});var qi=$((_pe,w6)=>{"use strict";var eV=av(),lv=Object.prototype.toString,uv=function(t){return function(e){var i=lv.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())}}(Object.create(null));function zs(t){return t=t.toLowerCase(),function(i){return uv(i)===t}}function cv(t){return Array.isArray(t)}function rf(t){return typeof t>"u"}function tV(t){return t!==null&&!rf(t)&&t.constructor!==null&&!rf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var b6=zs("ArrayBuffer");function iV(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&b6(t.buffer),e}function rV(t){return typeof t=="string"}function nV(t){return typeof t=="number"}function y6(t){return t!==null&&typeof t=="object"}function tf(t){if(uv(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var oV=zs("Date"),aV=zs("File"),sV=zs("Blob"),lV=zs("FileList");function dv(t){return lv.call(t)==="[object Function]"}function uV(t){return y6(t)&&dv(t.pipe)}function cV(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||lv.call(t)===e||dv(t.toString)&&t.toString()===e)}var dV=zs("URLSearchParams");function pV(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function hV(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function pv(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),cv(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function sv(){var t={};function e(n,o){tf(t[o])&&tf(n)?t[o]=sv(t[o],n):tf(n)?t[o]=sv({},n):cv(n)?t[o]=n.slice():t[o]=n}for(var i=0,r=arguments.length;i<r;i++)pv(arguments[i],e);return t}function fV(t,e,i){return pv(e,function(n,o){i&&typeof n=="function"?t[o]=eV(n,i):t[o]=n}),t}function mV(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function gV(t,e,i,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,i&&Object.assign(t.prototype,i)}function vV(t,e,i){var r,n,o,s={};e=e||{};do{for(r=Object.getOwnPropertyNames(t),n=r.length;n-- >0;)o=r[n],s[o]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e}function bV(t,e,i){t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;var r=t.indexOf(e,i);return r!==-1&&r===i}function yV(t){if(!t)return null;var e=t.length;if(rf(e))return null;for(var i=new Array(e);e-- >0;)i[e]=t[e];return i}var wV=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));w6.exports={isArray:cv,isArrayBuffer:b6,isBuffer:tV,isFormData:cV,isArrayBufferView:iV,isString:rV,isNumber:nV,isObject:y6,isPlainObject:tf,isUndefined:rf,isDate:oV,isFile:aV,isBlob:sV,isFunction:dv,isStream:uV,isURLSearchParams:dV,isStandardBrowserEnv:hV,forEach:pv,merge:sv,extend:fV,trim:pV,stripBOM:mV,inherits:gV,toFlatObject:vV,kindOf:uv,kindOfTest:zs,endsWith:bV,toArray:yV,isTypedArray:wV,isFileList:lV}});var hv=$((Epe,C6)=>{"use strict";var Vl=qi();function x6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}C6.exports=function(e,i,r){if(!i)return e;var n;if(r)n=r(i);else if(Vl.isURLSearchParams(i))n=i.toString();else{var o=[];Vl.forEach(i,function(c,d){c===null||typeof c>"u"||(Vl.isArray(c)?d=d+"[]":c=[c],Vl.forEach(c,function(g){Vl.isDate(g)?g=g.toISOString():Vl.isObject(g)&&(g=JSON.stringify(g)),o.push(x6(d)+"="+x6(g))}))}),n=o.join("&")}if(n){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}});var _6=$((Ppe,S6)=>{"use strict";var xV=qi();function nf(){this.handlers=[]}nf.prototype.use=function(e,i,r){return this.handlers.push({fulfilled:e,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};nf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};nf.prototype.forEach=function(e){xV.forEach(this.handlers,function(r){r!==null&&e(r)})};S6.exports=nf});var P6=$((Ipe,E6)=>{"use strict";var CV=qi();E6.exports=function(e,i){CV.forEach(e,function(n,o){o!==i&&o.toUpperCase()===i.toUpperCase()&&(e[i]=n,delete e[o])})}});var Hs=$((Tpe,M6)=>{"use strict";var I6=qi();function $l(t,e,i,r,n){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n)}I6.inherits($l,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var T6=$l.prototype,A6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){A6[t]={value:t}});Object.defineProperties($l,A6);Object.defineProperty(T6,"isAxiosError",{value:!0});$l.from=function(t,e,i,r,n,o){var s=Object.create(T6);return I6.toFlatObject(t,s,function(c){return c!==Error.prototype}),$l.call(s,t.message,e,i,r,n),s.name=t.name,o&&Object.assign(s,o),s};M6.exports=$l});var fv=$((Ape,k6)=>{"use strict";k6.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var mv=$((Mpe,R6)=>{"use strict";var Wn=qi();function SV(t,e){e=e||new FormData;var i=[];function r(o){return o===null?"":Wn.isDate(o)?o.toISOString():Wn.isArrayBuffer(o)||Wn.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function n(o,s){if(Wn.isPlainObject(o)||Wn.isArray(o)){if(i.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);i.push(o),Wn.forEach(o,function(c,d){if(!Wn.isUndefined(c)){var p=s?s+"."+d:d,g;if(c&&!s&&typeof c=="object"){if(Wn.endsWith(d,"{}"))c=JSON.stringify(c);else if(Wn.endsWith(d,"[]")&&(g=Wn.toArray(c))){g.forEach(function(v){!Wn.isUndefined(v)&&e.append(p,r(v))});return}}n(c,p)}}),i.pop()}else e.append(s,r(o))}return n(t),e}R6.exports=SV});var O6=$((kpe,N6)=>{"use strict";var gv=Hs();N6.exports=function(e,i,r){var n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):i(new gv("Request failed with status code "+r.status,[gv.ERR_BAD_REQUEST,gv.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}});var L6=$((Rpe,D6)=>{"use strict";var of=qi();D6.exports=of.isStandardBrowserEnv()?function(){return{write:function(i,r,n,o,s,u){var c=[];c.push(i+"="+encodeURIComponent(r)),of.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),of.isString(o)&&c.push("path="+o),of.isString(s)&&c.push("domain="+s),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var r=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var z6=$((Npe,F6)=>{"use strict";F6.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var U6=$((Ope,H6)=>{"use strict";H6.exports=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}});var vv=$((Dpe,q6)=>{"use strict";var _V=z6(),EV=U6();q6.exports=function(e,i){return e&&!_V(i)?EV(e,i):i}});var W6=$((Lpe,B6)=>{"use strict";var bv=qi(),PV=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];B6.exports=function(e){var i={},r,n,o;return e&&bv.forEach(e.split(`
`),function(u){if(o=u.indexOf(":"),r=bv.trim(u.substr(0,o)).toLowerCase(),n=bv.trim(u.substr(o+1)),r){if(i[r]&&PV.indexOf(r)>=0)return;r==="set-cookie"?i[r]=(i[r]?i[r]:[]).concat([n]):i[r]=i[r]?i[r]+", "+n:n}}),i}});var j6=$((Fpe,$6)=>{"use strict";var V6=qi();$6.exports=V6.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r;function n(o){var s=o;return e&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=n(window.location.href),function(s){var u=V6.isString(s)?n(s):s;return u.protocol===r.protocol&&u.host===r.host}}():function(){return function(){return!0}}()});var ud=$((zpe,K6)=>{"use strict";var yv=Hs(),IV=qi();function G6(t){yv.call(this,t??"canceled",yv.ERR_CANCELED),this.name="CanceledError"}IV.inherits(G6,yv,{__CANCEL__:!0});K6.exports=G6});var Z6=$((Hpe,Y6)=>{"use strict";Y6.exports=function(e){var i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}});var wv=$((Upe,X6)=>{"use strict";var cd=qi(),TV=O6(),AV=L6(),MV=hv(),kV=vv(),RV=W6(),NV=j6(),OV=fv(),ra=Hs(),DV=ud(),LV=Z6();X6.exports=function(e){return new Promise(function(r,n){var o=e.data,s=e.headers,u=e.responseType,c;function d(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}cd.isFormData(o)&&cd.isStandardBrowserEnv()&&delete s["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(g+":"+v)}var b=kV(e.baseURL,e.url);p.open(e.method.toUpperCase(),MV(b,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function S(){if(p){var I="getAllResponseHeaders"in p?RV(p.getAllResponseHeaders()):null,F=!u||u==="text"||u==="json"?p.responseText:p.response,O={data:F,status:p.status,statusText:p.statusText,headers:I,config:e,request:p};TV(function(z){r(z),d()},function(z){n(z),d()},O),p=null}}if("onloadend"in p?p.onloadend=S:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(S)},p.onabort=function(){p&&(n(new ra("Request aborted",ra.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new ra("Network Error",ra.ERR_NETWORK,e,p,p)),p=null},p.ontimeout=function(){var F=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",O=e.transitional||OV;e.timeoutErrorMessage&&(F=e.timeoutErrorMessage),n(new ra(F,O.clarifyTimeoutError?ra.ETIMEDOUT:ra.ECONNABORTED,e,p)),p=null},cd.isStandardBrowserEnv()){var _=(e.withCredentials||NV(b))&&e.xsrfCookieName?AV.read(e.xsrfCookieName):void 0;_&&(s[e.xsrfHeaderName]=_)}"setRequestHeader"in p&&cd.forEach(s,function(F,O){typeof o>"u"&&O.toLowerCase()==="content-type"?delete s[O]:p.setRequestHeader(O,F)}),cd.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),u&&u!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(I){p&&(n(!I||I&&I.type?new DV:I),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),o||(o=null);var E=LV(b);if(E&&["http","https","file"].indexOf(E)===-1){n(new ra("Unsupported protocol "+E+":",ra.ERR_BAD_REQUEST,e));return}p.send(o)})}});var Q6=$((qpe,J6)=>{J6.exports=null});var sf=$((Bpe,r4)=>{"use strict";var Bi=qi(),e4=P6(),t4=Hs(),FV=fv(),zV=mv(),HV={"Content-Type":"application/x-www-form-urlencoded"};function i4(t,e){!Bi.isUndefined(t)&&Bi.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function UV(){var t;return typeof XMLHttpRequest<"u"?t=wv():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=wv()),t}function qV(t,e,i){if(Bi.isString(t))try{return(e||JSON.parse)(t),Bi.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(t)}var af={transitional:FV,adapter:UV(),transformRequest:[function(e,i){if(e4(i,"Accept"),e4(i,"Content-Type"),Bi.isFormData(e)||Bi.isArrayBuffer(e)||Bi.isBuffer(e)||Bi.isStream(e)||Bi.isFile(e)||Bi.isBlob(e))return e;if(Bi.isArrayBufferView(e))return e.buffer;if(Bi.isURLSearchParams(e))return i4(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=Bi.isObject(e),n=i&&i["Content-Type"],o;if((o=Bi.isFileList(e))||r&&n==="multipart/form-data"){var s=this.env&&this.env.FormData;return zV(o?{"files[]":e}:e,s&&new s)}else if(r||n==="application/json")return i4(i,"application/json"),qV(e);return e}],transformResponse:[function(e){var i=this.transitional||af.transitional,r=i&&i.silentJSONParsing,n=i&&i.forcedJSONParsing,o=!r&&this.responseType==="json";if(o||n&&Bi.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?t4.from(s,t4.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q6()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bi.forEach(["delete","get","head"],function(e){af.headers[e]={}});Bi.forEach(["post","put","patch"],function(e){af.headers[e]=Bi.merge(HV)});r4.exports=af});var o4=$((Wpe,n4)=>{"use strict";var BV=qi(),WV=sf();n4.exports=function(e,i,r){var n=this||WV;return BV.forEach(r,function(s){e=s.call(n,e,i)}),e}});var xv=$((Vpe,a4)=>{"use strict";a4.exports=function(e){return!!(e&&e.__CANCEL__)}});var u4=$(($pe,l4)=>{"use strict";var s4=qi(),Cv=o4(),VV=xv(),$V=sf(),jV=ud();function Sv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new jV}l4.exports=function(e){Sv(e),e.headers=e.headers||{},e.data=Cv.call(e,e.data,e.headers,e.transformRequest),e.headers=s4.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),s4.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var i=e.adapter||$V.adapter;return i(e).then(function(n){return Sv(e),n.data=Cv.call(e,n.data,n.headers,e.transformResponse),n},function(n){return VV(n)||(Sv(e),n&&n.response&&(n.response.data=Cv.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})}});var _v=$((jpe,c4)=>{"use strict";var on=qi();c4.exports=function(e,i){i=i||{};var r={};function n(p,g){return on.isPlainObject(p)&&on.isPlainObject(g)?on.merge(p,g):on.isPlainObject(g)?on.merge({},g):on.isArray(g)?g.slice():g}function o(p){if(on.isUndefined(i[p])){if(!on.isUndefined(e[p]))return n(void 0,e[p])}else return n(e[p],i[p])}function s(p){if(!on.isUndefined(i[p]))return n(void 0,i[p])}function u(p){if(on.isUndefined(i[p])){if(!on.isUndefined(e[p]))return n(void 0,e[p])}else return n(void 0,i[p])}function c(p){if(p in i)return n(e[p],i[p]);if(p in e)return n(void 0,e[p])}var d={url:s,method:s,data:s,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:c};return on.forEach(Object.keys(e).concat(Object.keys(i)),function(g){var v=d[g]||o,b=v(g);on.isUndefined(b)&&v!==c||(r[g]=b)}),r}});var Ev=$((Gpe,d4)=>{d4.exports={version:"0.27.2"}});var f4=$((Kpe,h4)=>{"use strict";var GV=Ev().version,La=Hs(),Pv={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Pv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var p4={};Pv.transitional=function(e,i,r){function n(o,s){return"[Axios v"+GV+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return function(o,s,u){if(e===!1)throw new La(n(s," has been removed"+(i?" in "+i:"")),La.ERR_DEPRECATED);return i&&!p4[s]&&(p4[s]=!0,console.warn(n(s," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(o,s,u):!0}};function KV(t,e,i){if(typeof t!="object")throw new La("options must be an object",La.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),n=r.length;n-- >0;){var o=r[n],s=e[o];if(s){var u=t[o],c=u===void 0||s(u,o,t);if(c!==!0)throw new La("option "+o+" must be "+c,La.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new La("Unknown option "+o,La.ERR_BAD_OPTION)}}h4.exports={assertOptions:KV,validators:Pv}});var w4=$((Ype,y4)=>{"use strict";var v4=qi(),YV=hv(),m4=_6(),g4=u4(),lf=_v(),ZV=vv(),b4=f4(),jl=b4.validators;function Gl(t){this.defaults=t,this.interceptors={request:new m4,response:new m4}}Gl.prototype.request=function(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=lf(this.defaults,i),i.method?i.method=i.method.toLowerCase():this.defaults.method?i.method=this.defaults.method.toLowerCase():i.method="get";var r=i.transitional;r!==void 0&&b4.assertOptions(r,{silentJSONParsing:jl.transitional(jl.boolean),forcedJSONParsing:jl.transitional(jl.boolean),clarifyTimeoutError:jl.transitional(jl.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(i)===!1||(o=o&&b.synchronous,n.unshift(b.fulfilled,b.rejected))});var s=[];this.interceptors.response.forEach(function(b){s.push(b.fulfilled,b.rejected)});var u;if(!o){var c=[g4,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(s),u=Promise.resolve(i);c.length;)u=u.then(c.shift(),c.shift());return u}for(var d=i;n.length;){var p=n.shift(),g=n.shift();try{d=p(d)}catch(v){g(v);break}}try{u=g4(d)}catch(v){return Promise.reject(v)}for(;s.length;)u=u.then(s.shift(),s.shift());return u};Gl.prototype.getUri=function(e){e=lf(this.defaults,e);var i=ZV(e.baseURL,e.url);return YV(i,e.params,e.paramsSerializer)};v4.forEach(["delete","get","head","options"],function(e){Gl.prototype[e]=function(i,r){return this.request(lf(r||{},{method:e,url:i,data:(r||{}).data}))}});v4.forEach(["post","put","patch"],function(e){function i(r){return function(o,s,u){return this.request(lf(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Gl.prototype[e]=i(),Gl.prototype[e+"Form"]=i(!0)});y4.exports=Gl});var C4=$((Zpe,x4)=>{"use strict";var XV=ud();function Kl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(n){e=n});var i=this;this.promise.then(function(r){if(i._listeners){var n,o=i._listeners.length;for(n=0;n<o;n++)i._listeners[n](r);i._listeners=null}}),this.promise.then=function(r){var n,o=new Promise(function(s){i.subscribe(s),n=s}).then(r);return o.cancel=function(){i.unsubscribe(n)},o},t(function(n){i.reason||(i.reason=new XV(n),e(i.reason))})}Kl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Kl.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Kl.prototype.unsubscribe=function(e){if(this._listeners){var i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}};Kl.source=function(){var e,i=new Kl(function(n){e=n});return{token:i,cancel:e}};x4.exports=Kl});var _4=$((Xpe,S4)=>{"use strict";S4.exports=function(e){return function(r){return e.apply(null,r)}}});var P4=$((Jpe,E4)=>{"use strict";var JV=qi();E4.exports=function(e){return JV.isObject(e)&&e.isAxiosError===!0}});var A4=$((Qpe,Iv)=>{"use strict";var I4=qi(),QV=av(),uf=w4(),e$=_v(),t$=sf();function T4(t){var e=new uf(t),i=QV(uf.prototype.request,e);return I4.extend(i,uf.prototype,e),I4.extend(i,e),i.create=function(n){return T4(e$(t,n))},i}var Ur=T4(t$);Ur.Axios=uf;Ur.CanceledError=ud();Ur.CancelToken=C4();Ur.isCancel=xv();Ur.VERSION=Ev().version;Ur.toFormData=mv();Ur.AxiosError=Hs();Ur.Cancel=Ur.CanceledError;Ur.all=function(e){return Promise.all(e)};Ur.spread=_4();Ur.isAxiosError=P4();Iv.exports=Ur;Iv.exports.default=Ur});var Sn=$((ehe,M4)=>{M4.exports=A4()});function Fa(t){"@babel/helpers - typeof";return Fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(t)}var Tv=T(()=>{});function Av(t,e){if(Fa(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Fa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k4=T(()=>{Tv()});function Mv(t){var e=Av(t,"string");return Fa(e)=="symbol"?e:String(e)}var R4=T(()=>{Tv();k4()});function kv(t,e,i){return e=Mv(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var N4=T(()=>{R4()});function O4(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function cf(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(i),!0).forEach(function(r){kv(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O4(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}var D4=T(()=>{N4()});var z4={};ai(z4,{__DO_NOT_USE__ActionTypes:()=>dd,applyMiddleware:()=>Nv,bindActionCreators:()=>Pt,combineReducers:()=>Vn,compose:()=>df,createStore:()=>pd,legacy_createStore:()=>r$});function nr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}function i$(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pd(t,e,i){var r;if(typeof e=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(nr(0));if(typeof e=="function"&&typeof i>"u"&&(i=e,e=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(nr(1));return i(pd)(t,e)}if(typeof t!="function")throw new Error(nr(2));var n=t,o=e,s=[],u=s,c=!1;function d(){u===s&&(u=s.slice())}function p(){if(c)throw new Error(nr(3));return o}function g(_){if(typeof _!="function")throw new Error(nr(4));if(c)throw new Error(nr(5));var E=!0;return d(),u.push(_),function(){if(E){if(c)throw new Error(nr(6));E=!1,d();var F=u.indexOf(_);u.splice(F,1),s=null}}}function v(_){if(!i$(_))throw new Error(nr(7));if(typeof _.type>"u")throw new Error(nr(8));if(c)throw new Error(nr(9));try{c=!0,o=n(o,_)}finally{c=!1}for(var E=s=u,I=0;I<E.length;I++){var F=E[I];F()}return _}function b(_){if(typeof _!="function")throw new Error(nr(10));n=_,v({type:dd.REPLACE})}function S(){var _,E=g;return _={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(nr(11));function O(){F.next&&F.next(p())}O();var L=E(O);return{unsubscribe:L}}},_[L4]=function(){return this},_}return v({type:dd.INIT}),r={dispatch:v,subscribe:g,getState:p,replaceReducer:b},r[L4]=S,r}function n$(t){Object.keys(t).forEach(function(e){var i=t[e],r=i(void 0,{type:dd.INIT});if(typeof r>"u")throw new Error(nr(12));if(typeof i(void 0,{type:dd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(nr(13))})}function Vn(t){for(var e=Object.keys(t),i={},r=0;r<e.length;r++){var n=e[r];typeof t[n]=="function"&&(i[n]=t[n])}var o=Object.keys(i),s,u;try{n$(i)}catch(c){u=c}return function(d,p){if(d===void 0&&(d={}),u)throw u;if(0)var g;for(var v=!1,b={},S=0;S<o.length;S++){var _=o[S],E=i[_],I=d[_],F=E(I,p);if(typeof F>"u"){var O=p&&p.type;throw new Error(nr(14))}b[_]=F,v=v||F!==I}return v=v||o.length!==Object.keys(d).length,v?b:d}}function F4(t,e){return function(){return e(t.apply(this,arguments))}}function Pt(t,e){if(typeof t=="function")return F4(t,e);if(typeof t!="object"||t===null)throw new Error(nr(16));var i={};for(var r in t){var n=t[r];typeof n=="function"&&(i[r]=F4(n,e))}return i}function df(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,n){return function(){return r(n.apply(void 0,arguments))}})}function Nv(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return function(){var n=r.apply(void 0,arguments),o=function(){throw new Error(nr(15))},s={getState:n.getState,dispatch:function(){return o.apply(void 0,arguments)}},u=e.map(function(c){return c(s)});return o=df.apply(void 0,u)(n.dispatch),cf(cf({},n),{},{dispatch:o})}}}var L4,Rv,dd,r$,di=T(()=>{D4();L4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Rv=function(){return Math.random().toString(36).substring(7).split("").join(".")},dd={INIT:"@@redux/INIT"+Rv(),REPLACE:"@@redux/REPLACE"+Rv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Rv()}};r$=pd});var Ov=$($n=>{"use strict";$n.__esModule=!0;$n.createDynamicMiddlewares=$n.resetMiddlewares=$n.removeMiddleware=$n.addMiddleware=void 0;var o$=(di(),Lc(z4)),H4=function(){var e=[],i=[],r=void 0,n=function(d){return r=d,function(p){return function(g){return o$.compose.apply(void 0,i)(p)(g)}}},o=function(){for(var d,p,g=arguments.length,v=Array(g),b=0;b<g;b++)v[b]=arguments[b];(d=i).push.apply(d,v.map(function(S){return S(r)})),(p=e).push.apply(p,v)},s=function(d){var p=e.findIndex(function(g){return g===d});if(p===-1){console.error("Middleware does not exist!",d);return}e=e.filter(function(g,v){return v!==p}),i=i.filter(function(g,v){return v!==p})},u=function(){i=[],e=[]};return{enhancer:n,addMiddleware:o,removeMiddleware:s,resetMiddlewares:u}},pf=H4();$n.default=pf.enhancer;var a$=pf.addMiddleware,s$=pf.removeMiddleware,l$=pf.resetMiddlewares;$n.addMiddleware=a$;$n.removeMiddleware=s$;$n.resetMiddlewares=l$;$n.createDynamicMiddlewares=H4});function U4(t){var e=function(r){var n=r.dispatch,o=r.getState;return function(s){return function(u){return typeof u=="function"?u(n,o,t):s(u)}}};return e}var q4,B4,W4=T(()=>{q4=U4();q4.withExtraArgument=U4;B4=q4});var $4=$((fhe,V4)=>{function u$(){this.__data__=[],this.size=0}V4.exports=u$});var Yl=$((mhe,j4)=>{function c$(t,e){return t===e||t!==t&&e!==e}j4.exports=c$});var hd=$((ghe,G4)=>{var d$=Yl();function p$(t,e){for(var i=t.length;i--;)if(d$(t[i][0],e))return i;return-1}G4.exports=p$});var Y4=$((vhe,K4)=>{var h$=hd(),f$=Array.prototype,m$=f$.splice;function g$(t){var e=this.__data__,i=h$(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():m$.call(e,i,1),--this.size,!0}K4.exports=g$});var X4=$((bhe,Z4)=>{var v$=hd();function b$(t){var e=this.__data__,i=v$(e,t);return i<0?void 0:e[i][1]}Z4.exports=b$});var Q4=$((yhe,J4)=>{var y$=hd();function w$(t){return y$(this.__data__,t)>-1}J4.exports=w$});var t7=$((whe,e7)=>{var x$=hd();function C$(t,e){var i=this.__data__,r=x$(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}e7.exports=C$});var fd=$((xhe,i7)=>{var S$=$4(),_$=Y4(),E$=X4(),P$=Q4(),I$=t7();function Zl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Zl.prototype.clear=S$;Zl.prototype.delete=_$;Zl.prototype.get=E$;Zl.prototype.has=P$;Zl.prototype.set=I$;i7.exports=Zl});var n7=$((Che,r7)=>{var T$=fd();function A$(){this.__data__=new T$,this.size=0}r7.exports=A$});var a7=$((She,o7)=>{function M$(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}o7.exports=M$});var l7=$((_he,s7)=>{function k$(t){return this.__data__.get(t)}s7.exports=k$});var c7=$((Ehe,u7)=>{function R$(t){return this.__data__.has(t)}u7.exports=R$});var Dv=$((Phe,d7)=>{var N$=typeof global=="object"&&global&&global.Object===Object&&global;d7.exports=N$});var jn=$((Ihe,p7)=>{var O$=Dv(),D$=typeof self=="object"&&self&&self.Object===Object&&self,L$=O$||D$||Function("return this")();p7.exports=L$});var md=$((The,h7)=>{var F$=jn(),z$=F$.Symbol;h7.exports=z$});var v7=$((Ahe,g7)=>{var f7=md(),m7=Object.prototype,H$=m7.hasOwnProperty,U$=m7.toString,gd=f7?f7.toStringTag:void 0;function q$(t){var e=H$.call(t,gd),i=t[gd];try{t[gd]=void 0;var r=!0}catch{}var n=U$.call(t);return r&&(e?t[gd]=i:delete t[gd]),n}g7.exports=q$});var y7=$((Mhe,b7)=>{var B$=Object.prototype,W$=B$.toString;function V$(t){return W$.call(t)}b7.exports=V$});var Us=$((khe,C7)=>{var w7=md(),$$=v7(),j$=y7(),G$="[object Null]",K$="[object Undefined]",x7=w7?w7.toStringTag:void 0;function Y$(t){return t==null?t===void 0?K$:G$:x7&&x7 in Object(t)?$$(t):j$(t)}C7.exports=Y$});var go=$((Rhe,S7)=>{function Z$(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}S7.exports=Z$});var hf=$((Nhe,_7)=>{var X$=Us(),J$=go(),Q$="[object AsyncFunction]",ej="[object Function]",tj="[object GeneratorFunction]",ij="[object Proxy]";function rj(t){if(!J$(t))return!1;var e=X$(t);return e==ej||e==tj||e==Q$||e==ij}_7.exports=rj});var P7=$((Ohe,E7)=>{var nj=jn(),oj=nj["__core-js_shared__"];E7.exports=oj});var A7=$((Dhe,T7)=>{var Lv=P7(),I7=function(){var t=/[^.]+$/.exec(Lv&&Lv.keys&&Lv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function aj(t){return!!I7&&I7 in t}T7.exports=aj});var Fv=$((Lhe,M7)=>{var sj=Function.prototype,lj=sj.toString;function uj(t){if(t!=null){try{return lj.call(t)}catch{}try{return t+""}catch{}}return""}M7.exports=uj});var R7=$((Fhe,k7)=>{var cj=hf(),dj=A7(),pj=go(),hj=Fv(),fj=/[\\^$.*+?()[\]{}|]/g,mj=/^\[object .+?Constructor\]$/,gj=Function.prototype,vj=Object.prototype,bj=gj.toString,yj=vj.hasOwnProperty,wj=RegExp("^"+bj.call(yj).replace(fj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xj(t){if(!pj(t)||dj(t))return!1;var e=cj(t)?wj:mj;return e.test(hj(t))}k7.exports=xj});var O7=$((zhe,N7)=>{function Cj(t,e){return t?.[e]}N7.exports=Cj});var za=$((Hhe,D7)=>{var Sj=R7(),_j=O7();function Ej(t,e){var i=_j(t,e);return Sj(i)?i:void 0}D7.exports=Ej});var ff=$((Uhe,L7)=>{var Pj=za(),Ij=jn(),Tj=Pj(Ij,"Map");L7.exports=Tj});var vd=$((qhe,F7)=>{var Aj=za(),Mj=Aj(Object,"create");F7.exports=Mj});var U7=$((Bhe,H7)=>{var z7=vd();function kj(){this.__data__=z7?z7(null):{},this.size=0}H7.exports=kj});var B7=$((Whe,q7)=>{function Rj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}q7.exports=Rj});var V7=$((Vhe,W7)=>{var Nj=vd(),Oj="__lodash_hash_undefined__",Dj=Object.prototype,Lj=Dj.hasOwnProperty;function Fj(t){var e=this.__data__;if(Nj){var i=e[t];return i===Oj?void 0:i}return Lj.call(e,t)?e[t]:void 0}W7.exports=Fj});var j7=$(($he,$7)=>{var zj=vd(),Hj=Object.prototype,Uj=Hj.hasOwnProperty;function qj(t){var e=this.__data__;return zj?e[t]!==void 0:Uj.call(e,t)}$7.exports=qj});var K7=$((jhe,G7)=>{var Bj=vd(),Wj="__lodash_hash_undefined__";function Vj(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Bj&&e===void 0?Wj:e,this}G7.exports=Vj});var Z7=$((Ghe,Y7)=>{var $j=U7(),jj=B7(),Gj=V7(),Kj=j7(),Yj=K7();function Xl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Xl.prototype.clear=$j;Xl.prototype.delete=jj;Xl.prototype.get=Gj;Xl.prototype.has=Kj;Xl.prototype.set=Yj;Y7.exports=Xl});var Q7=$((Khe,J7)=>{var X7=Z7(),Zj=fd(),Xj=ff();function Jj(){this.size=0,this.__data__={hash:new X7,map:new(Xj||Zj),string:new X7}}J7.exports=Jj});var t9=$((Yhe,e9)=>{function Qj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}e9.exports=Qj});var bd=$((Zhe,i9)=>{var eG=t9();function tG(t,e){var i=t.__data__;return eG(e)?i[typeof e=="string"?"string":"hash"]:i.map}i9.exports=tG});var n9=$((Xhe,r9)=>{var iG=bd();function rG(t){var e=iG(this,t).delete(t);return this.size-=e?1:0,e}r9.exports=rG});var a9=$((Jhe,o9)=>{var nG=bd();function oG(t){return nG(this,t).get(t)}o9.exports=oG});var l9=$((Qhe,s9)=>{var aG=bd();function sG(t){return aG(this,t).has(t)}s9.exports=sG});var c9=$((efe,u9)=>{var lG=bd();function uG(t,e){var i=lG(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}u9.exports=uG});var mf=$((tfe,d9)=>{var cG=Q7(),dG=n9(),pG=a9(),hG=l9(),fG=c9();function Jl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}Jl.prototype.clear=cG;Jl.prototype.delete=dG;Jl.prototype.get=pG;Jl.prototype.has=hG;Jl.prototype.set=fG;d9.exports=Jl});var h9=$((ife,p9)=>{var mG=fd(),gG=ff(),vG=mf(),bG=200;function yG(t,e){var i=this.__data__;if(i instanceof mG){var r=i.__data__;if(!gG||r.length<bG-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new vG(r)}return i.set(t,e),this.size=i.size,this}p9.exports=yG});var gf=$((rfe,f9)=>{var wG=fd(),xG=n7(),CG=a7(),SG=l7(),_G=c7(),EG=h9();function Ql(t){var e=this.__data__=new wG(t);this.size=e.size}Ql.prototype.clear=xG;Ql.prototype.delete=CG;Ql.prototype.get=SG;Ql.prototype.has=_G;Ql.prototype.set=EG;f9.exports=Ql});var zv=$((nfe,m9)=>{var PG=za(),IG=function(){try{var t=PG(Object,"defineProperty");return t({},"",{}),t}catch{}}();m9.exports=IG});var vf=$((ofe,v9)=>{var g9=zv();function TG(t,e,i){e=="__proto__"&&g9?g9(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}v9.exports=TG});var Hv=$((afe,b9)=>{var AG=vf(),MG=Yl();function kG(t,e,i){(i!==void 0&&!MG(t[e],i)||i===void 0&&!(e in t))&&AG(t,e,i)}b9.exports=kG});var w9=$((sfe,y9)=>{function RG(t){return function(e,i,r){for(var n=-1,o=Object(e),s=r(e),u=s.length;u--;){var c=s[t?u:++n];if(i(o[c],c,o)===!1)break}return e}}y9.exports=RG});var C9=$((lfe,x9)=>{var NG=w9(),OG=NG();x9.exports=OG});var I9=$((yd,eu)=>{var DG=jn(),P9=typeof yd=="object"&&yd&&!yd.nodeType&&yd,S9=P9&&typeof eu=="object"&&eu&&!eu.nodeType&&eu,LG=S9&&S9.exports===P9,_9=LG?DG.Buffer:void 0,E9=_9?_9.allocUnsafe:void 0;function FG(t,e){if(e)return t.slice();var i=t.length,r=E9?E9(i):new t.constructor(i);return t.copy(r),r}eu.exports=FG});var Uv=$((ufe,T9)=>{var zG=jn(),HG=zG.Uint8Array;T9.exports=HG});var k9=$((cfe,M9)=>{var A9=Uv();function UG(t){var e=new t.constructor(t.byteLength);return new A9(e).set(new A9(t)),e}M9.exports=UG});var N9=$((dfe,R9)=>{var qG=k9();function BG(t,e){var i=e?qG(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}R9.exports=BG});var D9=$((pfe,O9)=>{function WG(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}O9.exports=WG});var z9=$((hfe,F9)=>{var VG=go(),L9=Object.create,$G=function(){function t(){}return function(e){if(!VG(e))return{};if(L9)return L9(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();F9.exports=$G});var qv=$((ffe,H9)=>{function jG(t,e){return function(i){return t(e(i))}}H9.exports=jG});var bf=$((mfe,U9)=>{var GG=qv(),KG=GG(Object.getPrototypeOf,Object);U9.exports=KG});var yf=$((gfe,q9)=>{var YG=Object.prototype;function ZG(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||YG;return t===i}q9.exports=ZG});var W9=$((vfe,B9)=>{var XG=z9(),JG=bf(),QG=yf();function eK(t){return typeof t.constructor=="function"&&!QG(t)?XG(JG(t)):{}}B9.exports=eK});var Ha=$((bfe,V9)=>{function tK(t){return t!=null&&typeof t=="object"}V9.exports=tK});var j9=$((yfe,$9)=>{var iK=Us(),rK=Ha(),nK="[object Arguments]";function oK(t){return rK(t)&&iK(t)==nK}$9.exports=oK});var wf=$((wfe,Y9)=>{var G9=j9(),aK=Ha(),K9=Object.prototype,sK=K9.hasOwnProperty,lK=K9.propertyIsEnumerable,uK=G9(function(){return arguments}())?G9:function(t){return aK(t)&&sK.call(t,"callee")&&!lK.call(t,"callee")};Y9.exports=uK});var vo=$((xfe,Z9)=>{var cK=Array.isArray;Z9.exports=cK});var xf=$((Cfe,X9)=>{var dK=9007199254740991;function pK(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dK}X9.exports=pK});var wd=$((Sfe,J9)=>{var hK=hf(),fK=xf();function mK(t){return t!=null&&fK(t.length)&&!hK(t)}J9.exports=mK});var eS=$((_fe,Q9)=>{var gK=wd(),vK=Ha();function bK(t){return vK(t)&&gK(t)}Q9.exports=bK});var iS=$((Efe,tS)=>{function yK(){return!1}tS.exports=yK});var Cf=$((xd,tu)=>{var wK=jn(),xK=iS(),oS=typeof xd=="object"&&xd&&!xd.nodeType&&xd,rS=oS&&typeof tu=="object"&&tu&&!tu.nodeType&&tu,CK=rS&&rS.exports===oS,nS=CK?wK.Buffer:void 0,SK=nS?nS.isBuffer:void 0,_K=SK||xK;tu.exports=_K});var lS=$((Pfe,sS)=>{var EK=Us(),PK=bf(),IK=Ha(),TK="[object Object]",AK=Function.prototype,MK=Object.prototype,aS=AK.toString,kK=MK.hasOwnProperty,RK=aS.call(Object);function NK(t){if(!IK(t)||EK(t)!=TK)return!1;var e=PK(t);if(e===null)return!0;var i=kK.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&aS.call(i)==RK}sS.exports=NK});var cS=$((Ife,uS)=>{var OK=Us(),DK=xf(),LK=Ha(),FK="[object Arguments]",zK="[object Array]",HK="[object Boolean]",UK="[object Date]",qK="[object Error]",BK="[object Function]",WK="[object Map]",VK="[object Number]",$K="[object Object]",jK="[object RegExp]",GK="[object Set]",KK="[object String]",YK="[object WeakMap]",ZK="[object ArrayBuffer]",XK="[object DataView]",JK="[object Float32Array]",QK="[object Float64Array]",eY="[object Int8Array]",tY="[object Int16Array]",iY="[object Int32Array]",rY="[object Uint8Array]",nY="[object Uint8ClampedArray]",oY="[object Uint16Array]",aY="[object Uint32Array]",Qt={};Qt[JK]=Qt[QK]=Qt[eY]=Qt[tY]=Qt[iY]=Qt[rY]=Qt[nY]=Qt[oY]=Qt[aY]=!0;Qt[FK]=Qt[zK]=Qt[ZK]=Qt[HK]=Qt[XK]=Qt[UK]=Qt[qK]=Qt[BK]=Qt[WK]=Qt[VK]=Qt[$K]=Qt[jK]=Qt[GK]=Qt[KK]=Qt[YK]=!1;function sY(t){return LK(t)&&DK(t.length)&&!!Qt[OK(t)]}uS.exports=sY});var pS=$((Tfe,dS)=>{function lY(t){return function(e){return t(e)}}dS.exports=lY});var fS=$((Cd,iu)=>{var uY=Dv(),hS=typeof Cd=="object"&&Cd&&!Cd.nodeType&&Cd,Sd=hS&&typeof iu=="object"&&iu&&!iu.nodeType&&iu,cY=Sd&&Sd.exports===hS,Bv=cY&&uY.process,dY=function(){try{var t=Sd&&Sd.require&&Sd.require("util").types;return t||Bv&&Bv.binding&&Bv.binding("util")}catch{}}();iu.exports=dY});var Sf=$((Afe,vS)=>{var pY=cS(),hY=pS(),mS=fS(),gS=mS&&mS.isTypedArray,fY=gS?hY(gS):pY;vS.exports=fY});var Wv=$((Mfe,bS)=>{function mY(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}bS.exports=mY});var Vv=$((kfe,yS)=>{var gY=vf(),vY=Yl(),bY=Object.prototype,yY=bY.hasOwnProperty;function wY(t,e,i){var r=t[e];(!(yY.call(t,e)&&vY(r,i))||i===void 0&&!(e in t))&&gY(t,e,i)}yS.exports=wY});var xS=$((Rfe,wS)=>{var xY=Vv(),CY=vf();function SY(t,e,i,r){var n=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(i[u],t[u],u,i,t):void 0;c===void 0&&(c=t[u]),n?CY(i,u,c):xY(i,u,c)}return i}wS.exports=SY});var SS=$((Nfe,CS)=>{function _Y(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}CS.exports=_Y});var _d=$((Ofe,_S)=>{var EY=9007199254740991,PY=/^(?:0|[1-9]\d*)$/;function IY(t,e){var i=typeof t;return e=e??EY,!!e&&(i=="number"||i!="symbol"&&PY.test(t))&&t>-1&&t%1==0&&t<e}_S.exports=IY});var $v=$((Dfe,ES)=>{var TY=SS(),AY=wf(),MY=vo(),kY=Cf(),RY=_d(),NY=Sf(),OY=Object.prototype,DY=OY.hasOwnProperty;function LY(t,e){var i=MY(t),r=!i&&AY(t),n=!i&&!r&&kY(t),o=!i&&!r&&!n&&NY(t),s=i||r||n||o,u=s?TY(t.length,String):[],c=u.length;for(var d in t)(e||DY.call(t,d))&&!(s&&(d=="length"||n&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||RY(d,c)))&&u.push(d);return u}ES.exports=LY});var IS=$((Lfe,PS)=>{function FY(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}PS.exports=FY});var AS=$((Ffe,TS)=>{var zY=go(),HY=yf(),UY=IS(),qY=Object.prototype,BY=qY.hasOwnProperty;function WY(t){if(!zY(t))return UY(t);var e=HY(t),i=[];for(var r in t)r=="constructor"&&(e||!BY.call(t,r))||i.push(r);return i}TS.exports=WY});var _f=$((zfe,MS)=>{var VY=$v(),$Y=AS(),jY=wd();function GY(t){return jY(t)?VY(t,!0):$Y(t)}MS.exports=GY});var RS=$((Hfe,kS)=>{var KY=xS(),YY=_f();function ZY(t){return KY(t,YY(t))}kS.exports=ZY});var zS=$((Ufe,FS)=>{var NS=Hv(),XY=I9(),JY=N9(),QY=D9(),eZ=W9(),OS=wf(),DS=vo(),tZ=eS(),iZ=Cf(),rZ=hf(),nZ=go(),oZ=lS(),aZ=Sf(),LS=Wv(),sZ=RS();function lZ(t,e,i,r,n,o,s){var u=LS(t,i),c=LS(e,i),d=s.get(c);if(d){NS(t,i,d);return}var p=o?o(u,c,i+"",t,e,s):void 0,g=p===void 0;if(g){var v=DS(c),b=!v&&iZ(c),S=!v&&!b&&aZ(c);p=c,v||b||S?DS(u)?p=u:tZ(u)?p=QY(u):b?(g=!1,p=XY(c,!0)):S?(g=!1,p=JY(c,!0)):p=[]:oZ(c)||OS(c)?(p=u,OS(u)?p=sZ(u):(!nZ(u)||rZ(u))&&(p=eZ(c))):g=!1}g&&(s.set(c,p),n(p,c,r,o,s),s.delete(c)),NS(t,i,p)}FS.exports=lZ});var qS=$((qfe,US)=>{var uZ=gf(),cZ=Hv(),dZ=C9(),pZ=zS(),hZ=go(),fZ=_f(),mZ=Wv();function HS(t,e,i,r,n){t!==e&&dZ(e,function(o,s){if(n||(n=new uZ),hZ(o))pZ(t,e,s,i,HS,r,n);else{var u=r?r(mZ(t,s),o,s+"",t,e,n):void 0;u===void 0&&(u=o),cZ(t,s,u)}},fZ)}US.exports=HS});var Ef=$((Bfe,BS)=>{function gZ(t){return t}BS.exports=gZ});var VS=$((Wfe,WS)=>{function vZ(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}WS.exports=vZ});var GS=$((Vfe,jS)=>{var bZ=VS(),$S=Math.max;function yZ(t,e,i){return e=$S(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=$S(r.length-e,0),s=Array(o);++n<o;)s[n]=r[e+n];n=-1;for(var u=Array(e+1);++n<e;)u[n]=r[n];return u[e]=i(s),bZ(t,this,u)}}jS.exports=yZ});var YS=$(($fe,KS)=>{function wZ(t){return function(){return t}}KS.exports=wZ});var JS=$((jfe,XS)=>{var xZ=YS(),ZS=zv(),CZ=Ef(),SZ=ZS?function(t,e){return ZS(t,"toString",{configurable:!0,enumerable:!1,value:xZ(e),writable:!0})}:CZ;XS.exports=SZ});var e8=$((Gfe,QS)=>{var _Z=800,EZ=16,PZ=Date.now;function IZ(t){var e=0,i=0;return function(){var r=PZ(),n=EZ-(r-i);if(i=r,n>0){if(++e>=_Z)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}QS.exports=IZ});var i8=$((Kfe,t8)=>{var TZ=JS(),AZ=e8(),MZ=AZ(TZ);t8.exports=MZ});var n8=$((Yfe,r8)=>{var kZ=Ef(),RZ=GS(),NZ=i8();function OZ(t,e){return NZ(RZ(t,e,kZ),t+"")}r8.exports=OZ});var a8=$((Zfe,o8)=>{var DZ=Yl(),LZ=wd(),FZ=_d(),zZ=go();function HZ(t,e,i){if(!zZ(i))return!1;var r=typeof e;return(r=="number"?LZ(i)&&FZ(e,i.length):r=="string"&&e in i)?DZ(i[e],t):!1}o8.exports=HZ});var l8=$((Xfe,s8)=>{var UZ=n8(),qZ=a8();function BZ(t){return UZ(function(e,i){var r=-1,n=i.length,o=n>1?i[n-1]:void 0,s=n>2?i[2]:void 0;for(o=t.length>3&&typeof o=="function"?(n--,o):void 0,s&&qZ(i[0],i[1],s)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var u=i[r];u&&t(e,u,r,o)}return e})}s8.exports=BZ});var c8=$((Jfe,u8)=>{var WZ=qS(),VZ=l8(),$Z=VZ(function(t,e,i){WZ(t,e,i)});u8.exports=$Z});function qs(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}var jv=T(()=>{});function Gv(t={}){let e=t.promiseTypeSuffixes||jZ,i=t.promiseTypeDelimiter||"_";return r=>{let{dispatch:n}=r;return o=>s=>{let u,c;if(s.payload){let I=s.payload;if(qs(I))u=I;else if(qs(I.promise))u=I.promise,c=I.data;else if(typeof I=="function"||typeof I.promise=="function"){if(u=I.promise?I.promise():I(),c=I.promise?I.data:void 0,!qs(u))return o({...s,payload:u})}else return o(s)}else return o(s);let d=s.type,p=s.meta,[g,v,b]=e,S=(I,F)=>({type:[d,F?b:v].join(i),...I===null||typeof I>"u"?{}:{payload:I},...p!==void 0?{meta:p}:{},...F?{error:!0}:{}}),_=I=>{let F=S(I,!0);n(F)},E=(I=null)=>{let F=S(I,!1);return n(F),{value:I,action:F}};return o({type:[d,g].join(i),...c!==void 0?{payload:c}:{},...p!==void 0?{meta:p}:{}}),u.then(E,_).catch(I=>{if(ne&&I.response)console.error("Request to",I.response.config.url,"failed with code",I.response.status);else{if(I&&I.response&&I.response.status===401){console.warn("No auth for request to",I.response.config.url);return}console.error(I)}}),u}}}var Pf,If,Tf,jZ,Kv=T(()=>{jv();Re();Pf="PENDING",If="FULFILLED",Tf="REJECTED",jZ=[Pf,If,Tf]});var ru,Yv,Ed,ei,Zv,Bs,Xv,Jv,Ua=T(()=>{ru="cargo.site",Yv="wss://w.s.cargo.site",Ed="https://cargo.site",ei="https://api.cargo.site/v1",Zv="https://cargo.site/_api",Bs="https://cargo.site",Xv="https://cargo.site/_api/v1-p",Jv="yjhpd2ug";switch("production"){case"localhost":case"local-ssr":ru="local.dev.cargo.site",Yv="wss://ws.dev.cargo.site",Ed="https://local.dev.cargo.site",ei="https://api.dev.cargo.site/v1",Zv="https://dev.cargo.site/_api",Bs="https://dev.cargo.site",Xv="https://dev.cargo.site/_api/v1-p",Jv="na91uuyv";break;case"local-crdt":ru="local.dev.cargo.site",Yv="wss://ws.local.dev.cargo.site:4443",Ed="https://local.dev.cargo.site",ei="https://api.dev.cargo.site/v1",Zv="https://dev.cargo.site/_api",Bs="https://dev.cargo.site",Xv="https://dev.cargo.site/_api/v1-p",Jv="na91uuyv";break;case"dev":ru="dev.cargo.site",Yv="wss://ws.dev.cargo.site",Ed="https://dev.cargo.site",ei="https://api.dev.cargo.site/v1",Zv="https://dev.cargo.site/_api",Bs="https://dev.cargo.site",Xv="https://dev.cargo.site/_api/v1-p",Jv="na91uuyv";break}});function GZ(t){var e;return{get:function(r){return e&&t(e.key,r)?e.value:Af},put:function(r,n){e={key:r,value:n}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function KZ(t,e){var i=[];function r(u){var c=i.findIndex(function(p){return e(u,p.key)});if(c>-1){var d=i[c];return c>0&&(i.splice(c,1),i.unshift(d)),d.value}return Af}function n(u,c){r(u)===Af&&(i.unshift({key:u,value:c}),i.length>t&&i.pop())}function o(){return i}function s(){i=[]}return{get:r,put:n,getEntries:o,clear:s}}function YZ(t){return function(i,r){if(i===null||r===null||i.length!==r.length)return!1;for(var n=i.length,o=0;o<n;o++)if(!t(i[o],r[o]))return!1;return!0}}function p8(t,e){var i=typeof e=="object"?e:{equalityCheck:e},r=i.equalityCheck,n=r===void 0?d8:r,o=i.maxSize,s=o===void 0?1:o,u=i.resultEqualityCheck,c=YZ(n),d=s===1?GZ(c):KZ(s,c);function p(){var g=d.get(arguments);if(g===Af){if(g=t.apply(null,arguments),u){var v=d.getEntries(),b=v.find(function(S){return u(S.value,g)});b&&(g=b.value)}d.put(arguments,g)}return g}return p.clearCache=function(){return d.clear()},p}var Af,d8,h8=T(()=>{Af="NOT_FOUND";d8=function(e,i){return e===i}});function ZZ(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(r){return typeof r=="function"})){var i=e.map(function(r){return typeof r=="function"?"function "+(r.name||"unnamed")+"()":typeof r}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+i+"]")}return e}function Qv(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n=function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var d=0,p,g={memoizeOptions:void 0},v=u.pop();if(typeof v=="object"&&(g=v,v=u.pop()),typeof v!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof v+"]");var b=g,S=b.memoizeOptions,_=S===void 0?i:S,E=Array.isArray(_)?_:[_],I=ZZ(u),F=t.apply(void 0,[function(){return d++,v.apply(null,arguments)}].concat(E)),O=t(function(){for(var z=[],G=I.length,H=0;H<G;H++)z.push(I[H].apply(null,arguments));return p=F.apply(null,z),p});return Object.assign(O,{resultFunc:v,memoizedResultFunc:F,dependencies:I,lastResult:function(){return p},recomputations:function(){return d},resetRecomputations:function(){return d=0}}),O};return n}var f8,m8=T(()=>{h8();f8=Qv(p8)});var eb={};ai(eb,{ADMIN_FRAME:()=>we,CRDTState:()=>$t,FRONTEND_DATA:()=>Mf});var we,Mf,$t,Mt=T(()=>{we={adminWindow:null},Mf={},$t=Object.freeze({New:0,Published:1,Draft:2,Deleted:3})});var Si,Xe,vi,Je,_i=T(()=>{m8();Si=ce(ve(),1);Re();Mt();Xe={};ne?vi=Qv(t=>t):vi=function(){return f8.apply(this,[...arguments,{memoizeOptions:{maxSize:10}}])};Xe.getItemParentId=(t,e)=>Xe.flatByParentList(t)[e];Xe.getHomepageId=t=>t.frontendState.isMobile?t.site?.mobile_homepage_id:t.site?.homepage_id;Xe.getHomepagePurl=t=>Xe.getContentById(t,Xe.getHomepageId(t))?.purl?.toLowerCase();Xe.getHiddenHomepageId=t=>{let e=t.site?.mobile_homepage_id,i=t.site?.homepage_id;return e===i?null:t.frontendState.isMobile?i:e};Xe.flatByParentList=vi(t=>t.structure.byParent,t=>{let e={};for(let i in t)for(let r in t[i])e[t[i][r]]=i;return e});Xe.getSetsByParent=vi(t=>t.structure.byParent,t=>t.sets.byId,(t,e)=>{let i={};for(let r in t)i[r]=t[r].filter(n=>e.hasOwnProperty(n));return i});Xe.getPagesByParent=vi(t=>t.structure.byParent,t=>t.pages.byId,(t,e)=>{let i={};for(let r in t)i[r]=t[r].filter(n=>e.hasOwnProperty(n));return i});Xe.getParentSetList=vi(Xe.getItemParentId,Xe.flatByParentList,(t,e)=>{let i=[];for(;t;)i.push(t),t=t!==e[t]?e[t]:null;return i});Xe.getSetContents=vi((t,e)=>e,Xe.getHomepageId,(t,e,i)=>i,(t,e,i)=>t.structure.bySort,(t,e)=>t.structure.byParent[e],t=>t.pages.byId,t=>t.sets.byId,(t,e,i={},r,n=[],o,s)=>{let u;return Si.default.without(n.map(c=>{if(u=o[c]||s[c],i.includeNotIndexable===!0||u&&(u.id===e||ef(u)))return u}).sort((c,d)=>r[c.id]-r[d.id]),void 0)});Xe.getSetContentsByIndex=vi(Xe.getSetContents,(t,e,i)=>t.structure.indexById,(t,e)=>t.reduce((i,r)=>(i[e[r.id]]=r,i),{}));Xe.getSetDepthsById=vi(t=>t.sets.byId,Xe.flatByParentList,(t,e)=>{let i={};return Object.keys(t).forEach(r=>{let n=0,o=r;for(;e[o];)n++,o=e[o];i[r]=n}),i});Xe.getPinsForSet=vi(Xe.getParentSetList,Xe.getSetDepthsById,(t,e,i,r)=>e,(t,e,i,r)=>i,(t,e,i,r)=>r,(t,e,i,r)=>t.structure.bySort,(t,e,i,r)=>t.pages.byId,Xe.getPagesByParent,t=>t.frontendState.isMobile,(t,e,i,r,n,o,s={},u={},c)=>{if(!i)return[];let d=i,p=0,g={},v=[];return t.concat([i]).forEach(S=>{u[S]&&u[S].forEach(_=>{if(s[_]&&s[_].pin&&s[_].pin_options&&s[_].pin_options.position===r){if(_!==n&&(s[_].pin_options.screen_visibility==="mobile"&&!c||s[_].pin_options.screen_visibility==="desktop"&&c))return;v.push(s[_]),g[_]=s[_].pin_options.fixed?0:e[S]}})}),v.sort((S,_)=>{let E=o[S.id],I=o[_.id];return S.pin_options.fixed?E+=r==="bottom"?9e9:-9e9:S.pin_options.overlay&&(E+=r==="bottom"?9e5:-9e5),_.pin_options.fixed?I+=r==="bottom"?9e9:-9e9:_.pin_options.overlay&&(I+=r==="bottom"?9e5:-9e5),E-I}),v.sort((S,_)=>r==="bottom"?g[_.id]-g[S.id]:g[S.id]-g[_.id]),v});Xe.getAutoRenderableOverlaysForSet=vi(Xe.getParentSetList,Xe.getSetDepthsById,(t,e,i)=>e,(t,e,i)=>i,(t,e,i)=>t.pages.byId,(t,e,i)=>t.frontendState.PIDToEdit,Xe.getPagesByParent,(t,e,i,r,n={},o,s={})=>{if(!i||ne)return[];let u=i,c=0,d=[];return t.concat([i]).forEach(g=>{s[g]&&s[g].forEach(v=>{n[v]&&n[v].overlay&&(n[v].id===o||n[v].overlay_options?.openOnLoad||n[v].purl?.toLowerCase()===r?.toLowerCase())&&d.push(n[v])})}),d});Xe.getContentById=vi((t,e)=>e,(t,e)=>t.pages.byId[e]||t.sets.byId[e],(t,e)=>e);Xe.getContentByPurl=vi((t,e)=>e,(t,e)=>t.pages.byId[Xe.getPagesByUrl(t)[e?.toLowerCase()]]||t.sets.byId[Xe.getSetsByUrl(t)[e?.toLowerCase()]],(t,e)=>e);Xe.getLoadedIndexesForSet=vi(Xe.getSetContents,t=>t.structure.indexById,(t,e)=>Si.default.without(t.map(i=>{if(ef(i))return e[i.id]}),void 0));Xe.getMissingIndexesForSet=vi((t,e)=>t.sets.byId[e],Xe.getLoadedIndexesForSet,(t,e)=>t?Si.default.difference([...Array(Math.max(t.page_count||0,0)).keys()],e):[]);Xe.getSortedListOfIndexPairs=vi(t=>t,(t,e)=>e,(t,e)=>t.sets.byId,(t,e)=>t.structure.indexById,Xe.getSetsByParent,(t,e,i,r,n)=>{let o=s=>{let u=Xe.getContentById(t,s);if(!u)return[];let c=[...Array(Math.max(u.page_count||0,0)).keys()].map(d=>[u.id,d]);return n[u.id]&&(n[u.id]||[]).map(d=>i[d]).reverse().forEach(d=>{c.splice(r[d.id]+1,0,o(d.id))}),c};return Si.default.chunk(Si.default.flattenDeep(o(e)),2)});Xe.getSortedListOfMissingIndexPairs=vi(t=>t,Xe.getSortedListOfIndexPairs,(t,e)=>t.sets.byId,Xe.getSetsByParent,(t,e,i,r)=>{let n=[];return Si.default.uniq(e.map(o=>o[0])).forEach(o=>{n=n.concat(Xe.getLoadedIndexesForSet(t,o).map(s=>[o,s]))}),Si.default.differenceWith(e,n,Si.default.isEqual)});Xe.getGappedSetMap=vi(t=>t,Xe.getSortedListOfIndexPairs,Xe.getSortedListOfMissingIndexPairs,(t,e,i)=>{let r=i[0];if(r){let n=Si.default.uniq(e.map(u=>u[0])).reduce((u,c)=>(u[c]=0,u),{}),o=Si.default.findIndex(e,u=>Si.default.isEqual(u,r)),s=Si.default.fromPairs(e.slice(0,o));return Si.default.merge(n,s)}return{}});Xe.getPagesByUrl=vi(t=>t.pages.byId,t=>Si.default.transform(Si.default.omitBy(t,e=>e.crdt_state===$t.Deleted),function(e,i){e[i.purl?.toLowerCase()]=i.id},{}));Xe.getSetsByUrl=vi(t=>t.sets.byId,t=>Si.default.transform(Si.default.omitBy(t,e=>e.crdt_state===$t.Deleted),function(e,i){e[i.purl?.toLowerCase()]=i.id},{}));Xe.getMediaByHash=t=>{let e={};return Si.default.each(t.pages.byId,i=>{Si.default.each(i.media,r=>{r.crdt_state!==$t.Deleted&&(e[r.hash]=r)})}),e};Xe.getMediaByParent=vi(t=>t.pages.byId,t=>{let e={};return Si.default.each(t,i=>{e[i.id]=i.media?.filter(r=>r.crdt_state!==$t.Deleted)}),e});Xe.getRenderedPageModels=vi(t=>t.pages.byId,t=>t.frontendState.renderedPages,(t,e)=>e.map(i=>t[i.id]).filter(i=>i!==void 0));Je=Xe});var rb={};ai(rb,{actionTypes:()=>Te,actions:()=>He});var an,$s,ib,He,XZ,g8,Te,kf,tb,Ws,Vs,jt=T(()=>{an=ce(Sn(),1),$s=ce(ve(),1);Kv();Re();Ua();_i();ib=ce(ve(),1),He={},XZ=ne?3e4:1e4,g8={AUTHENTICATE_USER:"AUTHENTICATE_USER",FETCH_SITEDESIGN_MODEL:"FETCH_SITEDESIGN_MODEL",FETCH_SCAFFOLDING:"FETCH_SCAFFOLDING",FETCH_SITE_PACKAGE:"FETCH_SITE_PACKAGE",FETCH_SITE_MODEL:"FETCH_SITE_MODEL",FETCH_SITE_CSS:"FETCH_SITE_CSS",FETCH_MEDIA:"FETCH_MEDIA",FETCH_CONTENT:"FETCH_CONTENT",DELETE_CONTENT:"DELETE_CONTENT",FETCH_COMMERCE_PRODUCTS:"FETCH_COMMERCE_PRODUCTS",FETCH_SHOP_MODEL:"FETCH_SHOP_MODEL"};(0,$s.each)(g8,function(t,e,i){i[t+"_"+If]=e+"_"+If,i[t+"_"+Pf]=e+"_"+Pf,i[t+"_"+Tf]=e+"_"+Tf});Te=(0,$s.merge)({ADD_COMMERCE_PRODUCT_TO_CART:"ADD_COMMERCE_PRODUCT_TO_CART",RESET_COMMERCE_CART:"RESET_COMMERCE_CART",SET_INITIAL_AUTH:"SET_INITIAL_AUTH",PAGES_MOUNTED:"PAGES_MOUNTED",PAGES_UNMOUNTED:"PAGES_UNMOUNTED",UPDATE_FRONTEND_STATE:"UPDATE_FRONTEND_STATE",COMMERCE_PRODUCT_DESTROYED:"COMMERCE_PRODUCT_DESTROYED",COMMERCE_PRODUCT_UPDATED:"COMMERCE_PRODUCT_UPDATED",SHOP_MODEL_UPDATED:"SHOP_MODEL_UPDATED"},g8);He.getAuthToken=function(t={}){let e=new Promise((i,r)=>{let n="https://cargo.site/accesstoken";if(t.reverse_bounce_jwt){parent.location.href=n+"/bounce?jwt="+t.reverse_bounce_jwt;return}if(t.bounce){parent.location.href=n+"/bounce?site_url="+t.site_url;return}let o={};t.site_url&&(o.site_url=t.site_url),t.site_id&&(o.site_id=t.site_id),t.jwt&&(o.jwt=t.jwt);let s={};t.nonce&&(s["x-cargo-access-token-nonce"]=t.nonce),an.default.get(n,{use_auth:!1,withCredentials:!0,params:o,headers:s,timeout:t?.timeout||XZ}).then(function(u){if(!u||u.token===null)return r("No token found.");i(u)}).catch(u=>{r(u)})});return{type:Te.AUTHENTICATE_USER,payload:e}};He.setAuthentication=t=>({type:Te.AUTHENTICATE_USER_FULFILLED,payload:t});He.rejectAuthentication=()=>({type:Te.AUTHENTICATE_USER_REJECTED,payload:{}});He.fetchScaffolding=function(){return function(t,e){let r=`/pages/${e().site.id}/scaffolding`;return t({type:Te.FETCH_SCAFFOLDING,payload:an.default.get(ei+r)})}};He.fetchFiles=function(){return function(t,e){let r=`/sites/${e().site.id}/media/files`;return t({type:Te.FETCH_MEDIA,payload:an.default.get(ei+r)})}};He.fetchCommerceProducts=function(t={}){return t=ib.default.defaults(t,{orderBy:"date_added",orderDir:"asc",idArray:null,onlyNew:!0}),function(e,i){let r=i(),n=`/commerce/${r.site.id}/products`,o;if(t.idArray){n+="/list";let s=new FormData;if(t.idArray){let u=t.idArray.filter(c=>!(t.onlyNew===!0&&r.commerce.products.hasOwnProperty(c)));if(u.length===0)return Promise.resolve();u.forEach(c=>{s.append("ids[]",c)})}o=an.default.post(ei+n,s,{use_auth:!1})}else o=an.default.get(ei+n,{use_auth:!1,params:{order_by:t.orderBy,order_dir:t.orderDir,limit:t.limit}});return e({type:Te.FETCH_COMMERCE_PRODUCTS,payload:o,meta:{options:t}})}};He.fetchShopModel=function(t={}){return function(e,i){let r=i();if(!r.site.shop_id)return Promise.resolve();let n=`/commerce/${r.site.id}/shop/${r.site.shop_id}`;return e({type:Te.FETCH_SHOP_MODEL,payload:an.default.get(ei+n,{use_cache:t.force!==!0})})}};He.resetCommerceCart=function(){return{type:Te.RESET_COMMERCE_CART,payload:{}}};He.addCommerceProductToCart=function(t,e,i={}){return function(r,n){let o=n(),s=o.commerce.products[t],u=s?.variants.find(c=>c.variant_id==e);if(!s||!u){i.failureCallback?.("Product not found");return}if((i.amount===void 0||isNaN(i.amount))&&(i.amount=1),u.inventory!==null&&i.amount>u.inventory)if(u.inventory<=0){i.failureCallback?.("Product is out of stock");return}else i.amount=u.inventory;return typeof i.callback=="function"&&i.callback(),r({type:Te.ADD_COMMERCE_PRODUCT_TO_CART,payload:{product_id:u.product_id,variant_id:u.variant_id,quantity:i.amount},meta:{is_template:o.site.is_template}})}};kf=null,tb=!1,Ws=[],Vs=[];He.pageMounted=function(t){if(Vs.includes(t)&&(Vs=Vs.filter(e=>e!==t)),!Ws.includes(t))return(e,i)=>(Ws.push(t),kf||(kf=new Promise(r=>{requestAnimationFrame(()=>{e({type:Te.PAGES_MOUNTED,payload:{pages:[...Ws]}}),r(),kf=null,Ws=[]})})),kf)};He.pageUnMounted=function(t){if(Ws.includes(t)&&(Ws=Ws.filter(e=>e!==t)),!Vs.includes(t))return(e,i)=>{if(i().frontendState.PIDBeingEdited===t?.id)return e({type:Te.PAGES_UNMOUNTED,payload:{pages:[t]}});Vs.push(t),tb||(tb=!0,requestAnimationFrame(()=>{e({type:Te.PAGES_UNMOUNTED,payload:{pages:[...Vs]}}),tb=!1,Vs=[]}))}};He.fetchSiteModel=function(){return function(t,e){let r=`/sites/${e().site.id}`,n=an.default.get(ei+r);return t({type:Te.FETCH_SITE_MODEL,payload:n})}};He.fetchSiteCSS=function(){return function(t,e){let r=`/sites/${e().site.id}/css`,n=an.default.get(ei+r);return t({type:Te.FETCH_SITE_CSS,payload:n})}};He.fetchSitePackage=function(){return function(t,e){let i=e(),r;ne?r=i.frontendState.hostname:r=Ls?tv:window.location.hostname,ev&&(r=r.replace("local.dev.cargo.site","dev.cargo.site"));let n=an.default.get(ei+`/package/${r}`);return t({type:Te.FETCH_SITE_PACKAGE,payload:n})}};He.fetchSiteDesignModel=function(){return function(t,e){let r=`/sites/${e().site.id}/design`,n=an.default.get(ei+r);return t({type:Te.FETCH_SITEDESIGN_MODEL,payload:n})}};He.fetchPagesByTag=function(t,e={}){return function(i,r){let n=store.getState(),o=an.default.get(ei+`/pages/${n.site.id}/tag/${t}`,{withCredentials:!0,use_cache:e.force!==!0});return i({type:Te.FETCH_CONTENT,payload:o})}};He.fetchContent=function(t,e={}){return e.idType||(e.idType="pid"),function(i,r){let n=r(),o;if(e.indexes&&n.frontendState.inAdminFrame===!0){let p=n.structure.byParent[t]?.reduce((g,v)=>(g[n.structure.indexById[v]]=v,g),{});p&&(o={},e.indexes.forEach(g=>{let v=p[g],b=n.structure.liveIndexes[v];if(b){let[S,_]=b.split("/");o[S]||(o[S]=[]),o[S].push(parseInt(_))}}),o=ib.default.map(o,(g,v)=>({set_id:v,index:g})))}if(e.force!==!0&&(e.idType==="purl"?Je.getContentByPurl(n,t):Je.getContentById(n,t)||t==="root")&&(e.indexes===void 0||e.indexes.length===0)&&e.prev!==!0&&e.next!==!0)return i({type:Te.FETCH_CONTENT,payload:Promise.resolve()});let s=`/pages/${n.site.id}/url/${t}`;e.next===!0?s=`/pages/${n.site.id}/next/${t}`:e.prev===!0?s=`/pages/${n.site.id}/prev/${t}`:e.idType==="pid"&&(s=`/pages/${n.site.id}/id/${t}`);let u={};(0,$s.isArray)(e.indexes)&&(s=`/pages/${n.site.id}/filter/`,o&&Object.keys(o).length>0?u.indexBySet=JSON.stringify(o):u.indexBySet=JSON.stringify([{set_id:t,index:e.indexes}]));let c=an.default.get(ei+s,{withCredentials:!0,use_cache:e.force!==!0,params:u,validateStatus:function(p){return p>=200&&p<300&&p!==204},contentIdentifier:{idType:e.idType,id:t}}),d=new Promise((p,g)=>{c.then(v=>{(0,$s.isArray)(v.data)||(v.data=[v.data]),e.cb?.(v),p(v)}).catch(g)});return i({type:Te.FETCH_CONTENT,payload:d})}};He.updateFrontendState=function(t){return function(e,i){return e({type:Te.UPDATE_FRONTEND_STATE,payload:t})}};He.deleteContent=function(t){return function(e,i){let r=new Promise().resolve({id:t});return{type:Te.DELETE_CONTENT,payload:r}}};ne||(window.actions=He)});function nb(){return t=>e=>(qs(e.payload)&&e.payload.catch(function(i){if(ne&&i.response)console.error("Request to",i.response.config.url,"failed with code",i.response.status);else{if(i&&i.response&&i.response.status===401){console.warn("No auth for request to",i.response.config.url);return}console.error(i)}return i}),t(e))}var hme,v8=T(()=>{jv();hme=ce(ve(),1);Re()});function b8(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SITE_MODEL_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.site),i){if(Ls&&(i.domain_active=!1),!ne)try{localStorage.setItem("c3-site",JSON.stringify({id:i.id,host:window.location.host}))}catch(r){console.error(r)}return{...t,...i,crdt_state:$t.Published}}break}return t}var bme,y8=T(()=>{jt();Re();Mt();bme=ce(ve(),1)});function JZ(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SCAFFOLDING_FULFILLED:case Te.FETCH_ADMIN_LIST_FULFILLED:case Te.FETCH_CONTENT_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.scaffolding),i)return Rf.default.isArray(i)||(i=[i]),{...t,...i.reduce((r,n)=>(n.page_type!=="page"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=$t.Published,r[n.id]=n),r),{})};break;case Te.DELETE_CONTENT:if(t[e.payload.id]){let r={...t};return delete r[e.payload.id],r}break;case Te.UPDATE_PAGE:return{...t,[e.meta.id]:Rf.default.merge({},Rf.default.cloneDeep(t[e.meta.id]),e.payload)}}return t}var Rf,ob,w8,x8=T(()=>{jt();di();Mt();Rf=ce(ve(),1);Re();ob={byId:JZ},w8=Vn(ob)});function QZ(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SCAFFOLDING_FULFILLED:case Te.FETCH_ADMIN_LIST_FULFILLED:case Te.FETCH_CONTENT_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.scaffolding),i)return{...t,...i.reduce((r,n)=>(n.page_type!=="set"||(n={...n},delete n.index,delete n.sort,delete n.set_id,delete n.is_homepage,n.purl&&(n.purl=n.purl.toLowerCase()),n.crdt_state=$t.Published,r[n.id]=n),r),{})};break}return t}var ab,C8,S8=T(()=>{jt();di();Mt();ab={byId:QZ},C8=Vn(ab)});function eX(t=E8,e){switch(e.type){case Te.RESET_COMMERCE_CART:try{localStorage.removeItem("cargo-commerce-cart")}catch(n){console.error("Unable to store cart",n)}return{};case Te.ADD_COMMERCE_PRODUCT_TO_CART:let i=e.payload,r;i.quantity===null?(r={...t},delete r[i.variant_id]):(t[i.variant_id]&&(i={...t[i.variant_id],quantity:Math.max(0,(t[i.variant_id].quantity||0)+i.quantity)}),r={...t,[i.variant_id]:i});try{e.meta?.is_template!==!0&&localStorage.setItem("cargo-commerce-cart",JSON.stringify(r))}catch(n){console.error("Unable to store cart",n)}return r}return t}function tX(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_COMMERCE_PRODUCTS_FULFILLED:let i=e.meta?.options||{},r=(e.payload.data?.data||[]).reduce((o,s,u)=>{let c=t[s?.product_id];return i.onlyNew&&c?(i.idArray===null&&c.sort_index===void 0&&(c.sort_index=u),o):(i.idArray===null&&(s.sort_index=u),_8(s),{...o,[s.product_id]:s})},{});return{...t,...r};case Te.COMMERCE_PRODUCT_UPDATED:return _8(e.payload),{...t,[e.payload.product_id]:e.payload};break;case Te.COMMERCE_PRODUCT_DESTROYED:let n={...t};return delete n[e.payload.product_id],n;break}return t}function iX(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SHOP_MODEL_FULFILLED:return{...t,...e.payload.data};case Te.SHOP_MODEL_UPDATED:return{...t,...e.payload}}return t}var qa,E8,_8,sb,P8,I8=T(()=>{qa=ce(ve(),1);di();jt();Re();E8={};if(!ne)try{E8=JSON.parse(localStorage.getItem("cargo-commerce-cart"))||{},window.__PRELOADED_STATE__&&window.__PRELOADED_STATE__.commerce&&window.__PRELOADED_STATE__.commerce.cart&&delete window.__PRELOADED_STATE__.commerce.cart}catch{}_8=t=>{t.name&&(t.name=qa.default.unescape(t.name)),t.variants?.forEach(e=>{qa.default.each(e.attributes,(i,r)=>{let n=qa.default.unescape(i);delete e.attributes[r],e.attributes[qa.default.unescape(r)]=n})}),qa.default.each(t.attributes,(e,i)=>{let r=e.map(n=>qa.default.unescape(n));delete t.attributes[i],t.attributes[qa.default.unescape(i)]=r})};sb={products:tX,cart:eX,shop:iX},P8=Vn(sb)});function A8(t=rX,e){if(!e.payload)return t;switch(e.type){case Te.FETCH_MEDIA_FULFILLED:let i=e.payload.data;if(i)return{...t,data:T8.default.uniqBy([...t.data,...i],"id")};break}return t}var T8,rX,M8=T(()=>{jt();Mt();T8=ce(ve(),1),rX={data:[],crdt_state:$t.Published}});function k8(t={},e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SITE_CSS_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.css),i)return{...t,...i,crdt_state:$t.Published};break}return t}var zme,R8=T(()=>{jt();Mt();zme=ce(ve(),1)});function lb(t=nX,e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SCAFFOLDING_FULFILLED:case Te.FETCH_ADMIN_LIST_FULFILLED:case Te.FETCH_CONTENT_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.scaffolding),i){let r={...t},n={};return(0,Ba.each)(i,function(o){o.page_type==="set"&&(n.hasOwnProperty(o.id)||(n[o.id]=[])),o.id!=="root"&&o.hasOwnProperty("set_id")&&(n.hasOwnProperty(o.set_id)||(n[o.set_id]=[]),n[o.set_id].push(o.id))}),r.byParent=(0,Ba.mergeWith)({},t.byParent,n,(o,s)=>{if((0,Ba.isArray)(o))return(0,Ba.uniq)(o.concat(s))}),r.bySort={...t.bySort,...i.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("sort")&&(o[s.id]=s.sort),o),{})},r.indexById={...t.indexById,...i.reduce((o,s)=>(s.id!=="root"&&s.hasOwnProperty("index")&&(o[s.id]=s.index),o),{})},r}break}return t}var Ba,nX,N8=T(()=>{jt();Ba=ce(ve(),1);Mt();nX={byParent:{root:[]},bySort:{},indexById:{},liveIndexes:{},crdt_state:$t.Published}});function aX(t=oX,e){switch(e.type){case Te.AUTHENTICATE_USER_PENDING:return{...t,authenticating:!0};case Te.AUTHENTICATE_USER_FULFILLED:if(e.payload?.data?.access_token){if(!ne)try{localStorage.setItem("c3-auth",JSON.stringify(e.payload.data))}catch(i){console.error(i)}return{...t,authenticating:!1,authenticated:!0,data:e.payload.data}}else{if(!ne)try{localStorage.removeItem("c3-auth")}catch(i){console.error(i)}return{...t,authenticating:!1,authenticated:!1}}case Te.AUTHENTICATE_USER_REJECTED:if(!ne)try{localStorage.removeItem("c3-auth")}catch(i){console.error(i)}return{...t,authenticating:!1,authenticated:!1}}return t}var Vme,oX,O8,D8=T(()=>{Vme=ce(ve(),1);Re();jt();oX={authenticating:!1,authenticated:!1};O8=aX});function lX(t=sX,e){if(!e.payload)return t;switch(e.type){case Te.FETCH_SITEDESIGN_MODEL_FULFILLED:case Te.FETCH_SITE_PACKAGE_FULFILLED:let i=e.payload.data;if(e.type===Te.FETCH_SITE_PACKAGE_FULFILLED&&(i=i.design),i)return ub.default.merge(ub.default.cloneDeep(t),i.site_design);break}return t}var ub,sX,L8,F8=T(()=>{jt();ub=ce(ve(),1);Mt();sX={images:{},quick_view:{},site:{enableColorFilter:!1,enableHomeLinkActiveStates:!1},cart:{theme:"light"},contact_form:{theme:"light"},crdt_state:$t.Published};L8=lX});function H8(t=z8,e){if(!e.payload)return t;let i;switch(e.type){case Te.UPDATE_FRONTEND_STATE:return cb.default.mergeWith({},z8,t,e.payload,(r,n,o,s,u)=>{n===void 0&&u.hasOwnProperty(o)&&delete s[o]});case Te.FETCH_SITE_PACKAGE_FULFILLED:return{...t,hasSiteModel:!0,hasScaffolding:!0,hasSiteDesign:!0,hasSiteCSS:!0,hasSitePackage:!0};case Te.FETCH_SCAFFOLDING_FULFILLED:return{...t,hasScaffolding:!0};case Te.FETCH_SITE_MODEL_FULFILLED:return{...t,hasSiteModel:!0};case Te.FETCH_SHOP_MODEL_FULFILLED:return{...t,hasShopModel:!0};case Te.FETCH_SITE_CSS_FULFILLED:return{...t,hasSiteCSS:!0};case Te.FETCH_SITEDESIGN_MODEL_FULFILLED:return{...t,hasSiteDesign:!0};case Te.PAGES_MOUNTED:return i=[...t.renderedPages,...e.payload.pages],{...t,renderedPages:i};case Te.PAGES_UNMOUNTED:return{...t,renderedPages:cb.default.difference(t.renderedPages,e.payload.pages)};case Te.FETCH_CONTENT_REJECTED:return{...t,networkErrors:[...t.networkErrors,{...e.payload.config?.contentIdentifier,code:e.payload.response?.status}]}}return t}var cb,uX,z8,U8=T(()=>{jt();Re();Re();cb=ce(ve(),1),uX=Wl(),z8={hasSiteModel:!1,hasScaffolding:!1,hasSiteDesign:!1,hasSiteCSS:!1,hasShopModel:!1,hasSitePackage:!1,quickView:{mode:"default",inited:!1,autoScrolling:!1,elementArray:!1,activeIndex:0,startingIndex:0},contactForm:{transition:!1,inited:!1},adminMode:Ri,inAdminFrame:Ri,renderedPages:[],networkErrors:[],pageNotFound:!1,fontsLoaded:[],deviceType:uX}});var pb={};ai(pb,{default:()=>db,rawReducers:()=>cX});var db,cX,hb=T(()=>{y8();x8();S8();I8();M8();R8();N8();D8();F8();U8();jt();db={structure:lb,site:b8,pages:w8,sets:C8,media:A8,css:k8,auth:O8,siteDesign:L8,frontendState:H8,commerce:P8},cX={pages:ob,sets:ab,commerce:sb}});var q8,fge,B8,W8=T(()=>{q8=ce(Ov(),1);di();W4();fge=ce(c8(),1);jt();v8();Kv();hb();Re();B8=()=>{let t=[],e=(0,q8.createDynamicMiddlewares)(),i=[B4,nb,Gv(),e.enhancer],r=df(Nv(...i),...t),n=ne?{}:window.__PRELOADED_STATE__||{},o=pd(Vn(db),n,r);return ne||(window.store=o,delete window.__PRELOADED_STATE__),{store:o}}});function m(t,e,i,r,n,o){var s,u,c={};for(u in e)u=="ref"?s=e[u]:c[u]=e[u];var d={type:t,props:c,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--dX,__source:n,__self:o};if(typeof t=="function"&&(s=t.defaultProps))for(u in s)c[u]===void 0&&(c[u]=s[u]);return ze.vnode&&ze.vnode(d),d}var dX,W=T(()=>{Pe();Pe();dX=0});var V8=T(()=>{Pe();W()});var $8=T(()=>{});var sn,nu=T(()=>{Se();$8();W();sn=({customStyle:t,className:e})=>m("div",{style:t,className:`caution-processing${e?" "+e:""}`})});var j8=T(()=>{});var G8,K8,fb,Y8,Z8=T(()=>{Se();ht();di();Ua();nu();j8();W();G8=0,K8=!(typeof window<"u"&&window.document&&window.document.createElement),fb=class extends ae{constructor(e){if(super(e),K8)return;let i=new URLSearchParams(window.location.search.replaceAll("+","%2B")),r=["cargo.site","local.dev.cargo.site","local.dev.cargo.site","dev.cargo.site"];this.state={error:null,loading:!1,checkingAutomatedAuth:!0,formView:"login",resetEmail:null,prevFormState:null,prefilledEmail:i.get("email"),isHomePageLogin:r.includes(window.location.hostname)},e.canCreateNewAccount?this.state.formView="newAcct":e.magicEmailLogin&&(this.state.formView="magicEmail"),this.containerRef=_e.createRef();let n=i.get("t");if(this.redirectURL=i.get("rd"),i.has("t")){i.delete("t");let o=i.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}if(this.props.loginToUdotCargoOnly){this.state.checkingAutomatedAuth=!1;return}if(G8>=1){this.state.checkingAutomatedAuth=!1;return}if(n==="")this.state.checkingAutomatedAuth=!1;else if(i.has("c")&&i.has("signature"))fetch(`${ei}/auth/verify?${i.toString()}`,{method:"get"}).then(async s=>{let u=await s.json();u.access_token&&u.id?(this.props.setAuthData(u.access_token,u.id),this.props.onLoginSuccess?.(u),window.history.replaceState({},document.title,window.location.origin+window.location.pathname)):this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."}),requestAnimationFrame(()=>{this.setState({checkingAutomatedAuth:!1})})}).catch(s=>{console.log(s),this.setState({checkingAutomatedAuth:!1,error:"Something went wrong. Please try again later."})});else{let s=!1;this.props.domain_active&&n===null&&(s=!0);let u={timeout:3e3,jwt:n,bounce:s};this.props.site_url&&(u.site_url=this.props.site_url),this.props.site_id&&(u.site_id=this.props.site_id),this.props.getAuthToken(u).catch(c=>{console.log("Failed to fetch auth token.")}).finally(()=>{G8++,!s&&requestAnimationFrame(()=>{this.props.onCookieAuthComplete?.(),this.setState({checkingAutomatedAuth:!1})})})}}ForgotButton=()=>{let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return this.state.formView==="newAcct"?null:m("button",{className:"forgot",style:e,type:"button",onClick:i=>{i.preventDefault(),this.setState({formView:"forgot",error:null,prevFormState:"login"})},children:"Forgot?"})};createOrLogin=()=>{if(!this.state.isHomePageLogin)return this.ForgotButton();let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"};return m("button",{className:"account",type:"button",style:e,onClick:i=>{i.preventDefault(),this.state.formView==="login"&&this.setState({formView:"newAcct",error:null,prevFormState:"login"}),this.state.formView==="newAcct"&&this.setState({formView:"login",error:null,prevFormState:"newAcct"})},children:[this.state.formView==="newAcct"?"Login to an existing account":null,this.state.formView==="login"?"New Account":null]})};render(){if(K8||this.state.checkingAutomatedAuth||this.props.cookieAuthOnly)return null;let e=this.state.loading?{display:"inline-block",pointerEvents:"none"}:{display:"inline-block"},i="Login";return this.state.formView==="newAcct"?i="New Account":this.state.formView==="forgot"&&(i="Reset Password"),m("div",{id:"login",className:`login-window${this.props.noOverlay===!0?" not-overlaid":""}`,ref:this.containerRef,onMouseUp:r=>{if(this.props.canClickout&&!r.target.closest(".login-modal")){let n=new CustomEvent("remove-login-form");document.dispatchEvent(n),this.props.onClickout&&!this.state.loading&&this.props.onClickout()}},children:m("div",{className:"login-modal custom login-frame",children:[m("div",{className:"login-header",children:[m("div",{className:"logo-box"}),m("div",{className:"title",children:i})]}),this.state.formView==="newAcct"?m("form",{children:[m("div",{className:"input-fields new",children:[this.state.prefilledEmail?null:m("div",{className:"text-input bars",children:m("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),m("div",{className:"text-input bars",children:m("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?m("div",{className:"under-input-row",children:m("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),this.state.formView==="newAcct"?m("div",{className:"terms",children:["By creating an account, you agree to our ",m("a",{href:"https://cargo.site/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"}),m("br",{}),"and ",m("a",{href:"https://cargo.site/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"}),"."]}):null,m("div",{className:"login-options",children:[m("button",{className:"login",type:"submit",style:e,onClick:r=>{r.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.validateLogin(n)&&this.login(n)},children:[this.state.loading&&m(sn,{className:"accent default-border-radius"}),"OK"]}),this.createOrLogin()]})]}):null,this.state.formView==="login"||this.state.formView==="magicEmail"?m("form",{children:[m("div",{className:"input-fields",children:[this.state.prefilledEmail?null:m("div",{className:"text-input bars",children:this.state.formView==="magicEmail"?m("input",{type:"text",name:"cargoMagicField",id:"cargoMagicField",placeholder:"Enter your e\u200Cma\u200Cil a\u200Cdd\u200Cres\u200Cs",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}}):m("input",{type:"text",name:"email",id:"email",placeholder:this.state.formView==="magicEmail"?"Enter your e\u200Cma\u200Cil address":"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.formView!=="magicEmail"&&m("div",{className:"text-input bars",children:m("input",{type:"password",name:"password",placeholder:"Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.isHomePageLogin?m("div",{className:"under-input-row",children:[this.state.error?m(X,{children:m("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null,m("span",{children:this.ForgotButton()})]}):m(X,{children:this.state.error?m("div",{className:"under-input-row",children:[m("span",{style:{color:"#FF0000",marginLeft:"5px"},children:this.state.error}),m("span",{})]}):null})]}),m("div",{className:"login-options",children:[m("button",{className:"login",type:"submit",style:e,onClick:r=>{r.preventDefault(),this.setState({error:null,loading:!0});let n=!0,o=new FormData(this.containerRef.current.querySelector("form"));this.state.formView==="magicEmail"&&(n=this.validateMagicLogin(o)),n&&this.login(o)},children:[this.state.loading&&m(sn,{className:"accent default-border-radius"}),"OK"]}),this.state.formView!=="magicEmail"&&this.createOrLogin()]})]}):null,this.state.formView==="forgot"?m(X,{children:m("form",{children:[m("div",{className:"enter-email",children:"Enter an email address associated with your Cargo Account:"}),m("div",{className:"input-fields",children:[m("div",{className:"text-input bars",children:m("input",{type:"text",name:"email",id:"email",placeholder:"Email Address...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?m("div",{className:"under-input-row",children:m("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),m("div",{className:"login-options",children:[m("button",{className:"login",type:"submit",style:e,onClick:r=>{r.preventDefault(),this.setState({error:null,loading:!0});let n=new FormData(this.containerRef.current.querySelector("form"));this.forgot(n)},children:[this.state.loading&&m(sn,{className:"accent default-border-radius"}),"Submit"]}),m("button",{className:"forgot",style:e,type:"button",onClick:r=>{r.preventDefault(),this.setState({formView:this.state.prevFormState?this.state.prevFormState:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="reset"?m(X,{children:m("form",{children:[m("div",{className:"enter-email",children:[this.state.resetEmail?m(X,{children:["We\u2019ve sent a reset code to ",m("br",{}),this.state.resetEmail]}):m(X,{children:"We\u2019ve sent a reset code to the email associated with your Cargo Account:"})," 							"]}),m("div",{className:"input-fields",children:[m("div",{className:"text-input bars",children:m("input",{type:"text",name:"pwreset",placeholder:"Enter Reset Code",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),m("div",{className:"text-input bars",children:m("input",{type:"password",name:"password",autoComplete:"new-password",placeholder:"Enter a new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),m("div",{className:"text-input bars",children:m("input",{type:"password",name:"password_reset_confirm",autoComplete:"new-password",placeholder:"Confirm new Password...",onKeyDown:()=>{this.state.error!==null&&this.setState({error:null})}})}),this.state.error?m("div",{className:"under-input-row",children:m("span",{style:{color:"#FF0000",marginLeft:"5px"},children:[this.state.error,"\xA0"]})}):null]}),m("div",{className:"login-options",children:[m("button",{className:"login",type:"submit",style:e,onClick:r=>{r.preventDefault();let n=new FormData(this.containerRef.current.querySelector("form")),o=this.validateForm(n);o&&(this.setState({error:null,loading:!0}),this.forgot(n)),o||this.setState({loading:!1})},children:[this.state.loading&&m(sn,{className:"accent default-border-radius"}),"OK"]}),m("button",{className:"forgot",type:"button",style:e,onClick:r=>{r.preventDefault(),this.setState({formView:"login",error:null})},children:"Cancel"})]})]})}):null,this.state.formView==="magicEmailSent"?m("form",{children:[m("div",{className:"input-fields",children:m("div",{className:"field-message",style:{paddingTop:"20px"},children:m("span",{children:"We\u2019ve emailed you a login link"})})}),m("div",{className:"login-options",children:m("button",{className:"login",type:"submit",style:{visibility:"hidden"},onClick:r=>{r.preventDefault(),r.target.closest(".login-modal").style.display="none"},children:"OK"})})]}):null]})})}login=e=>{if(this.props.site_url&&e.append("site_url",this.props.site_url),this.props.templateID&&e.append("site_id",this.props.templateID),this.state.prefilledEmail&&e.append("email",this.state.prefilledEmail),this.state.formView==="magicEmail"){let n=e.get("cargoMagicField");e.append("email",n),e.delete("cargoMagicField"),fetch(`${ei}/auth/send`,{method:"post",body:e,credentials:"include"}).then(async o=>{if(o.ok)this.setState({formView:"magicEmailSent",loading:!1});else{let s=await o.json();this.setState({error:s.message||"Something went wrong. Please try again later.",loading:!1})}}).catch(o=>{console.log(o),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})});return}let r=this.state.formView==="newAcct"?"/dispatch/admin/loginCreate":"/dispatch/admin/login";if(e.append("network","c3"),!this.props.site_url&&!this.props.templateID&&this.state.formView==="newAcct"){let n=window.store.getState(),o=Bs==="https://cargo.site"?1597765:1791886;if(n){let s=n.templates?n.templates.flatMap(u=>u.sites):[];if(s.length>0){let u=s.length-1,c=Math.floor(Math.random()*u),d=s[c];d&&(o=d?.id?d.id:o)}}e.append("site_id",o)}fetch(Bs+r,{method:"post",body:e,credentials:"include"}).then(async n=>{let o=await n.json(),{access_token:s,id:u,bounce_jwt:c}=o.jdata||{};s&&u?(this.props.loginToUdotCargoOnly!==!0&&this.props.setAuthData(s,u),this.props.domain_active&&c?this.props.getAuthToken({reverse_bounce_jwt:c}).then(()=>{this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)}):this.redirectURL?window.location.href=this.redirectURL:this.props.onLoginSuccess?.(o.jdata)):this.setState({error:o?.error||"Something went wrong. Please try again later.",loading:!1})}).catch(n=>{console.log(n),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.props.loadingTillFormRemoval!==!0&&this.setState({loading:!1})})};forgot=e=>{e.append("network","c3"),this.props.site_url&&e.append("site_url",this.props.site_url),fetch(Bs+"/dispatch/auth/handleResetFormPost",{method:"post",body:e,credentials:"include"}).then(async i=>{let r=await i.json();if(r.error&&r.error?.[0]?.length>0)this.setState({error:r.error[0],loading:!1});else if(this.state.formView==="forgot")this.setState({formView:"reset",resetEmail:e.get("email")});else{let n=new FormData;n.set("email",this.state.resetEmail),n.set("password",e.get("password")),this.login(n)}}).catch(i=>{console.log(i),this.setState({error:"Something went wrong. Please try again later.",loading:!1})}).finally(()=>{this.setState({loading:!1})})};validateMagicLogin(e){let i=null;for(let r of e.entries()){let[n,o]=r;n==="cargoMagicField"&&(o===""||!o)&&this.state.formView==="magicEmail"&&(o===""||!o)&&(i="Field cannot be empty.")}return i?(this.setState({error:i,loading:!1}),!1):!0}validateLogin(e){let i=null;for(let r of e.entries()){let[n,o]=r;n==="email"&&(o===""||!o)&&!this.state.prefilledEmail&&(this.state.formView==="newAcct"&&(o===""||!o)?i="Fields cannot be empty.":i="Incorrect Username or Password."),n==="password"&&(o===""||!o)&&i===null&&(i="Fields cannot be empty.")}return i?(this.setState({error:i,loading:!1}),!1):!0}validateForm(e){var i=e.get("pwreset").trim(),r=e.get("password").trim(),n=e.get("password_reset_confirm").trim();return i==""?(this.setState({error:"Reset code cannot be empty."}),!1):r==""||n==""?(this.setState({error:"Password cannot be empty."}),!1):r!=n?(this.setState({error:"Passwords do not match."}),!1):!0}componentDidMount=()=>{this.animateContainer()};componentDidUpdate=()=>{this.animateContainer()};animateContainer=()=>{this.props.animateIn===!1?requestAnimationFrame(()=>{this.containerRef.current&&this.containerRef.current?.classList?.add("active-immediate")}):this.containerRef.current&&!this.containerRef.current.classList.contains("active")&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.containerRef?.current&&this.containerRef?.current?.classList.add("active")})})}},Y8=De(t=>({site_url:t.site?.site_url,site_id:t.site?.id,domain_active:t.site?.domain_active}),(t,e)=>Pt({getAuthToken:e.getAuthTokenAction,setAuthData:(i,r)=>({type:"AUTHENTICATE_USER_FULFILLED",payload:{data:{access_token:i,id:r}}})},t))(fb)});var _n,js=T(()=>{ht();W();_n=t=>e=>m(t,{store:qh(),...e})});function pX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mX(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(function(r){return r}).join(" ")}var l1e,u1e,mb,gb,vb,ou,hX,fX,X8,Nf,c1e,J8=T(()=>{ia();ia();Wh();Se();Gh();Rs();zl();$h();l1e=function(t){Hr(e,t);function e(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r=t.call.apply(t,[this].concat(o))||this,r.history=jh(r.props),r}var i=e.prototype;return i.render=function(){return _e.createElement(Da,{history:this.history,children:this.props.children})},e}(_e.Component),u1e=function(t){Hr(e,t);function e(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r=t.call.apply(t,[this].concat(o))||this,r.history=YC(r.props),r}var i=e.prototype;return i.render=function(){return _e.createElement(Da,{history:this.history,children:this.props.children})},e}(_e.Component),mb=function(e,i){return typeof e=="function"?e(i):e},gb=function(e,i){return typeof e=="string"?Tr(e,null,null,i):e},vb=function(e){return e},ou=_e.forwardRef;typeof ou>"u"&&(ou=vb);hX=ou(function(t,e){var i=t.innerRef,r=t.navigate,n=t.onClick,o=Ir(t,["innerRef","navigate","onClick"]),s=o.target,u=qt({},o,{onClick:function(d){try{n&&n(d)}catch(p){throw d.preventDefault(),p}!d.defaultPrevented&&d.button===0&&(!s||s==="_self")&&!pX(d)&&(d.preventDefault(),r())}});return vb!==ou?u.ref=e||i:u.ref=i,_e.createElement("a",u)}),fX=ou(function(t,e){var i=t.component,r=i===void 0?hX:i,n=t.replace,o=t.to,s=t.innerRef,u=Ir(t,["component","replace","to","innerRef"]);return _e.createElement(Oa.Consumer,null,function(c){c||qn(!1);var d=c.history,p=gb(mb(o,c.location),c.location),g=p?d.createHref(p):"",v=qt({},u,{href:g,navigate:function(){var S=mb(o,c.location),_=dr(c.location)===dr(gb(S)),E=n||_?d.replace:d.push;E(S)}});return vb!==ou?v.ref=e||s:v.innerRef=s,_e.createElement(r,v)})}),X8=function(e){return e},Nf=_e.forwardRef;typeof Nf>"u"&&(Nf=X8);c1e=Nf(function(t,e){var i=t["aria-current"],r=i===void 0?"page":i,n=t.activeClassName,o=n===void 0?"active":n,s=t.activeStyle,u=t.className,c=t.exact,d=t.isActive,p=t.location,g=t.sensitive,v=t.strict,b=t.style,S=t.to,_=t.innerRef,E=Ir(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return _e.createElement(Oa.Consumer,null,function(I){I||qn(!1);var F=p||I.location,O=gb(mb(S,F),F),L=O.pathname,z=L&&L.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),G=z?Ds(F.pathname,{path:z,exact:c,sensitive:g,strict:v}):null,H=!!(d?d(G,F):G),N=typeof u=="function"?u(H):u,J=typeof b=="function"?b(H):b;H&&(N=mX(N,o),J=qt({},J,s));var oe=qt({"aria-current":H&&r||null,className:N,style:J,to:O},E);return X8!==Nf?oe.ref=e||_:oe.innerRef=_,_e.createElement(fX,oe)})})});function Lf(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(let n=0;n<i.length;n++)if(!hasOwnProperty.call(e,i[n])||!Object.is(t[i[n]],e[i[n]]))return!1;return!0}function ln(t){if(ne)return t;let e,i,r,n=()=>{e={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},i=!1,r=void 0};n();let o=function(){let u=arguments.length-1;if(u===-1)return i===!1&&(r=t.call(this),i=!0),r;let c=e;for(let b=0;b<u;b+=1){let S=arguments[b],_=S===null||typeof S!="object"&&typeof S!="function",E;_?c.primitiveArgs===null?E=c.primitiveArgs=new Map:E=c.primitiveArgs:c.referenceArgs===null?E=c.referenceArgs=new WeakMap:E=c.referenceArgs,E.has(S)===!1?(c={primitiveResults:null,referenceResults:null,primitiveArgs:null,referenceArgs:null},E.set(S,c)):c=E.get(S)}let d,p=arguments[u],g=p===null||typeof p!="object"&&typeof p!="function",v;return g?c.primitiveResults===null?v=c.primitiveResults=new Map:v=c.primitiveResults:c.referenceResults===null?v=c.referenceResults=new WeakMap:v=c.referenceResults,v.has(p)?d=v.get(p):(d=t.apply(this,arguments),v.set(p,d)),d};return o.clear=function(){let u=arguments.length-1;if(u===-1){n();return}let c=e;for(let g=0;g<u;g+=1){let v=arguments[g],S=v===null||typeof v!="object"&&typeof v!="function"?c.primitiveArgs:c.referenceArgs;if(S===null)return;c=S.get(v)}let d=arguments[u];d===null||typeof d!="object"&&typeof d!="function"?(c.primitiveArgs!==null&&c.primitiveArgs.delete(d),c.primitiveResults!==null&&c.primitiveResults.delete(d)):(c.referenceArgs!==null&&c.referenceArgs.delete(d),c.referenceResults!==null&&c.referenceResults.delete(d))},o}var Wa,su,gX,bb,au,vX,Of,e_,t_,Df,Q8,i_,lu,Ar=T(()=>{Wa=ce(ve(),1);_i();Re();Pe();su=(t={},e)=>{let i={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:t.hasOwnProperty("t")&&t.t=="webgl"};t=Wa.default.extend(i,t),t.t==="original"&&(t.retina=!1),t.retina===!0&&!t.webgl&&(t.q==null&&(t.q=75),t.hasOwnProperty("w")&&(t.w=Math.min(t.w*2,e.width)),t.hasOwnProperty("h")&&(t.h=Math.min(t.h*2,e.height))),t.w&&t.w>e.width&&(t.w=e.width),t.h&&t.h>e.height&&(t.h=e.height);var r=gX(t.w,t.h,e);t.w=r.w,t.h=r.h;var n=["t","w","h","q","c"],o=[];return Wa.default.each(t,function(s,u){n.indexOf(u)===-1||s===""||(u==="c"?o.push("c/"+s.x+"/"+s.y+"/"+s.w+"/"+s.h):o.push(u+"/"+s))},void 0),e.hash!==void 0&&e.name!==void 0&&r.w>0?t.url="https://freight.cargo.site/"+o.join("/")+"/i/"+e.hash+"/"+e.name:t.url="",t},gX=(t,e,i)=>{let r=t,n=e,o=parseInt(i.width),s=parseInt(i.height);if(o==s)r=t||e||o,n=r;else if(t&&!e){let u=o/t;n=Math.floor(s/u),r=t}else if(e&&!t){let u=s/e;r=Math.floor(o/u),n=e}else{let u=Math.min(s/e,o/t);r=Math.floor(o/u),n=Math.floor(s/u)}return{w:r,h:n}},bb=(t=1,e)=>{!t||t<1||requestAnimationFrame(()=>{e?.(),bb(--t,e)})};au=(t,e,i,r,n=0,o={})=>{o.shared=o.shared||{};let s=(t.byParent[r.id]||[]).reduce((u,c)=>(u[t.indexById[c]]=c,u),{});for(;n>=0&&n<r.page_count&&o.shared.hasBreak!==!0;){let u=s[n],c=u&&(e.byId[u]||i.byId[u]);if(!(c?.page_type==="set"&&o.includeSets!==!0)&&o.callback?.(r.id,n,c)==="break"){o.shared.hasBreak=!0;break}c?.page_type==="set"&&au(t,e,i,c,o.reverse===!0?c.page_count-1:0,{...o,traverseUp:!1}),o.reverse===!0?n--:n++}if(o.traverseUp!==!1&&(o.reverse===!0&&n<0||o.reverse===!1&&n>r.page_count-1)){let u=i.byId[Wa.default.findKey(t.byParent,d=>d.includes(r.id))],c=t.indexById[r.id];u&&c!==void 0&&au(t,e,i,u,c+(o.reverse===!0?-1:1),o)}};vX=ze.debounceRendering,Of=null,e_=()=>{ze.debounceRendering=t=>{Of=t}},t_=t=>{Of&&!t&&Of(),Of=null,ze.debounceRendering=vX},Df=new WeakMap,Q8=ze.diffed;ze.diffed=t=>{Df.has(t)&&Df.get(t)(t.__e),Q8&&Q8(t)};i_=(t,e)=>(Df.set(t,e),()=>{Df.delete(t)}),lu=(t,e)=>{if(!t)return null;let i="",r=(o,s)=>{let u=s.style?.getPropertyValue(o);return u!==""&&u!==void 0?u:null},n=[];return Wa.default.each(t.rules,o=>{let s=o.selectorText,u={},c=!1,d=!1,p=!1;o.cssText&&o.cssText.includes("--text-style")&&(d=!0,n.push(s+" a"),n.push(s+" a:hover")),o.cssText&&Wa.default.each(n,b=>{o.cssText.includes(b)&&(d=!0)}),o?.selectorText?.includes(".mobile")&&(p=!0),Wa.default.each(e,b=>{let S=!1;Array.isArray(b.denyList)&&b.denyList.forEach(E=>{E.includes("match:")&&s?.match(E.replace("match:",""))&&(S=!0),s&&s===E&&(S=!0)});let _=!1;Array.isArray(b.allowList)?b.allowList.forEach(E=>{E.includes("match:")&&s?.match(E.replace("match:",""))&&(_=!0),s&&s===E&&(_=!0)}):_=!0,(d||p)&&(S=!0),!(S===!0||_===!1)&&(u=b.properties.reduce((E,I)=>(I&&(E[I]=r(I,o)),E),u))});let g=".mobile "+s,v=Array.from(t.rules).find(b=>b.selectorText===g);v&&Object.keys(u).forEach(b=>{r(b,v)&&(u[b]=null)}),!(Object.values(u).every(b=>b===null)||Object.values(u).length===0)&&(i+=g+" { ",Wa.default.each(u,(b,S)=>{if(b){let _=b.split(" ").reduce((E,I,F)=>E+` calc(${I} * var(--mobile-padding-offset))`,"");i+=`${S}: ${_};`}}),i+=" } ")}),i}});function xX(t,e){let i=wX(t.pages.byId,uu),r=yX(i,t.structure.bySort),n=bX(i);return{renderedPages:i,renderedPins:r,nestingMap:n,sortMap:t.structure.bySort,adminMode:t.frontendState.adminMode}}var pi,Gs,wb,uu,yb,bX,yX,wX,r_,Pd=T(()=>{Pe();Se();_i();pi=ce(ve(),1);ht();Ar();W();Gs=wn(),wb=()=>{},uu=[],yb=class extends Ti{constructor(e){super(e),this.state={adjustPairs:[],levelData:{},pageHeights:{},renderedPins:[],renderedPages:[],nestingMap:{},onPageMount:i=>{uu=[...uu,i]},onPageUnmount:i=>{uu=uu.filter(r=>r!==i)}},wb=this.updateHeights}updateHeights=e=>{this.setState(i=>({pageHeights:{...i.pageHeights,...e}}))};getTallestOfAdjusterCandidates=e=>{let i=null,r=[];pi.default.each(e,o=>{r.push({pageID:o.id,pageName:o.title,pageHeight:this.getHeightById(o.id)})});let n=pi.default.maxBy(r,o=>o.pageHeight);return n!==void 0?pi.default.filter(e,o=>o.id===n.pageID)[0]:!1};componentDidUpdate=(e,i)=>{this.makePinAdjustments(e,i)};findTallestOverlayAdjusterPageInLevel=(e,i)=>{let r=e.filter(n=>n.pin_options?.overlay===!0&&n.pin_options.adjust===!0);return r.length>0?this.getTallestOfAdjusterCandidates(r):null};getAdjustOnlyPageHeights=(e,i)=>{let r=pi.default.filter(this.props.nestingMap[i][e],o=>o.pin_options?.adjust&&!o.pin_options?.overlay),n=0;return pi.default.each(r,o=>{n+=this.getHeightById(o.id)}),n};getAdjustOnlyPinsByLevel=(e,i)=>pi.default.filter(this.props.nestingMap[i][e],r=>!r?.pin_options?.overlay);getOverlayPinsByLevel=(e,i)=>pi.default.filter(this.props.nestingMap[i][e],r=>r?.pin_options?.overlay);getClosestPageByProximity=(e,i)=>e.sort((r,n)=>i==="top"?this.props.sortMap[r.id]-this.props.sortMap[n.id]:this.props.sortMap[n.id]-this.props.sortMap[r.id])[0];getPagesToAdjust=(e,i)=>{let r=[],n=null,o=this.getAdjustOnlyPinsByLevel(e,i);if(o.length>0?r.push(this.getClosestPageByProximity(o,e)):pi.default.each(this.props.nestingMap,(s,u)=>{if(parseInt(u)>i&&s[e].length>0){let c=s[e].filter(p=>p.pin_options?.overlay===!0),d=s[e].filter(p=>p.pin_options?.overlay===!1);if(r=c.length>0?c:[],r.length===0&&d?.length>0&&r.push(this.getClosestPageByProximity(d,e)),n=u,r.length>0)return!1}}),r[0]===void 0){let s=this.props.renderedPages.filter(c=>c.pin===!1).sort((c,d)=>this.props.sortMap[c.id]-this.props.sortMap[d.id]),u=e==="top"?0:s.length-1;s.length>0&&r.push(s[u])}return{adjustedPages:r,adjustedLevel:n}};getHeightById=e=>this.state.pageHeights[e]??uu.find(i=>i.id===e)?.getBoundingClientRect().height;makePinAdjustments=(e,i)=>{if(!this.props.renderedPages||this.props.renderedPages.length===0||pi.default.isEqual(this.props.renderedPins,e.renderedPins)&&pi.default.isEqual(this.state.pageHeights,i.pageHeights)&&pi.default.isEqual(this.props.renderedPages,e.renderedPages)&&pi.default.isEqual(this.props.sortMap,e.sortMap))return;let r=[],n={levels:{},locations:{top:{totalHeight:0},bottom:{totalHeight:0}}};pi.default.each(this.props.nestingMap,(o,s)=>{let u={};s=parseInt(s),u.level=s,pi.default.each(o,(c,d)=>{if(d==="center")return;u[d]={adjustsSelf:!1,totalHeight:0,startingHeight:null,adjusterId:null,adjusterHeight:null,adjustedLevel:null,adjusteeIDs:null,hasOverlayPins:null};let p=u[d];p.hasOverlayPins=this.getOverlayPinsByLevel(d,s).length>0;let g=this.findTallestOverlayAdjusterPageInLevel(c,d);if(g){p.adjusterId=g.id,p.adjusterHeight=this.getHeightById(g.id),p.adjustsSelf=this.getAdjustOnlyPinsByLevel(d,s).length>0;let _=this.getPagesToAdjust(d,s).adjustedPages;_?.length>0&&(p.adjustedLevel=this.props.renderedPins[_[0].id]?.depth??"content",p.adjusteeIDs=pi.default.map(_,"id"),r[g.id]={adjusts:pi.default.map(_,"id"),location:d,adjustedHeight:this.getHeightById(g.id)})}let v=0,b=g?this.getHeightById(g.id):0,S=!0;p.totalHeight=(S?b:0)+this.getAdjustOnlyPageHeights(d,s),pi.default.each(n.levels,function(_,E){E<s&&(v+=_[d].totalHeight)}),p.startingHeight=v===0?null:v}),n.levels[s]=u}),(!pi.default.isEqual(i.adjustPairs,r)||!pi.default.isEqual(i.renderedPins,this.props.renderedPins)||!pi.default.isEqual(i.levelData,n))&&this.setState({adjustPairs:r,renderedPins:this.props.renderedPins,levelData:n})};getAdjustingLevelHeight=(e,i,r)=>{let n=null;return pi.default.each(e.levels,o=>{o[r].adjustedLevel===i&&(n=o[r].totalHeight)}),n};render(){return m(Gs.Provider,{value:this.state,children:this.props.children||null})}},bX=ln(t=>{let e=store.getState();return t.reduceRight((i,r)=>{let n=Je.getParentSetList(e,r.id).length-1;r.pin===!0&&r.pin_options.fixed===!0&&(n=0),i[n]||(i[n]={top:[],bottom:[],center:[]});let o=i[n],s=r.pin?r.pin_options.position:"center",u=o[s];return u.push(r),u.sort((c,d)=>e.structure.bySort[c.id]-e.structure.bySort[d.id]),i},{})}),yX=ln((t,e)=>{let i=store.getState(),r=t.map(n=>({depth:Je.getParentSetList(i,n.id).length-1,pageListSort:e[n.id],id:n.id,fixed:n.pin_options?.fixed&&n.pin_options?.fixed===!0})).sort((n,o)=>n.pageListSort-o.pageListSort).sort((n,o)=>{if(n.fixed||o.fixed)return n.depth-o.depth});return t.reduceRight((n,o,s)=>{if(o.pin===!0&&pi.default.isPlainObject(o.pin_options)){let u=Je.getParentSetList(i,o.id).length-1;n[o.id]={depth:o.pin_options.fixed?0:Je.getParentSetList(i,o.id).length-1,originalDepth:u,location:o.pin_options?.position,type:o.pin_options.fixed?"fixed":o.pin_options.overlay?"overlay":"adjust",adjusts:o.pin_options?.adjust,sort:e[o.id],pinSort:r.findIndex(c=>c.id===o.id)+1}}return n},{})}),wX=ln((t,e)=>e.map(i=>t[i.id]).filter(i=>i!==void 0&&i.overlay!==!0));r_=De(xX)(yb)});function Nt(t){class e extends ae{constructor(r){super(r)}render(r){return m(t,{...this.props,pageInfo:this.context})}}return e.contextType=n_,e}var Ff,n_,xb,zf,Ni=T(()=>{Pe();ht();W();Ff=new Map,n_=wn({isEditing:!1,pid:null,filterIndexes:[],setPageData:()=>!1,getPageData:()=>!1},"PageInfoContext"),xb=class extends ae{constructor(e){super(e)}setPageData=(e={},i)=>{if(!this.props.pageRef.current)return;let n=Array.from(this.props.pageRef.current.querySelectorAll(i.tagName)).indexOf(i);if(n!==-1){let o=Ff.get(this.props.value.pid+"-"+i.tagName+"-"+n);o?o={...o,...e}:o=e,Ff.set(this.props.value.pid+"-"+i.tagName+"-"+n,o)}};getPageData=e=>{if(!this.props.pageRef.current)return null;let r=Array.from(this.props.pageRef.current.querySelectorAll(e.tagName)).indexOf(e);return r!==-1?Ff.get(this.props.value.pid+"-"+e.tagName+"-"+r)||{}:{}};getContextObject=()=>(this.props.value!==this.lastProps?.value&&(this.currentContextValue={...this.props.value,setPageData:this.setPageData,getPageData:this.getPageData}),this.lastProps=this.props,this.currentContextValue);render(e){return m(n_.Provider,{value:this.getContextObject(),children:e.children})}componentDidUpdate(e){e.adminMode!==this.props.adminMode&&Ff.clear()}};zf=De((t,e)=>({adminMode:t.frontendState.adminMode}))(xb)});var Hf,o_,a_=T(()=>{Hf=()=>new Map,o_=(t,e,i)=>{let r=t.get(e);return r===void 0&&t.set(e,r=i()),r}});var s_,l_=T(()=>{s_=()=>new Set});var u_,M1e,c_=T(()=>{u_=Array.from,M1e=Array.isArray});var Uf,d_=T(()=>{a_();l_();c_();Uf=class{constructor(){this._observers=Hf()}on(e,i){o_(this._observers,e,s_).add(i)}once(e,i){let r=(...n)=>{this.off(e,r),i(...n)};this.on(e,r)}off(e,i){let r=this._observers.get(e);r!==void 0&&(r.delete(i),r.size===0&&this._observers.delete(e))}emit(e,i){return u_((this._observers.get(e)||Hf()).values()).forEach(r=>r(...i))}destroy(){this._observers=Hf()}}});var h_,cu,p_,Cb,Qe,Oi=T(()=>{h_=ce(ve(),1);d_();Re();Cb=class extends Uf{constructor(){super(),this.data={baseUnit:-1,mobile:{portrait:!0,active:!1,chrome:0,maxHeight:720},window:{w:1280,h:720}},ne||(this.SvhSupported=CSS.supports("height","100svh"),this.SvhSupported&&(this.minHeightMeasuringStick=document.createElement("div"),this.minHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100svh;"),this.minHeightMeasuringStick.setAttribute("tabindex",-1),this.minHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.minHeightMeasuringStick)),this.maxHeightMeasuringStick=document.createElement("div"),this.maxHeightMeasuringStick.setAttribute("style","position: fixed; top: 0;left: 0;z-index: -99; visibility: hidden; height: 100vh;"),this.maxHeightMeasuringStick.setAttribute("tabindex",-1),this.maxHeightMeasuringStick.setAttribute("aria-hidden",!0),document.body.appendChild(this.maxHeightMeasuringStick),this.mobilePortraitMediaQuery=window.matchMedia("(max-aspect-ratio: 4/5)"),this.mobileLandscapeMediaQuery=window.matchMedia("(min-aspect-ratio: 2/3) and (max-height: 500px)"),this.setupMobileListener(),this.onWindowResize(),window._windowInfo=this,window.addEventListener("resize",this.onWindowResize,{passive:!0}))}setupStore(e){e.subscribe(()=>{let i=e.getState();i.frontendState&&i.frontendState.adminMode!==p_&&(setTimeout(()=>{this.onWindowResize()},150),p_=i.frontendState.adminMode),i.adminState&&i.adminState.viewport!==cu&&(cu=i.adminState.viewport,this.onMobileChange())})}setupMobileListener(){this.mobilePortraitMediaQuery.removeEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.removeEventListener("change",this.onMobileChange),this.onMobileChange(),this.mobilePortraitMediaQuery.addEventListener("change",this.onMobileChange),this.mobileLandscapeMediaQuery.addEventListener("change",this.onMobileChange)}onMobileChange=()=>{let e;cu?e=cu==="mobile":e=this.mobilePortraitMediaQuery.matches||this.mobileLandscapeMediaQuery.matches;let i=this.mobilePortraitMediaQuery.matches||cu&&cu==="mobile"||!1;(e!==this.data.mobile.active||e&&i!==this.data.mobile.portrait)&&(this.data.mobile.active=e,this.data.mobile.portrait=i,this.onWindowResize(),this.emit("mobile-change",[e]))};getBaseUnit(e){e=e||{};var i=0;return e=h_.default.extend(!0,{height:this.data.window.h,width:this.data.window.w,min:11,max:!1,weight:5},e),i=e.width<e.height?e.width:e.height,i/=100/e.weight,e.min&&i<e.min&&(i=e.min),e.max&&i>e.max&&(i=e.max),i}onWindowResize=()=>{let{data:e}=this,i=document.documentElement.clientWidth,r=window.innerHeight,n=0,o=0,s=this.maxHeightMeasuringStick.getBoundingClientRect().height;if(this.SvhSupported)o=this.minHeightMeasuringStick.getBoundingClientRect().height;else{let g=100;o=0;let v;for(;;){let b=window.matchMedia.call(window,"(min-height:"+o+"px)").matches;if(v!==void 0&&b!==v&&(g/=2,g*=-1),o+=g,v=b,Math.abs(g)<.01){o=Math.round(o);break}}}n=s-o;let u=0,c=5,d=0,p=9;o+n>i&&(u=(o+n)/i-1),u=u/.777777778,u>1&&(u=1),e.mobile.active&&!e.mobile.portrait&&(p=18),d=this.getBaseUnit({weight:p+c*u,min:20,width:i,height:o+n}),d!==e.size&&(document.documentElement.style.setProperty("--base-size",d*.16+"px"),document.documentElement.style.setProperty("--viewport-height",r+"px")),e.window.h=r,e.window.w=i,e.mobile.maxHeight=s,e.mobile.chrome=e.mobile.maxHeight-e.window.h,e.baseUnit=d,this.data=e,this.emit("window-resize",[])}},Qe=new Cb});var bo,Ot,ti,si,Mr=T(()=>{bo=new Map;typeof window<"u"&&(window.listeners=bo);Ot=(t,e,i,r={})=>{let n=t;for(;n&&(bo.has(n)&&bo.get(n).has(e)&&bo.get(n).get(e).forEach(o=>o(i)),r.bubbles!==!1);)n=n.parentNode||n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.host},ti=(t,e,i)=>{if(!t){console.error("Unable to subscribe to non-existing element");return}bo.has(t)||bo.set(t,new Map);let r=bo.get(t);r.has(e)||r.set(e,[]);let n=r.get(e);n.includes(i)||n.push(i)},si=(t,e,i)=>{if(!bo.has(t))return;let r=bo.get(t);if(r.has(e)){if(!i){r.delete(e);return}r.set(e,r.get(e).filter(n=>n!==i)),r.get(e).length===0&&r.delete(e),r.size===0&&bo.delete(t)}}});function yo(t){class e extends ae{constructor(r){super(r),this.lastScrollUIDRef=me()}render(){return m(t,{...this.props,scrollContext:this.context})}componentDidMount(){this.context&&this.props.baseNode&&(this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid),this.props.baseNode}refreshScrollContext=r=>{r.element==this.props.baseNode&&this.props.baseNode&&(this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid),setTimeout(()=>{this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid},0))};componentWillUnmount(){this.props.baseNode&&this.context&&this.context.removeElementFromScrollContext(this.props.baseNode,this.context.scrollUid)}componentDidUpdate(r,n){this.props.baseNode!==r.baseNode?(r.baseNode&&this.context.removeElementFromScrollContext(r.baseNode,this.context.scrollUid),this.props.baseNode&&this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid):this.lastScrollUIDRef.current!==this.context.scrollUid&&this.props.baseNode&&(this.lastScrollUIDRef.current&&this.context.removeElementFromScrollContext(this.props.baseNode,this.lastScrollUIDRef.current),this.context.addElementToScrollContext(this.props.baseNode,this.context.scrollUid),this.lastScrollUIDRef.current=this.context.scrollUid)}}return e.contextType=_b,e}function PX(t){return Pt({updateFrontendState:He.updateFrontendState},t)}var Sb,EX,_b,du,pu,Ks,Id,f_,qf,hu,wo=T(()=>{Pe();Sb=ce(ve(),1);Re();jt();Pe();Se();di();ht();Oi();Mr();W();EX={scrollUid:"default",scrollingElement:null,getScrollPosition:()=>({scrollHeight:0,scrollWidth:0,x:0,y:0,w:0,h:0}),scrollIntoView:()=>{},removeElementFromScrollContext:()=>{},addElementToScrollContext:()=>{},updateScrollPosition:()=>{}},_b=wn(Sb.default.cloneDeep(EX)),du={},pu={},Ks={default:new Set};ne||(Id=new ResizeObserver(function(t){t.forEach(function(e){Ot(e.target,"elementResize",null,{bubbles:!1})})}));f_=(t,e)=>{t.forEach(function(i){let r="inside";i.boundingClientRect.bottom<0&&!i.isIntersecting?r="above":i.boundingClientRect.top>=0&&!i.isIntersecting&&(r="below"),Ot(i.target,e,{hasLayout:i.boundingClientRect.width>0&&i.boundingClientRect.height>0,visible:i.isIntersecting,position:r},{bubbles:!1})})},qf=class extends Ti{constructor(e){super(e),this.state={scrollUid:"default",scrollingElement:null,getScrollPosition:this.getScrollPosition,scrollIntoView:this.scrollIntoView,updateScrollPosition:this.updateScrollPosition,addElementToScrollContext:this.addElementToScrollContext,removeElementFromScrollContext:this.removeElementFromScrollContext},this.scrollData={x:0,y:0,w:0,h:0}}addElementToScrollContext=(e,i)=>{if(i=="default")return;let r=e.classList.contains("quick-view-item"),n=e.parentNode?.nodeName==="GALLERY-SLIDESHOW",o=e.parentNode?.nodeName==="MARQUEE-INNER",s=e.hasAttribute("uses")&&e.getAttribute("uses").includes("flying-object");r||n||o||s?(r||s)&&(Ot(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),Ot(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})):Ks[i].has(e)||(Ks[i].add(e),pu[i].observe(e),du[i].observe(e))};removeElementFromScrollContext=(e,i)=>{pu[i]?.unobserve(e),du[i]?.unobserve(e),Ks[i]?.delete(e)};updateScrollPosition=e=>{if(ne||!this.state.scrollingElement)return;let i=e.x||this.scrollData.x,r=e.y||this.scrollData.y;this.state.scrollingElement===window?document.scrollingElement.scrollTo(i,r):this.state.scrollingElement.scrollTo(i,r)};onScrollRequest=e=>{e.defaultPrevented||(e.stopPropagation(),e.preventDefault(),this.scrollIntoView(e.target,e.detail?.transitionTime,e.detail?.preventQuickViewClose,e.detail?.lazyScroll,e.detail.callback||null,e.detail.verticalAlign))};scrollIntoView=(e,i=1e3,r=!0,n=!1,o=null,s="center")=>{if(!(this.state.scrollingElement===window?document.scrollingElement:this.state.scrollingElement).contains(e)||!e){o&&o();return}let c=e.getBoundingClientRect();for(;c.width===0&&c.height==0&&e;)e=e.parentElement,c=e.getBoundingClientRect();let d=c.left+c.width*.5,p=c.top+c.height*.5;switch(s){case"center":p=c.top+c.height*.5;break;case"bottom":p=c.top+c.height;break;case"top":p=c.top;break}let g=document.documentElement.clientWidth,v=document.documentElement.clientHeight;if(n&&c.bottom>=20&&c.right>=20&&c.top<=v-20&&c.left<=g-20){o&&o();return}let b=this.scrollData.x,S=this.scrollData.y,_=Math.max(0,Math.min(this.scrollData.scrollHeight-v,S-(v*.5-p))),E=Math.max(0,Math.min(this.scrollData.scrollWidth-g,b-(g*.5-d))),I=_-S,F=E-b,O=0,L=0;cancelAnimationFrame(this.scrollAnimationFrame);var z=()=>{cancelAnimationFrame(this.scrollAnimationFrame),this.state.scrollingElement.removeEventListener("mousewheel",z),this.props.updateFrontendState({quickView:{autoScrolling:!1}}),o&&o()};this.state.scrollingElement.addEventListener("mousewheel",z);let G=H=>{let N=L===0?0:H-L;L=H,O=O+N;let J=iv(O/i);O<=i?(this.updateScrollPosition({x:b+F*J,y:S+I*J}),this.scrollAnimationFrame=requestAnimationFrame(G)):(this.updateScrollPosition({x:b+F,y:S+I}),z())};this.props.updateFrontendState({quickView:{autoScrolling:r}}),requestAnimationFrame(()=>{requestAnimationFrame(G)})};render(){return m(_b.Provider,{value:this.props.passthrough?this.context:this.state,children:this.props.children})}componentDidUpdate(e,i,r){ne||(this.checkScrollElement(),this.state.scrollingElement!=i.scrollingElement&&this.removeListeners(i))}setNewElement=e=>{let i=Sb.default.uniqueId();Ks[i]=new Set,e==window?(ti(document.scrollingElement,"elementResize",this.onResize),Id.observe(document.scrollingElement),window.addEventListener("scroll",this.onScroll,{passive:!1}),window.addEventListener("request-scroll",this.onScrollRequest,{passive:!1})):(ti(e,"elementResize",this.onResize),e.addEventListener("request-scroll",this.onScrollRequest,{passive:!1}),Id.observe(e),e.addEventListener("scroll",this.onScroll,{passive:!1})),pu[i]=new IntersectionObserver(r=>f_(r,"viewportIntersectionChange"),{root:e==window?document:e,rootMargin:"0px",threshold:0}),du[i]=new IntersectionObserver(r=>f_(r,"lazyLoadIntersectionChange"),{root:e==window?document:e,rootMargin:window.screen.height*1.5+"px "+window.screen.width*1.5+"px",threshold:0}),this.setState({scrollUid:i,scrollingElement:e},()=>{this.onResize()})};removeListeners=e=>{e.scrollingElement&&(e.scrollingElement==window?(window.removeEventListener("resize",this.onResize),window.removeEventListener("scroll",this.onScroll,{passive:!0}),Id.unobserve(document.scrollingElement),window.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1})):(si(e.scrollingElement,"elementResize",this.onResize),e.scrollingElement.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),e.scrollingElement.removeEventListener("scroll",this.onScroll,{passive:!0}),Id.unobserve(e.scrollingElement)),Object.keys(Ks[e.scrollUid]).forEach(i=>{du[e.scrollUid].unobserve(i),pu[e.scrollUid].unobserve(i),Ks[e.scrollUid].delete(i)})),e.scrollUid!="default"&&(du[e.scrollUid].disconnect(),pu[e.scrollUid].disconnect(),delete du[e.scrollUid],delete pu[e.scrollUid],delete Ks[e.scrollUid])};checkScrollElement=()=>{!ne&&this.props.scrollingElement.current&&this.props.scrollingElement.current!=this.state.scrollingElement&&!this.props.passthrough?this.setNewElement(this.props.scrollingElement.current):this.state.scrollingElement!==null&&this.props.passthrough&&this.setState({scrollingElement:null,scrollUid:"default"})};componentDidMount(){ne||this.checkScrollElement()}componentWillUnmount(){ne||(cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.onScrollFrame),this.removeListeners(this.state))}onResize=e=>{ne||!this.state.scrollingElement||(e&&(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()),this.state.scrollingElement===window?(this.scrollData.scrollHeight=document.scrollingElement.scrollHeight,this.scrollData.scrollWidth=document.scrollingElement.scrollWidth,this.scrollData.h=document.documentElement.clientHeight,this.scrollData.w=document.documentElement.clientWidth):(this.scrollData.scrollHeight=this.state.scrollingElement.scrollHeight,this.scrollData.scrollWidth=this.state.scrollingElement.scrollWidth,this.scrollData.h=this.state.scrollingElement.clientHeight,this.scrollData.w=this.state.scrollingElement.clientWidth),this.onScroll())};onScroll=()=>{ne||!this.state.scrollingElement||this.props.passthrough||(this.state.scrollingElement===window?(this.scrollData.x=window.pageXOffset||document.scrollingElement.scrollLeft||document.documentElement.scrollLeft||0,this.scrollData.y=window.pageYOffset||document.scrollingElement.scrollTop||document.documentElement.scrollTop||0):(this.scrollData.x=this.state.scrollingElement.scrollLeft,this.scrollData.y=this.state.scrollingElement.scrollTop))};getScrollPosition=()=>({...this.scrollData})};qf.contextType=_b;hu=De((t,e)=>({quickView:t.frontendState.quickView}),PX)(qf)});function IX(t,e,i,r){if(ne)return;i=i||t.observedAttributes||Object.keys(t.propTypes||{});function n(){let s=Reflect.construct(HTMLElement,[],n);s.__observedAttributes=i,s._editorProperties={},s._vdomComponent=t,s.attachShadow({mode:"open",delegatesFocus:r&&r.delegatesFocus}),s._customSlots=r&&r.customSlots?r.customSlots:[],s._replaceChild=r&&r.replaceChild,s._props={},s._uid=fu.default.uniqueId(),s._initialMount=!0;let u=c=>{let d=new WeakMap;c.forEach(p=>{switch(p.type){case"childList":s._customElementComponent&&(d.has(s.children)||d.set(s.children,Array.from(s.children)),s._customElementComponent.setState({childArray:d.get(s.children)}));break;case"attributes":let g=p.target.getAttribute(p.attributeName);p.attributeName!=="style"&&p.attributeName!=="class"&&g!==s[p.attributeName]&&(g==null&&(g=void 0),s.__observedAttributes?.indexOf(p.attributeName)>-1?s[p.attributeName]=g:s._customElementComponent&&s._customElementComponent.setState(v=>{let b={...v.baseNodeProps};if(b[p.attributeName]!==g)return b[p.attributeName]=g,{baseNodeProps:b}}),s._props[p.attributeName]=g);break}})};return s.__observer=new MutationObserver(u),s.flushMutationQueue=function(){let c=s.__observer.takeRecords();c.length>0&&u(c)},i.forEach(c=>{let d=fu.default.camelCase(c),p=function(){return s._customElementComponent?s._customElementComponent.state.baseNodeProps[c]:s._props?.[c]??void 0},g=function(v){let b=v;b=b==null||b===""?void 0:b,b=b==="true"?!0:b,b=b==="false"?!1:b;let S=!1,_=typeof b;if((b==null||_==="string"||_==="boolean"||_==="number")&&(S=!0),s._customElementComponent&&s._customElementComponent.setState(E=>{let I={...E.baseNodeProps};if(I[c]!==b)return I[c]=b,{baseNodeProps:I}}),s._props[c]=b,S){let E=c.toLowerCase();v===""||v===void 0||v==null?s._customElementComponent.props.baseNode.hasAttribute(E)&&E!=="tag-text"&&s.removeAttribute(E):v!==""&&v!==s.getAttribute(E)&&s.setAttribute(E,v)}};Object.defineProperty(s,c,{get:p,set:g,configurable:!0}),Object.defineProperty(s,d,{get:p,set:g,configurable:!0})}),s}n.prototype=Object.create(HTMLElement.prototype),n.prototype.constructor=n,n.prototype.connectedCallback=TX,n.prototype.disconnectedCallback=MX,n.prototype.adoptedCallback=AX;let o=e||t.tagName||t.displayName||t.name;return r?.extends?customElements.get(o)||customElements.define(o,n,{extends:r.extends}):customElements.get(o)||customElements.define(o,n)}function TX(){if(this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component"))return;let t=this.nodeName=="TEXT-ICON";if(this._initialMount){let i=document.createElement("style");i.id="space-filler",t?i.innerHTML=`:host {
				height: 1.2em;
				width: 1.2em;
				contain: layout;
				cursor: text;

				margin-top: -1em;
				margin-bottom: -.25em;
				display: inline-block;
				vertical-align: baseline;
			
				position: relative;
			}`:i.innerText=":host { display: block; opacity: 0; }",this.shadowRoot.appendChild(i)}delete this._initialMount,this.__observer.observe(this,{attributes:!0,childList:!0,subtree:!1});let e={element:this,portalHost:null};t?e.component=m(Bf,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid):e.component=m(kX,{baseNode:this,customElementComponent:this._vdomComponent,observedAttributes:this.__observedAttributes},"custom-element-"+this._uid),Ot(this,"custom-element-connected",e),this._portalHost=e.portalHost,this._portalHost===null&&Eb.push(this)}function AX(){}function MX(){this.ownerDocument?.defaultView?.frameElement?.id=="contentEditableStyleTester"||this.hasAttribute("no-component")||(this.__observer.disconnect(),this._portalHost&&Ot(this._portalHost,"custom-element-disconnected",{component:null,element:this}),this._portalHost=null,this._selectState=null)}var fu,Eb,Bf,kX,xo,Zt,Wi=T(()=>{Pe();Se();Ar();fu=ce(ve(),1);Re();ht();wo();Mr();W();Eb=[];Bf=class extends ae{constructor(e){super(e);let i=this.getPropsFromAttributes();this.state={baseNodeProps:{...i,...e.baseNode._props},childArray:Array.from(e.baseNode.children)},e.baseNode._customElementComponent=this}getPropsFromAttributes=()=>{let e=this.props.baseNode.attributes,i=0,r={};for(i=e.length;i--;){let n=e[i].value==="true"?!0:e[i].value;n=n==="false"?!1:n,r[e[i].name]=n}return{...r,...this.props.baseNode._props}};componentDidMount(){if(ne)return;let e=this.getPropsFromAttributes();this.setState(i=>fu.default.isEqual(e,this.state.baseNodeProps)?null:{baseNodeProps:e}),ti(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}componentWillUnmount(){si(this.props.baseNode,"custom-element-connected",this.refreshAttributes)}refreshAttributes=e=>{if(e.element==this.props.baseNode){let i=this.getPropsFromAttributes();this.setState(r=>fu.default.isEqual(i,this.state.baseNodeProps)?null:{baseNodeProps:i})}};render(e,i){let{baseNodeProps:r,childArray:n}=i;return Tt(this.props.customElementComponent,{...e,...r,childArray:n})}},kX=yo(Bf),xo=class extends Ti{constructor(e){super(e),this.state={portals:[]},!ne&&(Uc(this.props.portalHost)?this.stopListeningToVnodeDiff=i_(this.props.portalHost,this.onPortalHostMounted):this.props.portalHost instanceof Node&&this.onPortalHostMounted(this.props.portalHost))}render(e){return m(X,{children:this.state.portals.map(([i,r],n)=>i&&r?je(i,r):je(null,null))},"portal-map")}addPortal=e=>{if(e.portalHost)return;let{component:i,element:r}=e;if(!i||!r)return;e.portalHost=this.portalHostElement;let n=!1;this.setState(o=>{let s=o.portals.findIndex(([c,d])=>d===r&&c!==null),u=[...o.portals];return s===-1?u.push([i,r]):(u[s]=[null,null],n=!0),{portals:u}},()=>{n&&this.addPortal(e)})};removePortal=e=>{e.element&&this.setState(i=>{let r=[...i.portals],n=r.findIndex(([o,s])=>s===e.element);return n!==-1?(r[n][1]=null,{portals:[...r]}):null},()=>{})};onElementHostConnected=e=>{let i=e.element,r=[];this.setState(n=>{let o=[...n.portals];return o.forEach(([s,u],c)=>{i.contains(u)&&(r.push(u),o[c]=[null,null])}),{portals:o}},()=>{r.forEach(n=>{n.connectedCallback()})})};onPortalHostMounted=e=>{this.portalHostElement!==e&&(this.portalHostElement=e,Ot(this.portalHostElement,"element-host-connected",{element:this.portalHostElement}),ti(this.portalHostElement,"custom-element-connected",this.addPortal),ti(this.portalHostElement,"custom-element-disconnected",this.removePortal),ti(this.portalHostElement,"element-host-connected",this.onElementHostConnected));let i=Eb.filter(r=>this.portalHostElement.contains(r));i.forEach(r=>r.connectedCallback()),fu.default.pullAll(Eb,i)};componentDidMount(){}componentDidUpdate(e,i){ne||this.state.portals.forEach(r=>{if(r[1]?.shadowRoot?.children){let n=Array.from(r[1].shadowRoot.children).find(o=>o.id==="space-filler");n&&n.remove()}})}componentWillUnmount(){ne||(this.portalHostElement&&(si(this.portalHostElement,"element-host-connected",this.onElementHostConnected),si(this.portalHostElement,"custom-element-disconnected",this.removePortal),si(this.portalHostElement,"custom-element-connected",this.addPortal),delete this.portalHostElement),this.stopListeningToVnodeDiff?.())}},Zt=IX});var m_,Pb,g_,v_=T(()=>{Pe();Mt();Di();wo();_i();m_=ce(ve(),1);W();Pb=class extends ae{constructor(e){super(e),this.state={dragPos:{x:0,y:0},referenceDragPos:{x:0,y:0},swapTarget:null,readyForDrop:!1,draggingOverItem:!1,rect:{top:0,left:0,width:0,height:0}},this.dropRef=me(),this.onDragOver=m_.default.throttle(this.onDragOver,80)}showDropTarget=()=>{if(Math.abs(this.state.dragPos.x-this.state.referenceDragPos.x)>10||Math.abs(this.state.dragPos.y-this.state.referenceDragPos.y)>10){this.setState({swapTarget:null});return}we.globalDragEventController.customDropTarget!==this.dropRef.current&&(we.globalDragEventController.releaseCustomDropTarget(we.globalDragEventController.customDropTarget),we.globalDragEventController.setCustomDropTarget(this.dropRef.current)),this.setState({readyForDrop:!0})};getRect=()=>{this.state.swapTarget&&this.setState({rect:this.state.swapTarget.getBoundingClientRect()})};render(e,i){let{draggingOverItem:r,readyForDrop:n,rect:o}=i,s={frame:{display:n?"flex":"none",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.6)",position:"fixed",top:o.top+"px",left:o.left+"px",width:o.width+"px",height:o.height+"px",pointerEvents:"none",zIndex:999},replace:{pointerEvents:"none",position:"relative",top:"unset",left:"unset"}};return m("div",{ref:this.dropRef,style:s.frame,children:m("button",{className:"media-options-button multiple",style:s.replace,children:"Replace"})})}onDragEnd=(e,i,r)=>{this.onDragOver.cancel(),clearTimeout(this.showDropTargetTimer),this.setState({readyForDrop:!1,draggingOverItem:!1,swapTarget:!1})};onDragDrop=(e,i,r)=>{clearTimeout(this.showDropTargetTimer),this.onDragOver.cancel(),!(this.dropRef.current!==r.customDropTarget||!this.state.swapTarget||r.inAdmin)&&(CargoEditor.mutationManager.execute(()=>{let n=window.store.getState(),o=this.state.swapTarget,s=r.draggedMediaItems[0],u=o.closest("[thumbnail-index]"),c=o.getAttribute("hash"),d=s.getAttribute("hash"),p=o.closest("[id]")?.getAttribute("id");if(u){let E=o.getAttribute("href");p=Je.getContentByPurl(n,E)?.id||null}if(!p||!d)return;let g=Je.getMediaByHash(n)[d]||null,v=Je.getMediaByHash(n)[c]||null;if(!g)return;let{CRDTItem:b}=we.getCRDTItem({reducer:"pages.byId",item:p});if(!(n.pages.byId[p].media||[]).find(E=>E.hash==g.hash)){if(!(b.get("media")instanceof we.adminWindow.Y.Array)){let I=new we.adminWindow.Y.Array;I.insert(0,b.get("media")||[]),b.set("media",I)}let E=we.convertStateToSharedType(g,new we.adminWindow.Y.Map);b.get("media").push([E])}if(u)we.applyChangesToYType(b,{thumb_media_id:g.id});else{let E=g&&v&&(g.is_video!==v.is_video||g.is_image!==v.is_image||g.is_video!==v.is_video);v&&E&&(o.removeAttribute("autoplay"),o.removeAttribute("loop"),o.removeAttribute("muted"),o.removeAttribute("poster"),o.removeAttribute("browser-default"),g.is_video?(!g.has_audio_track||g.duration<15?(o.setAttribute("autoplay",!0),o.setAttribute("muted",!0),o.setAttribute("loop",!0)):(o.setAttribute("browser-default",!0),o.setAttribute("disable-zoom",!0),g.duration<20&&o.setAttribute("loop",!0)),o.setAttribute("autoplay",!0),o.setAttribute("loop",!0),o.setAttribute("muted",!0)):g.is_url&&(g.url_type=="vimeo"||g.url_type=="youtube")&&(o.setAttribute("browser-default",!0),o.setAttribute("disable-zoom",!0),o.setAttribute("muted",!1),o.setAttribute("loop",!1))),o.removeAttribute("src"),o.setAttribute("hash",d),o.removeAttribute("width"),o.removeAttribute("height")}}),this.setState({readyForDrop:!1,swapTarget:null,draggingOverItem:!1}))};onBeforeDrop=(e,i,r)=>{!r.fromAdmin&&!r.fromOutside||this.state.readyForDrop&&this.state.swapTarget?.nodeName==="MEDIA-ITEM"&&r.draggedMediaItems.length===1&&(we.globalDragEventController.releaseCustomDropTarget(r.customDropTarget),we.globalDragEventController.setCustomDropTarget(this.dropRef.current))};onDragOver=(e,i,r)=>{let n=i.target.closest("MEDIA-ITEM"),o=r.draggedMediaItems.length===1&&r.draggedMediaItems[0]!==n&&!r.draggedMediaItems.some(u=>u.getAttribute("hash")==="placeholder"),s=!r.inAdmin&&r.fromAdmin;if(n&&s&&o){let u=Math.abs(this.state.dragPos.x-r.cursorPosition.x)>2||Math.abs(this.state.dragPos.y-r.cursorPosition.y)>2;this.state.swapTarget!==n||u?(we.globalDragEventController.releaseCustomDropTarget(this.dropRef.current),clearTimeout(this.showDropTargetTimer),this.setState({dragPos:{...r.cursorPosition},referenceDragPos:{...r.cursorPosition},readyForDrop:!1,draggingOverItem:!0,swapTarget:n}),this.showDropTargetTimer=setTimeout(this.showDropTarget,400)):this.setState({dragPos:{...r.cursorPosition}}),this.getRect()}else we.globalDragEventController.releaseCustomDropTarget(this.dropRef.current),clearTimeout(this.showDropTargetTimer),this.setState({readyForDrop:!1,draggingOverItem:!1,swapTarget:null,dragPos:{...r.cursorPosition}})};componentDidMount(){this.findDragController().then(()=>{we.globalDragEventController.on("dragover",this.onDragOver),we.globalDragEventController.on("drop",this.onDragDrop),we.globalDragEventController.on("dragend",this.onDragEnd),we.globalDragEventController.on("before-drop",this.onBeforeDrop)})}componentWillUnmount(){this.onDragOver.cancel(),this.getRect.cancel(),we.globalDragEventController.off("dragover",this.onDragOver),we.globalDragEventController.off("drop",this.onDragDrop),we.globalDragEventController.off("dragend",this.onDragEnd),we.globalDragEventController.off("before-drop",this.onBeforeDrop)}componentDidUpdate(e,i){(this.state.swapTarget!==i.swapTarget||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&this.state.swapTarget?this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),this.onScroll())}onScroll=()=>{this.ticking||(this.rectFrame=requestAnimationFrame(()=>{this.getRect(),this.ticking=!1}),this.ticking=!0)};findDragController=()=>new Promise((e,i)=>{let r=0,n=null,o=()=>{let s=we.globalDragEventController||null;s?(clearInterval(n),e(s)):r++,r>200&&(clearInterval(n),i())};n=setInterval(o,300),o()})},g_=yo(Pb)});var Wf,Ib,b_,y_=T(()=>{Pe();Ra();Mt();Di();wo();Re();Wf=ce(ve(),1);W();Ib=class extends ae{constructor(e){super(e),this.state={rect:{top:null,left:null},initialRect:{top:null,left:null},initialScrollY:0,isClickable:!0,visible:!1,parentFontInfo:{fontSize:null,lineHeight:null}},this.maxButtonHeight=20,this.minButtonHeight=10,this.clonedRange=null,this.ticking=!1,this.isDebug=!1,Mf.contentWindow?.CargoEditor&&Object.keys(Mf.contentWindow?.CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}componentWillUnmcount(){CargoEditor&&(CargoEditor.events.off("cursor-activity",this.onSelectionChange),CargoEditor.events.off("editor-keydown",this.onEditorKeydown)),window.removeEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("selectionchange",this.onSelectionChange),window.removeEventListener("blur",this.onEditorBlur),this.props?.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)}bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),window.addEventListener("insert-context-menu-closed",this.restoreTextCursorPosition),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousedown",this.onMouseDown),document.addEventListener("selectionchange",this.onSelectionChange),window.addEventListener("blur",this.onEditorBlur),CargoEditor.events.on("cursor-activity",this.onSelectionChange),CargoEditor.events.on("editor-keydown",this.onEditorKeydown),this.props?.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)};componentDidUpdate(e,i){this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement&&(this.props.scrollContext.scrollingElement?this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),this.onScroll())}onScroll=e=>{if(!this.state.visible||this.ticking)return;let i=window.pageYOffset,r=window.pageYOffset-this.state.initialScrollY,n=Math.round(this.state.initialRect.top-r);this.setState({rect:{top:n,left:this.state.initialRect.left}})};onEditorBlur=()=>{this.setState({visible:!1})};onEditorKeydown=()=>{this.setState({visible:!1})};onMouseUp=e=>{this.setState({clickable:!0}),e.target.closest("[editing]")&&this.checkAndSetVisiblity()};onMouseDown=()=>{this.setState({visible:!1,clickable:!0})};onSelectionChange=Wf.default.debounce(e=>{if(this.ticking)return;if(this.ticking=!0,this.setState({visible:!1}),!CargoEditor.getActiveRange())return null;let r=document.querySelector('[editing="true"] bodycopy');if(!r)return null;let n,o=window.getComputedStyle(r);n=o.getPropertyValue("font-size"),n=Number(n.match(/[\d\.]+/));let s=o.getPropertyValue("line-height");s=Number(s.match(/[\d\.]+/)),this.setState({parentFontInfo:{fontSize:n,lineHeight:s}},()=>{this.setButtonPosition()})},50);checkAndSetVisiblity=Wf.default.debounce((e,i)=>{e=CargoEditor.getActiveRange(),i=CargoEditor?.getActiveEditor();let r=i?.checkIfEmpty(),n=this.isEligibleEmptyLine(e),o=!!(r||n);this.isDebug&&console.log("checkAndSetVisible",o),this.setVisible(o)},400);setVisible=e=>{this.isDebug&&console.log("set visible",e),this.setState({initialScrollY:window.pageYOffset,visible:e},()=>{this.ticking=!1})};isEligibleEmptyLine=e=>{if(!e)return!1;let i=e.endContainer.childNodes[e.endOffset-1],r=e.endContainer.childNodes[e.endOffset],n=e.endContainer.childNodes[e.endOffset-2];for(;i&&CargoEditor.helpers.isWhitespaceNode(i);)i=i.previousSibling;for(;r&&CargoEditor.helpers.isWhitespaceNode(r);)r=r.nextSibling;for(;n&&CargoEditor.helpers.isWhitespaceNode(n);)n=n.previousSibling;return!!(e.collapsed&&e.endContainer&&e.endContainer.nodeType==Node.ELEMENT_NODE&&(e.endContainer.nodeName==="BODYCOPY"||e.endContainer.nodeName==="COLUMN-UNIT")&&(e.endOffset===0&&e.endContainer.childNodes.length==0||this.checkNodeContent(i)&&this.checkNodeContent(n)||this.checkNodeContent(r)&&!i))};restoreTextCursorPosition=e=>{e.detail.cachedRange&&window.requestAnimationFrame(()=>{CargoEditor.helpers.setActiveRange(e.detail.cachedRange),CargoEditor?.getActiveEditor().getElement().focus()})};checkNodeContent=e=>!!(e&&e.nodeName==="BR"||e?.nodeType===Node.ELEMENT_NODE&&window.getComputedStyle(e)?.getPropertyValue("display")==="block");getTextCursorRect=(e,i,r)=>{if(!e)return!1;if(this.clonedRange===e)return null;this.clonedRange=e.cloneRange();let n=mo(),o=r.fontSize*.15*-1,s=r.lineHeight*.15*-1,u=document.createElement("input");u.style.display="inline-block",u.style.fontSize=r.fontSize+"px",u.style.border="0",u.style.background="blue",u.style.outline="none",u.style.width="2px",n?(u.style.height=r.lineHeight+"px",u.style.lineHeight=r.lineHeight+"px",u.style.margin=`${s}px 0 0 0`,u.style.padding="0",u.style.verticalAlign="text-bottom"):(u.style.height=r.fontSize+"px",u.style.verticalAlign="middle",u.style.margin=`${o}px 0 0 0`,u.style.padding="0"),u.setAttribute("data-ignore-changes",""),u.setAttribute("data-prevent-copy",""),u.setAttribute("disabled",""),u.setAttribute("readonly",""),u.setAttribute("test-delete-visible",""),u.setSaveable(!1),e.insertNode(u);let c=CargoEditor?.getActiveEditor()?.getElement?.()?.getBoundingClientRect(),d=u.getBoundingClientRect();u.nextSibling&&u.nextSibling.nodeType===Node.TEXT_NODE&&u.nextSibling.setSaveable(!0),u.remove();let p=c.height-i.height;return this.clonedRange&&CargoEditor.helpers.setActiveRange(this.clonedRange),{bottom:d.bottom-p,height:d.height,center:d.bottom-p-(d.top-p),left:d.left,right:d.right,top:d.top-p,width:d.width,x:d.x-p,y:d.y}};setButtonPosition=()=>{this.isDebug&&console.log("set button position");let e=CargoEditor.getActiveRange(),i=!1,r=!1,n=null,o=null,s=null,u=null,c=null,d=null,p=0,g=0,v=this.state.parentFontInfo?.fontSize;if(!this.state.parentFontInfo){this.ticking=!1;return}if(v>20&&(v=20),v<10&&(v=10),!Wf.default.isEmpty(CargoEditor)&&(n=CargoEditor?.getActiveEditor(),n&&(o=n.getElement()),i=n?.checkIfEmpty(),r=this.isEligibleEmptyLine(e)),d=o?o.getBoundingClientRect():null,r||i){let S=this.getTextCursorRect(e,d,this.state.parentFontInfo),_=0,E=0;if(!S){this.ticking=!1;return}let I=this.state.parentFontInfo,F=1-I.fontSize/I.lineHeight,O=I.lineHeight,L=I.fontSize;mo()?_=S.bottom-I.lineHeight*.5:_=S.bottom-S.height*.5,u=_,c=Math.ceil(S.left)}g=c?4:0,c=c+g,this.isDebug&&console.log("coordinate state set..."),this.setState({initialRect:{top:u,left:c},rect:{top:u,left:c}},()=>{this.checkAndSetVisiblity()})};callContextMenu=e=>{e.preventDefault(),e.stopPropagation(),this.setState({visible:!1});let i=CargoEditor.getActiveRange().nativeRange;document.activeElement.blur(),we.adminWindow.ContextMenuOpener.openContextMenu(e,"insert-content",{cachedRange:i})};render(){let e=this.state.parentFontInfo.fontSize?this.state.parentFontInfo.fontSize:20,i=e>20?20:e;i=i<10?10:i;let r=i/2,n={frame:{transform:`translate3d(${this.state.rect.left}px, ${this.state.rect.top}px, 0px)`,zIndex:999,display:"flex",position:"fixed",top:0,left:0,pointerEvents:"none",height:0,width:0},button:{display:"flex",visibility:this.state.visible&&this.state.rect.top!==0&&this.state.rect.left!==0?"visible":"hidden",position:"relative",top:"unset",left:"unset",height:i+"px",width:i+"px",pointerEvents:this.state.isClickable?"all":"none",transform:`translate(0, -${r}px)`},svg:{pointerEvents:"none",height:i+"px",width:i+"px",maxHeight:this.maxButtonHeight+"px",maxWidth:this.maxButtonHeight+"px",minHeight:this.minButtonHeight+"px",minWidth:this.minButtonHeight+"px"}};return m("div",{style:n.frame,children:m("button",{className:"insert-content-button",style:n.button,onContextMenu:o=>{o.preventDefault(),this.callContextMenu(o)},onMouseDown:o=>{this.callContextMenu(o)},children:m("svg",{style:n.svg,id:"insert-ineditor",className:"plus-icon",width:i+"px",height:i+"px",viewBox:"0 0 20 20",fill:"none",children:[m("circle",{cx:"10",cy:"10",r:"8"}),m("g",{children:[m("line",{x1:"10",y1:"5",x2:"10",y2:"15"}),m("line",{x1:"5",y1:"10",x2:"15",y2:"10"})]})]})})})}},b_=yo(Ib)});var Co,Ue,Tb,w_,Di=T(()=>{Pe();Se();ht();Co=ce(ve(),1);Mt();Re();v_();y_();Ar();W();Ue={},Tb=class extends ae{constructor(e){super(e),this.sR=document.createElement("div"),this.testHover=Co.default.throttle(this.testHover,60),this.lockedElements=[],this.state={selecting:!1,unattachedOverlayContainer:null,active:!1,locked:!1,loaded:!1,hoveredElements:[]},this.onContentChange=Co.default.throttle(this.onContentChange,80,{leading:!0,tailing:!0}),window.addEventListener("scroll",this.onScroll),this.resizeObserver=new ResizeObserver(i=>{i.forEach(r=>{this.updateElementRect(r.target)})}),this.dragController=null,this.portalMap=new Map,this.noPointerEventsArray=[],this.editorOverlayRef=me(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),this.findDragController().then(i=>{this.dragController=i,this.dragController.on("dragstart",this.onDragStart),this.dragController.on("dragend",this.unlock),this.dragController.on("drop",this.unlock)}).catch(i=>{console.warn("Editor overlay failed to find drag controller.",i)}),Ue.lock=this.lock,Ue.unlock=this.unlock,Ue.lockItem=this.lockItem,Ue.unlockItem=this.unlockItem,Ue.setHoveredElements=this.setHoveredElements,Ue.deactivateHoverElement=this.deactivateHoverElement,Ue.activateHoverElement=this.activateHoverElement,Ue.getPortal=this.getPortal,Ue.removePortal=this.removePortal,Ue.portalMap=this.portalMap,Ue.testHover=this.testHover,Ue.updateElementRect=this.updateElementRect,this.pointerPosition={x:-9e9,y:-9e9}}render(){var e=localStorage.getItem("c3-plus-button")==="true";return m("div",{className:`${this.state.selecting?"selecting":""}${this.props.darkMode?" dark":""}`,id:"editor-overlay",ref:this.editorOverlayRef,style:{display:this.state.loaded?"":"none"},children:this.state.unattachedOverlayContainer&&je(m(X,{children:[m(g_,{}),e?m(b_,{}):null]}),this.state.unattachedOverlayContainer)})}componentDidMount(){if(!this.editorOverlayRef.current.shadowRoot){this.editorOverlayRef.current.attachShadow({mode:"open"}),this.editorOverlayRef.current.shadowRoot.innerHTML='<link rel="stylesheet" href="https://build.cargo.site/frontend/b164f5/css/front-end/editor-ui.css"><div id="unattached-editor-overlays"></div>',Array.from(this.sR.children).forEach(r=>{this.editorOverlayRef.current.shadowRoot.appendChild(r)}),this.editorOverlayRef.current.shadowRoot.querySelector("link").addEventListener("load",()=>{this.setState({loaded:!0})});let i=this.editorOverlayRef.current.shadowRoot.querySelector("#unattached-editor-overlays");this.setState({unattachedOverlayContainer:i})}this.sR=this.editorOverlayRef.current.shadowRoot,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("mousedown",this.onPointerDown),window.addEventListener("mouseup",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp),document.body.addEventListener("pointerleave",this.onPointerLeave),this.findAdminWindow().then(e=>{we.adminWindow.addEventListener("pointermove",this.onAdminPointerMove)}).catch(e=>{console.warn("Editor Overlay failed to find Editor.",e)})}componentDidUpdate(e,i){let{hoveredElements:r}=i,{hoveredElements:n}=this.state,o=Co.default.difference(n,r);Co.default.difference(r,n).forEach(u=>{let c=this.portalMap.get(u);c&&c.portalHosts.forEach((d,p)=>{d?.pointerOut?.()})}),o.forEach(u=>{let c=this.portalMap.get(u);c&&c.portalHosts.forEach((d,p)=>{d?.pointerIn?.()})}),this.updatePageButtonPositions(),this.props.adminMode!==e.adminMode&&(this.props.adminMode?(this.unlock(),this.afterAdminTimeout=setTimeout(()=>{this.testHover()},80)):(this.setHoveredElements([]),this.lock()))}componentWillUnmount(){clearTimeout(this.afterAdminTimeout),this.onContentChange.cancel(),this.dragController&&(this.dragController.off("dragstart",this.onDragStart),this.dragController.off("dragend",this.unlock),this.dragController.off("drop",this.unlock)),this.CargoEditor&&(this.CargoEditor.events.off("mutation-start",this.onMutationStart),this.CargoEditor.events.off("mutation-end",this.onMutationEnd),this.CargoEditor.events.off("editor-keyup",this.onContentChange),this.CargoEditor.events.off("editor-summary-created",this.onContentChange)),this.portalMap.forEach((e,i,r)=>{this.removePortal(i)}),this.noPointerEventsArray=[],window.removeEventListener("mousedown",this.onPointerDown),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerleave",this.onPointerLeave),we.adminWindow?.removeEventListener("pointermove",this.onAdminPointerMove)}findAdminWindow=()=>new Promise((e,i)=>{let r=0,n=null,o=()=>{let s=we.adminWindow;s?(clearInterval(n),e(s)):r++,r>200&&(clearInterval(n),i("not found."))};n=setInterval(o,300),o()});onMutationStart=()=>{e_()};onMutationEnd=()=>{this.ticking||(this.ticking=!0,requestAnimationFrame(()=>{t_(),this.ticking=!1}))};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("mutation-start",this.onMutationStart),this.CargoEditor.events.on("mutation-end",this.onMutationEnd),this.CargoEditor.events.on("editor-keyup",this.onContentChange),this.CargoEditor.events.on("editor-summary-created",this.onContentChange)};findDragController=()=>new Promise((e,i)=>{let r=0,n=null,o=()=>{let s=we.globalDragEventController||null;s?(clearInterval(n),e(s)):r++,r>200&&(clearInterval(n),i())};n=setInterval(o,300),o()});updateElementRect=e=>{let r=this.portalMap.get(e);if(r){let n={x:0,y:0,top:0,left:0,right:0,bottom:0,width:0,height:0},o=e.getBoundingClientRect();Object.keys(n).forEach(s=>{n[s]=Math.round(o[s])}),n.height<10&&(n.height=10,n.bottom=n.top+10),r.extraMargins.forEach((s,u)=>{if(!(s===void 0||s===0))switch(u){case 0:n.top=n.y=n.top-s,n.height=n.height+s;break;case 1:n.right=n.right+s,n.width=n.width+s;break;case 2:n.height=n.height+s,n.bottom=n.bottom+s;break;case 3:n.left=n.x=n.left-s,n.width=n.width+s;break}}),this.portalMap.set(e,{portalHosts:r.portalHosts,rect:n,extraMargins:r.extraMargins}),r.portalHosts.forEach((s,u)=>{s?.updatePosition?.(n)})}};onContentChange=(e,i)=>{this.state.hoveredElements.forEach(r=>{this.updateElementRect(r)})};onScroll=()=>{this.noPointerEventsArray.forEach(this.updateElementRect),this.updatePageButtonPositions()};updatePageButtonPositions=()=>{let i=Array.from(this.portalMap).map(([u,c])=>{let d=null,p=Array.from(c?.portalHosts??[]).find(([S,_])=>_.props?.name=="EditPageButton"&&!_.props.isEditingPage?(d=S,!0):!1);if(!d?.querySelector("button.edit-page"))return!1;let g=d.querySelector("button.edit-page").getBoundingClientRect(),b=g.top<c.rect.top?{left:g.left+-p[1].state.shiftButtonX,width:g.width+1,top:g.top,height:g.height*2+1}:{left:g.left+-p[1].state.shiftButtonX,width:g.width+1,top:g.top-g.height+-2,height:g.height*2+1};return{mapRect:c.rect,portalHost:d,proposedRect:b,rect:b,component:p[1]}}).filter(u=>!!u),r=Co.default.sortBy(i,u=>u.mapRect.left),n=!0,o=4,s=0;for(;n&&s<o;)n=!1,r.forEach((u,c,d)=>{if(c===0)return;let p=u.rect,g=d.filter(v=>{if(v==u)return!1;let b=v.proposedRect;return p.left<b.left+b.width&&p.left+p.width>b.left&&p.top<b.top+b.height&&p.top+p.height>b.top});if(g.length>0){n=!0;let v=d[c-1],b=Co.default.sortBy(g,S=>-(S.proposedRect.left+S.proposedRect.width))[0];u.proposedRect={left:b.proposedRect.left+b.proposedRect.width,width:p.width,top:p.top,height:p.height},u.component.setState({shifted:!0,shiftButtonX:u.proposedRect.left-p.left}),c==1&&r[0].component.setState({shifted:!0,shiftButtonX:0})}else u.component.setState({shifted:!1,shiftButtonX:0}),c==1&&r[0].component.setState({shifted:!1,shiftButtonX:0})}),s++};onDragStart=()=>{this.setState({hoveredElements:[],locked:!0}),this.dragContentChangeTimeout=setTimeout(()=>{this.onContentChange()},30)};getPortal=(e,i={})=>{if(e)if(this.portalMap.has(e)){var r=this.portalMap.get(e),n=null;if(r.portalHosts.forEach((o,s)=>{i.component===o&&(n=s)}),n)return n;{let o=document.createElement("div");return this.sR.appendChild(o),r.portalHosts.set(o,i.component),o}}else{let o=document.createElement("div");this.sR.appendChild(o);let s={portalHosts:new Map,rect:{width:0,height:0,top:0,left:0,bottom:0,right:0},extraMargins:i.extraMargins||[]};return o.setAttribute("editor-overlay-tag-name",e.tagName),o._editorBaseNode=e,s.portalHosts.set(o,i.component),this.portalMap.set(e,s),i.trackResize&&this.resizeObserver.observe(e),i.noPointerEvents&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),i.extraMargins&&this.noPointerEventsArray.indexOf(e)===-1&&this.noPointerEventsArray.push(e),o}};removePortal=(e,i)=>{if(this.portalMap.has(e)){let r=this.portalMap.get(e);r.portalHosts.has(i)&&(r.portalHosts.delete(i),i.parentNode.removeChild(i)),r.portalHosts.size===0&&(this.resizeObserver.unobserve(e),this.noPointerEventsArray.indexOf(e)>-1&&this.noPointerEventsArray.splice(this.noPointerEventsArray.indexOf(e),1),this.portalMap.delete(e))}};lock=()=>{this.setState({locked:!0})};unlock=()=>{this.setState({locked:!1})};lockItem=e=>{this.lockedElements.indexOf(e)===-1&&this.lockedElements.push(e)};unlockItem=e=>{let i=this.lockedElements.indexOf(e);i>-1&&this.lockedElements.splice(i,1)};deactivateHoverElement=e=>{e&&this.setState(i=>{let{hoveredElements:r}=i,n=[...r],o=r.indexOf(e);if(o>-1)n=n.splice(o,1);else return null;return{...i,hoveredElements:n}})};activateHoverElement=e=>{e&&this.setState(i=>{let{hoveredElements:r}=i,n=[...r];if(n.indexOf(e)==-1)n.push(e);else return null;return{...i,hoveredElements:n}})};setHoveredElements=e=>{let i=Array.isArray(e)?e:[e];i=i.filter(r=>!!r),Co.default.isEqual(this.state.hoveredElements,i)||this.setState({hoveredElements:i})};testHover=()=>{let{locked:e}=this.state;if(e)return;let i=Array.from(document.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[],r=Array.from(this.editorOverlayRef.current.shadowRoot.elementsFromPoint(this.pointerPosition.x,this.pointerPosition.y))||[];r=r.map(c=>c.closest("[editor-overlay-tag-name]")?._editorBaseNode).filter(c=>!!c),r=Co.default.difference(r,i),r.forEach(c=>{c&&i.indexOf(c)==-1&&i.push(c)}),this.noPointerEventsArray.forEach(c=>{let d=this.portalMap.get(c);d&&d.rect&&this.pointerPosition.x<=d.rect.left+d.rect.width&&this.pointerPosition.x>=d.rect.left&&this.pointerPosition.y<=d.rect.top+d.rect.height&&this.pointerPosition.y>=d.rect.top&&i.indexOf(c)==-1&&i.push(c)}),i=Co.default.uniq(i);let n=[...this.state.hoveredElements];this.lockedElements.forEach(c=>{let d=n.indexOf(c),p=i.indexOf(c);p===-1&&d>-1?i.push(c):d===-1&&p>-1&&i.splice(p,1)});let o=CargoEditor?.getActiveEditor?.()?.getElement(),s=o?o.closest(".overlay-content"):null,u=s&&i.some(c=>c.tagName==="BODYCOPY"&&s.contains(c));o&&s&&u&&(i=i.filter(c=>s.contains(c))),this.setHoveredElements(i)};onAdminPointerMove=e=>{e.target.tagName==="IFRAME"?(this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY+-40):(this.pointerPosition.x=-9e9,this.pointerPosition.y=-9e9),this.testHover()};onPointerLeave=e=>{this.setState({selecting:!1}),setTimeout(()=>{this.setHoveredElements([])},100)};onFirstSelectionChange=()=>{this.setState({selecting:!0})};onPointerDown=e=>{this.selectionWaitTimeout=setTimeout(()=>{document.addEventListener("selectionchange",this.onFirstSelectionChange,{once:!0})},60)};onPointerUp=e=>{clearTimeout(this.selectionWaitTimeout),document.removeEventListener("selectionchange",this.onFirstSelectionChange,{once:!0}),this.setState({selecting:!1})};onPointerMove=e=>{this.pointerPosition.x=e.clientX,this.pointerPosition.y=e.clientY,this.testHover()}},w_=De((t,e)=>({adminMode:t.frontendState.adminMode,darkMode:t.adminState?.darkMode||!1}))(Tb)});var Ab,Td,RX,Vf,Vi,Gn=T(()=>{Pe();Di();Ab=ce(ve(),1);W();Td=[],RX=Ab.default.debounce(()=>{if(CargoEditor&&Object.keys(CargoEditor).length>0){var t=CargoEditor.getActiveRange(),e=CargoEditor.helpers.normalizeRangeAroundShadowDom(t);let r=[],n=[];if(t&&!t.collapsed){var i=CargoEditor.helpers.getAllEffectivelyContainedNodes(t);i=i.filter(o=>o.shadowRoot),Td.forEach(o=>{i.includes(o.props.baseNode)?r.push(o):n.push(o)})}else n=Td;if(n.forEach(o=>{o.setState({selected:!1})}),r.forEach(o=>{o.setState({selected:!0}),CargoEditor.plugins.shadowDom.shadowDomSelectedElements.indexOf(o.props.baseNode)==-1&&CargoEditor.plugins.shadowDom.shadowDomSelectedElements.push(o.props.baseNode)}),e.shadowDomElementAdjacentToCollapsedRange){let o=Td.find(s=>s.props.baseNode===e.shadowDomElementAdjacentToCollapsedRange);o&&o.setState({selected:!0,collapseDirection:e.collapseDirection})}Td.length=0}},30),Vf=class extends ae{constructor(e){super(e),this.state={resetAnimation:!1,selected:!1,collapseDirection:!1,currentColor:"black"},this.uniqueClassName=this.props.overlayMode?"selection-status-"+Ab.default.uniqueId():"selection-status"}render(e,i){let r=i.collapseDirection?" "+i.collapseDirection+" collapsed-range":"";return m(X,{children:[m("style",{id:"selection-status",children:`
		${this.state.selected&&!this.props.onlyAllowCollapsedRange?`
		::slotted(*) {
			--selection-color: transparent;
		}
		`:""}

		${this.props.onlyAllowCollapsedRange?"":`::selection{
			background-color:transparent;
		}
		:host(::selection) {
			background-color:transparent;
		}`}

		.${this.uniqueClassName} {
			${this.props.overlayMode?`
				transform: translate3d(${this.props.overlayPosition.x}px, ${this.props.overlayPosition.y}px, 0);
				width: ${this.props.overlayPosition.width}px;
				height: ${this.props.overlayPosition.height}px;
				position: fixed;
				top: 0;
				left: 0;
			`:`
				inset: 0px;
				position: absolute;
			`}
			padding: 0;
			margin: 0;
			opacity: 1;
		    background-color: var(--selection-color);
			overflow:hidden;

			z-index: ${this.props.inFront?"99999":"-1"};
			pointer-events:none;
			display:none;
		}

		.${this.uniqueClassName}.selected {
			display:block;
		}

      
		@keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}
		}
		@-webkit-keyframes blink-animation {
			0%, 49.99% {
			  visibility: visible;
			}
			50%, 100% {
				visibility: hidden;
			}			
		}		

		.${this.uniqueClassName}.collapsed-range {
			width: 1px;
		    mix-blend-mode: unset;
			background-color: ${this.props.overlayMode?this.state.currentColor:"currentColor"};

		    ${this.state.resetAnimation?`
		    visibility: visible;
		    -webkit-animation:none;
		    animation: none;`:`-webkit-animation: blink-animation 1s steps(4, start) infinite;
	        animation: blink-animation 1s steps(4, start) infinite;`}
	        z-index: 9999;
		}

		.${this.uniqueClassName}.before.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+-1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 auto 0 -1px;
			`}
				
		}
		.${this.uniqueClassName}.after.collapsed-range {
			${this.props.overlayMode?`
			transform: translate3d(${this.props.overlayPosition.x+this.props.overlayPosition.width+1}px, ${this.props.overlayPosition.y}px, 0);			
			`:`
			inset: 0 -1px 0 auto;
			`}
		}		

		`}),m("div",{className:`${this.uniqueClassName}${this.state.selected?" selected":""}${r}`})]},"selection-status-fragment")}componentDidMount(){CargoEditor?.getActiveEditor?.()&&(Td.push(this),RX()),this.props.baseNode.__shadow_selection=!0,this.props.baseNode.addEventListener("selected-in-editor",this.select),this.props.baseNode.addEventListener("unselected-in-editor",this.unselect)}componentDidUpdate(e,i){this.state.collapseDirection!==i.collapseDirection&&this.setState({resetAnimation:!0},()=>{this.resetTimeout=setTimeout(()=>{this.setState({resetAnimation:!1})},100)})}componentWillUnmount(){clearTimeout(this.resetTimeout),delete this.props.baseNode.__shadow_selection,this.props.baseNode.removeEventListener("unselected-in-editor",this.unselect),this.props.baseNode.removeEventListener("selected-in-editor",this.select)}select=e=>{if(e.target!==this.props.baseNode)return;this.props.overlayMode&&!this.state.selected&&(Ue.updateElementRect(this.props.baseNode),this.updateCurrentColor());let i=e?.detail?.collapsed||!1,r=!0;this.props.onlyAllowCollapsedRange&&(r=i),this.setState({selected:r,collapseDirection:i}),this.props.onSelectionChange&&(i?this.props.onSelectionChange(!1):this.props.onSelectionChange(!0))};unselect=()=>{this.setState(e=>({selected:!1,collapseDirection:!1})),this.props.onSelectionChange&&this.props.onSelectionChange(!1)};updateCurrentColor=()=>{if(this.props.baseNode.shadowRoot){let e=document.createElement("span");e.style.color="currentColor",e.style.position="absolute",this.props.baseNode.shadowRoot.appendChild(e);let r=window.getComputedStyle(e).getPropertyValue("color");e.remove(),this.setState({currentColor:r})}}};Vf.defaultProps={inFront:!0,overlayMode:!1};Vi=Vf});var $f,Ad,x_,Md,C_,S_=T(()=>{Pe();$f=ce(ve(),1);W();Ad=new Map,x_=t=>{let e=[],i=[],r=[];Ad.forEach((o,s)=>{o.locateEyeball();let{rect:u}=o.state;if(o.props["roll-independently"]==!0){let c=Math.atan2(t.clientY-(u.top+u.height*.5),t.clientX-(u.left+u.width*.5))*(180/Math.PI)+90;o.setState({eyeRotation:c})}else i.push(u.left+u.width*.5),r.push(u.top+u.height*.5),e.push(o)});let n={x:$f.default.mean(i),y:$f.default.mean(r)};e.forEach(o=>{let s=Math.atan2(t.clientY-n.y,t.clientX-n.x)*(180/Math.PI)+90;o.setState({eyeRotation:s})})},Md=class extends ae{constructor(e){super(e),this.state={eyeRotation:0,rect:{top:0,left:0,width:0,height:0},centerPoint:{x:0,y:0}},this.locateEyeball=$f.default.debounce(this.locateEyeball,120,{leading:!0,trailing:!1})}render(e,i){return m(X,{children:[e.children,m("style",{children:`
					:host { 
						pointerEvents: ${e.lowestLevel?"auto":"none"};
						transformOrigin: center center;
						--rotate-transform: rotate( ${this.state.eyeRotation}deg);
					}
				`})]})}locateEyeball=()=>{this.setState({rect:this.props.baseNode.getBoundingClientRect()})};componentDidMount(){Ad.size==0&&window.addEventListener("pointermove",x_),Ad.set(this.props.baseNode,this)}componentWillUnmount(){Ad.delete(this.props.baseNode),Ad.size===0&&window.removeEventListener("pointermove",x_)}};Md.defaultProps={"roll-independently":!0};Md.transformSlot="--rotate-transform";C_=Md});var __,kd,E_,P_=T(()=>{Pe();__=ce(ve(),1);W();kd=class extends ae{constructor(e){super(e),this.state={suppressTransition:!1,rotation:parseFloat(this.props.rotation)}}render(e,i){let{animate:r}=e,n=Number(r)!==0,o=n?50/Number(r):1,s="var(--base-translate, translate(0))",u=s;return e.transformSlots.forEach(c=>{c==="--rotate-transform"?(s+=` rotate(${parseFloat(e.rotation)}deg)`,u+=` rotate(${parseFloat(e.rotation)+360}deg)`):(s+=` var(${c}, translate(0))`,u+=` var(${c}, translate(0))`)}),m(X,{children:[e.children,m("style",{id:"rotating-item",children:n?`
				@keyframes rotate {
                    from {
                        transform: ${s};
                    }
                    to {
                        transform: ${u};
                    }
                }

                :host {
                	animation: rotate ${Math.abs(o)}s linear ${Math.sign(Number(r))===-1?"reverse":""} infinite;
					will-change: transform;
                }
				`:`
				:host { 
					--rotate-transform: rotate( ${e.rotation}deg);
                }
            `})]})}allowTransition=__.default.debounce(()=>{this.setState({suppressTransition:!1},()=>{})},120);componentDidUpdate(e){(this.props.animate!==e.animate||this.props.rotation!==e.rotation)&&this.setState({suppressTransition:!0},()=>{this.allowTransition()})}componentWillUnmount(){this.allowTransition.cancel()}};kd.defaultProps={rotation:0,animate:0};kd.transformSlot="--rotate-transform";E_=kd});var I_,T_=T(()=>{I_={speed:"90",rotation:"66",scale:"18.4vmax","flight-path":"387",delay:"2"}});var A_,Kn,Mb,jf,M_,k_=T(()=>{A_=ce(ve(),1);Pe();Se();T_();Mr();W();Mb=new Set,jf=class extends ae{constructor(e){super(e),this.flierID="-"+(0,A_.uniqueId)(),this.flierRef=me();let i=this.generateRandomIntInclusive(1,1e4);this.state={portalElement:null,currentAnimation:"fly1",flightCount:i,calculatedAnimations:{fly1:this.calculateFlyAnimation(i,1),fly2:this.calculateFlyAnimation(i,2),fly3:this.calculateFlyAnimation(i,3),fly4:this.calculateFlyAnimation(i,4)}}}generateRandomIntInclusive(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e+1))+e}calculateDuration(e){return 100*(Math.max(100-Math.abs(e),5)*.01)}generateRandomIntFromSeed(e){var i=Math.sin(e)*1e4;return i-Math.floor(i)}shuffleFromSeed(e,i){for(var r=e.length,n,o;r;)o=Math.floor(this.generateRandomIntFromSeed(i)*r--),n=e[r],e[r]=e[o],e[o]=n,++i;return e}calculateFlyAnimation(e,i){let r=e%2==0,n=this.shuffleFromSeed(["ltr","rtl","ttb","btt"],e),o=Number(this.props.scale.replace("vmax","")),s=this.props.rotation/5*180,u=[{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(r?0-1.4*o:60,r?40:100+1.4*o)}vh`},{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(r?60:0-1.4*o,r?100+1.4*o:40)}vh`}],c=[{x:`calc(100vw + ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(r?60:0-1.4*o,r?100+1.4*o:40)}vh`},{x:`calc(0vw - ${1.4*o}vmax)`,y:`${this.generateRandomIntInclusive(r?0:60,r?40:100+1.4*o)}vh`}],d=[{x:`${this.generateRandomIntInclusive(r?0-1.4*o:60,r?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(r?60:0-1.4*o,r?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`}],p=[{x:`${this.generateRandomIntInclusive(r?60:0-1.4*o,r?100+1.4*o:40)}vw`,y:`calc(100vh + ${1.4*o}vmax)`},{x:`${this.generateRandomIntInclusive(r?0-1.4*o:60,r?40:100+1.4*o)}vw`,y:`calc(0vh - ${1.4*o}vmax)`}],g=n.reduce((v,b)=>{switch(b){case"ltr":return v.concat(u);case"rtl":return v.concat(c);case"ttb":return v.concat(d);case"btt":return v.concat(p);default:return v}},[]);switch(i){case 1:return`
					0% {
						transform: translateX(${g[0].x}) translateY(${g[0].y});
						opacity: 0;
					}
					0.001% {
						transform: translateX(${g[0].x}) translateY(${g[0].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${g[1].x}) translateY(${g[1].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${g[1].x}) translateY(${g[1].y});
						opacity: 0;
					}
				`;case 2:return`
					0% {
						transform: translateX(${g[2].x}) translateY(${g[2].y});
						opacity: 0;
					}
				
					0.001% {
						transform: translateX(${g[2].x}) translateY(${g[2].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${g[3].x}) translateY(${g[3].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${g[3].x}) translateY(${g[3].y});
						opacity: 0;
					}
				`;case 3:return`
					0% {
						transform: translateX(${g[4].x}) translateY(${g[4].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${g[4].x}) translateY(${g[4].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${g[5].x}) translateY(${g[5].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${g[5].x}) translateY(${g[5].y});
						opacity: 0;
					}
				`;case 4:return`
					0% {
						transform: translateX(${g[6].x}) translateY(${g[6].y});
						opacity: 0;
					}
		
					0.001% {
						transform: translateX(${g[6].x}) translateY(${g[6].y});
						opacity: 1;
					}
				
					99.999% {
						transform: translateX(${g[7].x}) translateY(${g[7].y});
						opacity: 1;
					}
		
					100% {
						transform: translateX(${g[7].x}) translateY(${g[7].y});
						opacity: 0;
					}
				`}}onAnimationEnd(e){let i=Number(e.animationName.substr(3,1)),r=i<4?i+1:1;this.setState({currentAnimation:`fly${r}`,...r===1&&{flightCount:this.state.flightCount+1,calculatedAnimations:{fly1:this.calculateFlyAnimation(this.state.flightCount+1,1),fly2:this.calculateFlyAnimation(this.state.flightCount+1,2),fly3:this.calculateFlyAnimation(this.state.flightCount+1,3),fly4:this.calculateFlyAnimation(this.state.flightCount+1,4)}}})}componentDidMount(){if(Kn||(Kn=document.createElement("media-item"),Kn.setAttribute("no-component",""),Kn.shadowRoot||Kn.attachShadow({mode:"open"}),Kn.shadowRoot.innerHTML=`
			<style>
				:host {
					all:unset!important;
					border:none!important;
					padding: 0!important;
					position: fixed!important;
					z-index: 5000!important;
					pointer-events:none!important;
					background:none!important;
					inset: 0!important;
					overflow: hidden!important;
				}

				.spinner [part="media"] {
					pointer-events: none;
					border-radius:0!important;
					padding: 0!important;
					border: none !important;
					position: absolute;
					width: 100%;
					height: 100%;
					inset: 0;
				}

				.spinner img,
				.spinner video {
					object-fit: contain;
				}
				.spinner .frame,
				.spinner .sizing-frame {
					display: contents;
				}				
			</style>
			`,document.body.appendChild(Kn)),!this.state.portalElement){let e=document.createElement("div");e.style.display="contents",Kn.shadowRoot.appendChild(e),this.setState({portalElement:e},()=>{this.flierRef.current&&this.flierRef.current.addEventListener("animationend",i=>this.onAnimationEnd(i))})}Mb.add(this)}componentWillUnmount(){this.flierRef.current&&this.flierRef.current.removeEventListener("animationend",e=>this.onAnimationEnd(e)),this.state.portalElement&&this.state.portalElement.remove(),Mb.delete(this),Mb.size==0&&Kn&&(Kn.remove(),Kn=null)}render(e,i){let{speed:r,rotation:n,scale:o,delay:s,adminMode:u}=e,{currentAnimation:c,flightCount:d,calculatedAnimations:p,portalElement:g}=i;return g?m(X,{children:[m("style",{children:":host {display:none!important;}"}),je(m(X,{children:[m("style",{children:`

					.flier${this.flierID} {
						pointer-events: none !important;
						top: 0;
						left: 0;
						position: absolute;
						z-index:9995;
						transform: translateX(-100%) translateY(-100%);
						animation-delay: ${s}s;
						animation-duration: ${this.calculateDuration(r)/4}s;
						animation-timing-function: linear;
						animation-direction: ${Math.sign(r)===1?"normal":"reverse"};
					}

					.fly1${this.flierID} {
						animation-name: fly1${this.flierID};
					}

					.fly2${this.flierID} {
						animation-name: fly2${this.flierID};
					}

					.fly3${this.flierID} {
						animation-name: fly3${this.flierID};
					}

					.fly4${this.flierID} {
						animation-name: fly4${this.flierID};
					}

					.flier${this.flierID} .spinner {
						${Number(n)!==0?`animation: spin ${this.calculateDuration(n)}s ${Math.sign(Number(n))===-1?"reverse":"normal"} linear infinite;`:""}
						width: ${o};
						height: ${o};
						display: flex;
						align-items: center;
						justify-content: center;
					}

					.flier${this.flierID} .spinner figure {
						padding: 0;
						margin: 0;
						width: ${o};
						height: ${o};
					}

				
					/* Keyframe values control where the element will begin
						and end its trajectory across the screen. Each rule
						represents a path the element follows across the screen. */
					
				
					@keyframes fly1${this.flierID} {
						${p.fly1}
					}

					@keyframes fly2${this.flierID} {
						${p.fly2}
					}

					@keyframes fly3${this.flierID} {
						${p.fly3}
					}

					@keyframes fly4${this.flierID} {
						${p.fly4}
					}

					@keyframes spin {
						0% {
							transform: rotateZ(0deg);
						}
						100% {
							transform: rotateZ(3600deg);
						}
					}
				`}),m("div",{className:`flier${this.flierID} ${c}${this.flierID}`,ref:this.flierRef,children:m("div",{className:"spinner",children:e.children})})]}),g)]}):null}};jf.defaultProps=I_;M_=jf});var R_,Rd,N_,O_=T(()=>{Pe();Se();R_=ce(ve(),1);Mr();W();Rd=class extends Ti{constructor(e){super(e),this.uid=R_.default.uniqueId(),this.state={inited:!1,viewportIntersection:"neutral",isVisible:!1,hasLayout:!1,inTransition:{},suppressTransition:!0}}render(e,i){let r=this.state.viewportIntersection,n=this.props["scroll-variables"].split(" ").filter(c=>c!=="").map(c=>"--scroll-"+c);n.push("--scroll-translate","--scroll-transition","--scroll-opacity"),n=n.map(c=>c+": var("+(c.startsWith("--")?"":"--")+c+"-"+r+"); ").join(" ");let o=this.props["scroll-animation-duration"]||"1000",s=Object.values(this.state.inTransition).some(c=>c==!0),u=!!this.props.scrollContext.scrollingElement?.classList?.contains("overlay-animating");return m(X,{children:[e.children,m("style",{id:"scroll-transition",children:`
				:host {
					--scroll-opacity-above: 1;
				    --scroll-opacity-inside: 1;
				    --scroll-opacity-below: 0;
					opacity: var(--scroll-opacity, 1);
					${s||this.state.waitingForTransition?"will-change: opacity, transform;":""}

					--scroll-transition-above: 0s transform ease-in-out, 0s opacity ease-in-out;
				    --scroll-transition-inside: ${o}ms transform ease-in-out, ${o}ms opacity ease-in-out;
				    --scroll-transition-below: 0s transform ease-in-out, 0s opacity ease-in-out;
					${this.state.suppressTransition||u?"":"transition: var(--scroll-transition);"}

					--scroll-translate-below: translateY(40px);
					--scroll-translate-inside: translateY(0px);
					--scroll-translate-above: translateY(0px);

					${n}
				}

			`})]})}onViewportIntersectionChange=e=>{this.setState({isVisible:e.visible,viewportIntersection:e.position,hasLayout:e.hasLayout})};onTransitionStart=e=>{e.target===this.props.baseNode&&this.setState(i=>({...i,waitingForTransition:!1,inTransition:{...i.inTransition,[e.propertyName]:!0}}))};onTransitionEnd=e=>{e.target===this.props.baseNode&&this.setState(i=>{let r={...i.inTransition,[e.propertyName]:!1},n=Object.values(r).every(o=>o==!1);return{...i,suppressTransition:n,inTransition:r}})};componentDidMount(){if(this.props.baseNode.addEventListener("transitionstart",this.onTransitionStart),this.props.baseNode.addEventListener("transitionend",this.onTransitionEnd),this.props.baseNode.addEventListener("transitioncancel",this.onTransitionEnd),this.props.customElementMode){let e=this.props.visibility?.visible??!1,i=this.props.visibility?.position??"below",r=this.props.visibility?.hasLayout??!1;this.setState({isVisible:e,viewportIntersection:i,hasLayout:r})}else ti(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange)}componentDidUpdate(e,i){if(this.state.viewportIntersection!==i.viewportIntersection&&(this.state.isVisible?this.setState({waitingForTransition:!0,suppressTransition:!1}):this.state.waitingForTransition||this.setState({suppressTransition:!0})),this.props.customElementMode&&this.props.visibility?.position!==e.visibility?.position){let r=this.props.visibility?.visible?this.props.visibility.visible:!1,n=this.props.visibility?.position||"below",o=this.props.visibility?.hasLayout||!1;this.setState({isVisible:r,viewportIntersection:n,hasLayout:o})}}componentWillUnmount(){clearTimeout(this.transitionCheckTimeout),cancelAnimationFrame(this.viewportAnimFrame),cancelAnimationFrame(this.lazyloadFrame),clearTimeout(this.initTimeout),this.props.baseNode.removeEventListener("transitionstart",this.onTransitionStart),this.props.baseNode.removeEventListener("transitionend",this.onTransitionEnd),this.props.baseNode.removeEventListener("transitioncancel",this.onTransitionEnd),si(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange)}};Rd.defaultProps={"scroll-variables":""};Rd.transformSlot="--scroll-translate";N_=Rd});var Cve,Nd,Gf,NX,D_,L_=T(()=>{Pe();ht();Ni();Cve=ce(ve(),1);W();Nd=new Map,Gf=class extends ae{constructor(e){switch(super(e),this.state={z:0,x:0,y:0,interacted:!1,dragging:!1},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}this.preventClick=!1,this.inSlideshow=this.props.baseNode.parentElement.tagName==="GALLERY-SLIDESHOW"}render(e,i){if(e.adminMode)return e.children;let{x:r,y:n,z:o}=i;return m(X,{children:[e.children,this.inSlideshow?null:m("style",{id:"draggable-item",children:`
				:host {
					${this.props.adminMode?"":`
						pointer-events: auto!important;
						-webkit-user-select: none; 
						-webkit-touch-callout: none;
					`}
					${i.dragging?"--scroll-transition: 0s all!important; cursor: grabbing;":"cursor: grab;"}
					${this.displayInlineBlock?"display: inline-block;":""}
					--drag-transform: ${i.interacted?`translate3d(${r}px, ${n}px, ${o+100}px)`:`translate(${r}px, ${n}px)`};
					${!this.props.adminMode&&i.interacted?`z-index: ${o+100};`:""}					
				}
			`})]})}onDragStart=e=>{e.preventDefault(),e.stopPropagation()};onTouchMove=e=>{e.preventDefault()};onPointerDown=e=>{if(this.props.adminMode||e.button==2||this.inSlideshow)return;this.preventClick=!1;let i=this.state.z;Nd.forEach((r,n)=>{n!==this.props.baseNode&&r.state.z>i&&r.setState(o=>({z:o.z-1}))}),this.setState({x:this.state.x,y:this.state.y,z:Nd.size+10,interacted:!0,dragging:!0}),this.initialPosition={x:e.clientX+-this.state.x,y:e.clientY+-this.state.y},this.mousePosition={x:e.clientX,y:e.clientY},this.accumulatedDelta=0,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{e.preventDefault();let i=e.clientX,r=e.clientY,n=Math.sqrt(Math.pow(this.mousePosition.x-i,2)+Math.pow(this.mousePosition.y-r,2));this.accumulatedDelta+=n,this.accumulatedDelta>4&&(this.preventClick=!0),this.mousePosition={x:e.clientX,y:e.clientY},this.setState({x:e.clientX-this.initialPosition.x,y:e.clientY-this.initialPosition.y})};onPointerUp=e=>{this.setState({dragging:!1}),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onClickCapture=e=>{this.preventClick&&(e.preventDefault(),e.stopPropagation())};bindListeners=()=>{this.props.adminMode||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.props.baseNode.addEventListener("pointerdown",this.onPointerDown),this.props.baseNode.addEventListener("touchmove",this.onTouchMove),this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}))};unbindListeners=()=>{this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("pointerdown",this.onPointerDown),this.props.baseNode.removeEventListener("touchmove",this.onTouchMove),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0})};componentDidMount(){this.bindListeners(),Nd.set(this.props.baseNode,this),this.setState({z:Nd.size+10})}componentDidUpdate(e,i){e.adminMode!==this.props.adminMode&&(this.setState({x:0,y:0,z:0,interacted:!1}),this.unbindListeners(),this.bindListeners())}componentWillUnmount(){this.unbindListeners(),Nd.delete(this.props.baseNode)}};Gf.transformSlot="--drag-transform";NX=De((t,e)=>({adminMode:t.frontendState.adminMode}))(Gf),D_=NX});var F_,kb=T(()=>{F_={"dropshadow-offset":"0rem","dropshadow-color":"rgba(0,0,0,.85)","dropshadow-blur-radius":"0rem"}});var Tve,Kf,z_,H_=T(()=>{Pe();Tve=ce(ve(),1);kb();W();Kf=class extends ae{constructor(e){super(e)}render(e,i){let r=this.props["dropshadow-offset"].split(" "),n=r[0],o=r.length>1?r[1]:r[0];return m(X,{children:[e.baseNode.tagName==="MEDIA-ITEM"?m("style",{children:`
                        img {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}):m("style",{children:`
                        :host {
                            filter: drop-shadow(${o} ${n} ${this.props["dropshadow-blur-radius"]} ${this.props["dropshadow-color"]});
                        }
                    `}),e.children]})}};Kf.defaultProps=F_;z_=Kf});var Ove,Yf,U_,q_=T(()=>{Pe();Ove=ce(ve(),1);W();Yf=class extends ae{constructor(e){super(e)}render(e,i){return m(X,{children:[e.baseNode.tagName==="MEDIA-ITEM"?m("style",{children:`
                        img {
                            background-color: ${this.props["background-color"]};
                        }
                    `}):m("style",{children:`
                        :host {
                            background-color: ${this.props["background-color"]};
                        }
                    `}),e.children]})}};Yf.defaultProps={"background-color":"rgba(0,0,0,0)"};U_=Yf});var Hve,Zf,B_,W_=T(()=>{Pe();Hve=ce(ve(),1);kb();W();Zf=class extends ae{constructor(e){super(e)}render(e,i){let r=Object.keys(e).reduce((n,o)=>{if(o.includes("-style")){let s=o.replace("-style","");n.push({part:s,styles:e[o]?e[o].replaceAll(";","!important;"):""})}return n},[]);return m(X,{children:[m("style",{children:r.map(({part:n,styles:o})=>`[part*="${n}"] { ${o} }`)}),e.children]})}};Zf.defaultProps={};B_=Zf});var V_=T(()=>{});var Gve,Xf,$_,j_=T(()=>{Pe();Gve=ce(ve(),1);V_();W();Xf=class extends ae{constructor(e){super(e)}calculateDuration(e){return 5*(Math.max(100-Math.abs(e),5)*.01)}render(e,i){let r=this.calculateDuration(Number(this.props["blink-speed"])),n=Math.max(99.9-this.props["blink-pulse"],.1),o="steps(1)";switch(!0){case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="linear"):o="linear";break;case(isNaN(Number(this.props["blink-transition"]))&&this.props["blink-transition"]=="ease"):o="ease";break;case Number(this.props["blink-transition"])>0:o="ease";break}return m(X,{children:[e.children,m("style",{children:`
					:host {
						animation: ${r}s infinite ${o} blink;
						-webkit-animation: ${r}s infinite ${o} blink;
					}
					
					@keyframes blink {
						0% {
							opacity: 0;
						}
						50% {
							opacity: 1;
						}
						100% {
							opacity: 0;
						}
					}
				`})]})}};Xf.defaultProps={"blink-transition":"0","blink-speed":"75","blink-pulse":"50"};$_=Xf});function DX(t){return!!t&&typeof t=="object"}function LX(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||HX(t)}function HX(t){return t.$$typeof===zX}function UX(t){return Array.isArray(t)?[]:{}}function Jf(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Qf(UX(t),t,e):t}function qX(t,e,i){return t.concat(e).map(function(r){return Jf(r,i)})}function BX(t,e,i){var r={};return i.isMergeableObject(t)&&Object.keys(t).forEach(function(n){r[n]=Jf(t[n],i)}),Object.keys(e).forEach(function(n){!i.isMergeableObject(e[n])||!t[n]?r[n]=Jf(e[n],i):r[n]=Qf(t[n],e[n],i)}),r}function Qf(t,e,i){i=i||{},i.arrayMerge=i.arrayMerge||qX,i.isMergeableObject=i.isMergeableObject||OX;var r=Array.isArray(e),n=Array.isArray(t),o=r===n;return o?r?i.arrayMerge(t,e,i):BX(t,e,i):Jf(e,i)}var OX,FX,zX,G_=T(()=>{OX=function(e){return DX(e)&&!LX(e)};FX=typeof Symbol=="function"&&Symbol.for,zX=FX?Symbol.for("react.element"):60103;Qf.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,n){return Qf(r,n,i)},{})}});var WX,em,Rb=T(()=>{WX=typeof global=="object"&&global&&global.Object===Object&&global,em=WX});var VX,$X,Ai,Yn=T(()=>{Rb();VX=typeof self=="object"&&self&&self.Object===Object&&self,$X=em||VX||Function("return this")(),Ai=$X});var jX,En,Od=T(()=>{Yn();jX=Ai.Symbol,En=jX});function YX(t){var e=GX.call(t,Dd),i=t[Dd];try{t[Dd]=void 0;var r=!0}catch{}var n=KX.call(t);return r&&(e?t[Dd]=i:delete t[Dd]),n}var K_,GX,KX,Dd,Y_,Z_=T(()=>{Od();K_=Object.prototype,GX=K_.hasOwnProperty,KX=K_.toString,Dd=En?En.toStringTag:void 0;Y_=YX});function JX(t){return XX.call(t)}var ZX,XX,X_,J_=T(()=>{ZX=Object.prototype,XX=ZX.toString;X_=JX});function tJ(t){return t==null?t===void 0?eJ:QX:Q_&&Q_ in Object(t)?Y_(t):X_(t)}var QX,eJ,Q_,Zn,mu=T(()=>{Od();Z_();J_();QX="[object Null]",eJ="[object Undefined]",Q_=En?En.toStringTag:void 0;Zn=tJ});function iJ(t,e){return function(i){return t(e(i))}}var tm,Nb=T(()=>{tm=iJ});var rJ,im,Ob=T(()=>{Nb();rJ=tm(Object.getPrototypeOf,Object),im=rJ});function nJ(t){return t!=null&&typeof t=="object"}var Pn,Ys=T(()=>{Pn=nJ});var rE=$((gbe,iE)=>{"use strict";var eE=Array.isArray,tE=Object.keys,oJ=Object.prototype.hasOwnProperty,aJ=typeof Element<"u";function Db(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=eE(t),r=eE(e),n,o,s;if(i&&r){if(o=t.length,o!=e.length)return!1;for(n=o;n--!==0;)if(!Db(t[n],e[n]))return!1;return!0}if(i!=r)return!1;var u=t instanceof Date,c=e instanceof Date;if(u!=c)return!1;if(u&&c)return t.getTime()==e.getTime();var d=t instanceof RegExp,p=e instanceof RegExp;if(d!=p)return!1;if(d&&p)return t.toString()==e.toString();var g=tE(t);if(o=g.length,o!==tE(e).length)return!1;for(n=o;n--!==0;)if(!oJ.call(e,g[n]))return!1;if(aJ&&t instanceof Element&&e instanceof Element)return t===e;for(n=o;n--!==0;)if(s=g[n],!(s==="_owner"&&t.$$typeof)&&!Db(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}iE.exports=function(e,i){try{return Db(e,i)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||r.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}}});function sJ(){this.__data__=[],this.size=0}var nE,oE=T(()=>{nE=sJ});function lJ(t,e){return t===e||t!==t&&e!==e}var rm,Lb=T(()=>{rm=lJ});function uJ(t,e){for(var i=t.length;i--;)if(rm(t[i][0],e))return i;return-1}var Va,Ld=T(()=>{Lb();Va=uJ});function pJ(t){var e=this.__data__,i=Va(e,t);if(i<0)return!1;var r=e.length-1;return i==r?e.pop():dJ.call(e,i,1),--this.size,!0}var cJ,dJ,aE,sE=T(()=>{Ld();cJ=Array.prototype,dJ=cJ.splice;aE=pJ});function hJ(t){var e=this.__data__,i=Va(e,t);return i<0?void 0:e[i][1]}var lE,uE=T(()=>{Ld();lE=hJ});function fJ(t){return Va(this.__data__,t)>-1}var cE,dE=T(()=>{Ld();cE=fJ});function mJ(t,e){var i=this.__data__,r=Va(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this}var pE,hE=T(()=>{Ld();pE=mJ});function gu(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}var $a,Fd=T(()=>{oE();sE();uE();dE();hE();gu.prototype.clear=nE;gu.prototype.delete=aE;gu.prototype.get=lE;gu.prototype.has=cE;gu.prototype.set=pE;$a=gu});function gJ(){this.__data__=new $a,this.size=0}var fE,mE=T(()=>{Fd();fE=gJ});function vJ(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}var gE,vE=T(()=>{gE=vJ});function bJ(t){return this.__data__.get(t)}var bE,yE=T(()=>{bE=bJ});function yJ(t){return this.__data__.has(t)}var wE,xE=T(()=>{wE=yJ});function wJ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var So,vu=T(()=>{So=wJ});function EJ(t){if(!So(t))return!1;var e=Zn(t);return e==CJ||e==SJ||e==xJ||e==_J}var xJ,CJ,SJ,_J,nm,Fb=T(()=>{mu();vu();xJ="[object AsyncFunction]",CJ="[object Function]",SJ="[object GeneratorFunction]",_J="[object Proxy]";nm=EJ});var PJ,om,CE=T(()=>{Yn();PJ=Ai["__core-js_shared__"],om=PJ});function IJ(t){return!!SE&&SE in t}var SE,_E,EE=T(()=>{CE();SE=function(){var t=/[^.]+$/.exec(om&&om.keys&&om.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();_E=IJ});function MJ(t){if(t!=null){try{return AJ.call(t)}catch{}try{return t+""}catch{}}return""}var TJ,AJ,na,zb=T(()=>{TJ=Function.prototype,AJ=TJ.toString;na=MJ});function zJ(t){if(!So(t)||_E(t))return!1;var e=nm(t)?FJ:RJ;return e.test(na(t))}var kJ,RJ,NJ,OJ,DJ,LJ,FJ,PE,IE=T(()=>{Fb();EE();vu();zb();kJ=/[\\^$.*+?()[\]{}|]/g,RJ=/^\[object .+?Constructor\]$/,NJ=Function.prototype,OJ=Object.prototype,DJ=NJ.toString,LJ=OJ.hasOwnProperty,FJ=RegExp("^"+DJ.call(LJ).replace(kJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");PE=zJ});function HJ(t,e){return t?.[e]}var TE,AE=T(()=>{TE=HJ});function UJ(t,e){var i=TE(t,e);return PE(i)?i:void 0}var qr,ja=T(()=>{IE();AE();qr=UJ});var qJ,Ga,am=T(()=>{ja();Yn();qJ=qr(Ai,"Map"),Ga=qJ});var BJ,oa,zd=T(()=>{ja();BJ=qr(Object,"create"),oa=BJ});function WJ(){this.__data__=oa?oa(null):{},this.size=0}var ME,kE=T(()=>{zd();ME=WJ});function VJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var RE,NE=T(()=>{RE=VJ});function KJ(t){var e=this.__data__;if(oa){var i=e[t];return i===$J?void 0:i}return GJ.call(e,t)?e[t]:void 0}var $J,jJ,GJ,OE,DE=T(()=>{zd();$J="__lodash_hash_undefined__",jJ=Object.prototype,GJ=jJ.hasOwnProperty;OE=KJ});function XJ(t){var e=this.__data__;return oa?e[t]!==void 0:ZJ.call(e,t)}var YJ,ZJ,LE,FE=T(()=>{zd();YJ=Object.prototype,ZJ=YJ.hasOwnProperty;LE=XJ});function QJ(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=oa&&e===void 0?JJ:e,this}var JJ,zE,HE=T(()=>{zd();JJ="__lodash_hash_undefined__";zE=QJ});function bu(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}var Hb,UE=T(()=>{kE();NE();DE();FE();HE();bu.prototype.clear=ME;bu.prototype.delete=RE;bu.prototype.get=OE;bu.prototype.has=LE;bu.prototype.set=zE;Hb=bu});function eQ(){this.size=0,this.__data__={hash:new Hb,map:new(Ga||$a),string:new Hb}}var qE,BE=T(()=>{UE();Fd();am();qE=eQ});function tQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var WE,VE=T(()=>{WE=tQ});function iQ(t,e){var i=t.__data__;return WE(e)?i[typeof e=="string"?"string":"hash"]:i.map}var Ka,Hd=T(()=>{VE();Ka=iQ});function rQ(t){var e=Ka(this,t).delete(t);return this.size-=e?1:0,e}var $E,jE=T(()=>{Hd();$E=rQ});function nQ(t){return Ka(this,t).get(t)}var GE,KE=T(()=>{Hd();GE=nQ});function oQ(t){return Ka(this,t).has(t)}var YE,ZE=T(()=>{Hd();YE=oQ});function aQ(t,e){var i=Ka(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this}var XE,JE=T(()=>{Hd();XE=aQ});function yu(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}var Ud,Ub=T(()=>{BE();jE();KE();ZE();JE();yu.prototype.clear=qE;yu.prototype.delete=$E;yu.prototype.get=GE;yu.prototype.has=YE;yu.prototype.set=XE;Ud=yu});function lQ(t,e){var i=this.__data__;if(i instanceof $a){var r=i.__data__;if(!Ga||r.length<sQ-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Ud(r)}return i.set(t,e),this.size=i.size,this}var sQ,QE,eP=T(()=>{Fd();am();Ub();sQ=200;QE=lQ});function wu(t){var e=this.__data__=new $a(t);this.size=e.size}var tP,iP=T(()=>{Fd();mE();vE();yE();xE();eP();wu.prototype.clear=fE;wu.prototype.delete=gE;wu.prototype.get=bE;wu.prototype.has=wE;wu.prototype.set=QE;tP=wu});function uQ(t,e){for(var i=-1,r=t==null?0:t.length;++i<r&&e(t[i],i,t)!==!1;);return t}var rP,nP=T(()=>{rP=uQ});var cQ,qb,oP=T(()=>{ja();cQ=function(){try{var t=qr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),qb=cQ});function dQ(t,e,i){e=="__proto__"&&qb?qb(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var sm,Bb=T(()=>{oP();sm=dQ});function fQ(t,e,i){var r=t[e];(!(hQ.call(t,e)&&rm(r,i))||i===void 0&&!(e in t))&&sm(t,e,i)}var pQ,hQ,lm,Wb=T(()=>{Bb();Lb();pQ=Object.prototype,hQ=pQ.hasOwnProperty;lm=fQ});function mQ(t,e,i,r){var n=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(i[u],t[u],u,i,t):void 0;c===void 0&&(c=t[u]),n?sm(i,u,c):lm(i,u,c)}return i}var Ya,qd=T(()=>{Wb();Bb();Ya=mQ});function gQ(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}var aP,sP=T(()=>{aP=gQ});function bQ(t){return Pn(t)&&Zn(t)==vQ}var vQ,Vb,lP=T(()=>{mu();Ys();vQ="[object Arguments]";Vb=bQ});var uP,yQ,wQ,xQ,cP,dP=T(()=>{lP();Ys();uP=Object.prototype,yQ=uP.hasOwnProperty,wQ=uP.propertyIsEnumerable,xQ=Vb(function(){return arguments}())?Vb:function(t){return Pn(t)&&yQ.call(t,"callee")&&!wQ.call(t,"callee")},cP=xQ});var CQ,_o,xu=T(()=>{CQ=Array.isArray,_o=CQ});function SQ(){return!1}var pP,hP=T(()=>{pP=SQ});var gP,fP,_Q,mP,EQ,PQ,um,$b=T(()=>{Yn();hP();gP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fP=gP&&typeof module=="object"&&module&&!module.nodeType&&module,_Q=fP&&fP.exports===gP,mP=_Q?Ai.Buffer:void 0,EQ=mP?mP.isBuffer:void 0,PQ=EQ||pP,um=PQ});function AQ(t,e){var i=typeof t;return e=e??IQ,!!e&&(i=="number"||i!="symbol"&&TQ.test(t))&&t>-1&&t%1==0&&t<e}var IQ,TQ,vP,bP=T(()=>{IQ=9007199254740991,TQ=/^(?:0|[1-9]\d*)$/;vP=AQ});function kQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MQ}var MQ,cm,jb=T(()=>{MQ=9007199254740991;cm=kQ});function iee(t){return Pn(t)&&cm(t.length)&&!!ii[Zn(t)]}var RQ,NQ,OQ,DQ,LQ,FQ,zQ,HQ,UQ,qQ,BQ,WQ,VQ,$Q,jQ,GQ,KQ,YQ,ZQ,XQ,JQ,QQ,eee,tee,ii,yP,wP=T(()=>{mu();jb();Ys();RQ="[object Arguments]",NQ="[object Array]",OQ="[object Boolean]",DQ="[object Date]",LQ="[object Error]",FQ="[object Function]",zQ="[object Map]",HQ="[object Number]",UQ="[object Object]",qQ="[object RegExp]",BQ="[object Set]",WQ="[object String]",VQ="[object WeakMap]",$Q="[object ArrayBuffer]",jQ="[object DataView]",GQ="[object Float32Array]",KQ="[object Float64Array]",YQ="[object Int8Array]",ZQ="[object Int16Array]",XQ="[object Int32Array]",JQ="[object Uint8Array]",QQ="[object Uint8ClampedArray]",eee="[object Uint16Array]",tee="[object Uint32Array]",ii={};ii[GQ]=ii[KQ]=ii[YQ]=ii[ZQ]=ii[XQ]=ii[JQ]=ii[QQ]=ii[eee]=ii[tee]=!0;ii[RQ]=ii[NQ]=ii[$Q]=ii[OQ]=ii[jQ]=ii[DQ]=ii[LQ]=ii[FQ]=ii[zQ]=ii[HQ]=ii[UQ]=ii[qQ]=ii[BQ]=ii[WQ]=ii[VQ]=!1;yP=iee});function ree(t){return function(e){return t(e)}}var Cu,dm=T(()=>{Cu=ree});var xP,Bd,nee,Gb,oee,aa,pm=T(()=>{Rb();xP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bd=xP&&typeof module=="object"&&module&&!module.nodeType&&module,nee=Bd&&Bd.exports===xP,Gb=nee&&em.process,oee=function(){try{var t=Bd&&Bd.require&&Bd.require("util").types;return t||Gb&&Gb.binding&&Gb.binding("util")}catch{}}(),aa=oee});var CP,aee,SP,_P=T(()=>{wP();dm();pm();CP=aa&&aa.isTypedArray,aee=CP?Cu(CP):yP,SP=aee});function uee(t,e){var i=_o(t),r=!i&&cP(t),n=!i&&!r&&um(t),o=!i&&!r&&!n&&SP(t),s=i||r||n||o,u=s?aP(t.length,String):[],c=u.length;for(var d in t)(e||lee.call(t,d))&&!(s&&(d=="length"||n&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||vP(d,c)))&&u.push(d);return u}var see,lee,hm,Kb=T(()=>{sP();dP();xu();$b();bP();_P();see=Object.prototype,lee=see.hasOwnProperty;hm=uee});function dee(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||cee;return t===i}var cee,Su,fm=T(()=>{cee=Object.prototype;Su=dee});var pee,EP,PP=T(()=>{Nb();pee=tm(Object.keys,Object),EP=pee});function mee(t){if(!Su(t))return EP(t);var e=[];for(var i in Object(t))fee.call(t,i)&&i!="constructor"&&e.push(i);return e}var hee,fee,IP,TP=T(()=>{fm();PP();hee=Object.prototype,fee=hee.hasOwnProperty;IP=mee});function gee(t){return t!=null&&cm(t.length)&&!nm(t)}var mm,Yb=T(()=>{Fb();jb();mm=gee});function vee(t){return mm(t)?hm(t):IP(t)}var _u,gm=T(()=>{Kb();TP();Yb();_u=vee});function bee(t,e){return t&&Ya(e,_u(e),t)}var AP,MP=T(()=>{qd();gm();AP=bee});function yee(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var kP,RP=T(()=>{kP=yee});function Cee(t){if(!So(t))return kP(t);var e=Su(t),i=[];for(var r in t)r=="constructor"&&(e||!xee.call(t,r))||i.push(r);return i}var wee,xee,NP,OP=T(()=>{vu();fm();RP();wee=Object.prototype,xee=wee.hasOwnProperty;NP=Cee});function See(t){return mm(t)?hm(t,!0):NP(t)}var Eu,vm=T(()=>{Kb();OP();Yb();Eu=See});function _ee(t,e){return t&&Ya(e,Eu(e),t)}var DP,LP=T(()=>{qd();vm();DP=_ee});function Pee(t,e){if(e)return t.slice();var i=t.length,r=HP?HP(i):new t.constructor(i);return t.copy(r),r}var UP,FP,Eee,zP,HP,qP,BP=T(()=>{Yn();UP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,FP=UP&&typeof module=="object"&&module&&!module.nodeType&&module,Eee=FP&&FP.exports===UP,zP=Eee?Ai.Buffer:void 0,HP=zP?zP.allocUnsafe:void 0;qP=Pee});function Iee(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}var bm,Zb=T(()=>{bm=Iee});function Tee(t,e){for(var i=-1,r=t==null?0:t.length,n=0,o=[];++i<r;){var s=t[i];e(s,i,t)&&(o[n++]=s)}return o}var WP,VP=T(()=>{WP=Tee});function Aee(){return[]}var ym,Xb=T(()=>{ym=Aee});var Mee,kee,$P,Ree,Pu,wm=T(()=>{VP();Xb();Mee=Object.prototype,kee=Mee.propertyIsEnumerable,$P=Object.getOwnPropertySymbols,Ree=$P?function(t){return t==null?[]:(t=Object(t),WP($P(t),function(e){return kee.call(t,e)}))}:ym,Pu=Ree});function Nee(t,e){return Ya(t,Pu(t),e)}var jP,GP=T(()=>{qd();wm();jP=Nee});function Oee(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}var xm,Jb=T(()=>{xm=Oee});var Dee,Lee,Cm,Qb=T(()=>{Jb();Ob();wm();Xb();Dee=Object.getOwnPropertySymbols,Lee=Dee?function(t){for(var e=[];t;)xm(e,Pu(t)),t=im(t);return e}:ym,Cm=Lee});function Fee(t,e){return Ya(t,Cm(t),e)}var KP,YP=T(()=>{qd();Qb();KP=Fee});function zee(t,e,i){var r=e(t);return _o(t)?r:xm(r,i(t))}var Sm,ey=T(()=>{Jb();xu();Sm=zee});function Hee(t){return Sm(t,_u,Pu)}var ZP,XP=T(()=>{ey();wm();gm();ZP=Hee});function Uee(t){return Sm(t,Eu,Cm)}var JP,QP=T(()=>{ey();Qb();vm();JP=Uee});var qee,_m,eI=T(()=>{ja();Yn();qee=qr(Ai,"DataView"),_m=qee});var Bee,Em,tI=T(()=>{ja();Yn();Bee=qr(Ai,"Promise"),Em=Bee});var Wee,Pm,iI=T(()=>{ja();Yn();Wee=qr(Ai,"Set"),Pm=Wee});var Vee,Im,rI=T(()=>{ja();Yn();Vee=qr(Ai,"WeakMap"),Im=Vee});var nI,$ee,oI,aI,sI,lI,jee,Gee,Kee,Yee,Zee,Zs,Iu,Tm=T(()=>{eI();am();tI();iI();rI();mu();zb();nI="[object Map]",$ee="[object Object]",oI="[object Promise]",aI="[object Set]",sI="[object WeakMap]",lI="[object DataView]",jee=na(_m),Gee=na(Ga),Kee=na(Em),Yee=na(Pm),Zee=na(Im),Zs=Zn;(_m&&Zs(new _m(new ArrayBuffer(1)))!=lI||Ga&&Zs(new Ga)!=nI||Em&&Zs(Em.resolve())!=oI||Pm&&Zs(new Pm)!=aI||Im&&Zs(new Im)!=sI)&&(Zs=function(t){var e=Zn(t),i=e==$ee?t.constructor:void 0,r=i?na(i):"";if(r)switch(r){case jee:return lI;case Gee:return nI;case Kee:return oI;case Yee:return aI;case Zee:return sI}return e});Iu=Zs});function Qee(t){var e=t.length,i=new t.constructor(e);return e&&typeof t[0]=="string"&&Jee.call(t,"index")&&(i.index=t.index,i.input=t.input),i}var Xee,Jee,uI,cI=T(()=>{Xee=Object.prototype,Jee=Xee.hasOwnProperty;uI=Qee});var ete,ty,dI=T(()=>{Yn();ete=Ai.Uint8Array,ty=ete});function tte(t){var e=new t.constructor(t.byteLength);return new ty(e).set(new ty(t)),e}var Tu,Am=T(()=>{dI();Tu=tte});function ite(t,e){var i=e?Tu(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}var pI,hI=T(()=>{Am();pI=ite});function nte(t){var e=new t.constructor(t.source,rte.exec(t));return e.lastIndex=t.lastIndex,e}var rte,fI,mI=T(()=>{rte=/\w*$/;fI=nte});function ote(t){return vI?Object(vI.call(t)):{}}var gI,vI,bI,yI=T(()=>{Od();gI=En?En.prototype:void 0,vI=gI?gI.valueOf:void 0;bI=ote});function ate(t,e){var i=e?Tu(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var wI,xI=T(()=>{Am();wI=ate});function Pte(t,e,i){var r=t.constructor;switch(e){case mte:return Tu(t);case ste:case lte:return new r(+t);case gte:return pI(t,i);case vte:case bte:case yte:case wte:case xte:case Cte:case Ste:case _te:case Ete:return wI(t,i);case ute:return new r;case cte:case hte:return new r(t);case dte:return fI(t);case pte:return new r;case fte:return bI(t)}}var ste,lte,ute,cte,dte,pte,hte,fte,mte,gte,vte,bte,yte,wte,xte,Cte,Ste,_te,Ete,CI,SI=T(()=>{Am();hI();mI();yI();xI();ste="[object Boolean]",lte="[object Date]",ute="[object Map]",cte="[object Number]",dte="[object RegExp]",pte="[object Set]",hte="[object String]",fte="[object Symbol]",mte="[object ArrayBuffer]",gte="[object DataView]",vte="[object Float32Array]",bte="[object Float64Array]",yte="[object Int8Array]",wte="[object Int16Array]",xte="[object Int32Array]",Cte="[object Uint8Array]",Ste="[object Uint8ClampedArray]",_te="[object Uint16Array]",Ete="[object Uint32Array]";CI=Pte});var _I,Ite,EI,PI=T(()=>{vu();_I=Object.create,Ite=function(){function t(){}return function(e){if(!So(e))return{};if(_I)return _I(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),EI=Ite});function Tte(t){return typeof t.constructor=="function"&&!Su(t)?EI(im(t)):{}}var II,TI=T(()=>{PI();Ob();fm();II=Tte});function Mte(t){return Pn(t)&&Iu(t)==Ate}var Ate,AI,MI=T(()=>{Tm();Ys();Ate="[object Map]";AI=Mte});var kI,kte,RI,NI=T(()=>{MI();dm();pm();kI=aa&&aa.isMap,kte=kI?Cu(kI):AI,RI=kte});function Nte(t){return Pn(t)&&Iu(t)==Rte}var Rte,OI,DI=T(()=>{Tm();Ys();Rte="[object Set]";OI=Nte});var LI,Ote,FI,zI=T(()=>{DI();dm();pm();LI=aa&&aa.isSet,Ote=LI?Cu(LI):OI,FI=Ote});function Mm(t,e,i,r,n,o){var s,u=e&Dte,c=e&Lte,d=e&Fte;if(i&&(s=n?i(t,r,n,o):i(t)),s!==void 0)return s;if(!So(t))return t;var p=_o(t);if(p){if(s=uI(t),!u)return bm(t,s)}else{var g=Iu(t),v=g==UI||g==Bte;if(um(t))return qP(t,u);if(g==qI||g==HI||v&&!n){if(s=c||v?{}:II(t),!u)return c?KP(t,DP(s,t)):jP(t,AP(s,t))}else{if(!Xt[g])return n?t:{};s=CI(t,g,u)}}o||(o=new tP);var b=o.get(t);if(b)return b;o.set(t,s),FI(t)?t.forEach(function(E){s.add(Mm(E,e,i,E,t,o))}):RI(t)&&t.forEach(function(E,I){s.set(I,Mm(E,e,i,I,t,o))});var S=d?c?JP:ZP:c?Eu:_u,_=p?void 0:S(t);return rP(_||t,function(E,I){_&&(I=E,E=t[I]),lm(s,I,Mm(E,e,i,I,t,o))}),s}var Dte,Lte,Fte,HI,zte,Hte,Ute,qte,UI,Bte,Wte,Vte,qI,$te,jte,Gte,Kte,Yte,Zte,Xte,Jte,Qte,eie,tie,iie,rie,nie,oie,aie,Xt,km,iy=T(()=>{iP();nP();Wb();MP();LP();BP();Zb();GP();YP();XP();QP();Tm();cI();SI();TI();xu();$b();NI();vu();zI();gm();vm();Dte=1,Lte=2,Fte=4,HI="[object Arguments]",zte="[object Array]",Hte="[object Boolean]",Ute="[object Date]",qte="[object Error]",UI="[object Function]",Bte="[object GeneratorFunction]",Wte="[object Map]",Vte="[object Number]",qI="[object Object]",$te="[object RegExp]",jte="[object Set]",Gte="[object String]",Kte="[object Symbol]",Yte="[object WeakMap]",Zte="[object ArrayBuffer]",Xte="[object DataView]",Jte="[object Float32Array]",Qte="[object Float64Array]",eie="[object Int8Array]",tie="[object Int16Array]",iie="[object Int32Array]",rie="[object Uint8Array]",nie="[object Uint8ClampedArray]",oie="[object Uint16Array]",aie="[object Uint32Array]",Xt={};Xt[HI]=Xt[zte]=Xt[Zte]=Xt[Xte]=Xt[Hte]=Xt[Ute]=Xt[Jte]=Xt[Qte]=Xt[eie]=Xt[tie]=Xt[iie]=Xt[Wte]=Xt[Vte]=Xt[qI]=Xt[$te]=Xt[jte]=Xt[Gte]=Xt[Kte]=Xt[rie]=Xt[nie]=Xt[oie]=Xt[aie]=!0;Xt[qte]=Xt[UI]=Xt[Yte]=!1;km=Mm});function lie(t){return km(t,sie)}var sie,ry,BI=T(()=>{iy();sie=4;ry=lie});function uie(t,e){for(var i=-1,r=t==null?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}var Rm,ny=T(()=>{Rm=uie});function die(t){return typeof t=="symbol"||Pn(t)&&Zn(t)==cie}var cie,Au,Nm=T(()=>{mu();Ys();cie="[object Symbol]";Au=die});function oy(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(pie);var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],o=i.cache;if(o.has(n))return o.get(n);var s=t.apply(this,r);return i.cache=o.set(n,s)||o,s};return i.cache=new(oy.Cache||Ud),i}var pie,WI,VI=T(()=>{Ub();pie="Expected a function";oy.Cache=Ud;WI=oy});function fie(t){var e=WI(t,function(r){return i.size===hie&&i.clear(),r}),i=e.cache;return e}var hie,$I,jI=T(()=>{VI();hie=500;$I=fie});var mie,gie,vie,GI,KI=T(()=>{jI();mie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gie=/\\(\\)?/g,vie=$I(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(mie,function(i,r,n,o){e.push(n?o.replace(gie,"$1"):r||i)}),e}),GI=vie});function yie(t){if(typeof t=="string"||Au(t))return t;var e=t+"";return e=="0"&&1/t==-bie?"-0":e}var bie,YI,ZI=T(()=>{Nm();bie=1/0;YI=yie});function QI(t){if(typeof t=="string")return t;if(_o(t))return Rm(t,QI)+"";if(Au(t))return JI?JI.call(t):"";var e=t+"";return e=="0"&&1/t==-wie?"-0":e}var wie,XI,JI,eT,tT=T(()=>{Od();ny();xu();Nm();wie=1/0,XI=En?En.prototype:void 0,JI=XI?XI.toString:void 0;eT=QI});function xie(t){return t==null?"":eT(t)}var iT,rT=T(()=>{tT();iT=xie});function Cie(t){return _o(t)?Rm(t,YI):Au(t)?[t]:bm(GI(iT(t)))}var ay,nT=T(()=>{ny();Zb();xu();Nm();KI();ZI();rT();ay=Cie});function Eie(t){return km(t,Sie|_ie)}var Sie,_ie,oT,aT=T(()=>{iy();Sie=1,_ie=4;oT=Eie});function Xs(){return Xs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Xs.apply(this,arguments)}function Pie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function hT(t,e){if(t==null)return{};var i={},r=Object.keys(t),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(i[n]=t[n]);return i}function sT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tie(){var t=ki(Om);return t||W0(!1),t}function Mu(t,e,i,r){r===void 0&&(r=0);for(var n=ay(e);t&&r<n.length;)t=t[n[r++]];return r!==n.length&&!t||t===void 0?i:t}function sy(t,e,i){for(var r=ry(t),n=r,o=0,s=ay(e);o<s.length-1;o++){var u=s[o],c=Mu(t,s.slice(0,o+1));if(c&&(fT(c)||Array.isArray(c)))n=n[u]=ry(c);else{var d=s[o+1];n=n[u]=Aie(d)&&Number(d)>=0?[]:{}}}return(o===0?t:n)[s[o]]===i?t:(i===void 0?delete n[s[o]]:n[s[o]]=i,o===0&&i===void 0&&delete r[s[o]],r)}function mT(t){var e=function(n){return Tt(Iie,null,function(o){return o||W0(!1),Tt(t,Xs({},n,{formik:o}))})},i=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return e.WrappedComponent=t,e.displayName="FormikConnect("+i+")",(0,pT.default)(e,t)}var dT,pT,Om,s3e,Iie,lT,uT,fT,Aie,Mie,l3e,kie,Rie,Nie,ly,Oie,Js,cT,Die,gT=T(()=>{G_();Se();dT=ce(rE());FC();BI();nT();pT=ce(Lh());aT();Om=wn(void 0);Om.displayName="FormikContext";s3e=Om.Provider,Iie=Om.Consumer;lT=function(e){return Array.isArray(e)&&e.length===0},uT=function(e){return typeof e=="function"},fT=function(e){return e!==null&&typeof e=="object"},Aie=function(e){return String(Math.floor(Number(e)))===e},Mie=function(e){return ks.count(e)===0};l3e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ir:Ke,kie=rr(function(t,e){var i=t.action,r=hT(t,["action"]),n=i??"#",o=Tie(),s=o.handleReset,u=o.handleSubmit;return Tt("form",Xs({onSubmit:u,ref:e,onReset:s,action:n},r))});kie.displayName="Form";Rie=function(e,i,r){var n=Js(e),o=n[i];return n.splice(i,1),n.splice(r,0,o),n},Nie=function(e,i,r){var n=Js(e),o=n[i];return n[i]=n[r],n[r]=o,n},ly=function(e,i,r){var n=Js(e);return n.splice(i,0,r),n},Oie=function(e,i,r){var n=Js(e);return n[i]=r,n},Js=function(e){if(e){if(Array.isArray(e))return[].concat(e);var i=Object.keys(e).map(function(r){return parseInt(r)}).reduce(function(r,n){return n>r?n:r},0);return Array.from(Xs({},e,{length:i+1}))}else return[]},cT=function(e,i){var r=typeof e=="function"?e:i;return function(n){if(Array.isArray(n)||fT(n)){var o=Js(n);return r(o)}return n}},Die=function(t){Pie(e,t);function e(r){var n;return n=t.call(this,r)||this,n.updateArrayField=function(o,s,u){var c=n.props,d=c.name,p=c.formik.setFormikState;p(function(g){var v=cT(u,o),b=cT(s,o),S=sy(g.values,d,o(Mu(g.values,d))),_=u?v(Mu(g.errors,d)):void 0,E=s?b(Mu(g.touched,d)):void 0;return lT(_)&&(_=void 0),lT(E)&&(E=void 0),Xs({},g,{values:S,errors:u?sy(g.errors,d,_):g.errors,touched:s?sy(g.touched,d,E):g.touched})})},n.push=function(o){return n.updateArrayField(function(s){return[].concat(Js(s),[oT(o)])},!1,!1)},n.handlePush=function(o){return function(){return n.push(o)}},n.swap=function(o,s){return n.updateArrayField(function(u){return Nie(u,o,s)},!0,!0)},n.handleSwap=function(o,s){return function(){return n.swap(o,s)}},n.move=function(o,s){return n.updateArrayField(function(u){return Rie(u,o,s)},!0,!0)},n.handleMove=function(o,s){return function(){return n.move(o,s)}},n.insert=function(o,s){return n.updateArrayField(function(u){return ly(u,o,s)},function(u){return ly(u,o,null)},function(u){return ly(u,o,null)})},n.handleInsert=function(o,s){return function(){return n.insert(o,s)}},n.replace=function(o,s){return n.updateArrayField(function(u){return Oie(u,o,s)},!1,!1)},n.handleReplace=function(o,s){return function(){return n.replace(o,s)}},n.unshift=function(o){var s=-1;return n.updateArrayField(function(u){var c=u?[o].concat(u):[o];return s=c.length,c},function(u){return u?[null].concat(u):[null]},function(u){return u?[null].concat(u):[null]}),s},n.handleUnshift=function(o){return function(){return n.unshift(o)}},n.handleRemove=function(o){return function(){return n.remove(o)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(sT(n)),n.pop=n.pop.bind(sT(n)),n}var i=e.prototype;return i.componentDidUpdate=function(n){this.props.validateOnChange&&this.props.formik.validateOnChange&&!(0,dT.default)(Mu(n.formik.values,n.name),Mu(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},i.remove=function(n){var o;return this.updateArrayField(function(s){var u=s?Js(s):[];return o||(o=u[n]),uT(u.splice)&&u.splice(n,1),uT(u.every)&&u.every(function(c){return c===void 0})?[]:u},!0,!0),o},i.pop=function(){var n;return this.updateArrayField(function(o){var s=o.slice();return n||(n=s&&s.pop&&s.pop()),s},!0,!0),n},i.render=function(){var n={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},o=this.props,s=o.component,u=o.render,c=o.children,d=o.name,p=o.formik,g=hT(p,["validate","validationSchema"]),v=Xs({},n,{form:g,name:d});return s?Tt(s,v):u?u(v):c?typeof c=="function"?c(v):Mie(c)?null:ks.only(c):null},e}(ae);Die.defaultProps={validateOnChange:!0}});var bT=$((c3e,vT)=>{var Lie="__lodash_hash_undefined__";function Fie(t){return this.__data__.set(t,Lie),this}vT.exports=Fie});var wT=$((d3e,yT)=>{function zie(t){return this.__data__.has(t)}yT.exports=zie});var CT=$((p3e,xT)=>{var Hie=mf(),Uie=bT(),qie=wT();function Dm(t){var e=-1,i=t==null?0:t.length;for(this.__data__=new Hie;++e<i;)this.add(t[e])}Dm.prototype.add=Dm.prototype.push=Uie;Dm.prototype.has=qie;xT.exports=Dm});var _T=$((h3e,ST)=>{function Bie(t,e){for(var i=-1,r=t==null?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}ST.exports=Bie});var PT=$((f3e,ET)=>{function Wie(t,e){return t.has(e)}ET.exports=Wie});var uy=$((m3e,IT)=>{var Vie=CT(),$ie=_T(),jie=PT(),Gie=1,Kie=2;function Yie(t,e,i,r,n,o){var s=i&Gie,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var g=-1,v=!0,b=i&Kie?new Vie:void 0;for(o.set(t,e),o.set(e,t);++g<u;){var S=t[g],_=e[g];if(r)var E=s?r(_,S,g,e,t,o):r(S,_,g,t,e,o);if(E!==void 0){if(E)continue;v=!1;break}if(b){if(!$ie(e,function(I,F){if(!jie(b,F)&&(S===I||n(S,I,i,r,o)))return b.push(F)})){v=!1;break}}else if(!(S===_||n(S,_,i,r,o))){v=!1;break}}return o.delete(t),o.delete(e),v}IT.exports=Yie});var AT=$((g3e,TT)=>{function Zie(t){var e=-1,i=Array(t.size);return t.forEach(function(r,n){i[++e]=[n,r]}),i}TT.exports=Zie});var kT=$((v3e,MT)=>{function Xie(t){var e=-1,i=Array(t.size);return t.forEach(function(r){i[++e]=r}),i}MT.exports=Xie});var LT=$((b3e,DT)=>{var RT=md(),NT=Uv(),Jie=Yl(),Qie=uy(),ere=AT(),tre=kT(),ire=1,rre=2,nre="[object Boolean]",ore="[object Date]",are="[object Error]",sre="[object Map]",lre="[object Number]",ure="[object RegExp]",cre="[object Set]",dre="[object String]",pre="[object Symbol]",hre="[object ArrayBuffer]",fre="[object DataView]",OT=RT?RT.prototype:void 0,cy=OT?OT.valueOf:void 0;function mre(t,e,i,r,n,o,s){switch(i){case fre:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case hre:return!(t.byteLength!=e.byteLength||!o(new NT(t),new NT(e)));case nre:case ore:case lre:return Jie(+t,+e);case are:return t.name==e.name&&t.message==e.message;case ure:case dre:return t==e+"";case sre:var u=ere;case cre:var c=r&ire;if(u||(u=tre),t.size!=e.size&&!c)return!1;var d=s.get(t);if(d)return d==e;r|=rre,s.set(t,e);var p=Qie(u(t),u(e),r,n,o,s);return s.delete(t),p;case pre:if(cy)return cy.call(t)==cy.call(e)}return!1}DT.exports=mre});var dy=$((y3e,FT)=>{function gre(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}FT.exports=gre});var py=$((w3e,zT)=>{var vre=dy(),bre=vo();function yre(t,e,i){var r=e(t);return bre(t)?r:vre(r,i(t))}zT.exports=yre});var UT=$((x3e,HT)=>{function wre(t,e){for(var i=-1,r=t==null?0:t.length,n=0,o=[];++i<r;){var s=t[i];e(s,i,t)&&(o[n++]=s)}return o}HT.exports=wre});var hy=$((C3e,qT)=>{function xre(){return[]}qT.exports=xre});var fy=$((S3e,WT)=>{var Cre=UT(),Sre=hy(),_re=Object.prototype,Ere=_re.propertyIsEnumerable,BT=Object.getOwnPropertySymbols,Pre=BT?function(t){return t==null?[]:(t=Object(t),Cre(BT(t),function(e){return Ere.call(t,e)}))}:Sre;WT.exports=Pre});var $T=$((_3e,VT)=>{var Ire=qv(),Tre=Ire(Object.keys,Object);VT.exports=Tre});var GT=$((E3e,jT)=>{var Are=yf(),Mre=$T(),kre=Object.prototype,Rre=kre.hasOwnProperty;function Nre(t){if(!Are(t))return Mre(t);var e=[];for(var i in Object(t))Rre.call(t,i)&&i!="constructor"&&e.push(i);return e}jT.exports=Nre});var my=$((P3e,KT)=>{var Ore=$v(),Dre=GT(),Lre=wd();function Fre(t){return Lre(t)?Ore(t):Dre(t)}KT.exports=Fre});var XT=$((I3e,ZT)=>{var zre=py(),Hre=fy(),Ure=my();function qre(t){return zre(t,Ure,Hre)}ZT.exports=qre});var eA=$((T3e,QT)=>{var JT=XT(),Bre=1,Wre=Object.prototype,Vre=Wre.hasOwnProperty;function $re(t,e,i,r,n,o){var s=i&Bre,u=JT(t),c=u.length,d=JT(e),p=d.length;if(c!=p&&!s)return!1;for(var g=c;g--;){var v=u[g];if(!(s?v in e:Vre.call(e,v)))return!1}var b=o.get(t),S=o.get(e);if(b&&S)return b==e&&S==t;var _=!0;o.set(t,e),o.set(e,t);for(var E=s;++g<c;){v=u[g];var I=t[v],F=e[v];if(r)var O=s?r(F,I,v,e,t,o):r(I,F,v,t,e,o);if(!(O===void 0?I===F||n(I,F,i,r,o):O)){_=!1;break}E||(E=v=="constructor")}if(_&&!E){var L=t.constructor,z=e.constructor;L!=z&&"constructor"in t&&"constructor"in e&&!(typeof L=="function"&&L instanceof L&&typeof z=="function"&&z instanceof z)&&(_=!1)}return o.delete(t),o.delete(e),_}QT.exports=$re});var iA=$((A3e,tA)=>{var jre=za(),Gre=jn(),Kre=jre(Gre,"DataView");tA.exports=Kre});var nA=$((M3e,rA)=>{var Yre=za(),Zre=jn(),Xre=Yre(Zre,"Promise");rA.exports=Xre});var aA=$((k3e,oA)=>{var Jre=za(),Qre=jn(),ene=Jre(Qre,"Set");oA.exports=ene});var lA=$((R3e,sA)=>{var tne=za(),ine=jn(),rne=tne(ine,"WeakMap");sA.exports=rne});var gA=$((N3e,mA)=>{var gy=iA(),vy=ff(),by=nA(),yy=aA(),wy=lA(),fA=Us(),ku=Fv(),uA="[object Map]",nne="[object Object]",cA="[object Promise]",dA="[object Set]",pA="[object WeakMap]",hA="[object DataView]",one=ku(gy),ane=ku(vy),sne=ku(by),lne=ku(yy),une=ku(wy),Qs=fA;(gy&&Qs(new gy(new ArrayBuffer(1)))!=hA||vy&&Qs(new vy)!=uA||by&&Qs(by.resolve())!=cA||yy&&Qs(new yy)!=dA||wy&&Qs(new wy)!=pA)&&(Qs=function(t){var e=fA(t),i=e==nne?t.constructor:void 0,r=i?ku(i):"";if(r)switch(r){case one:return hA;case ane:return uA;case sne:return cA;case lne:return dA;case une:return pA}return e});mA.exports=Qs});var _A=$((O3e,SA)=>{var xy=gf(),cne=uy(),dne=LT(),pne=eA(),vA=gA(),bA=vo(),yA=Cf(),hne=Sf(),fne=1,wA="[object Arguments]",xA="[object Array]",Lm="[object Object]",mne=Object.prototype,CA=mne.hasOwnProperty;function gne(t,e,i,r,n,o){var s=bA(t),u=bA(e),c=s?xA:vA(t),d=u?xA:vA(e);c=c==wA?Lm:c,d=d==wA?Lm:d;var p=c==Lm,g=d==Lm,v=c==d;if(v&&yA(t)){if(!yA(e))return!1;s=!0,p=!1}if(v&&!p)return o||(o=new xy),s||hne(t)?cne(t,e,i,r,n,o):dne(t,e,c,i,r,n,o);if(!(i&fne)){var b=p&&CA.call(t,"__wrapped__"),S=g&&CA.call(e,"__wrapped__");if(b||S){var _=b?t.value():t,E=S?e.value():e;return o||(o=new xy),n(_,E,i,r,o)}}return v?(o||(o=new xy),pne(t,e,i,r,n,o)):!1}SA.exports=gne});var Cy=$((D3e,IA)=>{var vne=_A(),EA=Ha();function PA(t,e,i,r,n){return t===e?!0:t==null||e==null||!EA(t)&&!EA(e)?t!==t&&e!==e:vne(t,e,i,r,PA,n)}IA.exports=PA});var AA=$((L3e,TA)=>{var bne=gf(),yne=Cy(),wne=1,xne=2;function Cne(t,e,i,r){var n=i.length,o=n,s=!r;if(t==null)return!o;for(t=Object(t);n--;){var u=i[n];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++n<o;){u=i[n];var c=u[0],d=t[c],p=u[1];if(s&&u[2]){if(d===void 0&&!(c in t))return!1}else{var g=new bne;if(r)var v=r(d,p,c,t,e,g);if(!(v===void 0?yne(p,d,wne|xne,r,g):v))return!1}}return!0}TA.exports=Cne});var Sy=$((F3e,MA)=>{var Sne=go();function _ne(t){return t===t&&!Sne(t)}MA.exports=_ne});var RA=$((z3e,kA)=>{var Ene=Sy(),Pne=my();function Ine(t){for(var e=Pne(t),i=e.length;i--;){var r=e[i],n=t[r];e[i]=[r,n,Ene(n)]}return e}kA.exports=Ine});var _y=$((H3e,NA)=>{function Tne(t,e){return function(i){return i==null?!1:i[t]===e&&(e!==void 0||t in Object(i))}}NA.exports=Tne});var DA=$((U3e,OA)=>{var Ane=AA(),Mne=RA(),kne=_y();function Rne(t){var e=Mne(t);return e.length==1&&e[0][2]?kne(e[0][0],e[0][1]):function(i){return i===t||Ane(i,t,e)}}OA.exports=Rne});var Fm=$((q3e,LA)=>{var Nne=Us(),One=Ha(),Dne="[object Symbol]";function Lne(t){return typeof t=="symbol"||One(t)&&Nne(t)==Dne}LA.exports=Lne});var zm=$((B3e,FA)=>{var Fne=vo(),zne=Fm(),Hne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Une=/^\w*$/;function qne(t,e){if(Fne(t))return!1;var i=typeof t;return i=="number"||i=="symbol"||i=="boolean"||t==null||zne(t)?!0:Une.test(t)||!Hne.test(t)||e!=null&&t in Object(e)}FA.exports=qne});var UA=$((W3e,HA)=>{var zA=mf(),Bne="Expected a function";function Ey(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Bne);var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],o=i.cache;if(o.has(n))return o.get(n);var s=t.apply(this,r);return i.cache=o.set(n,s)||o,s};return i.cache=new(Ey.Cache||zA),i}Ey.Cache=zA;HA.exports=Ey});var BA=$((V3e,qA)=>{var Wne=UA(),Vne=500;function $ne(t){var e=Wne(t,function(r){return i.size===Vne&&i.clear(),r}),i=e.cache;return e}qA.exports=$ne});var VA=$(($3e,WA)=>{var jne=BA(),Gne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kne=/\\(\\)?/g,Yne=jne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gne,function(i,r,n,o){e.push(n?o.replace(Kne,"$1"):r||i)}),e});WA.exports=Yne});var Py=$((j3e,$A)=>{function Zne(t,e){for(var i=-1,r=t==null?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}$A.exports=Zne});var XA=$((G3e,ZA)=>{var jA=md(),Xne=Py(),Jne=vo(),Qne=Fm(),eoe=1/0,GA=jA?jA.prototype:void 0,KA=GA?GA.toString:void 0;function YA(t){if(typeof t=="string")return t;if(Jne(t))return Xne(t,YA)+"";if(Qne(t))return KA?KA.call(t):"";var e=t+"";return e=="0"&&1/t==-eoe?"-0":e}ZA.exports=YA});var QA=$((K3e,JA)=>{var toe=XA();function ioe(t){return t==null?"":toe(t)}JA.exports=ioe});var Wd=$((Y3e,eM)=>{var roe=vo(),noe=zm(),ooe=VA(),aoe=QA();function soe(t,e){return roe(t)?t:noe(t,e)?[t]:ooe(aoe(t))}eM.exports=soe});var Ru=$((Z3e,tM)=>{var loe=Fm(),uoe=1/0;function coe(t){if(typeof t=="string"||loe(t))return t;var e=t+"";return e=="0"&&1/t==-uoe?"-0":e}tM.exports=coe});var Hm=$((X3e,iM)=>{var doe=Wd(),poe=Ru();function hoe(t,e){e=doe(e,t);for(var i=0,r=e.length;t!=null&&i<r;)t=t[poe(e[i++])];return i&&i==r?t:void 0}iM.exports=hoe});var nM=$((J3e,rM)=>{var foe=Hm();function moe(t,e,i){var r=t==null?void 0:foe(t,e);return r===void 0?i:r}rM.exports=moe});var aM=$((Q3e,oM)=>{function goe(t,e){return t!=null&&e in Object(t)}oM.exports=goe});var lM=$((eCe,sM)=>{var voe=Wd(),boe=wf(),yoe=vo(),woe=_d(),xoe=xf(),Coe=Ru();function Soe(t,e,i){e=voe(e,t);for(var r=-1,n=e.length,o=!1;++r<n;){var s=Coe(e[r]);if(!(o=t!=null&&i(t,s)))break;t=t[s]}return o||++r!=n?o:(n=t==null?0:t.length,!!n&&xoe(n)&&woe(s,n)&&(yoe(t)||boe(t)))}sM.exports=Soe});var cM=$((tCe,uM)=>{var _oe=aM(),Eoe=lM();function Poe(t,e){return t!=null&&Eoe(t,e,_oe)}uM.exports=Poe});var pM=$((iCe,dM)=>{var Ioe=Cy(),Toe=nM(),Aoe=cM(),Moe=zm(),koe=Sy(),Roe=_y(),Noe=Ru(),Ooe=1,Doe=2;function Loe(t,e){return Moe(t)&&koe(e)?Roe(Noe(t),e):function(i){var r=Toe(i,t);return r===void 0&&r===e?Aoe(i,t):Ioe(e,r,Ooe|Doe)}}dM.exports=Loe});var fM=$((rCe,hM)=>{function Foe(t){return function(e){return e?.[t]}}hM.exports=Foe});var gM=$((nCe,mM)=>{var zoe=Hm();function Hoe(t){return function(e){return zoe(e,t)}}mM.exports=Hoe});var bM=$((oCe,vM)=>{var Uoe=fM(),qoe=gM(),Boe=zm(),Woe=Ru();function Voe(t){return Boe(t)?Uoe(Woe(t)):qoe(t)}vM.exports=Voe});var Iy=$((aCe,yM)=>{var $oe=DA(),joe=pM(),Goe=Ef(),Koe=vo(),Yoe=bM();function Zoe(t){return typeof t=="function"?t:t==null?Goe:typeof t=="object"?Koe(t)?joe(t[0],t[1]):$oe(t):Yoe(t)}yM.exports=Zoe});var xM=$((sCe,wM)=>{var Xoe="Expected a function";function Joe(t){if(typeof t!="function")throw new TypeError(Xoe);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}wM.exports=Joe});var _M=$((lCe,SM)=>{var Qoe=Vv(),eae=Wd(),tae=_d(),CM=go(),iae=Ru();function rae(t,e,i,r){if(!CM(t))return t;e=eae(e,t);for(var n=-1,o=e.length,s=o-1,u=t;u!=null&&++n<o;){var c=iae(e[n]),d=i;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(n!=s){var p=u[c];d=r?r(p,c,u):void 0,d===void 0&&(d=CM(p)?p:tae(e[n+1])?[]:{})}Qoe(u,c,d),u=u[c]}return t}SM.exports=rae});var PM=$((uCe,EM)=>{var nae=Hm(),oae=_M(),aae=Wd();function sae(t,e,i){for(var r=-1,n=e.length,o={};++r<n;){var s=e[r],u=nae(t,s);i(u,s)&&oae(o,aae(s,t),u)}return o}EM.exports=sae});var TM=$((cCe,IM)=>{var lae=dy(),uae=bf(),cae=fy(),dae=hy(),pae=Object.getOwnPropertySymbols,hae=pae?function(t){for(var e=[];t;)lae(e,cae(t)),t=uae(t);return e}:dae;IM.exports=hae});var MM=$((dCe,AM)=>{var fae=py(),mae=TM(),gae=_f();function vae(t){return fae(t,gae,mae)}AM.exports=vae});var RM=$((pCe,kM)=>{var bae=Py(),yae=Iy(),wae=PM(),xae=MM();function Cae(t,e){if(t==null)return{};var i=bae(xae(t),function(r){return[r]});return e=yae(e),wae(t,i,function(r,n){return e(r,n[0])})}kM.exports=Cae});var OM=$((hCe,NM)=>{var Sae=Iy(),_ae=xM(),Eae=RM();function Pae(t,e){return Eae(t,_ae(Sae(e)))}NM.exports=Pae});var DM,LM,Ty,Iae,FM=T(()=>{Se();gT();DM=ce(OM()),LM=ce(ve()),Ty=class extends _e.Component{render(){return null}componentDidUpdate(e){if(!LM.default.isEqual(e.formik.initialValues,this.props.formik.initialValues))return;let i=(0,DM.default)(this.props.formik.values,function(r,n){return e.formik.values[n]===r});Object.keys(i).length>0&&this.props.onChange(i,this.props.formik)}},Iae=mT(Ty)});var Tae,zM=T(()=>{Tae=ce(ve())});var Um=T(()=>{FM();Re();zM();Ua()});var HM=$((wCe,Ay)=>{(function(){function t(S,_){document.addEventListener?S.addEventListener("scroll",_,!1):S.attachEvent("scroll",_)}function e(S){document.body?S():document.addEventListener?document.addEventListener("DOMContentLoaded",function _(){document.removeEventListener("DOMContentLoaded",_),S()}):document.attachEvent("onreadystatechange",function _(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",_),S())})}function i(S){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(S)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function r(S,_){S.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+_+";"}function n(S){var _=S.g.offsetWidth,E=_+100;return S.j.style.width=E+"px",S.i.scrollLeft=E,S.h.scrollLeft=S.h.scrollWidth+100,S.l!==_?(S.l=_,!0):!1}function o(S,_){function E(){var F=I;n(F)&&F.g.parentNode!==null&&_(F.l)}var I=S;t(S.h,E),t(S.i,E),n(S)}function s(S,_,E){_=_||{},E=E||window,this.family=S,this.style=_.style||"normal",this.weight=_.weight||"normal",this.stretch=_.stretch||"normal",this.context=E}var u=null,c=null,d=null,p=null;function g(S){return c===null&&(v(S)&&/Apple/.test(window.navigator.vendor)?(S=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!S&&603>parseInt(S[1],10)):c=!1),c}function v(S){return p===null&&(p=!!S.document.fonts),p}function b(S,_){var E=S.style,I=S.weight;if(d===null){var F=document.createElement("div");try{F.style.font="condensed 100px sans-serif"}catch{}d=F.style.font!==""}return[E,I,d?S.stretch:"","100px",_].join(" ")}s.prototype.load=function(S,_){var E=this,I=S||"BESbswy",F=0,O=_||3e3,L=new Date().getTime();return new Promise(function(z,G){if(v(E.context)&&!g(E.context)){var H=new Promise(function(J,oe){function te(){new Date().getTime()-L>=O?oe(Error(""+O+"ms timeout exceeded")):E.context.document.fonts.load(b(E,'"'+E.family+'"'),I).then(function(K){1<=K.length?J():setTimeout(te,25)},oe)}te()}),N=new Promise(function(J,oe){F=setTimeout(function(){oe(Error(""+O+"ms timeout exceeded"))},O)});Promise.race([N,H]).then(function(){clearTimeout(F),z(E)},G)}else e(function(){function J(){var ie;(ie=se!=-1&&re!=-1||se!=-1&&Q!=-1||re!=-1&&Q!=-1)&&((ie=se!=re&&se!=Q&&re!=Q)||(u===null&&(ie=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!ie&&(536>parseInt(ie[1],10)||parseInt(ie[1],10)===536&&11>=parseInt(ie[2],10))),ie=u&&(se==le&&re==le&&Q==le||se==j&&re==j&&Q==j||se==B&&re==B&&Q==B)),ie=!ie),ie&&(Y.parentNode!==null&&Y.parentNode.removeChild(Y),clearTimeout(F),z(E))}function oe(){if(new Date().getTime()-L>=O)Y.parentNode!==null&&Y.parentNode.removeChild(Y),G(Error(""+O+"ms timeout exceeded"));else{var ie=E.context.document.hidden;(ie===!0||ie===void 0)&&(se=te.g.offsetWidth,re=K.g.offsetWidth,Q=U.g.offsetWidth,J()),F=setTimeout(oe,50)}}var te=new i(I),K=new i(I),U=new i(I),se=-1,re=-1,Q=-1,le=-1,j=-1,B=-1,Y=document.createElement("div");Y.dir="ltr",r(te,b(E,"sans-serif")),r(K,b(E,"serif")),r(U,b(E,"monospace")),Y.appendChild(te.g),Y.appendChild(K.g),Y.appendChild(U.g),E.context.document.body.appendChild(Y),le=te.g.offsetWidth,j=K.g.offsetWidth,B=U.g.offsetWidth,oe(),o(te,function(ie){se=ie,J()}),r(te,b(E,'"'+E.family+'",sans-serif')),o(K,function(ie){re=ie,J()}),r(K,b(E,'"'+E.family+'",serif')),o(U,function(ie){Q=ie,J()}),r(U,b(E,'"'+E.family+'",monospace'))})})},typeof Ay=="object"?Ay.exports=s:(window.FontFaceObserver=s,window.FontFaceObserver.prototype.load=s.prototype.load)})()});var UM,qM,My,BM,WM=T(()=>{Pe();UM=ce(ve(),1);Um();qM=ce(HM(),1);W();My=class extends ae{constructor(e){super(e),this.state={parentWidth:{},width:{},scale:1,fontFamily:null},this.observer=null,this.timeout=null}render(e,i){let r=!!e.baseNode?.getAttribute("style")?.includes("line-height"),n=window.getComputedStyle(e.baseNode),o=n.letterSpacing,s=n.direction,u="0px";return o.includes("-")&&(u=o.replace("-","")),m(X,{children:[m("span",{class:"fit-text",children:e.children}),m("style",{children:`
					:host { 
                        white-space: nowrap!important;
                        display: inline-block!important;
                        --font-scale: ${this.state.scale}!important;
                        ${r?"":"line-height: 1!important;"}
                        animation: none!important;
                        will-change: transform;
                    --rotate-transform: 0deg!important;
                    }
                    .fit-text {
                        padding${s==="ltr"?"-right":"-left"}: ${u}!important;
                    }
				`})]})}locateFitText=()=>{if(!this.props.baseNode||!this.props.baseNode.parentElement)return;let e=this.props.baseNode.parentElement.getBoundingClientRect().width,i=this.props.baseNode.getBoundingClientRect().width;this.setState({parentWidth:e,width:i})};handleResize=()=>{this.locateFitText()};handleFontLoad=()=>{this.timeout=setTimeout(()=>{this.locateFitText()},200)};refreshFontFamily=()=>{let i=window.getComputedStyle(this.props.baseNode).fontFamily.split(",");i=i.map(r=>r.trim()),i=i.map(r=>r.replace(/['"]+/g,"")),i[0]!==this.state.fontFamily&&this.setState({fontFamily:i[0]})};componentDidMount(){this.state.fontFamily||this.refreshFontFamily(),window.addEventListener("resize",this.handleResize),this.observer=new MutationObserver(e=>{UM.default.find(e,i=>{if(i.target.contains(this.props.baseNode||i.target===this.props.baseNode)||i.type==="attributes"&&i.attributeName==="uses"&&i.target?.getAttribute("uses")?.includes("fit-text")===!0)return!0;if(i.target.tagName==="STYLE")return i.target.textContent.includes("font-family")&&this.refreshFontFamily(),!0})&&this.locateFitText()}),this.observer.observe(document,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("keyup",this.handleKeyup),this.locateFitText()}handleKeyup=e=>{if(!window.CargoEditor?.getActiveEditor?.())return;let i=window.CargoEditor.getActiveRange();(i.startContainer===this.props.baseNode||i.startContainer.parentElement===this.props.baseNode)&&this.locateFitText()};componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.observer.disconnect(),window.removeEventListener("keyup",this.handleKeyup),clearTimeout(this.timeout)}componentDidUpdate(e,i){if(i.fontFamily!==this.state.fontFamily&&new qM.default(this.state.fontFamily).load().then(()=>{this.handleFontLoad()}).catch(()=>{this.handleFontLoad()}),i.scale!==this.state.scale){let r=this.state.scale-i.scale;if(r>.1||r<-.1){this.locateFitText();return}}if(i.parentWidth!==this.state.parentWidth||i.width!==this.state.width){let r=this.state.parentWidth/(this.state.width/this.state.scale);this.setState({scale:r});return}if(e.baseNode!==this.props.baseNode){this.locateFitText();return}}},BM=My});var ky,Nu,In,Ry,qm,el=T(()=>{Pe();Se();ky=ce(ve(),1);Re();Gn();Mr();S_();P_();k_();O_();L_();H_();q_();W_();j_();WM();wo();W();Nu=new Set,In=class extends ae{constructor(e){switch(super(e),ne||(this.observer=new MutationObserver(this.onAttributeChange)),this.usesOrder=["blink","dropshadow","drag","fit-text","rotation","eye-roll","scroll-animate","flying-object","inline-part-styles"],this.state={attributes:this.getAttributes()},this.usesKeys={rotation:E_,"eye-roll":C_,drag:D_,"scroll-transition":N_,"flying-object":M_,dropshadow:z_,background:U_,"inline-part-styles":B_,blink:$_,"fit-text":BM},this.props.baseNode.tagName){case"DIV":case"SPAN":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"H7":case"H8":case"H9":this.displayInlineBlock=!0;break;default:this.displayInlineBlock=!1;break}}render(e,i){let r=e.customElementMode?this.props.children:m("slot",{});if(i.attributes.uses.length==0)return m(X,{children:[m("style",{id:"uses-host",children:`
			:host {
				transform-origin: center center;
				transform: var(--base-translate, translate(0));
			}
			`}),r]},"uses-fragment");let n=[];i.attributes.uses.forEach((u,c)=>{this.usesKeys[u]&&this.usesKeys[u].transformSlot&&n.push(this.usesKeys[u].transformSlot)}),i.attributes.uses.forEach((u,c)=>{this.usesKeys[u]&&(r=Tt(this.props.customElementMode?this.usesKeys[u]:yo(this.usesKeys[u]),{...this.state.attributes,...this.props,lowestLevel:c==0,baseNode:this.props.baseNode,children:r,transformSlots:n}))});let o=!!i.attributes.uses.includes("fit-text"),s=m(X,{children:[this.props.adminMode&&!e.customElementMode&&o===!1&&m(Vi,{baseNode:this.props.baseNode}),m("style",{id:"uses-host",children:`
			:host(span){
				display: inline-block;
			}

			:host {
				position: relative;
				transform-origin: center center;
				transform: var(--base-translate, translate(0)) ${n.map(u=>`var(${u}, translate(0))`).join(" ")};
				${this.displayInlineBlock?"display: inline-block;":""}
			}

			${this.props.adminMode&&!e.customElementMode&&o===!1?`:host::selection {
				background: none;
			}`:""}
			`}),r]},"uses-fragment");return e.customElementMode?s:je(s,this.props.baseNode.shadowRoot)}componentDidMount(){this.observer?.observe(this.props.baseNode,{attributes:!0})}componentDidUpdate(e,i){e.uses!==this.props.uses&&this.setState({attributes:this.getAttributes()})}componentWillUnmount(){this.observer?.disconnect()}getAttributes=()=>{let e={};for(let[r,n]of Object.entries(this.state?.attributes||{}))e[r]=void 0;let i=[...this.props.baseNode.attributes].reduce((r,n)=>(r[n.name]=n.value,r),{});for(let[r,n]of Object.entries(i))n==="false"?i[r]=!1:n==="true"&&(i[r]=!0);return this.props.customElementMode&&(i.uses=(i.uses||"")+" "+this.props.uses),i.uses=i.uses?.split(" ")||[],i.uses=ky.default.uniq(i.uses),i.uses.sort((r,n)=>this.usesOrder.indexOf(r)<this.usesOrder.indexOf(n)?-1:1),{...e,...i}};onAttributeChange=e=>{if(!e.some(n=>n.attributeName!=="style"&&n.attributeName!=="class"))return;let r=this.getAttributes();if(r.uses.length===0){if(this.props.removeFromUseList&&!this.props.customElementMode){this.props.removeFromUseList(this.props.baseNode);return}}else ky.default.isEqual(this.state.attributes,r)||this.setState({attributes:r})}};In.defaultProps={uses:[]};Ry=class extends ae{constructor(e){super(e),this.mutationsList=[],this.hasRunFirstMutationSummary=!1,!ne&&!this.props.customElementMode&&(this.observer=new MutationObserver(this.onMutation))}render(){return this.props.children}componentDidMount(){this.onSummary(),this.observer?.observe(this.props.bodycopyRef.current,{attributes:!0,subtree:!0,childList:!0,attributeFilter:["uses"]})}componentWillUnmount(){this.observer?.disconnect(),cancelAnimationFrame(this.onSummaryAnimationFrame),Array.from(this.props.bodycopyRef.current.querySelectorAll("[uses]")).forEach(this.removeFromUseList)}onMutation=()=>{this.ticking||(this.ticking=!0,this.onSummaryAnimationFrame=requestAnimationFrame(()=>{this.onSummary(),this.ticking=!1}))};onSummary=()=>{let e=Array.from(this.props.bodycopyRef.current?.querySelectorAll("[uses]")),i=e.filter(n=>!Nu.has(n));Array.from(Nu).filter(n=>!n.hasAttribute("uses")||e.includes(n)).forEach(this.removeFromUseList),i.forEach(this.addToUseList)};addToUseList=e=>{if(!(e.nodeType!==Node.ELEMENT_NODE||window.customElements.get(e.tagName.toLowerCase()))){if(!e.shadowRoot)try{e.attachShadow({mode:"open"})}catch{CargoEditor?.mutationManager?.execute(()=>{let r={};e.hasAttribute("uses")&&(r.uses=e.getAttribute("uses")),e.hasAttribute("rotation")&&(r.rotation=e.getAttribute("rotation")),e.hasAttribute("animate")&&(r.animate=e.getAttribute("animate")),e.hasAttribute("scroll-transition")&&(r["scroll-transition"]=e.getAttribute("scroll-transition"));let n=document.createElement("span");for(let s in r)n.setAttribute(s,r[s]);e.parentNode.insertBefore(n,e);let o=CargoEditor?.getActiveRange();CargoEditor.helpers.movePreservingRanges(e,n,-1,o),n.attachShadow({mode:"open"}),e.removeAttribute("scroll-transition"),e.removeAttribute("uses"),e.removeAttribute("animate"),e.removeAttribute("rotation"),e=n});return}if(!Nu.has(e)){Nu.add(e);let i={component:m(In,{customElementMode:!1,baseNode:e,adminMode:this.props.adminMode,removeFromUseList:this.removeFromUseList}),element:e,portalHost:null};Ot(e,"custom-element-connected",i),this.portalHost=i.portalHost}}};removeFromUseList=e=>{let i=this.props.bodycopyRef.current&&this.props.bodycopyRef.current.contains(e),r=e.hasAttribute("uses");if(!i&&this.props.bodycopyRef.current)Ot(this.props.bodycopyRef.current,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Nu.delete(e);else if(!r&&(Ot(e,"custom-element-disconnected",{component:null,element:e,portalHost:this.portalHost}),Nu.delete(e),i&&e.shadowRoot))if(CargoEditor?.mutationManager)CargoEditor?.mutationManager?.execute(()=>{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])},{preventDraft:!0});else{let n=document.createElement("div");n.innerHTML=e.outerHTML,e.replaceWith(n.childNodes[0])}}},qm=Ry});var Vd={};ai(Vd,{default:()=>Mae});var Ny,Mae,VM=T(()=>{Re();Ny={name:"wallpaper",excludeFromShuffle:!0,options:[{labelName:"Image",name:"activeImage",type:"image",value:"default"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"image-fit",type:"radio",value:"fill",values:[{labelName:"Fill Window",value:"fill"},{labelName:"Fit Window",value:"fit"}]},{labelName:"Display as Slideshow",name:"cycle-group",type:"details-menu",toggle:{name:"cycle-images",type:"check-box",value:!1},children:[{labelName:void 0,name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"range-input",value:3,min:0,max:20,step:.1},{labelName:"Transition Speed",name:"transition-speed",type:"range-input",value:.8,min:0,max:10,step:.1},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!1},{labelName:"Navigation",name:"navigation",type:"check-box",value:!1}]},{labelName:"Opacity",name:"opacity",type:"range-input",value:1,min:0,max:1,step:.01,excludeFromShuffle:!0},{type:"color",labelName:"Background Color",name:"bg-color",value:"transparent",showField:!0},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{name:"alignments",type:"custom",value:null}]};Ny.defaults=at(Ny.options);Mae=Ny});var $d={};ai($d,{default:()=>kae});var Bm,kae,$M=T(()=>{Re();Bm={name:"gradient",options:[{type:"custom",name:"gradient-preset"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{name:"gradient-type",type:"radio",value:"linear",values:[{labelName:"Linear",value:"linear"},{labelName:"Radial",value:"radial"}]},{type:"checkbox-color",checkbox:{labelName:"Color One",name:"color-one-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color One",name:"color-one",value:"#f2c409",requirements:[{option:"color-one-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Two",name:"color-two-active",type:"check-box",value:!1},color:{type:"color",labelName:"Color Two",name:"color-two",value:"#02ff00",requirements:[{option:"color-two-active",shouldBe:!0}]}},{type:"checkbox-color",checkbox:{labelName:"Color Three",name:"color-three-active",type:"check-box",value:!0},color:{type:"color",labelName:"Color Three",name:"color-three",value:"#fe2201",requirements:[{option:"color-three-active",shouldBe:!0}]}},{type:"spacer"},{type:"group",className:"grid-columns-even",requirements:[{option:"gradient-type",shouldBe:"radial"}],children:[{labelName:"X",name:"pos-x",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5},{labelName:"Y",name:"pos-y",type:"scrubber",numberOnlyMode:!0,suffix:"%",requirements:[{option:"gradient-type",shouldBe:"radial"}],value:0,min:-150,max:150,step:.5}]},{labelName:"Rotation",name:"rotation",type:"scrubber",suffix:"\xB0",requirements:[{option:"gradient-type",shouldBe:"linear"}],loopValues:!0,numberOnlyMode:!0,value:0,min:0,max:360,step:1},{labelName:"Smoothness",name:"smoothness",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:0,max:100,step:.1},{labelName:"Scale",name:"scale",type:"scrubber",numberOnlyMode:!0,suffix:"%",value:50,min:.1,max:100,step:.1},{type:"group",className:"grid-columns-even",children:[{labelName:"Repeat",name:"repeat",type:"check-box",value:!1},{labelName:"Animation",name:"animation-speed",type:"range-input",requirements:[{option:"repeat",shouldBe:!0}],renderWhenDisabled:!0,value:0,min:-100,max:100,step:1}]}]};Bm.defaults=at(Bm.options);Bm.customShuffle=t=>{let e={...t},i=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256),n=Math.floor(Math.random()*256);switch(Math.floor(Math.random()*20)){case 0:i=r=n=0;break;case 1:i=r=n=255;break;case 2:case 3:i=r=n;break}e["color-one"]="rgb("+i+", "+r+", "+n+")";let s=[];if(Math.random()>.3)for(var u=0;u<3;u++)s.push(Math.random()*240+-120);else s[0]=s[1]=s[2]=Math.random()*240+-120;let c=Math.floor(i+s[0]+1024)%256,d=Math.floor(r+s[1]+1024)%256,p=Math.floor(n+s[2]+1024)%256;e["color-two"]="rgb("+c+", "+d+", "+p+")";let g=Math.floor((i+s[0]+1024)*2)%256,v=Math.floor((r+s[1]+1024)*2)%256,b=Math.floor((n+s[2]+1024)*2)%256;return e["color-three"]="rgb("+g+", "+v+", "+b+")",e["color-one-active"]=!0,Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!0):Math.random()>.4?(e["color-two-active"]=!0,e["color-three-active"]=!1):e["color-three-active"]=!0,Math.random()>.5&&(e["animation-speed"]=0),Math.random()>.5&&(e.rotation=Math.round(e.rotation/45)*45),Math.random()>.5&&(e["pos-x"]=0),Math.random()>.5&&(e["pos-y"]=0),Math.random()>.8&&(e.smoothness=100),e};kae=Bm});var Dy={};ai(Dy,{default:()=>Nae,onChangeCustom:()=>Rae});var ZCe,Rae,Oy,Nae,jM=T(()=>{Re();ZCe=ce(ve()),Rae=(t,e,i)=>{let r={};for(let[o,s]of Object.entries(e))t[o]!=s&&(r[o]=s);let n=JSON.parse(e.filters);for(let[o,s]of Object.entries(r))switch(o){case"filters":i.UpdateFilters(n);break;case"rgb":case"film":case"badtv":i.ToggleComponent(n);break;case"image":i.UpdateImage(s);break;default:i.UpdateSettings(e)}},Oy={name:"badtv",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Bad TV",name:"badtv-group",type:"details-menu",toggle:{name:"badtv",type:"check-box",value:!0},children:[{name:"distortion",labelName:"Thick Distortion",type:"range-input",value:3,min:.1,max:10,step:.1,interactive:!0,noisePosn:1,randMin:2.8,randMax:3.2,randRange:"low"},{name:"distortion2",labelName:"Fine Distortion",type:"range-input",value:1,min:.1,max:10,step:.1,noisePosn:20,randMin:1,randMax:5,automate:!0},{name:"speed",labelName:"Distortion Speed",type:"range-input",value:.1,min:0,max:.3,step:.01,noisePosn:40,randMin:0,randMax:.1,randRange:"low"},{name:"rollSpeed",labelName:"Roll Speed",type:"range-input",value:.05,min:0,max:.2,step:.01,noisePosn:50,randMin:0,randMax:.6,randRange:"low"}]},{labelName:"RGB Shift",name:"rgb-group",type:"details-menu",toggle:{name:"rgb",type:"check-box",value:!0},children:[{name:"amount",labelName:"Amount",type:"range-input",value:.005,min:0,max:.1,step:.001,interactive:!0,noisePosn:60,randMin:0,randMax:.025,randRange:"low"},{name:"angle",labelName:"Angle",type:"range-input",value:0,min:0,max:6.28,step:.01,noisePosn:80,randMin:0,randMax:6.28,automate:!0}]},{labelName:"Scanlines",name:"film-group",type:"details-menu",toggle:{name:"film",type:"check-box",value:!0},children:[{name:"sCount",labelName:"Amount",value:800,type:"range-input",min:400,max:1e3,step:1,noisePosn:90,randMin:650,randMax:1e3,randRange:"high"},{name:"sIntensity",labelName:"Strength",value:.95,type:"range-input",min:0,max:2,step:.01},{name:"nIntensity",labelName:"Noise",value:.28,type:"range-input",min:0,max:2,step:.01}]},{type:"spacer"},{labelName:"Automate",name:"automate",type:"check-box",value:!1},{labelName:"Interactive",name:"interactive",type:"check-box",value:!1}]};Oy.defaults=at(Oy.options);Nae=Oy});function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}function Oe(t,e){if(t=t||"",e=e||{},t instanceof Oe)return t;if(!(this instanceof Oe))return new Oe(t,e);var i=Lae(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=i.ok}function Lae(t){var e={r:0,g:0,b:0},i=1,r=null,n=null,o=null,s=!1,u=!1;return typeof t=="string"&&(t=ise(t)),Wm(t)=="object"&&(sa(t.r)&&sa(t.g)&&sa(t.b)?(e=Fae(t.r,t.g,t.b),s=!0,u=String(t.r).substr(-1)==="%"?"prgb":"rgb"):sa(t.h)&&sa(t.s)&&sa(t.v)?(r=jd(t.s),n=jd(t.v),e=Hae(t.h,r,n),s=!0,u="hsv"):sa(t.h)&&sa(t.s)&&sa(t.l)&&(r=jd(t.s),o=jd(t.l),e=zae(t.h,r,o),s=!0,u="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=QM(i),{ok:s,format:t.format||u,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}function Fae(t,e,i){return{r:li(t,255)*255,g:li(e,255)*255,b:li(i,255)*255}}function GM(t,e,i){t=li(t,255),e=li(e,255),i=li(i,255);var r=Math.max(t,e,i),n=Math.min(t,e,i),o,s,u=(r+n)/2;if(r==n)o=s=0;else{var c=r-n;switch(s=u>.5?c/(2-r-n):c/(r+n),r){case t:o=(e-i)/c+(e<i?6:0);break;case e:o=(i-t)/c+2;break;case i:o=(t-e)/c+4;break}o/=6}return{h:o,s,l:u}}function zae(t,e,i){var r,n,o;t=li(t,360),e=li(e,100),i=li(i,100);function s(d,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?d+(p-d)*6*g:g<1/2?p:g<2/3?d+(p-d)*(2/3-g)*6:d}if(e===0)r=n=o=i;else{var u=i<.5?i*(1+e):i+e-i*e,c=2*i-u;r=s(c,u,t+1/3),n=s(c,u,t),o=s(c,u,t-1/3)}return{r:r*255,g:n*255,b:o*255}}function KM(t,e,i){t=li(t,255),e=li(e,255),i=li(i,255);var r=Math.max(t,e,i),n=Math.min(t,e,i),o,s,u=r,c=r-n;if(s=r===0?0:c/r,r==n)o=0;else{switch(r){case t:o=(e-i)/c+(e<i?6:0);break;case e:o=(i-t)/c+2;break;case i:o=(t-e)/c+4;break}o/=6}return{h:o,s,v:u}}function Hae(t,e,i){t=li(t,360)*6,e=li(e,100),i=li(i,100);var r=Math.floor(t),n=t-r,o=i*(1-e),s=i*(1-n*e),u=i*(1-(1-n)*e),c=r%6,d=[i,s,o,o,u,i][c],p=[u,i,i,s,o,o][c],g=[o,o,u,i,i,s][c];return{r:d*255,g:p*255,b:g*255}}function YM(t,e,i,r){var n=[Jn(Math.round(t).toString(16)),Jn(Math.round(e).toString(16)),Jn(Math.round(i).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function Uae(t,e,i,r,n){var o=[Jn(Math.round(t).toString(16)),Jn(Math.round(e).toString(16)),Jn(Math.round(i).toString(16)),Jn(ek(r))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function ZM(t,e,i,r){var n=[Jn(ek(r)),Jn(Math.round(t).toString(16)),Jn(Math.round(e).toString(16)),Jn(Math.round(i).toString(16))];return n.join("")}function qae(t,e){e=e===0?0:e||10;var i=Oe(t).toHsl();return i.s-=e/100,i.s=Vm(i.s),Oe(i)}function Bae(t,e){e=e===0?0:e||10;var i=Oe(t).toHsl();return i.s+=e/100,i.s=Vm(i.s),Oe(i)}function Wae(t){return Oe(t).desaturate(100)}function Vae(t,e){e=e===0?0:e||10;var i=Oe(t).toHsl();return i.l+=e/100,i.l=Vm(i.l),Oe(i)}function $ae(t,e){e=e===0?0:e||10;var i=Oe(t).toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(e/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(e/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(e/100)))),Oe(i)}function jae(t,e){e=e===0?0:e||10;var i=Oe(t).toHsl();return i.l-=e/100,i.l=Vm(i.l),Oe(i)}function Gae(t,e){var i=Oe(t).toHsl(),r=(i.h+e)%360;return i.h=r<0?360+r:r,Oe(i)}function Kae(t){var e=Oe(t).toHsl();return e.h=(e.h+180)%360,Oe(e)}function XM(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var i=Oe(t).toHsl(),r=[Oe(t)],n=360/e,o=1;o<e;o++)r.push(Oe({h:(i.h+o*n)%360,s:i.s,l:i.l}));return r}function Yae(t){var e=Oe(t).toHsl(),i=e.h;return[Oe(t),Oe({h:(i+72)%360,s:e.s,l:e.l}),Oe({h:(i+216)%360,s:e.s,l:e.l})]}function Zae(t,e,i){e=e||6,i=i||30;var r=Oe(t).toHsl(),n=360/i,o=[Oe(t)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,o.push(Oe(r));return o}function Xae(t,e){e=e||6;for(var i=Oe(t).toHsv(),r=i.h,n=i.s,o=i.v,s=[],u=1/e;e--;)s.push(Oe({h:r,s:n,v:o})),o=(o+u)%1;return s}function Qae(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function QM(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function li(t,e){ese(t)&&(t="100%");var i=tse(t);return t=Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Vm(t){return Math.min(1,Math.max(0,t))}function un(t){return parseInt(t,16)}function ese(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function tse(t){return typeof t=="string"&&t.indexOf("%")!=-1}function Jn(t){return t.length==1?"0"+t:""+t}function jd(t){return t<=1&&(t=t*100+"%"),t}function ek(t){return Math.round(parseFloat(t)*255).toString(16)}function JM(t){return un(t)/255}function sa(t){return!!Xn.CSS_UNIT.exec(t)}function ise(t){t=t.replace(Oae,"").replace(Dae,"").toLowerCase();var e=!1;if(Ly[t])t=Ly[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=Xn.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=Xn.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Xn.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=Xn.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Xn.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=Xn.hsva.exec(t))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Xn.hex8.exec(t))?{r:un(i[1]),g:un(i[2]),b:un(i[3]),a:JM(i[4]),format:e?"name":"hex8"}:(i=Xn.hex6.exec(t))?{r:un(i[1]),g:un(i[2]),b:un(i[3]),format:e?"name":"hex"}:(i=Xn.hex4.exec(t))?{r:un(i[1]+""+i[1]),g:un(i[2]+""+i[2]),b:un(i[3]+""+i[3]),a:JM(i[4]+""+i[4]),format:e?"name":"hex8"}:(i=Xn.hex3.exec(t))?{r:un(i[1]+""+i[1]),g:un(i[2]+""+i[2]),b:un(i[3]+""+i[3]),format:e?"name":"hex"}:!1}function rse(t){var e,i;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),i!=="small"&&i!=="large"&&(i="small"),{level:e,size:i}}var Oae,Dae,Ly,Jae,Xn,Eo=T(()=>{Oae=/^\s+/,Dae=/\s+$/;Oe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),i,r,n,o,s,u;return i=e.r/255,r=e.g/255,n=e.b/255,i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),n<=.03928?u=n/12.92:u=Math.pow((n+.055)/1.055,2.4),.2126*o+.7152*s+.0722*u},setAlpha:function(e){return this._a=QM(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=KM(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=KM(this._r,this._g,this._b),i=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+i+", "+r+"%, "+n+"%)":"hsva("+i+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=GM(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=GM(this._r,this._g,this._b),i=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+i+", "+r+"%, "+n+"%)":"hsla("+i+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return YM(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Uae(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(li(this._r,255)*100)+"%",g:Math.round(li(this._g,255)*100)+"%",b:Math.round(li(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(li(this._r,255)*100)+"%, "+Math.round(li(this._g,255)*100)+"%, "+Math.round(li(this._b,255)*100)+"%)":"rgba("+Math.round(li(this._r,255)*100)+"%, "+Math.round(li(this._g,255)*100)+"%, "+Math.round(li(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Jae[YM(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var i="#"+ZM(this._r,this._g,this._b,this._a),r=i,n=this._gradientType?"GradientType = 1, ":"";if(e){var o=Oe(e);r="#"+ZM(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+i+",endColorstr="+r+")"},toString:function(e){var i=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,o=!i&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Oe(this.toString())},_applyModification:function(e,i){var r=e.apply(null,[this].concat([].slice.call(i)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Vae,arguments)},brighten:function(){return this._applyModification($ae,arguments)},darken:function(){return this._applyModification(jae,arguments)},desaturate:function(){return this._applyModification(qae,arguments)},saturate:function(){return this._applyModification(Bae,arguments)},greyscale:function(){return this._applyModification(Wae,arguments)},spin:function(){return this._applyModification(Gae,arguments)},_applyCombination:function(e,i){return e.apply(null,[this].concat([].slice.call(i)))},analogous:function(){return this._applyCombination(Zae,arguments)},complement:function(){return this._applyCombination(Kae,arguments)},monochromatic:function(){return this._applyCombination(Xae,arguments)},splitcomplement:function(){return this._applyCombination(Yae,arguments)},triad:function(){return this._applyCombination(XM,[3])},tetrad:function(){return this._applyCombination(XM,[4])}};Oe.fromRatio=function(t,e){if(Wm(t)=="object"){var i={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?i[r]=t[r]:i[r]=jd(t[r]));t=i}return Oe(t,e)};Oe.equals=function(t,e){return!t||!e?!1:Oe(t).toRgbString()==Oe(e).toRgbString()};Oe.random=function(){return Oe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};Oe.mix=function(t,e,i){i=i===0?0:i||50;var r=Oe(t).toRgb(),n=Oe(e).toRgb(),o=i/100,s={r:(n.r-r.r)*o+r.r,g:(n.g-r.g)*o+r.g,b:(n.b-r.b)*o+r.b,a:(n.a-r.a)*o+r.a};return Oe(s)};Oe.readability=function(t,e){var i=Oe(t),r=Oe(e);return(Math.max(i.getLuminance(),r.getLuminance())+.05)/(Math.min(i.getLuminance(),r.getLuminance())+.05)};Oe.isReadable=function(t,e,i){var r=Oe.readability(t,e),n,o;switch(o=!1,n=rse(i),n.level+n.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};Oe.mostReadable=function(t,e,i){var r=null,n=0,o,s,u,c;i=i||{},s=i.includeFallbackColors,u=i.level,c=i.size;for(var d=0;d<e.length;d++)o=Oe.readability(t,e[d]),o>n&&(n=o,r=Oe(e[d]));return Oe.isReadable(t,r,{level:u,size:c})||!s?r:(i.includeFallbackColors=!1,Oe.mostReadable(t,["#fff","#000"],i))};Ly=Oe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Jae=Oe.hexNames=Qae(Ly);Xn=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()});var Fy={};ai(Fy,{default:()=>ose,onChangeCustom:()=>nse});var e6e,nse,Gd,ose,tk=T(()=>{Re();e6e=ce(ve());Eo();nse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);r.hasOwnProperty("color_r")&&(i.Update("color_r",r.color_r),delete r.color_r),r.hasOwnProperty("color_g")&&(i.Update("color_g",r.color_g),delete r.color_g),r.hasOwnProperty("color_b")&&(i.Update("color_b",r.color_b),delete r.color_b);for(let[n,o]of Object.entries(r))i.Update(n,o)},Gd={name:"parallax",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Knockout Mask",name:"knockout_shape",type:"radio",value:"triangle",values:[{customLabel:"RectangleIcon",value:"rectangle"},{customLabel:"SquareIcon",value:"square"},{customLabel:"TriangleIcon",value:"triangle"},{customLabel:"CircleIcon",value:"circle"}]},{labelName:"Knockout Blur",name:"knockout_blur",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Size",name:"knockout",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Knockout Rotation",name:"knockout_rotation",type:"range-input",loopValues:!0,value:171,suffix:"\xB0",min:0,max:360,step:1},{type:"spacer"},{labelName:void 0,name:"movement_direction",type:"radio",value:"xy",values:[{labelName:"X/Y Axes",value:"xy"},{labelName:"Z Axis",value:"z"}]},{labelName:"Movement Direction",name:"xy_direction",type:"range-input",loopValues:!0,value:285,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:"Layers",name:"layers",type:"range-input",value:3,min:2,max:15,step:1,requirements:[{option:"movement_direction",shouldBe:"xy"}]},{labelName:void 0,name:"z_direction",type:"radio",value:"inwards",values:[{labelName:"Inwards",value:"inwards"},{labelName:"Outwards",value:"outwards"}],requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Layers",name:"z_layers",type:"range-input",value:4,min:4,max:15,step:1,requirements:[{option:"movement_direction",shouldBe:"z"}]},{labelName:"Speed",name:"speed",type:"range-input",value:30,suffix:"%",min:0,max:100,step:1},{labelName:"Depth",name:"depth",type:"range-input",value:35,suffix:"%",min:0,max:100,step:.5},{labelName:"Base Rotation",name:"base_rotation",type:"range-input",loopValues:!0,value:50,suffix:"\xB0",min:0,max:360,step:1},{labelName:"Skew",name:"skew",type:"range-input",loopValues:!0,value:-50,suffix:"\xB0",min:-1080,max:1080,step:1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",name:"mouse_speed",type:"range-input",value:68,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{type:"spacer"},{labelName:"Background Color",name:"background_color",type:"color",value:"#FFFFFF00"},{labelName:"See-Through",name:"see_through",type:"check-box",value:!1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#FFFFFF00",excludeFromShuffle:!0}]};Gd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.hasOwnProperty("background_color")&&e?.background_color===null&&(e.background_color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.overlay_hex=i.toHexString(),e.overlay_alpha=i.getAlpha()}if(e.background_color){let i=Oe(e.background_color),r=i.toRgb();e.color_r=r.r,e.color_g=r.g,e.color_b=r.b,e.alpha=r.a,e.hex_color=i.toHexString()}return e};Gd.defaults=at(Gd.options);Gd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";ose=Gd});var zy={};ai(zy,{default:()=>sse,onChangeCustom:()=>ase});var n6e,ase,Ou,sse,ik=T(()=>{Re();n6e=ce(ve());Eo();ase=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},Ou={name:"refraction",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"reflection_type",type:"radio",value:"reflection",values:[{labelName:"Reflection",value:"reflection"},{labelName:"Refraction",value:"refraction"}]},{labelName:"Flip Image",name:"flip",type:"check-box",value:!0},{labelName:"Refraction Ratio",name:"refraction_ratio",type:"range-input",requirements:[{option:"reflection_type",shouldBe:"refraction"}],value:19,min:0,max:100,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Range",name:"mouse_speed",type:"range-input",value:63,min:0,max:100,step:.1},{labelName:"Dynamic Image Refraction",name:"refract_interaction",type:"check-box",value:!1,requirements:[{option:"reflection_type",shouldBe:"refraction"}]},{labelName:null,name:"refract_motion",type:"radio",value:"speed",requirements:[{option:"reflection_type",shouldBe:"refraction"},{option:"refract_interaction",shouldBe:!0}],values:[{labelName:"Gather",value:"gather"},{labelName:"Disperse",value:"disperse"},{labelName:"Speed",value:"speed"}]},{type:"spacer"},{labelName:"Geometry: ",name:"geometry",type:"select",values:[{labelName:"Fullerene",value:"buckyball_3"},{labelName:"Compound Eye",value:"compoundeye_2"},{labelName:"Shattered Glass",value:"shattered"},{labelName:"Shard",value:"shard"},{labelName:"Warped Glass",value:"warped_glass_3"},{labelName:"Tube",value:"tube"},{labelName:"Cubic",value:"cubic"},{labelName:"Turbine",value:"turbine"},{labelName:"Icosahedron",value:"icosahedron_small"},{labelName:"Geodesic",value:"icosahedron_2"}]},{labelName:"Geometry Zoom",name:"zoom",type:"range-input",value:100,min:100,max:300,step:1},{labelName:"Rotation X",name:"rot_x",type:"range-input",value:145,min:0,max:360,step:1},{labelName:"Rotation Y",name:"rot_y",type:"range-input",value:195,min:0,max:360,step:1},{labelName:"Rotation Z",name:"rot_z",type:"range-input",value:115,min:0,max:360,step:1},{labelName:"Rotation Speed X",name:"rot_speed_x",type:"range-input",value:3.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Y",name:"rot_speed_y",type:"range-input",value:-1.5,min:-20,max:20,step:.1},{labelName:"Rotation Speed Z",name:"rot_speed_z",type:"range-input",value:2,min:-20,max:20,step:.1},{type:"spacer"},{labelName:"Color Overlay",name:"color",type:"color",value:"#ffffff00"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Multiply",value:"multiply_color"},{labelName:"Screen",value:"screen_color"}]}]};Ou.defaults=at(Ou.options);Ou.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";Ou.defaults.rgb={value:"rgb(255,255,255)"};Ou.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgb(255,255,255)"),e.color){let i=Oe(e.color);e.rgb=i.toRgbString(),e.color=i.toRgbString(),e.alpha=i.getAlpha()}return e};sse=Ou});var Hy={};ai(Hy,{default:()=>use,onChangeCustom:()=>lse});var l6e,lse,Du,use,rk=T(()=>{Re();l6e=ce(ve());Eo();lse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},Du={name:"ripples",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Distortion X",name:"scaleX",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Distortion Y",name:"scaleY",type:"range-input",value:20,min:0,max:100,step:1},{labelName:"Scale",name:"scale",type:"range-input",value:1,min:1,max:10,step:.01},{labelName:"Speed",name:"target_speed",type:"range-input",value:9,min:0,max:100,step:.1},{labelName:"Direction",name:"direction",type:"scrubber",numberOnlyMode:!0,value:245,min:0,max:360,loopValues:!0,suffix:"\xB0",step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Sensitivity",requires:"mouse_sensitivity",name:"mouse_sensitivity",type:"range-input",value:100,min:0,max:100,step:1},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0}]};Du.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};Du.defaults=at(Du.options);Du.defaults.alpha={value:0};Du.defaults.hex={value:"#fff"};use=Du});var Uy={};ai(Uy,{default:()=>dse,onChangeCustom:()=>cse});var p6e,cse,Lu,dse,nk=T(()=>{Re();p6e=ce(ve());Eo();cse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},Lu={name:"slitscan",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"orientation",type:"radio",value:"horizontal",values:[{labelName:"Horizontal",value:"horizontal"},{labelName:"Vertical",value:"vertical"}]},{labelName:"Scan Size",name:"scan_size",type:"range-input",value:90,min:0,max:100,step:.1},{labelName:"Short Wave",name:"scan_cycles",type:"range-input",value:1,min:0,max:20,step:.1},{labelName:"Wiggle",name:"wiggle",type:"range-input",value:20,min:0,max:100,step:.1},{labelName:"Speed",name:"target_speed",type:"range-input",value:17,min:-100,max:100,step:1},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Scroll Interaction",name:"scroll_interaction",type:"check-box",value:!1},{labelName:"Overlay Color",name:"color",type:"color",value:"transparent",excludeFromShuffle:!0}]};Lu.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};Lu.defaults=at(Lu.options);Lu.defaults.alpha={value:0};Lu.defaults.hex={value:"#000000"};dse=Lu});var qy={};ai(qy,{default:()=>hse,onChangeCustom:()=>pse});var g6e,pse,tl,hse,ok=T(()=>{Re();g6e=ce(ve());Eo();pse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},tl={name:"pixelation",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"layout_mode",type:"radio",value:"grid_mode",values:[{labelName:"Grid",value:"grid_mode"},{labelName:"Rows",value:"row_mode"},{labelName:"Columns",value:"column_mode"}]},{labelName:"Rows",name:"rows",type:"range-input",value:44,min:1,max:64,step:1,requirements:[{option:"layout_mode",shouldBe:"row_mode"}]},{labelName:"Columns",name:"columns",type:"range-input",value:44,min:1,max:64,step:1,requirements:[{option:"layout_mode",shouldBe:"column_mode"}]},{labelName:"Subdivisions",name:"grid_size",type:"range-input",value:44,min:1,max:100,step:1,requirements:[{option:"layout_mode",shouldBe:"grid_mode"}]},{labelName:"Cell Image Zoom",name:"zoom",type:"range-input",value:100,suffix:"%",min:1,max:100,step:1},{labelName:"Flip Alternate Cells",name:"flip_it",type:"check-box",value:!1},{type:"spacer"},{labelName:"Turbulence",name:"stir_grid",type:"check-box",value:!0},{labelName:"Stir Frequency",name:"stir_freq",type:"range-input",value:74,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Stir Strength",name:"stir_strength",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Disorder",name:"stir_disorder",type:"range-input",value:4,suffix:"%",min:0,max:100,step:1,requirements:[{option:"stir_grid",shouldBe:!0}]},{labelName:"Motion Elasticity",name:"elasticity",type:"range-input",value:35,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#ffffff00",excludeFromShuffle:!0},{type:"spacer"},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0},{labelName:"Mouse Movement Force",name:"mouse_sensitivity",type:"range-input",value:6,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouse Radius",name:"tolerance",type:"range-input",value:50,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]},{labelName:"Mouseover Zoom",name:"mouse_zoom",type:"range-input",value:0,suffix:"%",min:0,max:100,step:1,requirements:[{option:"mouse_interaction",shouldBe:!0}]}]};tl.defaults=at(tl.options);tl.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";tl.defaults.rgb={value:"rgb(255,255,255)"};tl.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};tl.customShuffle=t=>(Math.random()>.5&&(t.zoom=100),t);hse=tl});var By={};ai(By,{default:()=>mse,onChangeCustom:()=>fse});var w6e,fse,Kd,mse,ak=T(()=>{Re();w6e=ce(ve());Eo();fse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r)){let s=!0;if(n==="image"&&(o!==void 0&&o?i.obj.loadImage(o):s=!1),n!==void 0&&s===!0){let u={};u[n]=o,i.Update(n,o),i.obj.updateSettings(u)}}},Kd={name:"kaleidoscope",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Slices",name:"slices",type:"range-input",value:18,min:2,max:256,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:217,suffix:"%",min:1,max:500,step:1},{labelName:"Rotation",name:"baseRotation1",type:"range-input",value:61,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Rotation Speed",name:"rotationSpeed1",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation",name:"baseRotation2",type:"range-input",value:-148,suffix:"\xB0",min:-180,max:180,step:1},{labelName:"Image Rotation Speed",name:"rotationSpeed2",type:"range-input",value:-8,suffix:"\xB0/sec",min:-100,max:100,step:1},{labelName:"Image Rotation Anchor X",name:"rotationCenterX",type:"range-input",value:21,suffix:"\xB0/sec",min:-300,max:300,step:1},{labelName:"Image Rotation Anchor Y",name:"rotationCenterY",type:"range-input",value:66,suffix:"\xB0/sec",min:-300,max:300,step:1},{type:"spacer"},{labelName:"Mirror Slices",name:"mirrorSlices",type:"check-box",value:!0},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0}]};Kd.transformChanges=(t,e)=>{if(e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};Kd.defaults=at(Kd.options);Kd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";mse=Kd});var Wy={};ai(Wy,{default:()=>vse,onChangeCustom:()=>gse});var _6e,gse,Yd,vse,sk=T(()=>{Re();_6e=ce(ve());Eo();gse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},Yd={name:"polygon_engine",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{labelName:"Style:",name:"style",type:"select",value:"delaunay",values:[{labelName:"Random 1",value:"random1"},{labelName:"Random 2",value:"random2"},{labelName:"Iso",value:"iso"},{labelName:"Rectangular 1",value:"straight1"},{labelName:"Rectangular 2",value:"straight2"},{labelName:"Voronoi",value:"voronoi"},{labelName:"Delaunay",value:"delaunay"}]},{labelName:"Cuts",name:"subdivisionCount",type:"range-input",value:421,min:3,max:500,step:1},{labelName:"Animation Speed",name:"animationSpeed",type:"range-input",value:1,min:0,max:20,step:.1},{type:"spacer"},{labelName:"Mouse Interaction",name:"hasMouseInteraction",type:"check-box",value:!0},{labelName:"Interaction Speed",name:"interactionSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{labelName:"Interaction Radius",name:"interactionRadius",type:"range-input",value:300,suffix:"px",min:0,max:500,step:1,requirements:[{option:"hasMouseInteraction",shouldBe:!0}]},{type:"spacer"},{excludeFromShuffle:!0,labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"}]};Yd.defaults=at(Yd.options);Yd.defaults.image_url="//static.cargo.site/assets/backdrop/default_256.jpg";Yd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.overlay_hex=i.toHexString(),e.overlay_alpha=i.getAlpha()}return e};vse=Yd});var Vy={};ai(Vy,{default:()=>yse,onChangeCustom:()=>bse});var T6e,bse,Zd,yse,lk=T(()=>{Re();T6e=ce(ve());Eo();bse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},Zd={name:"morphovision",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Transition Duration",name:"transition_time",type:"range-input",value:4,suffix:" sec",min:.5,max:10,step:.1},{labelName:"Intensity",name:"transition_alpha",type:"range-input",value:76,suffix:"%",min:10,max:100,step:1},{labelName:"Zoom",name:"zoom",type:"range-input",value:14,suffix:"%",min:-100,max:100,step:1},{labelName:"Cycle Images",name:"cycle_images",type:"check-box",value:!0},{labelName:"Randomize Order",name:"shuffle",type:"check-box",value:!0,renderWhenDisabled:!0,requirements:[{option:"cycle_images",shouldBe:!0}]},{type:"spacer"},{labelName:"Morph Size",name:"morph_size",type:"range-input",value:85,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Movement",name:"morph_speed",type:"range-input",value:15,suffix:"%",min:0,max:100,step:1},{labelName:"Morph Amplitude",name:"amplitude",type:"range-input",value:22,suffix:"%",min:0,max:100,step:1},{labelName:"Phase Shift",name:"phase",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Movement Jitter",name:"jitter",type:"range-input",value:18,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Image Warp",name:"small_warp",type:"range-input",value:40,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"blend",type:"radio",value:"MULTIPLY",values:[{labelName:"Normal",value:"NORMAL"},{labelName:"Screen",value:"SCREEN"},{labelName:"Multiply",value:"MULTIPLY"}]}]};Zd.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};Zd.defaults=at(Zd.options);Zd.defaults.image_url="/_jsapps/backdrop/morphovision/morph_default.jpeg";yse=Zd});var $y={};ai($y,{default:()=>xse,onChangeCustom:()=>wse});var R6e,wse,$m,xse,uk=T(()=>{Re();R6e=ce(ve()),wse=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);for(let[n,o]of Object.entries(r))i.Update(n,o)},$m={name:"wave",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Waves",name:"ripples.on",type:"check-box",value:!0},{labelName:"Wave Speed",name:"ripples.noiseSpeed",type:"range-input",value:15,min:0,max:20,step:.1,requirements:[{option:"ripples.on",shouldBe:!0}]}]};$m.defaults=at($m.options);$m.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";xse=$m});var jy={};ai(jy,{default:()=>Sse,onChangeCustom:()=>Cse});var D6e,Cse,Fu,Sse,ck=T(()=>{Re();D6e=ce(ve());Eo();Cse=(t,e,i)=>{let r={};for(let[o,s]of Object.entries(e))t[o]!=s&&(r[o]=s);let n=[];for(let[o,s]of Object.entries(r))i.Update(o,s)},Fu={name:"halftone",options:[{labelName:"Image",name:"image",type:"image",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:"Screen Size",name:"dot_scale",type:"range-input",value:53,suffix:"%",min:0,max:100,step:.5},{labelName:"Dot Gain",name:"dot_gain",type:"range-input",value:48,suffix:"%",min:-100,max:200,step:1},{labelName:"Under-Color Removal",name:"dot_gain",type:"range-input",value:95,suffix:"%",min:0,max:100,step:1},{labelName:"Registration Accuracy",name:"color_offset",type:"range-input",value:94,suffix:"%",min:0,max:100,step:1},{type:"spacer"},{labelName:"Cyan",name:"cyan",type:"check-box",value:!0},{labelName:"Halftone",name:"cyan_halftone",type:"check-box",value:!0,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Opacity",name:"c_opacity",type:"range-input",value:70,suffix:"%",min:0,max:100,step:1,requirements:[{option:"cyan",shouldBe:!0}]},{labelName:"Rotation",name:"c_rotation",type:"range-input",value:140,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"c_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"cyan",shouldBe:!0},{option:"cyan_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Magenta",name:"magenta",type:"check-box",value:!0},{labelName:"Halftone",name:"magenta_halftone",type:"check-box",value:!0,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Opacity",name:"m_opacity",type:"range-input",value:69,suffix:"%",min:0,max:100,step:1,requirements:[{option:"magenta",shouldBe:!0}]},{labelName:"Rotation",name:"m_rotation",type:"range-input",value:42,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"m_rot_speed",type:"range-input",value:1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"magenta",shouldBe:!0},{option:"magenta_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Yellow",name:"yellow",type:"check-box",value:!0},{labelName:"Halftone",name:"yellow_halftone",type:"check-box",value:!0,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Opacity",name:"y_opacity",type:"range-input",value:99,suffix:"%",min:0,max:100,step:1,requirements:[{option:"yellow",shouldBe:!0}]},{labelName:"Rotation",name:"y_rotation",type:"range-input",value:59,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"y_rot_speed",type:"range-input",value:-1,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"yellow",shouldBe:!0},{option:"yellow_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Black",name:"black",type:"check-box",value:!0},{labelName:"Halftone",name:"black_halftone",type:"check-box",value:!0,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Opacity",name:"k_opacity",type:"range-input",value:100,suffix:"%",min:0,max:100,step:1,requirements:[{option:"black",shouldBe:!0}]},{labelName:"Rotation",name:"k_rotation",type:"range-input",value:45,suffix:"\xB0",min:0,max:360,step:1,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{labelName:"Rotation Speed",name:"k_rot_speed",type:"range-input",value:0,suffix:"\xB0/sec",min:-10,max:10,step:.5,requirements:[{option:"black",shouldBe:!0},{option:"black_halftone",shouldBe:!0}]},{type:"spacer"},{labelName:"Overlay Color",name:"color",type:"color",value:"#33333300"},{labelName:void 0,name:"overlay_type",type:"radio",value:"multiply_color",values:[{labelName:"Normal",value:"normal_color"},{labelName:"Screen",value:"screen_color"},{labelName:"Multiply",value:"multiply_color"}]},{labelName:"Mouse Interaction",name:"mouse_interaction",type:"check-box",value:!0}]};Fu.transformChanges=(t,e)=>{if(e.hasOwnProperty("color")&&e?.color===null&&(e.color="rgba(0,0,0,0)"),e.color){let i=Oe(e.color);e.hex=i.toHexString(),e.alpha=i.getAlpha()}return e};Fu.customShuffle=t=>{switch(t.overlay_type=Math.random()>.5?"multiply_color":"screen_color",Math.floor(Math.random()*4)){case 0:t.black=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 1:t.cyan=!0,t.c_opacity=Math.max(75,t.c_opacity);break;case 2:t.yellow=!0,t.y_opacity=Math.max(100,t.y_opacity),t.black=!0,t.c_opacity=Math.max(50,t.c_opacity);break;case 3:t.magenta=!0,t.m_opacity=Math.max(75,t.m_opacity);break}return t};Fu.defaults=at(Fu.options);Fu.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";Sse=Fu});var Gy={};ai(Gy,{default:()=>Ese,onChangeCustom:()=>_se});var H6e,dk,_se,Xd,Ese,pk=T(()=>{Re();H6e=ce(ve()),dk={checkerboard:{preset_image:"https://static.cargo.site/assets/backdrop/video/checkerboard_64.png",preset_width:"16px",preset_height:"16px"},hexed:{preset_image:"https://static.cargo.site/assets/backdrop/video/hexed_16.png",preset_width:"8px",preset_height:"8px"},noise:{preset_image:"https://static.cargo.site/assets/backdrop/video/noise.png",preset_width:"512px",preset_height:"512px"},interlace:{preset_image:"https://static.cargo.site/assets/backdrop/video/interlace.png",preset_width:"1px",preset_height:"3px"}},_se=(t,e,i)=>{let r={};for(let[n,o]of Object.entries(e))t[n]!=o&&(r[n]=o);r.hasOwnProperty("color")&&r?.color===null&&(r.color="rgba(0,0,0,0)");for(let[n,o]of Object.entries(r))i.Update(n,o)},Xd={name:"video",excludeFromShuffle:!0,options:[{labelName:"Video URL:",name:"video_url",type:"text-input",value:"",className:"hover",config:"noBars"},{type:"spacer"},{name:"pageSplit",type:"custom",value:null},{labelName:"Clip when scrolling",name:"clipScroll",type:"check-box",value:!1},{type:"spacer"},{labelName:void 0,name:"scale_option",type:"radio",value:"cover",values:[{labelName:"Fill Window",value:"cover"},{labelName:"Fit Window",value:"contain"}]},{labelName:"Margin",name:"margin",type:"scrubber",value:"0",addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",allowedUnits:["px","%","em","rem","vmin","vmax","vw","vh"],excludeFromShuffle:!0,min:0,max:{"%":50,vh:50,vw:50,vmin:100,vmax:50}},{type:"spacer"},{labelName:"Overlay",name:"preset_pattern",type:"radio",value:"blank",values:[{labelName:void 0,value:"checkerboard"},{labelName:void 0,value:"hexed"},{labelName:void 0,value:"noise"},{labelName:void 0,value:"interlace"},{labelName:void 0,value:"blank"}]},{labelName:"Video Opacity",name:"alpha",type:"range-input",value:100,min:0,max:100,step:1,excludeFromShuffle:!0},{labelName:"Background Color",name:"color",type:"color",value:"#FFFFFF00"},{type:"spacer"},{labelName:"Display Still Image In Mobile Devices",name:"use_mobile_image",type:"check-box",value:!1},{name:"image",type:"custom",value:"7e333180710e85119b159e6bf7711aed653bf5ee8339ed26c74cae1f031548bc",renderWhenDisabled:!1,requirements:[{option:"use_mobile_image",shouldBe:!0}]}]};Xd.transformChanges=(t,e)=>(e.preset_pattern&&(dk[e.preset_pattern]?(e.using_preset=!0,e.image_active=!0,e={...e,...dk[e.preset_pattern]}):(e.using_preset=!1,e.image_active=!1)),e);Xd.defaults=at(Xd.options);Xd.defaults.image_url="//static.cargo.site/assets/backdrop/default_1024.jpg";Ese=Xd});var Jd={};ai(Jd,{badtv:()=>Dy,gradient:()=>$d,halftone:()=>jy,kaleidoscope:()=>By,morphovision:()=>Vy,parallax:()=>Fy,pixelation:()=>qy,polygon_engine:()=>Wy,refraction:()=>zy,ripple:()=>Hy,slitscan:()=>Uy,video:()=>Gy,wallpaper:()=>Vd,wave:()=>$y});var jm=T(()=>{VM();$M();jM();tk();ik();rk();nk();ok();ak();sk();lk();uk();ck();pk()});var Qn,Pse,hk,Ky,fk,Ise,mk=T(()=>{Pe();_i();Oi();jm();Re();Qn=ce(ve(),1);W();Pse={"legacy/slitscan":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/slitscan/main.js"),"legacy/refraction":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/refraction/main.js"),"legacy/badtv":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/badtv/main.js"),"legacy/gmaps":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/gmaps/main.js"),"legacy/halftone":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/halftone/main.js"),"legacy/kaleidoscope":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/kaleidoscope/main.js"),"legacy/morphovision":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/morphovision/main.js"),"legacy/parallax":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/parallax/main.js"),"legacy/pixelation":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/pixelation/main.js"),"legacy/polygon_engine":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/polygon_engine/main.js"),"legacy/ripple":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/ripple/main.js"),"legacy/video":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/video/main.js"),"legacy/wave":()=>import("https://build.cargo.site/frontend/b164f5/_jsapps/backdrop/wave/main.js")},hk=Qn.default.memoize(t=>new Promise(async(e,i)=>{if(ne)return i();await Ise();let{default:r}=await Pse[t]();e(r)})),Ky=class extends ae{constructor(e){super(e),this.ref=me(),hk(this.props.path).catch(i=>{})}componentDidMount(){this.initView()}initView=async()=>{delete this.backboneView;let e=await hk(this.props.path).catch(n=>{});if(!this.ref.current){console.log("No element to render backbone view to...");return}let i=Jd[this.props.path.replace("legacy/","")],r={page_id:this.props.id};Qn.default.each(i?.default.defaults,(n,o)=>{r[o]=n.value}),this.onChangeCustom=i?.onChangeCustom?i.onChangeCustom.bind(this):null,this.ref.current.innerHTML="",this.backboneView=new e({el:this.ref.current,model:new Backbone.Model({data:{...r,...this.props.settings}}),...this.props.viewOptions||{}}),this.backboneView.id&&(this.ref.current.id=this.backboneView.id),this.backboneView.className&&(this.ref.current.className=this.backboneView.className),this.backboneView.defaults={...this.backboneView.defaults,...this.props.defaults},this.backboneView.deferredLoadEventName&&(this.backboneView.deferredLoadEventName+="_"+Qn.default.uniqueId(),Cargo.Event.once(this.backboneView.deferredLoadEventName,()=>{this.ref.current&&this.ref.current.dispatchEvent(new CustomEvent("legacy-backdrop-loaded",{bubbles:!0,composed:!0,detail:{}}))})),this.backboneView.render(),typeof this.backboneView.Init=="function"&&this.backboneView.Init(),this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):this.backboneView.in_viewport=!1};destroyView=()=>{this.backboneView&&(typeof this.backboneView.destroy=="function"&&this.backboneView.destroy(),this.backboneView.undelegateEvents(),this.backboneView.$el.removeData().unbind(),this.backboneView.remove(),delete this.backboneView)};componentWillUnmount(){this.destroyView()}componentDidUpdate(e){if(this.backboneView&&!Qn.default.isEqual(e.settings,this.props.settings)&&(this.onChangeCustom?this.onChangeCustom(e.settings,this.props.settings,this.backboneView):console.log("custom backdrop update failed")),this.props.path!=e.path){this.destroyView(),this.initView();return}this.backboneView&&((e.dimensions.width!=this.props.dimensions.width||e.dimensions.height!=this.props.dimensions.height)&&this.backboneView.SetSizeFromMainView?.(this.props.dimensions.width,this.props.dimensions.height),this.props.visibility.visible!=e.visibility.visible&&(this.props.visibility.visible?(this.backboneView.in_viewport=!0,this.backboneView.Resume?.()):(this.backboneView.in_viewport=!1,this.backboneView.Pause?.())))}render(){let e=this.props.path?.replace("legacy/","")||"";return m("div",{"data-backdrop":e,ref:this.ref,dangerouslySetInnerHTML:{__html:""}})}},fk=Ky,Ise=Qn.default.once(async()=>{if(ne)return;let{Backbone:t,underscore:e,jQuery:i}=await import("https://static.cargo.site/assets/C3/legacy/backbone-packaged.min.js");window.$=i,window.Backbone=t,window._=e,window.Cargo={o:{collection:{},model:{}},Collection:{},Helper:{isMobile:()=>Qe.data.mobile.active,IsAdminEdit:()=>Ri},Event:Qn.default.extend({},t.Events),Core:{Handlebars:{Render:()=>""}}},window.Backdrop={Data:{}},Cargo.o.collection.images=t.Collection.extend({model:function(r,n){return r&&r.type==="local"?new Cargo.o.model.localImage(r,n):new Cargo.o.model.image(r,n)},fetchImage:function(r,n){let o=window.store.getState(),s=Je.getMediaByHash(o)[r],u=new Cargo.o.model.image({...s});if(s&&u)return u.getImageWithOptions({w:n})},fetchWebGLImage:function(r,n){let o=window.store.getState(),s=Je.getMediaByHash(o)[r];return s?{w:s.width,h:s.height,url:"https://freight.cargo.site/w/"+n+"/t/webgl/i/"+s.hash+"/"+s.name,id:r}:null}}),Cargo.o.model.image=t.Model.extend({initialize:function(){Qn.default.bindAll(this,"getImageByWidth")},urlRoot:function(){return"/_api/v0/image"},getImageByWidth:function(r){var n={};return r>this.get("width")&&(r=this.get("width")),n.w=r,this.getImageWithOptions(n).url},getImageByWidth2x:function(r){return this.getImageByWidth(r*2)},getImageWithOptions:function(r){var n={retina:window.devicePixelRatio?window.devicePixelRatio>=1.2:!1,square:!1,url:"",webgl:r.hasOwnProperty("t")&&r.t=="webgl"};if(Qn.default.extend(n,r),n.t==="original"&&(n.retina=!1),n.retina===!0&&!n.webgl&&(n.q==null&&(n.q=75),n.hasOwnProperty("w")&&(n.w=Math.min(n.w*2,this.get("width"))),n.hasOwnProperty("h")&&(n.h=Math.min(n.h*2,this.get("height")))),n.w&&n.w>this.get("width")&&(n.webgl?n.w=this.getValidWebGLSize(n.w):n.w=this.get("width")),n.h&&n.h>this.get("height")&&(n.h=this.get("height")),n.square===!0){var o=this.getSquareCrop();n.c={x:o.x,y:o.y,w:o.w,h:o.h}}var s=["t","w","h","q","c"],u=[],c=!1,d=!1;Qn.default.each(n,function(g,v){s.indexOf(v)===-1||g===""||(v==="c"?u.push("c/"+g.x+"/"+g.y+"/"+g.w+"/"+g.h):u.push(v+"/"+g),c=v=="w"?g:v=="c"&&g.w?g.w:c,d=v=="h"?g:v=="c"&&g.h?g.h:d)},this);var p=this.getScaleSize(c,d);return n.w=p.w,n.h=p.h,this.get("hash")!==void 0&&this.get("name")!==void 0?n.url="https://freight.cargo.site/"+u.join("/")+"/i/"+this.get("hash")+"/"+this.get("name"):n.url="",n},getSquareCrop:function(){var r=y=w=h=diff=0;return this.get("height")>this.get("width")?(w=h=this.get("width"),diff=this.get("height")-this.get("width"),y=Math.floor(diff/2),r=0):this.get("width")>this.get("height")?(w=h=this.get("height"),diff=this.get("width")-this.get("height"),r=Math.floor(diff/2),y=0):(w=this.get("width"),h=this.get("height"),r=y=0),{w,h,x:r,y}},getOriginalImage:function(){return this.getImageWithOptions({t:"original",retina:!1})},urlBelongsToImage:function(r){return typeof r!="string"?!1:r.indexOf(this.get("hash")+"/"+this.get("name"))!==-1},getValidWebGLSize:function(r){var n=[128,256,512,1024,2048,4096];return r>this.get("width")&&Qn.default.each(n,function(o){o<1e3&&(r=o)}),r},getScaleSize:function(r,n){var o,s,u=r,c=n;if(o=parseInt(this.get("width")),s=parseInt(this.get("height")),!(r&&n)){if(o==s)u=r||n||o,c=u;else if(r)var d=o/r,c=Math.floor(s/d),u=r;else if(n)var d=s/n,u=Math.floor(o/d),c=n}return{w:u,h:c}},getFitSize:function(r,n,o,s){if(r=parseInt(r),n=parseInt(n),n>r)var u=r/o,c=Math.floor(n/u),d=o;else if(r>n)var u=n/s,d=Math.floor(r/u),c=s;else var d=r,c=n;return[d,c]}}),Cargo.Collection.Images=new Cargo.o.collection.images})});var zu,Gm=T(()=>{Pe();zu=function(t,e,i={}){if(t.nodeType===3)return t.data;if(t.nodeType!==1)return null;let r={},n=[],o=0,s=t.attributes,u=t.childNodes;for(o=s.length;o--;)r[s[o].name]=s[o].value;for(i={...r,...i},o=u.length;o--;){let c=zu(u[o],null);n[o]=c}return Tt(e||t.nodeName,i,n)}});var Y6e,Yy,Km,Br,Za=T(()=>{Pe();Re();Y6e=ce(ve(),1);Mr();W();ne||(Yy=new ResizeObserver(function(t){t.forEach(function(e){Ot(e.target,"reference-resize",{target:e.target,width:e.contentRect.width},{bubbles:!1,cancelable:!0,composed:!0})})}));Km=class extends ae{constructor(e){super(e),this.elementRef=me(),this.elementRef.current={},this.saveRef=i=>r=>{this.elementRef.current[i]=r}}render(){let{values:e={elWidth:"100%"}}=this.props;return m("div",{tabIndex:"-1","data-nosnippet":!0,style:{height:0,width:"100%",minWidth:"100%",overflow:"hidden",display:"block",alignSelf:"flex-start",visibility:"hidden",pointerEvents:"none",boxSizing:"border-box",zIndex:-1,...this.props.style},children:Object.keys(e).map(i=>{let r=e[i];return m("div",{tabIndex:"-1",ref:this.saveRef(i),style:typeof r=="object"?r:{width:r}})})})}componentDidUpdate(e,i){}onResize=e=>{let i=Object.keys(this.elementRef.current).find(r=>this.elementRef.current[r]===e.target);this.props.onResize&&this.props.onResize(i,e.width)};componentDidMount(){Object.keys(this.elementRef.current).forEach(e=>{let i=this.elementRef.current[e];ti(i,"reference-resize",this.onResize),Yy?.observe(i)})}componentWillUnmount(){Object.keys(this.elementRef.current).forEach(e=>{let i=this.elementRef.current[e];Yy?.unobserve(i),si(i,"reference-resize",this.onResize)})}};Km.defaultProps={values:{elWidth:"100%"}};Br=Km});var s4e,Ym,pr,la=T(()=>{Pe();Se();wo();Di();s4e=ce(ve(),1);W();Ym=class extends ae{constructor(e){super(e),this.state={scrollIncrement:0,pointerAttention:!1,shiftButtonX:0,shifted:!1,overlayPosition:{x:0,y:0,width:0,height:0}},this.attachToBaseNode()}render(e,i){return this.renderElement?je(m(X,{children:e.render({...i,...e})}),this.renderElement):null}pointerIn=e=>{this.requestTick(),this.setState(i=>({pointerAttention:!0,scrollIncrement:i.scrollIncrement+1})),this.props.onPointerIn&&this.props.onPointerIn()};pointerOut=()=>{this.setState({pointerAttention:!1}),this.props.onPointerOut&&this.props.onPointerOut()};updatePosition=e=>{let i=this.props.buttonHeight||0,r=0,n=e.height,o=e.top;this.props.buttonMode=="inside",n=e.height,this.setState({overlayPosition:{x:e.left,y:o,width:e.width,height:n}})};componentWillUnmount(){this.props.baseNode._wasFocused=this.state.pointerAttention,this.props.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Ue.removePortal(this.props.baseNode,this.renderElement)}requestTick=()=>{this.ticking||(Ue.updateElementRect(this.props.baseNode),this.ticking=!0,requestAnimationFrame(()=>{this.ticking=!1}))};attachToBaseNode(){this.props.baseNode&&(this.renderElement=Ue.getPortal(this.props.baseNode,{noPointerEvents:this.props.noPointerEvents||!1,trackResize:this.props.trackResize||!1,extraMargins:this.props.buttonMode=="inside"?[0,0,0,0]:[0,0,0,0],component:this}))}onScroll=e=>{this.requestTick();let i=this.props.scrollContext.getScrollPosition().y,r=i-this.scrollPos;this.scrollPos=i,this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(r)};componentDidMount(){this.props.baseNode&&this.props.baseNode._wasFocused&&(this.setState({pointerAttention:!0}),this.requestTick()),Ue.testHover()}componentDidUpdate(e,i){this.props.baseNode&&e.baseNode!==this.props.baseNode&&this.attachToBaseNode(),(this.state.pointerAttention!==i.pointerAttention||this.state.noPointerEvents!==i.noPointerEvents||this.props.hasFocus!==e.hasFocus||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.props.hasFocus||this.state.pointerAttention||this.state.noPointerEvents)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll),Ue.testHover(),this.requestTick())}};Ym.defaultProps={buttonMode:"inside",buttonHeight:0};pr=yo(Ym)});var Wr,Zm,Po,Hu=T(()=>{Pe();Se();Mt();la();Di();Gn();ht();Wr=ce(ve(),1);_i();W();Zm=class extends ae{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,galleryIsEmpty:!1,showInsertionIndicator:!1,adjacentIndexes:{above:-1,below:-1,left:-1,right:-1}},this.dragMap=new Map,this.onDragOver=Wr.default.throttle(this.onDragOver,80)}mutationObserverOptions={attributes:!0,childList:!0,subtree:!0,characterData:!0};render(e,i){let{galleryInstance:r}=e,{initialShowOutlines:n,showTransition:o,draggingOver:s,adjacentIndexes:u,showInsertionIndicator:c,galleryIsEmpty:d,buttonHovered:p,UIWindow:g}=i,v=this.props["thumbnail-index"]!==void 0,b=23;return m(X,{children:[m(Vi,{onlyAllowCollapsedRange:!0,baseNode:r}),m("style",{children:c&&`
					::slotted(media-item) {
						--base-translate: translate(0, 0);						
						transition: .08s transform cubic-bezier(0, 0, 0.01, 1);
					}

					::slotted(media-item:nth-child(${u.left+1})) {
						z-index: 1001;
						--base-translate: translateX(-15px);
					}

					::slotted(media-item:nth-child(${u.right+1})) {
						z-index: 1001;
						--base-translate: translateX(15px);
					}

					::slotted(media-item:nth-child(${u.above+1})) {
						z-index: 1001;
						--base-translate: translateY(-15px);
					}

					::slotted(media-item:nth-child(${u.below+1})) {
						z-index: 1001;
						--base-translate: translateY(15px);
					}
				`}),m(pr,{...this.props,hasFocus:!!g,onScrollWhileHovered:this.onScrollWhileHovered,trackResize:!0,buttonHeight:b,buttonMode:"inside",baseNode:this.props.galleryInstance,render:S=>{let{pointerAttention:_,overlayPosition:E}=S,I=0;if(E.y<=1&&(I=Math.min(-E.y+1,E.height+-b+1)),!e?.["blog-gallery"])return m(X,{children:m("div",{className:`editor-overlay editor-outline${_||g?" hover":""}${_||g?" button-hover":""}${g?" focus":""}`,style:{transform:`translate3d(${E.x}px, ${E.y}px, 0)`,width:E.width+"px",height:E.height+"px",display:_||g?"block":"none",minHeight:"27px",zIndex:10},children:[m("div",{className:"in-editor-buttons gallery",style:{transform:`translateY(${I}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:m("button",{onMouseDown:F=>{this.launchUIWindow(F)},ref:this.galleryButtonRef,className:"text",children:v?"Thumbnail Index":"Gallery"})}),e.otherUI]})})}})]})}launchUIWindow=(e,i)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.galleryInstance.getBoundingClientRect(),n={x:r.x+-10,y:r.y,left:r.right+-10,right:r.right+-10,top:r.top+0,bottom:r.top+27,width:r.width,height:10};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"imagegallery-ineditor",windowAlias:"imagegallery",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!0,props:{activeGallery:this.props.galleryInstance}})};onMutate=e=>{if(this.props.suppressMutation)return;this.observer.disconnect();let i=[],r=[],n=[],o=!1,s=!1,u=this.props["thumbnail-index"],c=!1;e.forEach(p=>{if(p.target.tagName=="MEDIA-ITEM"){if(i.indexOf(p.target)>-1||p.type!=="attributes"||p.attributeName==="slot"||this.props.disabledMediaItemOptions.indexOf(p.attributeName)>-1)return;u&&i.push(p.target),!(p.attributeName==="style"||p.attributeName==="class")&&this.props.gallerySpecificAttributes&&this.props.gallerySpecificAttributes.includes(p.attributeName)&&i.push(p.target)}else p.target==this.props.galleryInstance&&(p.removedNodes.length>0||p.addedNodes.length>0)?(this.props.allowedElements&&(s=[...Array.from(p.addedNodes),...Array.from(p.removedNodes)].some(this.props.allowedElements)),o=p.addedNodes.length>0||o,r=[...r,...Array.from(p.addedNodes).filter(g=>g.tagName==="MEDIA-ITEM")],n=[...n,...Array.from(p.removedNodes).filter(g=>g.tagName==="MEDIA-ITEM")]):p.type==="characterData"&&(c=p.target)}),r=Wr.default.uniq(r),n=Wr.default.uniq(n),i=Wr.default.uniq(i),n.forEach(p=>{p.itemResize=null,p.itemDragStart=null});let d=Array.from(this.props.galleryInstance.childNodes).filter(p=>p?.nodeName!=="MEDIA-ITEM");this.props.allowedElements&&Wr.default.remove(d,this.props.allowedElements),d.forEach(p=>{p.remove()}),(r.length>0||n.length>0)&&(Array.from(this.props.galleryInstance.children).some(p=>p.tagName==="MEDIA-ITEM")||this.removeEmptyGallery()),(r.length>0||n.length>0||i.length>0||s||this.props["thumbnail-index"]&&c)&&this.props.onCleanUp&&this.props.onCleanUp(r,n,i,c),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)};removeEmptyGallery=Wr.default.debounce(()=>{if(!Array.from(this.props.galleryInstance.children).some(e=>e.tagName==="MEDIA-ITEM")){if(this.state.isDraggingInEditor)this.setState({galleryIsEmpty:!0});else if(this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}}},0);scrollIntoView=()=>{let e=this.props.galleryInstance.getBoundingClientRect();this.props.galleryInstance.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:120,lazyScroll:!0}}))};onDragOver=(e,i,r)=>{if(!this.props.disableDragOver)if((!r.customDropTarget||r.customDropTarget===this.props.galleryInstance)&&(r.draggedMediaItems.length>0||r.fromOutside)&&!r.inAdmin&&this.props.galleryInstance.contains(r.dropTarget)){this.state.showInsertionIndicator||this.dragMap.clear();let o=this.props.galleryInstance.getBoundingClientRect(),s=60,u=1.033,c=2.399827721492203,d=Array.from(this.props.galleryInstance.children),p=[],g=i.clientX+-o.left,v=i.clientY+-o.top,b=15,S,_=0,E,I=0,F=null;for(S=0;S<s;S++)if(F=null,_=_+c,b=b*u+2,E=i.clientX+Math.cos(_)*b,I=i.clientY+Math.sin(_)*b,F=document.elementFromPoint(E,I),F&&(F=F.closest("MEDIA-ITEM")||null),this.props.galleryInstance.contains(F)||(F=null),F&&p.indexOf(F)===-1)if(this.dragMap.has(F)){let re=this.dragMap.get(F);E<=re.x2+o.left&&E>=re.x1+o.left&&I<=re.y2+o.top&&I>=re.y1+o.top&&p.push(F)}else p.push(F);let O=p.map(re=>{let Q;if(this.dragMap.has(re))Q=this.dragMap.get(re);else{let $e=re.getBoundingClientRect();Q={w:$e.width+-(15*2),h:$e.height+-(15*2),x1:$e.left+-o.left+15,x2:$e.left+$e.width+-o.left+-15,y1:$e.top+-o.top+15,y2:$e.top+$e.height+-o.top+-15},this.dragMap.set(re,Q)}let le=!1,j=!1,B=!1,Y=!1,ie=!1,de=!1,fe=0,be=0,Me=0;g>=Q.x1&&g<=Q.x2?(j=!0,g<Q.x1+Q.w*.5?de=!0:ie=!0,Me=0):Q.x1>g?(de=!0,Me=Q.x1-g):g>Q.x2&&(Me=Q.x2-g,ie=!0),v>=Q.y1&&v<=Q.y2?(le=!0,v<Q.y1+Q.h*.5?Y=!0:B=!0,be=0):Q.y1>v?(Y=!0,be=Q.y1-v):v>Q.y2&&(B=!0,be=Q.y2-v),fe=Math.sqrt(be*be+Me*Me);let Ee=d.indexOf(re),Fe=re.getAttribute("slot"),qe=0,nt=0;return this.props.dragIndicationType==="columns"&&(qe=Array.from(re.assignedSlot.parentElement.children).indexOf(re.assignedSlot)),{inX:j,inY:le,distance:fe,rise:be,run:Me,above:B,below:Y,toRight:de,toLeft:ie,index:Ee,slotIndex:qe,el:re,rect:Q}}),L={el:null,index:-1},z=L,G=L,H=L,N=L,J=[],oe=[],te=[],K=[];O.forEach(re=>{re.above&&te.push(re),re.below&&K.push(re),re.toRight&&oe.push(re),re.toLeft&&J.push(re)});let U=null,se=!1;if(this.props.dragIndicationType==="columns"){let re=Wr.default.minBy(te,B=>Math.abs(B.distance)),Q=Wr.default.minBy(K,B=>Math.abs(B.distance)),le=Wr.default.minBy(J.filter(B=>B.inY),B=>Math.abs(B.distance)),j=Wr.default.minBy(oe?.filter(B=>B.inY),B=>Math.abs(B.distance));re&&Q?Math.abs(Q.run)<Math.abs(re.run)?(N=Q,H=te.find(B=>B.rect.x1<N.rect.x2&&B.rect.x2>N.rect.x1)||L):(H=re,N=K.find(B=>B.rect.x1<H.rect.x2&&B.rect.x2>H.rect.x1)||L):re?H=re:Q&&(N=Q),le&&j?se=j.rect.y1!==le.rect.y1:(le?.rect?.y1>15||j?.rect?.y1>15||H?.index>-1)&&(se=!0)}if(se){if(z=L,G=L,H=H,N=N,N?.el)U=N.el;else for(U=H.el?.nextElementSibling?.assignedElements?.()[0]||null;U&&U.tagName!=="MEDIA-ITEM";)U=U?.nextElementSibling||null;r.draggedMediaItems.length===1&&d.indexOf(r.draggedMediaItems[0])>-1&&d.indexOf(U)>d.indexOf(r.draggedMediaItems[0])&&(U=U.nextElementSibling)}else{let re=Wr.default.minBy(J,le=>Math.abs(le.distance)),Q=Wr.default.minBy(oe,le=>Math.abs(le.distance));if(re&&Q?Math.abs(Q.rise)<Math.abs(re.rise)?(G=Q,z=J.find(le=>le.index==G.index+-1)):(z=re,G=oe.find(le=>le.index==z.index+1)):re?z=re:Q&&(G=Q),H=L,N=L,G=G||L,z=z||L,G?.el)U=G.el;else for(U=z.el?.nextElementSibling;U&&U.tagName!=="MEDIA-ITEM";)U=U.nextElementSibling}this.setState({adjacentIndexes:{left:z.index,right:G.index,above:H.index,below:N.index},insertBeforeTarget:U,showInsertionIndicator:!0}),we.globalDragEventController.setCustomDropTarget(this.props.galleryInstance)}else this.state.showInsertionIndicator&&this.props.onDragOut&&this.props.onDragOut(),this.setState({showInsertionIndicator:!1}),we.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance)};onDragStart=(e,i,r)=>{if(!(this.props["thumbnail-index"]&&(!r.draggedMediaItems?.[0]||!this.props.galleryInstance.contains(r.draggedMediaItems[0])))&&(Ue.activateHoverElement(this.props.galleryInstance),this.props.disableDragStart)){i.preventDefault();return}};onAfterDragStart=(e,i,r)=>{this.props.disableDragStart||this.setState({isDraggingInEditor:!0})};onDragEnd=(e,i,r)=>{this.onDragOver.cancel(),this.props.onDragEnd&&this.props.onDragEnd(),this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1},()=>{this.onDragFinish()})};onDragDrop=(e,i,r)=>{if(this.onDragOver.cancel(),this.props.onDragDrop&&this.props.onDragDrop(),!this.props.disableDrop&&!r.inAdmin){if(r.customDropTarget===this.props.galleryInstance){CargoEditor.mutationManager.execute(()=>{r.draggedMediaItems.forEach((s,u)=>{this.props["thumbnail-index"]&&s.setSaveable(!1),this.props.galleryInstance.insertBefore(s,this.state.insertBeforeTarget)}),this.props.onAfterDrop&&this.props.onAfterDrop(r.draggedMediaItems,this.state.insertBeforeTarget,this.state.adjacentIndexes)});let n=r.draggedMediaItems[0],o=r.draggedMediaItems[0]?.getAttribute("href");clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(()=>{let s=CargoEditor.rangy.createRange();this.props["thumbnail-index"]&&(n=Array.from(this.props.galleryInstance.children).find(u=>u.getAttribute("href")==o)),n&&(s.selectNode(n),CargoEditor.helpers.setActiveRange(s))},120)}this.setState({showInsertionIndicator:!1,isDraggingInEditor:!1,insertBeforeTarget:null},()=>{this.onDragFinish()})}};onBeforeDrop=(e,i,r)=>{this.props.disableBeforeDrop};onDragFinish=()=>{Ue.testHover(),this.state.galleryIsEmpty&&(Array.from(this.props.galleryInstance.children).filter(i=>i?.tagName=="MEDIA-ITEM").length==0&&this.props["thumbnail-index"]===void 0?CargoEditor.mutationManager.execute(()=>{this.props.galleryInstance.remove()}):this.setState({galleryIsEmpty:!1}))};setUIWindow=e=>{this.setState({UIWindow:e}),e?typeof this.props.onUIWindowSet=="function"&&this.props.onUIWindowSet(e):typeof this.props.onUIWindowRelease=="function"&&this.props.onUIWindowRelease(e)};onScrollWhileHovered=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidUpdate(e){e.suppressMutation!==this.props.suppressMutation&&(this.observer.disconnect(),this.props.suppressMutation||this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions)),Wr.default.isEqual(e.mediaItemEditorInfo,this.props.mediaItemEditorInfo)||this.setMediaItemEditorInfo()}setMediaItemEditorInfo=()=>{this.props.galleryInstance._mediaItemEditorInfo=this.props.mediaItemEditorInfo||{disableResize:!1,disableButton:!1},Array.from(this.props.galleryInstance.children).filter(i=>i.tagName==="MEDIA-ITEM").forEach(i=>{i._editorInterface?.setState?.({mediaItemEditorInfo:{...this.props.mediaItemEditorInfo}})}),this.props.mediaItemEditorInfo?.afterScaleChange&&(this.props.galleryInstance._mediaItemEditorInfo.afterScaleChange=this.props.mediaItemEditorInfo.afterScaleChange)};flushMutationQueue=()=>{let e=this.observer.takeRecords();e.length>0&&this.onMutate(e)};componentDidMount(){if(this.props.galleryInstance.children.length===0&&this.props["thumbnail-index"]===void 0){this.props.galleryInstance.remove();return}this.setMediaItemEditorInfo(),this.observer=new MutationObserver(this.onMutate),this.observer.observe(this.props.galleryInstance,this.mutationObserverOptions),this.props.galleryInstance._editorInterface=this,we.globalDragEventController.on("dragstart",this.onDragStart),we.globalDragEventController.on("dragover",this.onDragOver),we.globalDragEventController.on("dragend",this.onDragEnd),we.globalDragEventController.on("before-drop",this.onBeforeDrop),we.globalDragEventController.on("drop",this.onDragDrop),we.globalDragEventController.on("after-dragstart",this.onAfterDragStart)}componentWillUnmount(){this.state.UIWindow&&this.state.UIWindow.changingLayout,this.removeEmptyGallery.cancel(),this.onDragOver.cancel(),this.observer?.disconnect(),this.observer=null,clearTimeout(this.showOutlinesTimeout),clearTimeout(this.bindTimeout),we.globalDragEventController.off("dragstart",this.onDragStart),we.globalDragEventController.off("dragover",this.onDragOver),we.globalDragEventController.off("dragend",this.onDragEnd),we.globalDragEventController.off("before-drop",this.onBeforeDrop),we.globalDragEventController.off("drop",this.onDragDrop),we.globalDragEventController.off("after-dragstart",this.onAfterDragStart),this.props.galleryInstance._editorInterface===this&&(this.props.galleryInstance._mediaItemEditorInfo=null,delete this.props.galleryInstance._editorInterface)}};Zm.defaultProps={disabledMediaItemOptions:[],dragIndicationType:"grid"};Po=De((t,e)=>({Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}))(Zm)});var Zy,Xy,gk,vk=T(()=>{Pe();Zy=ce(ve(),1);Mt();Di();Hu();W();Xy=class extends ae{constructor(e){super(e),this.state={isDragging:!1,thumbnailsVisible:!1,thumbnailsVisibleWhileDragging:!1,hasUIWindow:!1,pointerAttention:!1},this.debouncedCheckRange=Zy.default.debounce(this.checkRange,120)}render(e,i){let{isDragging:r,thumbnailsVisible:n}=i,{galleryInstance:o,dragContext:s}=e;return m(X,{children:[m("style",{children:`
			media-item figcaption.caption {
				${this.state.thumbnailsVisible?"display: block":""}
			}	
		`}),m(Po,{...e,mediaItemEditorInfo:{disableResize:!0,disableButton:!1},gallerySpecificAttributes:this.props.gallerySpecificAttributes||[],suppressMutation:this.props.suppressMutation,galleryInstance:o,disableDragOver:!n,disableDrop:!n,allowedElements:u=>u.part=="previous-button"||u.part=="next-button",onUIWindowRelease:this.onUIWindowRelease,onPointerIn:this.onPointerIn,onPointerOut:this.onPointerOut})]})}onCleanUp=(e,i,r,n,o,s)=>{this.props.galleryInstance.updateNavigation(),this.props.onCleanUp&&this.props.onCleanUp(e,i,r,n,o,s)};onPointerIn=()=>{this.setState({pointerAttention:!0})};onPointerOut=()=>{this.setState({pointerAttention:!1})};onDragOver=(e,i,r)=>{this.props.galleryInstance.contains(r.dropTarget)&&!this.state.thumbnailsVisible&&(this.setState({thumbnailsVisibleWhileDragging:!0}),this.props.galleryInstance.showThumbnails())};onDragDrop=(e,i,r)=>{this.props.galleryInstance.contains(r.dropTarget)&&this.state.thumbnailsVisible?setTimeout(()=>{this.state.thumbnailsVisibleWhileDragging&&(this.setState({thumbnailsVisibleWhileDragging:!1}),this.debouncedCheckRange())},500):this.state.thumbnailsVisibleWhileDragging&&(this.setState({thumbnailsVisibleWhileDragging:!1}),this.props.galleryInstance?.hideThumbnails?.())};updateThumbStatus=e=>{let i=this.props.galleryInstance.thumbnailsVisible;this.setState({thumbnailsVisible:i}),i&&requestAnimationFrame(()=>{let r=CargoEditor?.rangy?.createRange(),n=this.props.galleryInstance.querySelector(".sizing-frame");n&&r&&(r.setStartBefore(n),r.setEndAfter(n),CargoEditor.helpers.setActiveRange(r),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor()))})};onUIWindowRelease=()=>{this.props.galleryInstance.thumbnailsVisible&&this.debouncedCheckRange(),this.setState({hasUIWindow:!1})};onUIWindowSet=e=>{this.setState({hasUIWindow:e})};checkRange=()=>{let e=CargoEditor.getActiveRange();CargoEditor.events.off("cursor-activity",this.debouncedCheckRange),this.state.hasUIWindow||this.props.childArray.some(i=>i._editorInterface?.state?.UIWindow)||e&&this.props.galleryInstance.contains(e.commonAncestorContainer)||!e?CargoEditor.events.on("cursor-activity",this.debouncedCheckRange):this.props.galleryInstance?.hideThumbnails?.()};onClick=e=>{this.props.galleryInstance.thumbnailsVisible};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),CargoEditor.events.on("cursor-activity",this.captionCursorActivity)};captionCursorActivity=Zy.default.throttle(()=>{var e=CargoEditor.getActiveRange();e&&this.props.galleryInstance.contains(e.commonAncestorContainer)&&Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM").forEach((r,n)=>{r.contains(e.commonAncestorContainer)&&this.props.onItemResize(null,r,n)})},120);componentDidUpdate(e){if(e.inTransition!==this.props.inTransition){let i=Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM");if(this.props.inTransition)i.forEach(r=>{Ue.deactivateHoverElement(r),Ue.lockItem(r)});else if(this.state.pointerAttention){i.forEach(n=>{Ue.deactivateHoverElement(n),Ue.unlockItem(n)});let r=Array.from(this.props.galleryInstance.children).find(n=>n.nodeName==="MEDIA-ITEM"&&n.assignedSlot?.parentElement?.hasAttribute("data-active-slide"));r&&Ue.activateHoverElement(r)}}}componentDidMount(){CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents),we.globalDragEventController.on("dragover",this.onDragOver),we.globalDragEventController.on("drop",this.onDragDrop),this.props.galleryInstance.addEventListener("click",this.onClick),this.props.galleryInstance.addEventListener("show-thumbnails",this.updateThumbStatus),this.props.galleryInstance.addEventListener("hide-thumbnails",this.updateThumbStatus),this.updateThumbStatus()}componentWillUnmount(){window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.captionCursorActivity.cancel(),CargoEditor&&Object.keys(CargoEditor||{}).length>0&&CargoEditor.events.off("cursor-activity",this.captionCursorActivity),this.props.galleryInstance.removeEventListener("click",this.onClick),this.props.galleryInstance.removeEventListener("show-thumbnails",this.updateThumbStatus),this.props.galleryInstance.removeEventListener("hide-thumbnails",this.updateThumbStatus),we.globalDragEventController.off("drop",this.onDragDrop),we.globalDragEventController.off("dragover",this.onDragOver)}},gk=Xy});var bk,yk=T(()=>{bk=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i});function wk(t,e,i,r){let n,o,s;for(;e=e._parent;)if((n=e._component)&&!n._processingException)try{if(o=n.constructor,o&&o.getDerivedStateFromError!=null&&(n.setState(o.getDerivedStateFromError(t)),s=n._dirty),n.componentDidCatch!=null&&(n.componentDidCatch(t,r||{}),s=n._dirty),s)return n._pendingError=n}catch(u){t=u}throw t}var xk=T(()=>{});var Tse,Qd,Ck=T(()=>{xk();Tse={_catchError:wk},Qd=Tse});function Io(t,e,i,r,n){let o;for(o in i)o!=="children"&&o!=="key"&&!(o in e)&&_k(t,o,null,i[o],r);for(o in e)(!n||typeof e[o]=="function")&&o!=="children"&&o!=="key"&&o!=="value"&&o!=="checked"&&i[o]!==e[o]&&_k(t,o,e[o],i[o],r)}function Sk(t,e,i){e[0]==="-"?t.setProperty(e,i??""):i==null?t[e]="":typeof i!="number"||bk.test(e)?t[e]=i:t[e]=i+"px"}function _k(t,e,i,r,n){let o;e:if(e==="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)i&&e in i||Sk(t.style,e,"");if(i)for(e in i)(!r||i[e]!==r[e])&&Sk(t.style,e,i[e])}else if(e[0]==="o"&&e[1]==="n")if(o=e!==(e=e.replace(/Capture$/,"")),e.toLowerCase()in t?e=e.toLowerCase().slice(2):e=e.slice(2),t._listeners||(t._listeners={}),t._listeners[e+o]=i,i){if(!r){let s=o?Pk:Ek;t.addEventListener(e,s,o)}}else{let s=o?Pk:Ek;t.removeEventListener(e,s,o)}else if(e!=="dangerouslySetInnerHTML"){if(n)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i!=null&&(i!==!1||e.indexOf("-")!=-1)?t.setAttribute(e,i):t.removeAttribute(e))}}function Ek(t){return this._listeners[t.type+!1](Qd.event?Qd.event(t):t)}function Pk(t){return this._listeners[t.type+!0](Qd.event?Qd.event(t):t)}var Xa=T(()=>{yk();Ck()});var Ik,Tk=T(()=>{Ik=(t,e={})=>{let i=t.replace(/["#$%<>&=\?\\\/:]/g,"").replace(/(\s|\.)/g,"-").replace(/-{2,}/g,"-").toLowerCase(),r=i.length>0?i:"_";if(e.inUse){let n=r,o=1;for(;e.inUse.includes(n);)n=r+`-${o++}`;return n}return r}});function Ak(t){let e=t.split(":"),i=e[0],r="all";switch(i){case"set":r=il.default.tail(e).map(n=>n).join(":");break;case"tag":r=il.default.tail(e)[0]?.split(",").map(n=>Ik(n.trim()));break;case"img":r="all";break;case"all":r="all";break}return{type:i,value:r}}function Mse(t){class e extends Ti{constructor(r){super(r),this.fixBadNullValue(),this.state={layoutIncrement:0,initialLoad:!1,attributeMap:this.getMapFromAttribute(),thumbnails:[],renderLimit:150}}getMapFromAttribute=()=>{let r={};try{let n=unescape(this.props["thumbnail-index-metadata"]||"{}");r=JSON.parse(n)}catch(n){r={},console.error("failed to load saved thumbnail map: ",n)}return r};fixBadNullValue=()=>{this.props["thumbnail-index"]==="null"&&this.props.baseNode&&this.props.baseNode.removeAttribute("thumbnail-index"),this.props.baseNode&&this.props.baseNode.hasAttribute("tag")&&this.props.baseNode.removeAttribute("tag")};isActiveLink=r=>r.purl===this.props.activePURL||r.id===this.props.PIDBeingEdited;render(r){if(!r["thumbnail-index"]||r["thumbnail-index"]==="null"){let c={...r,"thumbnail-index":void 0};return m(t,{...c})}let n=this.state.thumbnails.length>0,o=n&&r["show-tags"],s=n&&r["show-title"],u=n||!this.state.initialLoad?this.state.thumbnails:this.props.adminMode?[null,null,null].fill({attributes:{href:null,hash:"placeholder"},purl:null,thumbnail:null,tags:[],title:null}):[];return this.props.baseNode.tagName==="GALLERY-FREEFORM"&&(u=il.default.sortBy(u,c=>{let d=this.state.attributeMap?.[c.id];return d!=null?d.sort+1:0})),u=u.slice(0,this.state.renderLimit),this.renderedItemCount=u.length,m(t,{...r,onCleanUp:this.onCleanUp,disableDragOver:!0,children:u.map((c,d)=>{let p=c.thumbnail?.is_video||c.thumbnail?.is_url||null;return Tt("media-item",{...this.state.attributeMap[c.id]?.attributes,saveable:!1,model:c.thumbnail,autoplay:p,loop:p,muted:p,href:c.purl,rel:"history",itemDragStart:this.onDragStart,key:"thumb id"+c.id,"disable-zoom":!0,className:`thumbnail linked ${c.tags.map(g=>"tag-"+g.url).join(" ").toLowerCase()}${this.isActiveLink(c)?" active":""}`,...c.attributes},m("figcaption",{class:`caption${!s&&!o?" empty":""}`,slot:"caption",children:[s?m("div",{className:"page-title",children:c.title},"title-"+c.url+"-"+c.title+"-"+this.state.layoutIncrement):null,c.tags.length>0&&o?m("div",{className:"tags",children:c.tags.map((g,v)=>m(X,{children:[m("a",{href:g.url,className:"tag-link",rel:r["links-filter-index"]?"filter-index":"history","data-tag":g.tag,children:g.tag+""}),v<c.tags.length-1?m("span",{className:"tag-separator"}):null]},"tag-link-"+g.url+"-"+this.state.layoutIncrement))}):null]}))})})}onDragStart=r=>{!this.props["thumbnail-index"]||this.props["thumbnail-index"]==="null"||this.props.adminMode&&this.props.baseNode.tagName!=="GALLERY-FREEFORM"&&(r.preventDefault(),r.stopPropagation())};componentDidUpdate(r,n){this.fixBadNullValue(),this.props["thumbnail-index"]&&(r["thumbnail-index"]!==this.props["thumbnail-index"]||this.props.thumbCollection!==r.thumbCollection||this.props.sort!==r.sort||this.props.lastPublishedAt!==r.lastPublishedAt)&&this.setThumbnails(),this.props["thumbnail-index-metadata"]!==r["thumbnail-index-metadata"]&&this.setState({attributeMap:this.getMapFromAttribute()}),this.ticking||(this.ticking=!0,setTimeout(()=>{this.renderedItemCount>=this.state.renderLimit&&this.setState({renderLimit:this.state.renderLimit+250}),delete this.ticking},200)),this.props["thumbnail-index"]!==r["thumbnail-index"]&&this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&(this.props.pageInfo.setPageData({filter:this.props["thumbnail-index"]},this.props.baseNode),this.emitFilterEvent())}emitFilterEvent=()=>{this.props["thumbnail-index"]&&!this.props.adminMode&&(this.emitFilterDebounce=requestAnimationFrame(()=>{var r=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:this.props["thumbnail-index"]}});this.props.baseNode.dispatchEvent(r)}))};updateOldThumbMetaData=il.default.debounce(()=>{let r=this.props.baseNode.querySelector('script[type="text/thumbnail-metadata"]');if(r){try{CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",escape(r.textContent))},{preventDraft:!0})}catch{}CargoEditor?.mutationManager?.execute?.(()=>{r.remove()},{preventDraft:!0})}},2e3);componentDidMount(){this.fixBadNullValue(),this.updateOldThumbMetaData(),this.setThumbnails(),this.props["thumbnail-index"]&&this.props["thumbnail-index"]!=="null"&&this.emitFilterEvent(),this.props.baseNode.addEventListener("keydown",this.onKeyDown),this.props.baseNode.addEventListener("filter-thumbnail-index",this.setThumbnails),document.addEventListener("filter-thumbnail-index",this.setThumbnails),this.props.baseNode.addEventListener("refresh-thumbnail-index",this.setThumbnails)}componentWillUnmount(){cancelAnimationFrame(this.emitFilterDebounce),this.props.baseNode.removeEventListener("refresh-thumbnail-index",this.setThumbnails),this.props.baseNode.removeEventListener("keydown",this.onKeyDown),this.props.baseNode.removeEventListener("filter-thumbnail-index",this.setThumbnails),document.removeEventListener("filter-thumbnail-index",this.setThumbnails)}onKeyDown=r=>{r.metaKey||r.ctrlKey||!this.props["thumbnail-index"]||(/^.$/u.test(r.key)||r.key==="Enter"||r.key==="Delete"||r.key==="Backspace")&&(r.preventDefault(),r.stopPropagation())};setThumbnails=async()=>{if(!this.props["thumbnail-index"])return;let r=Ak(this.props["thumbnail-index"]),n=this.props.lastPublishedAt,o=[];switch(r.type){case"set":try{({data:o}=await ep.default.get(`${ei}/pages/${this.props.siteId}/thumbs/set/${r.value}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"tag":try{({data:o}=await ep.default.get(`${ei}/pages/${this.props.siteId}/thumbs/tag/${r.value.join(",")}?limit=999&timestamp=${n}`,{use_cache:!0}))}catch{}break;case"img":try{({data:o}=await ep.default.get(`${ei}/sites/${this.props.siteId}/media/images?with-pages=true`,{use_cache:!0}))}catch{}o=o.filter(c=>c.media.length>0&&c.password_enabled==!1),o=il.default.flatMap(o,c=>c.media.map(d=>({display:!0,id:d.id,purl:c.purl,url:c.purl,sort:0,tags:[],thumbnail:d,title:m(X,{children:[m("a",{href:c.purl,rel:"noopener nofollow",target:"_blank",className:"page-link",children:c.title}),m("br",{}),m("a",{target:"_blank",rel:"noopener nofollow",href:"https://freight.cargo.site/o/i/"+d.hash+"/"+d.name,children:d.name})]}),attributes:{"disable-scroll-animation":!0,href:null,"force-quick-view":!0,hash:d.hash}})));break;default:try{({data:o}=await ep.default.get(`${ei}/pages/${this.props.siteId}/thumbs/all?limit=999`,{use_cache:!0}))}catch{}break}let s=store.getState();o=o.filter(c=>{let d=s.pages.byId[c.id];return!(d&&d.crdt_state!==$t.Published||d&&r.type==="set"&&s.structure.byParent[r.value]&&!s.structure.byParent[r.value].some(p=>p===d.id))});let u=il.default.unionBy(this.props.thumbCollection,o,"id");switch(u=u.filter(c=>c.pin!==!0&&c.display!==!1&&c.id!==this.props.homepageID&&c.id!==this.props.mobileHomepageID&&c.crdt_state!==$t.Deleted&&c.thumb_meta?.hide_from_index!==!0&&this.props.pageInfo.pid!==c.id),this.props.sort){case"reverse":u.sort((c,d)=>d.sort-c.sort);break;case"shuffle":u.sort(c=>Math.random()-.5);break;default:u.sort((c,d)=>c.sort-d.sort);break}this.setState({initialLoad:!0,thumbnails:u})};onCleanUp=(r,n,o,s)=>{if(!this.props["thumbnail-index"]||!this.props.adminMode)return;let u={},c="",d=store.getState();if(Array.from(this.props.baseNode.children).filter(g=>g.tagName==="MEDIA-ITEM").forEach((g,v)=>{let b=g.getAttribute("href"),S={},_=g.attributes,E=0;for(E=_.length;E--;)_[E].name==="saveable"||_[E].name==="limit-by"||_[E].name==="class"||_[E].name==="hash"||_[E].name==="href"||_[E].name==="rel"||_[E].name==="slot"||_[E].name==="width"||_[E].name==="height"||_[E].name==="disable-zoom"||(S[_[E].name]=_[E].value);let I=Je.getContentByPurl(d,b)?.id||null;I&&(u[I]={sort:v,attributes:S})}),u={...this.state.attributeMap,...u},c=JSON.stringify(u),c=escape(c),c!==this.props["thumbnail-index-metadata"])CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("thumbnail-index-metadata",c)},{preventDraft:!0}),this.setState({attributeMap:u||{}});else if(s){if(CargoEditor&&CargoEditor?.getActiveEditor?.()){let g=CargoEditor.rangy.createRange();g.selectNode(this.props.baseNode),g.collapse(),CargoEditor.helpers.setActiveRange(g)}this.setState({layoutIncrement:this.state.layoutIncrement+1})}}}return Nt(De((i,r)=>{let n=Ase(r["thumbnail-index"],i.structure,i.pages),o=(i.pages.byId[i.frontendState.activePID]||i.sets.byId[i.frontendState.activePID])?.purl;return!ne&&!o&&(o=window.location.pathname.replace(/^\//,"")),typeof o=="string"&&(o=o.toLowerCase()),{lastPublishedAt:i.adminState?.crdt?.publishedAt??"000",thumbCollection:n,activePURL:o,adminMode:i.frontendState.adminMode,PIDBeingEdited:i.frontendState.PIDBeingEdited,inAdminFrame:i.frontendState.inAdminFrame,siteId:i.site.id,homepageID:i.site.homepage_id,mobileHomepageID:i.site.mobile_homepage_id}})(e))}var ep,il,Ase,To,Uu=T(()=>{Pe();Se();ht();Mt();Re();Ua();ep=ce(Sn(),1);Ni();Ar();_i();Tk();il=ce(ve(),1);W();Pe();Ase=ln((t,e,i)=>{let r=[];if(!t)return r;let n=Ak(t);switch(n.type){case"set":r=(e.byParent[n.value]||[]).map(o=>i.byId[o]).filter(o=>o!==void 0);break;case"tag":r=Object.values(i.byId).filter(o=>o.tags&&o.tags.find(s=>n.value?.includes(s.url)));break;case"img":r=[];break;default:r=Object.values(i.byId);break}return r.map(o=>{let s=null;return o.thumb_media_id&&o.media?s=o.media.find(u=>u.id===o.thumb_media_id)||null:o.thumbnail&&(s=o.thumbnail),{id:o.id,title:o.title,purl:o.purl,thumb_meta:o.thumb_meta||{},display:o.display,sort:e.bySort[o.id],tags:o.tags||[],pin:o.pin,crdt_state:o.crdt_state,thumbnail:s}})});To=Mse});var Nk,hi,Mk,Jy,kk,Rk,kse,Rse,Nse,Ose,rl,Qy,ew,Xm,Dse,Jm=T(()=>{Pe();Se();Gm();ht();Oi();Za();vk();Xa();Wi();Uu();Mr();wo();Ni();Re();el();Nk=ce(ve(),1);W();Pe();hi={name:"slideshow",displayName:"Slideshow",tagName:"GALLERY-SLIDESHOW",disabledMediaItemOptions:["scale","sticker","limit-by"],mobileOptions:[{labelName:"",name:"mobile-transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"mobile-transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"mobile-navigation",type:"check-box",value:!0},{labelName:"Captions",name:"mobile-show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"mobile-autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"mobile-autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"width"}]},{name:"mobile-scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"mobile-limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"mobile-limit-by",shouldBe:"fit"}]},{name:"mobile-limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Shuffle",name:"mobile-shuffle",type:"check-box",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}],options:[{labelName:"",name:"transition-type",type:"radio",value:"slide",values:[{labelName:"Fade",value:"fade"},{labelName:"Slide",value:"slide"},{labelName:"Scrub",value:"scrub"}]},{labelName:"Transition Speed",name:"transition-speed",type:"scrubber",numberOnlyMode:!0,value:.8,min:0,max:10,step:.1,requirements:[{option:"transition-type",shouldBe:t=>t==="slide"||t==="fade"}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Navigation",name:"navigation",type:"check-box",value:!0},{labelName:"Captions",name:"show-captions",type:"check-box",value:!0}]},{labelName:"Autoplay",name:"autoplay",type:"check-box",value:!0},{labelName:"Autoplay Delay",name:"autoplay-delay",type:"scrubber",value:3,step:.1,min:.1,max:30,numberOnlyMode:!0,requirements:[{option:"autoplay",shouldBe:!0}]},{labelName:"Pause On Hover",name:"pause-on-hover",type:"check-box",value:!1,requirements:[{option:"autoplay",shouldBe:!0}]},{type:"spacer"},{type:"group",className:"slideshow-size-group grid-columns-template-1-auto",children:[{type:"custom",name:"widthTextLabel",requirements:[{option:"limit-by",shouldBe:"width"}]},{name:"scale",value:"50rem",allowCalc:!0,allowVar:!0,type:"scrubber",allowOutOfRangeTextInput:!1,labelName:"Scale: Height",allowedUnits:["px","%","rem","em","vmin","vmax","vw","vh"],min:{px:8,rem:.5,em:.5,etc:1},max:{"%":100,vmin:100,vmax:100,vh:100,vw:100,etc:void 0},addDefaultUnitToUnitlessNumber:!0,defaultUnit:"rem",requirements:[{option:"limit-by",shouldBe:"height"}]},{type:"custom",name:"fitTextLabel",requirements:[{option:"limit-by",shouldBe:"fit"}]},{name:"limit-by",type:"radio",value:"width",values:[{name:"width",customLabel:"widthLabel",value:"width"},{name:"height",customLabel:"heightLabel",value:"height"},{name:"fit",customLabel:"fitLabel",value:"fit"}]}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"center",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"center",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{type:"group",className:"grid-columns-even",children:[{type:"group",className:"grid-columns-even",children:[{labelName:"Disable Zoom",name:"disable-zoom",type:"check-box",value:!1},{labelName:"Shuffle",name:"shuffle",type:"check-box",value:!1}]}]},{labelName:"Disable Scroll Transition",name:"disable-scroll-animation",type:"check-box",value:!1,requirements:[{option:"imageSettingsScrollAnimation",shouldBe:!0}]},{name:"auto-height",value:"custom"},{name:"height-limit",value:"60%"},{name:"adjust-for-captions",value:!1},{type:"more-actions",children:[{labelName:"Slides",name:"toggle-thumbs",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),this.state.activeGallery.thumbnailsVisible?this.state.activeGallery.hideThumbnails():this.state.activeGallery.showThumbnails()}}]}]};hi.defaults=at(hi.options);hi.mobileDefaults=at(hi.mobileOptions);Mk=.04,Jy=.25,kk=.085,Rk=.1,kse=.08,Rse=2,Nse=3,Ose=15,rl=0,Qy=1,ew=2,Xm=class extends Ti{constructor(e){super(e);let i=ne?{hasLayout:!1,visible:!1,position:"unknown"}:{hasLayout:!0,visible:!0,position:"inside"};this.state={captionHeightMap:[],showThumbnails:this.props.thumbnails===!0||this.props.thumbnails==="true",hasLoaded:ne,visible:!1,viewportIntersection:i,layoutIncrement:0,pointerOver:!1,initialShowNavigation:!0,destinationIndex:0,activeIndex:0,initialActiveIndex:0,inTransition:!1,elWidth:0,hasSizes:{slideHeightPx:!1,elWidth:!1},slideHeightPx:0,tallestSlide:{index:0,height:0},...this.getNavigation(),isDragging:!1,isPointerDown:!1,scrubAnimating:!1,scrubStatus:rl},this.loadedItems=new Set,this.shuffleSeed=Math.random()*100,this.lastPointerFrameDeltaX=0,this.pointerFrameDeltaX=0,this.scrubCounter=0,this.lastPointerX=0,this.firstPointerX=0,this.pointerX=0,this.xTransform=0,this.slideListRef=me(),this.scrubAnimationRequest=null,this.autoplayInterval=null,this.updateOptions(),this.lastTimestamp=0,this.styleRef=me(),Object.defineProperty(this.props.baseNode,"thumbnailsVisible",{get:()=>this.state.showThumbnails,set:r=>this.setState({showThumbnails:!!r}),configurable:!0}),this.props.baseNode.pause=this.pause,this.props.baseNode.resume=this.startAutoplay,this.props.baseNode.nextSlide=this.nextSlide,this.props.baseNode.prevSlide=this.prevSlide,this.props.baseNode.showThumbnails=this.showThumbnails,this.props.baseNode.hideThumbnails=this.hideThumbnails,this.props.baseNode.goToSlide=this.goToSlide,this.props.baseNode.getActiveSlide=this.getActiveSlide,this.props.baseNode.updateNavigation=()=>{let{prevNavigation:r,nextNavigation:n}=this.getNavigation();(this.state.prevNavigation!==r||this.state.nextNavigation!==n)&&this.setState({nextNavigation:n,prevNavigation:r})}}render(e,i){this.updateOptions();let{baseNode:r,adminMode:n,pageInfo:o,usesScrollAnimation:s}=e,{showThumbnails:u,activeIndex:c,destinationIndex:d,inTransition:p,isPointerDown:g,scrubAnimating:v,hasLoaded:b,pointerOver:S,hasSizes:_,initialShowNavigation:E,captionHeightMap:I,viewportIntersection:F}=i,{showCaptions:O,autoPlayDelay:L,limitBy:z,adjustForCaptions:G}=this.options,{elWidth:H}=i;_.elWidth||(this.cachedElWidth=this.props.baseNode.offsetWidth,H=this.cachedElWidth);let N=z==="fit"?"var(--fit-height)":Jt(this.options.scale,z=="width"?"%":"rem").join(""),J=this.renderSlides(),oe=this.getSlideListStyles(),te=m("div",{ref:this.slideListRef,style:{transform:oe.transform},className:"slide-list",draggable:!1,tabIndex:0,children:J}),K={};u||(K.onKeyDown=this.handleKeyDown,K.onClickCapture=this.onClickCapture,K.className="slideshow-wrapper",p&&(K.className+=" in-transition"),g&&(K.className+=" pointer-down"),v&&this.isScrub&&(K.className+=" scrubbing"));let U=z==="width"?this.state.tallestSlide.height:this.state.slideHeightPx,se=this.makeMediaItemAttributes(),re=this.mediaItems.map((B,Y)=>{let ie=se[Y].slot,de=B._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},fe="100%",be=de.width,Me=de.height,Ee=null,Fe=this.options.showCaptions&&this.state.captionHeightMap[Y]||0;if(u)fe=null;else if(typeof be=="string"&&be.indexOf("%")>-1)fe=be;else if(z!=="width"){G?Ee=U+-Fe:Ee=U;let qe=Me/be,nt=Ee+-de.mediaItemSize.padSize+-de.mediaSize.padSize,$e=nt*(1/qe),ot=(nt+de.mediaSize.padSize)/($e+de.mediaSize.padSize),Ae=(Ee+-de.mediaItemSize.padSize)*(1/ot);Math.abs(Ae+de.mediaItemSize.padSize-H)<1?fe="100%":fe=`${Math.min(100,100*(Ae+de.mediaItemSize.padSize)/H)}%`}return{captionHeight:Fe,customSlideHeight:Ee,figureWidth:fe,slot:ie}}),Q=Math.min(this.options.speed/2,.1),le=Math.max(Math.floor(H/200),2);this.setMediaElementProperties(se);let j=s&&!this.props["disable-scroll-animation"]?" scroll-transition":"";return m(X,{children:[je(m(X,{children:m(In,{scrollContext:this.props.scrollContext,uses:j,visibility:F,onLazyLoadChange:null,adminMode:n,customElementMode:!0,baseNode:r,children:[this.options.showCaptions?m("style",{id:"gallery-slideshow-captions",ref:this.styleRef,children:`
					::slotted(media-item) {
						--slideshow-caption-transform: ${oe["--slideshow-caption-transform"]||"translateX(0px)"};
						z-index: 9;
					}
				`}):null,m("style",{id:"gallery-slideshow",children:`
* {
	box-sizing: border-box;
}

:host([hidden]) {
	display: none;
}

:host {
	position: relative;
	transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: .2s;
	opacity: ${b||u?1:0};

	width: var(--resize-parent-width, 100%);
	max-width: 100%;
    --navigation-opacity: ${S||E?1:0};
    --slide-height: ${U}px;

	--slideshow-horizontal-align: ${this.options.hAlign==="left"?"flex-start":this.options.hAlign==="right"?"flex-end":"center"};

	--slideshow-caption-align: ${this.options.hAlign==="left"?"left":this.options.hAlign==="right"?"right":"center"};	

	--slideshow-vertical-align: ${this.options.vAlign==="top"?"flex-start":this.options.vAlign==="bottom"?"flex-end":"center"};

    ${u?`
	    display: grid;
		grid-template-columns: repeat(${le}, 1fr);
		column-gap: 2rem;
		row-gap: 2rem;
		align-items: start;
		overflow:hidden;
		--display-slideshow-captions: block;
		--slideshow-caption-opacity: 1;	

	`:`
		--slideshow-caption-transition-duration: ${Q}s;	
		--display-slideshow-captions: ${O?"block":"none"}!important;
	    display: flex;
    	flex-direction: column;
	`}
}

${u?"":re.map((B,Y)=>`
::slotted(media-item[slot="${B.slot}"]){
	--item-width: ${B.figureWidth};
	--slide-height: ${B.customSlideHeight||U}px; 
	--caption-height: ${B.captionHeight}px;
}`).join("")}

${u?`
::slotted(media-item){
	min-width: 0;
	max-width: 100%;
	--item-width: 100%;	
	--resize-parent-width: 100%;
	--slide-height: auto;

    --display-slideshow-captions: block;
    --slideshow-caption-transform: translateX(0px);
    --slideshow-caption-opacity: 1;
    --slideshow-caption-align: left;
    --slideshow-caption-transition-duration: 0;	
}`:`
::slotted(media-item) {
    transition: none!important;
    display:block;
	min-width: ${H}px;
	flex-shrink: 0;
}


	`}

.slide { 
    -webkit-user-select:none;
    user-select:none;
    flex-shrink: 0;
    width: ${H}px;
}

.navigation-wrapper {

	order: 1;
	position: relative;
}

.slideshow-wrapper {
	--resize-parent-width: ${H}px;
	order: 3;
	margin-bottom: ${Math.max(...this.state.captionHeightMap.filter(B=>B!==void 0))}px;
}


.slide-list {
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
	transform:translateX(0);
    height: var(--slide-height, auto);		
    touch-action: manipulation;
    position: relative;
    display: flex;
    flex-wrap: nowrap;
    flex-direction: row;
    justify-content: flex-start;
}

.slide-list:focus {
    outline: 0;
}


/*
slide transition type 
default transition is slide
*/
${this.isSlide?`
.slide {
    visibility:hidden;
	--base-translate: none!important;    
}

.pointer-down .adjacent-slide.slide,
.in-transition .adjacent-slide.slide,
.active-slide.slide {
    visibility: visible;
}

.slideshow-wrapper {
	overflow-y: visible;
	overflow-x: clip;
}


`:""}

${this.isFade?`


.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;

    ${this.state.cancelFadeTransition?`
	  -webkit-transition: none !important;
	  -moz-transition: none !important;
	  -o-transition: none !important;
	  transition: none !important;
    `:`
		transition-timing-function: var(--slideshow-fade-transition-out, cubic-bezier(0.68, 0, 0.68, 0.19));
	    transition-property: opacity;
		transition-duration: ${this.options.speed}s;	
    `}
}

.adjacent-slide.slide {
    display: flex;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
    ${this.state.cancelFadeTransition?"":"transition-timing-function: var(--slideshow-fade-transition-in, cubic-bezier(0.3, 0, 0.4, 1));"}
	opacity: 1!important;
}

	`:""}


${this.isScrub?`
.slide {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    display: flex;
    z-index: 0;
	transition: opacity .08s cubic-bezier(0.5, 0, 1, 0.5);						


    visibility: hidden;
}

.adjacent-slide.slide {
    visibility: visible;
}

.active-slide.slide {
    position: relative;
    z-index: 3;
}

.destination-slide.slide {
	transition: opacity .08s cubic-bezier(0, 0.5, 0.5, 1);
    opacity: 1!important;
}

.slide {
    cursor: ew-resize;
}
	`:""}

/* captions */

.slide {
	--slideshow-caption-opacity: 0;	
}

.in-transition .slide{
    --slideshow-caption-opacity: 0;
}

${this.state.hideCaptionDuringTransition?"":`
.destination-slide.active-slide.slide {
    --slideshow-caption-opacity: 1;
}
`}

${Q==0?`
.destination-slide.slide,
.active-slide.slide {
    --slideshow-caption-opacity: 1;
}	
`:""}

.scrubbing .slide {
    --slideshow-caption-opacity: 0;
}

/** default navigation **/
.navigation-wrapper {

    position: absolute;
    left:0;
    right: 0;
    
    z-index: 2;
    height: var(--slide-height, auto);
    opacity: var(--navigation-opacity, 1);

}


 				`}),n&&o.isEditing&&!ne&&m(gk,{...e,onItemResize:this.onItemResize,inTransition:this.state.inTransition||this.state.isDragging,suppressMutation:this.state.isDragging,gallerySpecificAttributes:s?["disable-scroll-animation"]:[],galleryInstance:r}),!u&&this.options.navigation&&this.len>1&&m("div",{className:"navigation-wrapper",part:`slideshow-nav ${S||E?"navigation-active":""}`,children:[this.state.prevNavigation,this.state.nextNavigation]}),u?m("slot",{name:"thumbnails",onClick:this.onThumbnailClick}):m("div",{part:"slides",...K,onPointerDown:this.onPointerDown,children:te}),m(Br,{values:{slideHeightPx:N,elWidth:"100%"},style:u?{gridColumn:`1 / span ${le}`}:null,onResize:this.onResize})]},"slideshow-host")},"slideshow-fragment"),this.props.baseNode.shadowRoot),this.props.children]})}getNavigation=()=>{let e=Array.from(this.props.baseNode.children),i=e.find(n=>n.getAttribute("part")=="previous-button"),r=e.find(n=>n.getAttribute("part")=="next-button");return i?i=zu(i,null,{onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,ew),key:"previous-button",part:"previous-button"}):i=m("div",{part:"slideshow-nav-previous-button",class:"slideshow-navigation previous-button",onClick:this.prevSlide,onPointerDown:n=>this.startScrubDelta(n,ew),children:m("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),r?r=zu(r,null,{onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Qy),key:"next-button",part:"next-button"}):r=m("div",{part:"slideshow-nav-next-button",class:"slideshow-navigation next-button",onClick:this.nextSlide,onPointerDown:n=>this.startScrubDelta(n,Qy),children:m("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),{prevNavigation:i,nextNavigation:r}};updateOptions(){let{"adjust-for-captions":e=hi.defaults["adjust-for-captions"].value,"limit-by":i=hi.defaults["limit-by"].value,scale:r=hi.defaults.scale.value,autoplay:n=hi.defaults.autoplay.value,"autoplay-delay":o=hi.defaults["autoplay-delay"].value,"transition-speed":s=hi.defaults["transition-speed"].value,"transition-type":u=hi.defaults["transition-type"].value,navigation:c=hi.defaults.navigation.value,"vertical-align":d=hi.defaults["vertical-align"].value,"horizontal-align":p=hi.defaults["horizontal-align"].value,shuffle:g=hi.defaults.shuffle.value,"show-captions":v=hi.defaults["show-captions"].value,"disable-zoom":b=hi.defaults["disable-zoom"].value,"disable-scroll-animation":S=hi.defaults["disable-scroll-animation"].value,"pause-on-hover":_=hi.defaults["pause-on-hover"].value,"mobile-limit-by":E,"mobile-scale":I,"mobile-adjust-for-captions":F,"mobile-autoplay":O,"mobile-autoplay-delay":L,"mobile-transition-speed":z,"mobile-transition-type":G,"mobile-navigation":H,"mobile-vertical-align":N,"mobile-horizontal-align":J,"mobile-shuffle":oe,"mobile-show-captions":te,"mobile-pause-on-hover":K,"auto-height":U=hi.defaults["auto-height"].value,"height-limit":se=hi.defaults["height-limit"].value,"mobile-auto-height":re,"mobile-height-limit":Q}=this.props;this.props["limit-by"]===void 0&&this.props["auto-height"]!==void 0&&(U==="custom"?(i="height",this.props.scale==null&&this.props["height-limit"]!==void 0&&(r=se)):U==="fit"?(i="fit",this.props.scale==null&&(r=100)):(i="width",this.props.scale==null&&(r=100))),u=u=="fade"||u=="scrub"?u:"slide";let le=this.props.isMobile,j={adjustForCaptions:le&&F!==void 0?F:e,shuffle:le&&oe!==void 0?oe:g,autoplay:le&&O!==void 0?O:n,autoPlayDelay:le&&L!==void 0?L:o,speed:le&&z!==void 0?z:s,type:le&&G!==void 0?G:u,navigation:le&&H!==void 0?H:c,disableScrollAnimation:S,disableZoom:b,limitBy:le&&E!==void 0?E:i,scale:le&&I!==void 0?I:r,vAlign:le&&N!==void 0?N:d,hAlign:le&&J!==void 0?J:p,showCaptions:le&&te!==void 0?te:v,pauseOnHover:le&&K!==void 0?K:_};j.speed==0&&j.type==="slide"&&(j.type="fade"),this.options=j,this.isScrub=j.type==="scrub",this.isSlide=j.type==="slide",this.isFade=j.type==="fade";let B=Array.from(this.props.baseNode.children);if(this.mediaItems=Array.from(this.props.baseNode.children).filter(de=>de.tagName=="MEDIA-ITEM"),this.len=this.mediaItems.length,this.len>0){if(this.shuffleList=[],this.options.shuffle){for(let be=0;be<this.len;be++)this.shuffleList.push(be);let de=this.shuffleSeed,fe=0;this.shuffleList=this.shuffleList.sort(be=>(fe++,de=(de+9)%10,(Math.sin(fe+2.4)*5+5)%10>de?-1:1))}}else this.shuffleList=[];let Y=this.isScrub?Math.min(Ose,(this.len-1)/2):Math.min(Nse,(this.len-1)/2),ie=Y;ie=Math.max(1,Math.floor(ie)),Y=Math.max(1,Math.ceil(Y)),this.len==3?(ie=1,Y=1):this.len==2?ie=0:this.len==1&&(ie=0,Y=0),this.lazyloadPrev=ie,this.lazyloadNext=Y}setMediaElementProperties=e=>{if(this.len==0)return;let i=[...this.mediaItems],r=this.state.viewportIntersection.position!=="inside"?this.state.viewportIntersection.position:"outside";i.forEach((n,o)=>{let s=e[o]||{},u=s.visibility||!1;delete s.isAdjacent,delete s.visibility,this.state.hasLoaded?s.itemLoad=null:s.itemLoad=this.onMediaLoad;let c=n._props||{};Io(n,{...c,...s},c,!1,!1),n._setZoomStatus?.(this.options.disableZoom),this.props.usesScrollAnimation&&!this.props["disable-scroll-animation"]&&!this.options.disableScrollAnimation&&n._setScrollTransitionStatus?.(!0),n.assignedSlot?((this.state.lazyloadable||this.state.visible)&&Ot(n,"lazyLoadIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}),this.state.visible&&n.slot.replace("slot-","")==this.state.destinationIndex?Ot(n,"viewportIntersectionChange",{visible:!0,position:"inside"},{bubbles:!1}):Ot(n,"viewportIntersectionChange",{visible:!1,position:r},{bubbles:!1})):Ot(n,"viewportIntersectionChange",{visible:!1,position:r},{bubbles:!1})})};componentDidMount(){Array.from(this.props.baseNode.children).filter(r=>{let n=r.assignedSlot;return r.tagName==="MEDIA-ITEM"&&n!==null&&r.getAttribute("hash")==="placeholder"}).forEach(this.onMediaLoad);let i=this.props.pageInfo.getPageData(this.props.baseNode);i.activeSlide!==void 0&&(this.waitingToGoToSlide=void 0,i.activeSlide>=this.len?this.waitingToGoToSlide=i.activeSlide:this.goToSlide(i.activeSlide)),ne||(ti(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),ti(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),this.props.baseNode.addEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.addEventListener("pointerleave",this.onPointerLeave),window.addEventListener("touchstart",this.onWindowTouchStart))}componentWillUnmount(){this.loadedItems.clear(),clearTimeout(this.scrollRestore),ne||(cancelAnimationFrame(this.updateSlideTransformAnimationFrame),si(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyLoadIntersectionChange),si(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),window.removeEventListener("touchstart",this.onWindowTouchStart),this.props.baseNode.removeEventListener("pointerenter",this.onPointerEnter),this.props.baseNode.removeEventListener("pointerleave",this.onPointerLeave))}onViewportIntersectionChange=e=>{this.setState({visible:e.visible,viewportIntersection:e})};onLazyLoadIntersectionChange=e=>{this.setState(i=>({lazyloadable:i.lazyloadable||e.visible}))};componentDidUpdate(e,i){e.childArray.length!==this.props.childArray.length&&this.waitingToGoToSlide!==void 0&&this.props.childArray.length>=this.len&&(this.goToSlide(this.waitingToGoToSlide),this.waitingToGoToSlide=void 0),e.slideshowLoad!==this.props.slideshowLoad&&this.state.hasLoaded&&this.props.slideshowLoad&&this.props.slideshowLoad(),(i.layoutIncrement!==this.state.layoutIncrement||i.elWidth!==this.state.elWidth||i.slideHeightPx!==this.state.slideHeightPx||i.hasSizes.elWidth!==this.state.hasSizes.elWidth||i.hasSizes.slideHeightPx!==this.state.hasSizes.slideHeightPx)&&this.updateSlideSizes(),i.cancelFadeTransition!==this.state.cancelFadeTransition&&this.state.cancelFadeTransition&&requestAnimationFrame(()=>{this.slideListRef.current&&Array.from(this.slideListRef.current.querySelectorAll(".slide")).forEach(n=>{n.offsetHeight}),this.setState({cancelFadeTransition:!1})});let r=!1;this.props.thumbnails!=e.thumbnails&&(r=!0,this.onPointerUp(),this.onSlideEnd()),this.props["transition-type"]!==e["transition-type"]&&(this.setState(n=>({destinationIndex:n.activeIndex,cancelFadeTransition:!0})),r=!0,this.onPointerUp(),this.onSlideEnd()),(this.props["show-captions"]!==e["show-captions"]||this.props["mobile-show-captions"]!==e["mobile-show-captions"]&&this.props.isMobile)&&(this.options.showCaptions?(this.onSlideEnd(),this.setState(n=>({...n,layoutIncrement:n.layoutIncrement+1}))):this.setState({captionHeightMap:[]})),(e.isMobile!=this.props.isMobile||e.autoplay!=this.props.autoplay||e["mobile-autoplay"]!=this.props["mobile-autoplay"]&&this.props.isMobile)&&(r=!0),i.pointerOver!==this.state.pointerOver&&this.options.pauseOnHover&&(r=!0),i.visible!=this.state.visible&&(r=!0),i.hasLoaded!==this.state.hasLoaded&&(r=!0),r&&clearTimeout(this.autoplayInterval),r&&this.startAutoplay(),this.isScrub&&(!i.isDragging&&this.state.isDragging?document.body.classList.add("slideshow-scrub-dragging"):!this.state.isDragging&&i.isDragging&&document.body.classList.remove("slideshow-scrub-dragging")),e.adminMode!==this.props.adminMode&&(this.state.inTransition&&this.onSlideEnd(),this.setState({showThumbnails:!1})),this.state.activeIndex!==i.activeIndex&&(this.props.pageInfo.setPageData({activeSlide:this.state.activeIndex},this.props.baseNode),this.state.activeIndex==this.state.destinationIndex&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.showCaptionsAfterTransitionTimeout=setTimeout(()=>{this.setState({hideCaptionDuringTransition:!1})},80))),(this.state.inTransition!==i.inTransition||this.state.isPointerDown!==i.isPointerDown||this.state.isDragging!==i.isDragging)&&((this.state.inTransition||this.state.isDragging)&&!this.state.hideCaptionDuringTransition&&(clearTimeout(this.showCaptionsAfterTransitionTimeout),this.setState({hideCaptionDuringTransition:!0})),this.progress=0,cancelAnimationFrame(this.updateSlideTransformAnimationFrame),this.updateSlideTransform())}pause=()=>{this.setState(e=>({inTransition:!1,destinationIndex:e.activeIndex}),()=>{this.onSlideEnd(),clearTimeout(this.autoplayInterval)})};startAutoplay=()=>{this.options.autoplay&&this.state.visible&&this.state.hasLoaded&&!this.options.showThumbnails&&(this.options.pauseOnHover&&!this.state.pointerOver||!this.options.pauseOnHover)&&(clearInterval(this.autoplayInterval),this.autoplayInterval=setTimeout(this.nextSlide,this.options.autoPlayDelay*1e3))};onItemResize=(e,i,r)=>{this.setState(n=>{let o=Array.from(i.children).find(d=>d.getAttribute("slot")==="caption"),s=[...n.captionHeightMap],u=n.captionHeightMap[r],c=0;if(o&&this.options.showCaptions){let d=window.getComputedStyle(o),p=d.getPropertyValue("position");p==="fixed"||p==="absolute"?c=0:d.getPropertyValue("box-sizing")==="content-box"?(c=parseFloat(d.getPropertyValue("height"))||0,c+=parseFloat(d.getPropertyValue("margin-top"))||0,c+=parseFloat(d.getPropertyValue("margin-bottom"))||0,c+=parseFloat(d.getPropertyValue("padding-top"))||0,c+=parseFloat(d.getPropertyValue("padding-bottom"))||0,c+=parseFloat(d.getPropertyValue("border-top"))||0,c+=parseFloat(d.getPropertyValue("border-bottom"))||0):(c=parseFloat(d.getPropertyValue("height"))||0,c+=parseFloat(d.getPropertyValue("margin-top"))||0,c+=parseFloat(d.getPropertyValue("margin-bottom"))||0)}else c=0;return c!==u?(s[r]=c,{captionHeightMap:s,layoutIncrement:n.layoutIncrement+1}):{layoutIncrement:n.layoutIncrement+1}})};updateSlideSizes=()=>{if(this.len==0)return;let{hasSizes:e}=this.state,{elWidth:i}=this.state;!e.elWidth&&this.cachedElWidth&&(i=this.cachedElWidth);let r=this.mediaItems.map((s,u)=>{let c=s._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},d=c.width,p=c.height,g=p;if(typeof d=="string"&&d.indexOf("%")>-1)g=parseFloat(p)+c.mediaItemSize.padSize+c.mediaSize.padSize||150+c.mediaItemSize.padSize+c.mediaSize.padSize;else{let v=p/d;if(c.mediaSize.padSize>0){let b=((i-c.mediaSize.padSize)*v+c.mediaSize.padSize)/i;g=(i-c.mediaItemSize.padSize)*b+c.mediaItemSize.padSize}else g=(i-c.mediaItemSize.padSize)*v+c.mediaItemSize.padSize}return g}),n=Nk.default.maxBy(r,s=>s||0)||0,o={index:r.indexOf(n),height:n};this.setState({tallestSlide:o})};onResize=(e,i)=>{this.setState(r=>({hasSizes:{...r.hasSizes,[e]:!0},[e]:i}))};handleKeyDown=e=>{switch(e.keyCode){case 39:e.preventDefault(),this.nextSlide();break;case 37:e.preventDefault(),this.prevSlide();break}};onPointerEnter=e=>{this.setState({pointerOver:!0})};onPointerLeave=e=>{this.setState({pointerOver:!1})};scrubAnimate=()=>{let{elWidth:e}=this.state,i=Mk===0?1/this.len:Mk,r=this.pointerX;if(this.state.isPointerDown){this.scrubCounter=0;let o=this.lastPointerX-this.pointerX;this.pointerFrameDeltaX!=0&&(this.lastPointerFrameDeltaX=this.pointerFrameDeltaX),this.pointerFrameDeltaX=o,this.lastPointerFrameDeltaX>0&&this.pointerFrameDeltaX<0?this.firstPointerX=this.pointerX:this.lastPointerFrameDeltaX<0&&this.pointerFrameDeltaX>0&&(this.firstPointerX=this.pointerX)}else this.state.scrubStatus===ew?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+-Rk):this.state.scrubStatus===Qy?(this.scrubCounter=0,this.pointerFrameDeltaX=this.pointerFrameDeltaX+Rk):this.state.scrubStatus===rl&&(this.pointerFrameDeltaX<0?this.pointerFrameDeltaX=Math.min(0,this.pointerFrameDeltaX+kk):this.pointerFrameDeltaX=Math.max(0,this.pointerFrameDeltaX+-kk));if(Math.abs(this.pointerFrameDeltaX)>Jy*i*e&&(this.pointerFrameDeltaX>0?this.pointerFrameDeltaX=Jy*i*e:this.pointerFrameDeltaX=-(Jy*i)*e),this.state.isPointerDown){let o=this.lastPointerX-this.pointerX,s=this.lastPointerX-(this.lastPointerX+this.pointerFrameDeltaX);this.firstPointerX=this.firstPointerX-(o-s)}else this.pointerX=this.lastPointerX+this.pointerFrameDeltaX,r=this.pointerX;if(this.lastPointerX=this.pointerX,this.xDrag=r-this.firstPointerX,Math.abs(this.xDrag/e)>i&&this.len>1){let o=this.xDrag>0?(this.state.activeIndex+1)%this.len:(this.state.activeIndex+-1+this.len)%this.len;this.setState({destinationIndex:o,activeIndex:o}),this.xDrag=9e9,this.scrubCounter=0,this.firstPointerX=this.pointerX}clearTimeout(this.autoplayInterval),this.state.scrubStatus==rl&&this.scrubCounter>=30&&!this.state.isPointerDown?(this.setState({scrubAnimating:!1}),this.scrubCounter=0,this.options.autoplay&&(this.autoplayInterval=setTimeout(this.nextSlide,Math.max(100,this.options.autoPlayDelay*1e3-1e3)))):(this.scrubCounter++,this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate))};startScrubDelta=(e,i)=>{if(e){if(e.button==2)return;e.preventDefault()}!this.isScrub||this.len<2||(this.setState({scrubStatus:i}),this.scrubCounter=0,this.firstPointerX=this.lastPointerX=this.pointerX=0,this.lastPointerFrameDeltaX=this.pointerFrameDeltaX=0,this.xDrag=0,this.setState({scrubAnimating:!0}),cancelAnimationFrame(this.scrubAnimationRequest),this.scrubAnimationRequest=requestAnimationFrame(this.scrubAnimate),window.addEventListener("pointerup",this.onScrubPointerUp),window.addEventListener("pointercancel",this.onScrubPointerUp))};onScrubPointerUp=e=>{this.setState({scrubStatus:rl}),window.removeEventListener("pointerup",this.onScrubPointerUp),window.removeEventListener("pointercancel",this.onScrubPointerUp)};onClickCapture=e=>{this.cancelClick&&e.preventDefault()};onPointerDown=e=>{e.defaultPrevented||e.target.closest(".caption")||!this.slideListRef.current||e.button==2||(this.cancelClick=!1,clearTimeout(this.autoplayInterval),this.firstPointerX=this.lastPointerX=this.pointerX=e.clientX,this.pointerFrameDeltaX=0,this.xDrag=0,this.initialXTransform=this.isSlide?this.xTransform:0,this.setState(i=>({isPointerDown:!0,initialActiveIndex:i.activeIndex})),window.cancelAnimationFrame(this.scrubAnimationRequest),this.isScrub&&(this.scrubAnimationRequest=window.requestAnimationFrame(this.scrubAnimate)),window.addEventListener("pointermove",this.onWindowPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp))};getSlideListStyles=()=>{let e="translateX(0)",i="translateX(0)";return this.isSlide&&(e=`translateX(${Math.round((this.state.elWidth*(-1+(1-this.lazyloadPrev))+this.xTransform)*2)/2}px)`,i=`translateX(${-Math.round(this.xTransform*2)/2}px)`),{"--slideshow-caption-transform":i,transform:e}};updateSlideTransform=e=>{let{destinationIndex:i,activeIndex:r,elWidth:n}=this.state,o="";if(this.progress===void 0&&(this.progress=0),this.isSlide&&(this.state.inTransition||this.state.isPointerDown||this.state.isDragging)){o="transform";let u=this.xDrag+this.initialXTransform,c=0,d=u,p=n;i>r?p=-n:i<r?p=n:p=0;let g=0;if((!e||e==0)&&(e=0,this.lastTimestamp=0,g=0),this.lastTimestamp==0&&(this.lastTimestamp=e||0),g=e-this.lastTimestamp,this.lastTimestamp=e,this.state.isDragging||this.state.isPointerDown){if(this.state.isDragging){this.dragPxPerSecond===void 0&&(this.dragPxPerSecond=0),this.lastDragX===void 0&&(this.lastDragX=this.pointerX);let v=(this.pointerX-this.lastDragX)*g;v!=0&&(v>0&&this.dragPxPerSecond>0?v<this.dragPxPerSecond&&(v=this.dragPxPerSecond*.95+v*.05):v<0&this.dragPxPerSecond<0&&v>this.dragPxPerSecond&&(v=this.dragPxPerSecond*.95+v*.05),this.dragPxPerSecond=v),this.lastDragX=this.pointerX}this.progress=0}else{if(this.state.isPointerDown||(this.progress=this.progress+g),this.dragPxPerSecond!==void 0&&this.dragPxPerSecond!==0){this.dragPxPerSecond<0?this.dragPxPerSecond=Math.min(-800,this.dragPxPerSecond):this.dragPxPerSecond=Math.max(800,this.dragPxPerSecond);let v=n/Math.abs(this.dragPxPerSecond);c=rv(this.progress/(Math.min(v,this.options.speed)*1e3))}else c=nv(this.progress/(this.options.speed*1e3));u=c*p+(1-c)*d}u=Math.min(Math.max(-n,u),n),this.xTransform=u,c>=1&&!(this.state.isPointerDown||this.state.isDragging)?(this.dragPxPerSecond=void 0,this.lastDragX=void 0,this.onSlideEnd()):this.updateSlideTransformAnimationFrame=requestAnimationFrame(this.updateSlideTransform)}else this.isScrub?(this.xTransform=0,this.progress=0):this.isFade&&(this.xTransform=0,this.progress=0);let s=this.getSlideListStyles();this.slideListRef.current&&s.transform!==this.slideListRef.current.style.transform&&(this.slideListRef.current.style.transform=s.transform,this.styleRef.current&&(this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",s["--slideshow-caption-transform"]||"translateX(0px)"),mo()&&Array.from(this.props.baseNode.children).forEach(u=>{u.nodeName==="MEDIA-ITEM"&&u.assignedSlot&&u._forceRedraw?.()})),this.slideListRef.current.style.willChange=o)};onPointerUp=e=>{window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onWindowPointerMove),clearTimeout(this.autoplayInterval),cancelAnimationFrame(this.scrubPointerAnimationRequest);let i=!1,r=!1,n=!1;if(e){let u=Array.from(e.composedPath()).some(c=>c.getAttribute?.("part")?.includes("media"));if(u&&e.target.tagName==="MEDIA-ITEM"&&e.target.getAttribute("browser-default")=="true"){let c=e.target.getFileType?.()??"";(c.startsWith("vimeo")||c.startsWith("youtube")||c=="video")&&(n=!0)}e.target?.closest("a, [href]")&&(i=!0),e.target?.closest("media-item.zoomable")&&u&&(r=!0),!i&&!r&&e?.preventDefault()}e?.pointerType==="touch"&&!i&&e.type!=="pointercancel"&&e.target.nodeName==="MEDIA-ITEM"&&e.target?.shadowRoot?.querySelector(".sizing-frame")?.click();let o=!1,s=!1;this.setState(u=>{let{elWidth:c,scrubStatus:d,isPointerDown:p,isDragging:g,inTransition:v,finishingTransition:b,scrubAnimating:S,activeIndex:_,destinationIndex:E}=u;return!u.isDragging&&(i||r||n)?o=!1:this.isScrub?(v=!1,b=!1,u.isDragging?S=!0:Math.abs(this.xDrag)<8&&(S=!1,o=!0)):this.isSlide&&this.options.speed!=0?u.isDragging?(b=!0,v=!0,o=!1):u.inTransition||u.finishingTransition?(o=!1,b=!0,v=!0):(o=!0,b=!1,v=!1):this.isFade&&this.options.speed!=0?u.isDragging?o=!1:o=!0:this.options.speed==0&&(u.isDragging?(v=!1,o=!1):(v=!1,o=!0),_=E),o&&e&&(this.cancelClick=!0),{elWidth:c,scrubStatus:rl,isPointerDown:!1,isDragging:!1,inTransition:v,destinationIndex:E,activeIndex:_,scrubAnimating:S}},()=>{this.isFade&&s&&this.setState({cancelFadeTransition:!0}),o&&(this.onSlideEnd(),this.nextSlide())})};onWindowTouchStart=e=>{if(e.target.closest("gallery-slideshow")!==this.props.baseNode){if(e.target.hasAttribute("href")){this.pause();let i=()=>{document.body.contains(this.props.baseNode)&&this.startAutoplay(),window.removeEventListener("touchend",i)};window.addEventListener("touchend",i)}this.setState({pointerOver:!1})}};onWindowPointerMove=e=>{this.pointerX=e.clientX,this.xDrag=this.pointerX-this.firstPointerX,this.setState(i=>{let{activeIndex:r,destinationIndex:n,isDragging:o,initialActiveIndex:s}=i,u=Math.abs(this.xDrag/i.elWidth),c=i.elWidth*(-2+(1-this.lazyloadNext)),d=i.elWidth*(1-this.lazyloadPrev);if(!i.isDragging&&i.isPointerDown&&Math.abs(this.xDrag)>Rse&&(o=!0,this.isSlide&&i.inTransition&&this.len>1&&(i.destinationIndex>i.activeIndex&&this.xDrag<0?(s++,r++,n++,this.xTransform=this.xTransform+i.elWidth,this.initialXTransform=this.initialXTransform+i.elWidth):i.destinationIndex<i.activeIndex&&this.xDrag>0&&(s--,r--,n--,this.xTransform=this.xTransform-i.elWidth,this.initialXTransform=this.initialXTransform-i.elWidth),s=(r+this.len*3)%this.len,r=(r+this.len*3)%this.len,n=(n+this.len*3)%this.len),this.cancelClick=!0),o){let p=this.xDrag<0?r+1:r-1;u>kse&&this.len>1?(Math.abs(p-i.initialActiveIndex)<2||this.isScrub)&&(n=p):this.isScrub||(n=i.initialActiveIndex),n<-1&&(n=n+this.len)}if(i.activeIndex!==r||i.destinationIndex!==n||i.isDragging!==o||i.initialActiveIndex!==s)return{...i,activeIndex:r,destinationIndex:n,initialActiveIndex:s,isDragging:o};{let p=this.getSlideListStyles();return this.slideListRef.current&&(this.slideListRef.current.style.transform=p.transform,this.styleRef.current&&this.styleRef.current.sheet?.cssRules?.[0]?.style.setProperty("--slideshow-caption-transform",p["--slideshow-caption-transform"]||"translateX(0px)")),null}})};nextSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(i=>{let r={...i},n=i.activeIndex+1;return r.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(r.destinationIndex=n,r.scrubStatus=rl):r.destinationIndex=n,this.xDrag=0,r}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};prevSlide=e=>{if(e){if(e.defaultPrevented||e.button==2)return;e.stopPropagation(),e.preventDefault()}if(!(this.len<2)){if(this.state.inTransition){this.onSlideEnd();return}cancelAnimationFrame(this.scrubAnimate),this.setState(i=>{let r={...i},n=i.activeIndex-1;return n<-1&&(n=n+this.len),r.inTransition=!(this.isScrub||this.options.speed==0),this.xTransform=0,this.initialXTransform=0,this.isScrub?(r.destinationIndex=n,r.scrubStatus=rl):r.destinationIndex=n,this.xDrag=0,r}),(this.options.speed==0||this.isScrub)&&this.onSlideEnd()}};onThumbnailClick=e=>{if(this.props.adminMode)return;e.preventDefault(),e.stopPropagation();let i=e?.target?.closest?.("media-item")||null;if(i){let r=Array.from(this.props.baseNode.children).indexOf(i);this.setState({destinationIndex:r,activeIndex:r},this.hideThumbnails)}};onSlideEnd=()=>{clearTimeout(this.autoplayInterval),this.isFade&&this.slideListRef.current&&this.state.inTransition&&this.setState({cancelFadeTransition:!0}),this.setState(e=>{this.xTransform=0;let i=(e.destinationIndex+this.len+this.len+this.len)%this.len;return{...e,activeIndex:i,destinationIndex:i,inTransition:!1}},()=>{if(this.isSlide&&this.slideListRef.current&&(this.slideListRef.current.style.willChange=""),this.props.afterSlideChange){let i=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;this.props.afterSlideChange(this.state.activeIndex,i)}}),this.startAutoplay()};onSlideOpacityTransitionStart=(e,i)=>{e.propertyName==="opacity"&&i==0&&e.target.classList.contains("slide")};onSlideOpacityTransitionEnd=(e,i)=>{e.propertyName==="opacity"&&i==0&&e.target.classList.contains("slide")&&this.onSlideEnd()};getWrapAroundDistanceFromIndex=(e,i,r)=>{let n=r*.5,o=n-Math.abs((e+-i)%(2*n)-n);return o<-n&&o<0&&(o=o+r),o};makeMediaItemAttributes=()=>{if(this.len==0)return;let{showThumbnails:e,elWidth:i,slideHeightPx:r,activeIndex:n,actualCardSize:o,destinationIndex:s}=this.state,{shuffle:u,limitBy:c,scale:d,adjustForCaptions:p}=this.options,g=u&&!e,v=[];for(let b=0;b<this.len;b++){let S=(b+this.len)%this.len,_=S;g&&(_=this.shuffleList[S]);let E=`slot-${_}`,I=Math.abs(this.getWrapAroundDistanceFromIndex((_+this.len)%this.len,n,this.len))<3,F={itemDragStart:this.onDragStart,itemResize:(O,L)=>{this.onItemResize(O,L,_)},drag:!1,rotation:"0",scale:"100","limit-by":"width",isAdjacent:I,visibility:n==S,slot:e?"thumbnails":E};v.push(F)}return v};onDragStart=e=>{this.state.showThumbnails||(e.preventDefault(),e.stopPropagation())};onMediaLoad=e=>{let i=Array.from(this.props.baseNode.children).filter(n=>{let o=n.assignedSlot;return n.tagName==="MEDIA-ITEM"&&o!==null});this.loadedItems.has(e)||this.loadedItems.add(e);var r=this.isFade?Math.min(i.length,3):i.length;this.loadedItems.size>=r&&!this.state.hasLoaded&&(this.setState({hasLoaded:!0}),setTimeout(()=>{this.setState({initialShowNavigation:!1})},this.props?.["navigation-hide-delay"]*1e3||1500),this.props.slideshowLoad&&this.props.slideshowLoad())};renderSlides=()=>{let{elWidth:e,destinationIndex:i,activeIndex:r,inTransition:n,showThumbnails:o}=this.state,{xDrag:s,initialXTransform:u}=this,c=[],p=(u%e+s>0||i<r)&&this.isSlide&&this.len==2;for(let g=-this.lazyloadPrev;g<this.lazyloadNext+1;g++){let v=g;p&&(v=v+-1);let b=(v+r+this.len*2)%this.len,S="slot-"+b,_=!1,E=!1,I={};I.className=`slide ${this.options.type}-transition`,(i+this.len)%this.len==b&&(E=!0,I.className+=" destination-slide"),(r+this.len)%this.len==b&&(_=!0,I.className+=" active-slide"),I.part="slide",I.style={},o||(I.style={width:`${e}px`,transform:p?"translateX("+-e+"px)":null}),this.isFade&&(I.onTransitionStart=F=>{this.onSlideOpacityTransitionStart(F,v)},I.onTransitionEnd=F=>{this.onSlideOpacityTransitionEnd(F,v)}),v==-1&&(I.part+=" "+this.options.type+"-slide-previous"),v==1&&(I.part+=" "+this.options.type+"-slide-next"),v>=-1&&v<=1?(I.className+=" adjacent-slide",I.part+=" "+this.options.type+"-slide-adjacent"):I.className+=" non-adjacent-slide",I.slot=S,c.push(Tt("div",{...I,key:"slot_"+S},m("slot",{name:S})))}return c};goToSlide=e=>{e=e%this.len||0,!(isNaN(e)||this.state.destinationIndex===e)&&this.setState({showThumbnails:!1,destinationIndex:e,activeIndex:e,inTransition:!1},()=>{this.updateSlideTransform()})};getActiveSlide=()=>{let i=this.props.baseNode.shadowRoot?.querySelector(".active-slide slot")?.assignedElements()?.[0]||null;return[this.state.activeIndex,i]};showThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;this.setState({showThumbnails:!0,inTransition:!1},()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("show-thumbnails",{composed:!0,bubbles:!1}))})};hideThumbnails=()=>{let e=this.props.scrollContext.getScrollPosition().y;if(window.getSelection().rangeCount>0){var r=window.getSelection()?.getRangeAt?.(0)?.intersectsNode(this.props.baseNode);r&&window.getSelection()?.removeAllRanges()}this.initialXTransform=0,this.xTransform=0,this.setState(n=>({destinationIndex:n.activeIndex,showThumbnails:!1,inTransition:!1,finishingTransition:!1}),()=>{this.scrollRestore=setTimeout(()=>{this.props.scrollContext.updateScrollPosition({x:null,y:e})},60),this.props.baseNode.dispatchEvent(new CustomEvent("hide-thumbnails",{composed:!0,bubbles:!1}))})}};Xm.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0};Dse=Nt(To(De((t,e)=>({isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,usesScrollAnimation:t.siteDesign.images.scroll_animation}))(Xm)));Zt(Dse,"gallery-slideshow",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","slideshowLoad","afterSlideChange","thumbnails","transition-type","autoplay","autoplay-delay","transition-speed","navigation","shuffle","height-limit","auto-height","vertical-align","horizontal-align","adjust-for-captions","show-captions","pause-on-hover","disable-scroll-animation","mobile-adjust-for-captions","mobile-thumbnails","mobile-transition-type","mobile-autoplay","mobile-autoplay-delay","mobile-transition-speed","mobile-navigation","mobile-shuffle","mobile-height-limit","mobile-auto-height","mobile-vertical-align","mobile-horizontal-align","mobile-show-captions","mobile-pause-on-hover"])});var Ok,tw,iw,Dk,Lk=T(()=>{Pe();Se();Ok=ce(ve(),1);Jm();Xa();ht();_i();jm();Re();Oi();Mr();W();tw={hash:"F1332270929626196865795426877515",id:1234,name:"scape.jpg",width:4e3,height:2250,file_type:"jpg",mime_type:"image/jpg",is_image:!0,is_video:!1,is_url:!1},iw=class extends ae{constructor(e){super(e),this.state={isMobile:Qe.data.mobile.active,loaded:!1,showNavigation:!0,navigationContainer:null,backdropShadowRoot:null,navigationElement:null},this.containerRef=me(),this.wallpaperRef=me(),this.slideshowRef=me(),this.navigationRef=me()}getSettings=()=>{let e={};for(let[i,r]of Object.entries(Vd.default.defaults))this.props.settings?.hasOwnProperty(i)?e[i]=this.props.settings[i]:e[i]=r.value;return e};render(){let{showNavigation:e,navigationContainer:i,isMobile:r}=this.state,{modelArray:n,singleModel:o,visibility:s,wrapperDimensions:u}=this.props,c=this.getSettings(),d=Jt(c.margin,"%"),p="";d[1]==="%"?(d[0]=Math.min(this.props.dimensions.width,this.props.dimensions.height)*parseFloat(d[0])*.01,d[1]="px"):d[1].includes("rem")&&r&&(d[0]="calc( var(--mobile-padding-offset, 1) * "+d[0]+"rem )",d[1]="");let g;d[1]==="px"?g=this.props.dimensions.height+.5-d[0]*2+"px":d[0]?.indexOf?.("calc(")>-1?g=`calc( ${this.props.dimensions.height+.5}px - ( 2 *  ( ${d[0].replace("calc(","")} ) )`:g=`calc( ${this.props.dimensions.height+.5}px - ${d[0]*2+d[1]} )`;let v=c["image-fit"]=="fit",b={autoplay:c.autoplay,"transition-speed":c["transition-speed"],"transition-type":c["transition-type"],"autoplay-delay":c["autoplay-delay"],"pause-on-hover":!1,"limit-by":"height",shuffle:c.shuffle,navigation:!1,scale:g,"show-captions":!1,slideshowLoad:this.onFirstLoad,afterSlideChange:this.onAfterSlideChange,"disable-scroll-animation":!0},S=this.props.settings.alignments||{},_="";for(let[F,O]of Object.entries(S))_+=` media-item[hash="${F}"] { --position-image: ${O.x}% ${O.y}% }`;let E=null,I=null;return n.length>0&&(I=c.navigation&&c["cycle-images"]&&n.length>1?m(X,{children:[m("div",{className:`backdrop ${this.props.settings.clipScroll?"clip":""}`,children:m("div",{className:"wallpaper-slideshow",ref:this.navigationRef,children:this.state.navigationElement?je(m(X,{children:[m("style",{children:`
:host {
	width: ${this.props.dimensions.width}px;
}

[part="slideshow-nav"] {
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none; 

    pointer-events: none;
    position: absolute;
    inset: 0;
    z-index: 1001;
    

    opacity: ${this.state.loaded&&e?"1":"0"};

    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
}


							`}),m("div",{part:"slideshow-nav",children:[m("div",{part:"slideshow-nav-previous-button",onClick:this.prevSlide,children:m("svg",{part:"slideshow-nav-prev",class:"left-arrow",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})}),m("div",{part:"slideshow-nav-next-button",onClick:this.nextSlide,children:m("svg",{part:"slideshow-nav-next",class:"next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",class:"arrow",d:"M22.3,28l-10-10l10-10"})]})})]})]}),this.state.navigationElement.shadowRoot):null})}),m("div",{className:"page-layout",children:m("div",{className:"page-content"})})]}):null,E=c["cycle-images"]&&n.length>1?m("gallery-slideshow",{...b,className:"image-container multiple-item",ref:this.slideshowRef,children:n.map((F,O)=>m("media-item",{"image-fit":v?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:F.hash,muted:"true",autoplay:F.is_video||F.is_url,loop:!0,part:"media-item"},"slide-"+O))}):m("div",{className:"image-container single-item",children:m("media-item",{"image-fit":v?"fit":"fill","disable-zoom":!0,"disable-scroll-animation":!0,hash:o?.hash||"placeholder",model:o,part:"media-item",muted:"true",autoplay:o.is_video,loop:"true","force-visible":this.props.visibility.visible,itemLoad:this.onFirstLoad,"limit-by":v?"height":"width",scale:v?g:"100%"})})),m("div",{className:"wallpaper",ref:this.wallpaperRef,children:this.state.backdropShadowRoot&&je(m(X,{children:[m("style",{children:`:host {
						background-color: ${c["bg-color"]||"transparent"};
					    position: absolute;
					    inset: 0;
					}

					gallery-slideshow media-item figcaption.caption {
					    display: none!important;
					}

					gallery-slideshow media-item::part(sizing-frame) {
					    margin: auto 0;
					    flex-grow: 0;
					}

					gallery-slideshow media-item::part(frame) {
					    display: flex;
					    flex-wrap: wrap;
					    width: ${v?"var(--item-width)":"100%"}; 
					    height: var(--slide-height);
					    align-content: center;
					    align-self: center;
					}					

					.inner {
					    position: absolute;
					    inset: ${d.join("")};
					}

					.image-container {
						opacity: ${c.opacity};
						inset: 0;
					    width: 100%;
					    height: 100%;
					    position: absolute;
					    text-align: center;
					    z-index: 2;
					}

					.image-container.single-item {
						display: flex;
						align-content: center;
						justify-content: center;
						position: absolute; 
						margin: auto;
						inset: 0;
					}

					.image-container.single-item media-item {
						margin: auto;
						max-width: auto;
					}

					.image-container.single-item media-item::part(figure){
						height: 100%;
					}				

					gallery-slideshow, media-item {
						transform: translateX(0)!important;
					}

			

					${v?`


						`:`			

						media-item::part(sizing-frame),
						media-item::part(frame) {
						    margin: 0;
						    width: 100%;
						    height: ${g};
						    pointer-events:none;
						    display: block;
						    padding: 0;
						}		

						media-item::part(media),
						media-item::part(video) {
						    object-position: var(--position-image, center center);                  
						    pointer-events: auto;
						    display: block;
						    margin: 0;
						    width: 100%;
						    height: 100%;
						    position: absolute;					    
						    top: 0;
						    left: 0;
						}						
					`}


					${_}`}),I&&i&&je(I,i),m("div",{className:"overlay"}),m("div",{className:"inner",ref:this.containerRef,children:E})]}),this.state.backdropShadowRoot)})}prevSlide=e=>{this.hideNavigation.cancel(),e?.preventDefault(),this.slideshowRef.current?.prevSlide()};nextSlide=e=>{e?.preventDefault(),this.hideNavigation.cancel(),this.slideshowRef.current?.nextSlide()};onPointerMove=e=>{this.state.showNavigation||this.setState({showNavigation:!0}),e&&e.target&&this.state.navigationContainer?.contains(e.target)?this.hideNavigation.cancel():this.hideNavigation()};hideNavigation=Ok.default.debounce(()=>{this.setState({showNavigation:!1})},1500);onMobileChange=e=>{this.setState({isMobile:e})};renderNavigation(){if(!this.props.backdropRef.current)return;if(this.props.modelArray.length>1&&this.props.settings["cycle-images"]&&!this.state.navigationContainer&&this.props.settings.navigation){let i=document.createElement("div");i.classList.add("wallpaper-navigation"),this.props.backdropRef.current.closest(".page").appendChild(i),this.setState({navigationContainer:i})}else this.state.navigationContainer&&this.state.navigationContainer.remove(),this.setState({navigationContainer:null,navigationElement:null})}componentDidMount(){Qe.on("mobile-change",this.onMobileChange),this.wallpaperRef.current&&!this.wallpaperRef.current.shadowRoot&&this.wallpaperRef.current.attachShadow({mode:"open"}),this.setState({backdropShadowRoot:this.wallpaperRef.current?.shadowRoot}),this.renderNavigation(),window.addEventListener("pointermove",this.onPointerMove),setTimeout(()=>{this.setMediaElementProperties()},100)}componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange),this.hideNavigation.cancel(),this.state.navigationContainer&&this.state.navigationContainer.remove(),window.removeEventListener("pointermove",this.onPointerMove)}componentDidUpdate(e,i){let r=this.getSettings();if((this.props.settings.navigation!==e.settings.navigation||this.props.settings["cycle-images"]!==e.settings["cycle-images"]||e.modelArray?.length==1&&this.props.modelArray?.length>1)&&(this.renderNavigation(),this.onPointerMove()),this.props.settings.activeImage!==e.settings.activeImage&&this.props.settings["cycle-images"]&&this.slideshowRef.current){let n=this.slideshowRef.current.querySelector('[hash="'+this.props.settings.activeImage+'"]');if(n){let o=Array.from(this.slideshowRef.current.children).indexOf(n);this.slideshowRef.current.goToSlide(o)}}this.props.visibility.visible&&this.containerRef.current&&(e.visibility.visible!==this.props.visibility.visible||this.props.settings["cycle-images"]!==e.settings["cycle-images"])&&this.setMediaElementProperties(),this.navigationRef.current!==this.state.navigationElement&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current}))}setMediaElementProperties=()=>{this.slideshowRef.current&&Ot(this.slideshowRef.current,"viewportIntersectionChange",{visible:this.props.visibility.visible,position:this.props.visibility.position},{bubbles:!1})};onFirstLoad=e=>{if(this.slideshowRef.current){let i=this.slideshowRef.current.getActiveSlide();this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:i[0],mediaItem:i[1]},composed:!1,bubbles:!1}))}this.state.loaded||(this.setState({loaded:!0,showNavigation:!0}),this.props.onLoad&&this.props.onLoad())};onAfterSlideChange=(e,i)=>{this.wallpaperRef.current.dispatchEvent(new CustomEvent("afterSlideChange",{detail:{slideIndex:e,mediaItem:i},composed:!1,bubbles:!1}))}},Dk=De((t,e)=>{let i=Je.getMediaByParent(t)[e.id],r=i.some(s=>s.loading);i=i.filter(s=>!s.loading&&!s.is_deleted&&(s.is_video||s.is_image));let n=null,o=e.settings?.activeImage||null;return o===tw.hash?(n=tw,i.push(n)):(o&&(n=i.find(s=>s.hash==o)),n||(n=i[0])),!n&&!r&&i.length==0&&(n=tw,i.push(n)),e.settings.excluded&&(i=i.filter(s=>e.settings.excluded.indexOf(s.hash)==-1),i.length==1&&e.settings["cycle-images"]&&(n=i[0])),e.settings.order&&i.sort(function(s,u){return e.settings.order.indexOf(s.hash)<e.settings.order.indexOf(u.hash)?-1:1}),{singleModel:n,modelArray:i}})(iw)});var K7e,rw,Fk,zk=T(()=>{Pe();Se();K7e=ce(ve(),1);ht();_i();jm();W();rw=class extends ae{constructor(e){super(e),this.state={loaded:!1,counter:0,shadowRootRef:null},this.gradientElementRef=me()}render(){let{visibility:e,dimensions:i}=this.props,{counter:r}=this.state,n={};for(let[ie,de]of Object.entries($d.default.defaults))this.props.settings?.hasOwnProperty(ie)?n[ie]=this.props.settings[ie]:n[ie]=de.value;let{repeat:o,rotation:s,scale:u,smoothness:c,"animation-speed":d,"pos-x":p,"pos-y":g,"gradient-type":v,"color-one":b,"color-two":S,"color-three":_,"color-one-active":E,"color-two-active":I,"color-three-active":F}=n;b=b||"transparent",S=S||"transparent",_=_||"transparent",g=g+50,p=p+50,u=parseFloat(u)/100,c=parseFloat(c)/100,s=parseInt(s);let O=d>0;d=Math.abs(d/100),d=d*d,d=O?d:-d;let L=d!==0,z=L&&v=="linear"&&o,G=L&&v=="radial"&&o,H=d>0?d*120+(1-d)*2400:Math.abs(d)*120+(1-Math.abs(d))*2400,N=(1-Math.abs(d))*40+Math.abs(d)*4,J=r%H/H;d>0&&(J=1-J);let oe=0,te=G?J*100*u:0,K=[];E&&K.push(b),I&&K.push(S),F&&K.push(_);let U="",se="",re="",Q=0,le=0,j="",B="",Y=[];if(K.length!=0)if(K.length==1)U+=`background-color: ${K[0]}`;else if(K.length==2)if(o){u=(1-c)*u+u*c;let ie=(100/4*1+-c*(100/4))*u-(1-c)*(100/5)*u;Y[0]=0+te,Y[1]=(100/4*1+c*(100/4))*u-(1-c)*(100/5)*u+-ie+te,Y[2]=(100/4*3+-c*(100/4))*u-(1-c)*(100/5)*u+-ie+te,Y[3]=(100/4*3+c*(100/4))*u-(1-c)*(100/5)*u+-ie+te,Y[4]=100*u+te}else Y[0]=0,Y[1]=u*100+-(u*100)*c,Y[2]=u*100+(1-u)*100*c,Y[3]=100;else if(o){u=(1-c)*u+u*c;let ie=(100/6*1+-c*(100/6))*u-(1-c)*(100/7)*u;Y[0]=0+te,Y[1]=(100/6*1+c*(100/6))*u-(1-c)*(100/7)*u+-ie+te,Y[2]=(100/6*3+-c*(100/6))*u-(1-c)*(100/7)*u+-ie+te,Y[3]=(100/6*3+c*(100/6))*u-(1-c)*(100/7)*u+-ie+te,Y[4]=(100/6*5+-c*(100/6))*u-(1-c)*(100/7)*u+-ie+te,Y[5]=(100/6*5+c*(100/6))*u-(1-c)*(100/7)*u+-ie+te,Y[6]=100*u+te}else u=(1-c)*3*u+u*c,Y[0]=100/6*0+c*(100/6)*0,Y[1]=100/6*2+-c*(100/6)*2,Y[2]=100/6*2+c*(100/6)*1,Y[3]=100/6*4+-c*(100/6)*1,Y[4]=100/6*4+c*(100/6)*2,Y[5]=100/6*6+-c*(100/6)*0,Y[0]=Math.max(Y[0]*u+50*(1-u),0),Y[1]=Math.max(Y[1]*u+50*(1-u),0),Y[2]=Y[2]*u+50*(1-u),Y[3]=Y[3]*u+50*(1-u),Y[4]=Math.min(Y[4]*u+50*(1-u),100),Y[5]=Math.min(Y[5]*u+50*(1-u),100);if(K.length>1){U="background-image: ",U+=o?"repeating-":"",U+=v=="linear"?`linear-gradient( ${s+180}deg`:`radial-gradient( circle at ${p}% ${g}%`,se=re="background-position: ";let ie=[];if(K.length==2?o?ie=[0,1,1,0,0]:ie=[0,0,1,1]:o?ie=[0,1,1,2,2,0,0]:ie=[0,0,1,1,2,2],z?Y.forEach((de,fe)=>{let be=K[ie[fe]]||K[0];U+=`, ${be} ${de/2}%`}):Y.forEach((de,fe)=>{let be=K[ie[fe]]||K[0];U+=`, ${be} ${de}%`}),U+=")",z){let de=(s+90)*(Math.PI/180),fe=i.width/i.height,be=Math.cos(de),Me=Math.sin(de),Ee=Y[Y.length-1]+"%";be<0?(re+="0% ",se+=Ee+" "):(re+=Ee+" ",se+="0% "),Me<0?(Me*=-1,re+="0%;",se+=Ee+";"):(re+=Ee+";",se+="0%;")}}return m("div",{className:"gradient",ref:this.gradientElementRef,children:this.state.shadowRoot&&je(m("style",{children:`:host {
						${U};
					    position: absolute;
					    top: 0;
					    left: 0;
					    right: 0;
					    bottom: 0;
					    margin: auto;
					    background-position: 0 0;
					    background-size: ${z?"200% 200%;":"100% 100%;"}
					    ${z&&"will-change: background-position, background-image;"}
					    ${z&&"animation: slideAnimation "+N+"s linear infinite "+(d<0?"reverse":"normal")+";"}
					}

					${z?`
					@keyframes slideAnimation {
						0% {
							${se}
						}

						100% {
							${re}
						}
					}
					`:""}
					`}),this.state.shadowRoot)})}componentDidUpdate(e,i){(this.props.settings.repeat!==e.settings.repeat||this.props["animation-speed"]!==e["animation-speed"])&&(cancelAnimationFrame(this.animFrame),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)))}componentWillUnmount(){cancelAnimationFrame(this.animFrame)}draw=()=>{this.setState(e=>({counter:e.counter+1}),()=>{this.animFrame=requestAnimationFrame(this.draw)})};componentDidMount(){this.gradientElementRef.current&&!this.gradientElementRef.current.shadowRoot&&this.gradientElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.gradientElementRef.current?.shadowRoot}),this.props.settings.repeat&&this.props["animation-speed"]!==0&&(this.animFrame=requestAnimationFrame(this.draw)),this.props.onLoad&&this.props.onLoad()}onFirstLoad=e=>{}},Fk=rw});var r9e,tp,ip,Lse,Fse,nw,ow,Hk,aw=T(()=>{Pe();r9e=ce(ve(),1);Re();Wi();mk();Lk();zk();W();ne||(tp=new IntersectionObserver(function(t){t.forEach(function(e){let i="inside";e.boundingClientRect.top-e.boundingClientRect.height<0&&!e.isIntersecting?i="above":e.boundingClientRect.top>0&&!e.isIntersecting&&(i="below"),e.target.dispatchEvent(new CustomEvent("intersectionChange",{detail:{visible:e.isIntersecting,position:i}}))})},{root:document,rootMargin:window.screen.height+"px 0px",threshold:0}),ip=new ResizeObserver(t=>{t.forEach(e=>{e.target.dispatchEvent(new CustomEvent("contentResize",{detail:{width:e.contentRect.width,height:e.contentRect.height},composed:!0,bubbles:!1}))})}));Lse=["wallpaper","gradient","legacy/ripple","legacy/slitscan","legacy/badtv","legacy/gmaps","legacy/halftone","legacy/kaleidoscope","legacy/morphovision","legacy/parallax","legacy/pixelation","legacy/polygon_engine","legacy/refraction","legacy/ripple","legacy/slitscan","legacy/video","legacy/wave"],Fse={wallpaper:Dk,gradient:Fk},nw={};Lse.forEach(t=>{t.startsWith("legacy")?nw[t]=fk:nw[t]=Fse[t]});ow=class extends ae{constructor(e){super(e),this.backdropRef=me(),this.backdropWrapperRef=me(),this.state={loaded:0,wrapperDimensions:{width:800,height:800},dimensions:{width:800,height:800},visibility:{visible:!1,position:"inside"},innerVisibility:{visible:!1,position:"inside"},wrapperVisibility:{visible:!1,position:"inside"}}}onWrapperIntersectionChange=e=>{this.setState({wrapperVisibility:e.detail})};onIntersectionChange=e=>{this.setState({innerVisibility:e.detail})};onWrapperResize=e=>{this.setState({wrapperDimensions:e.detail})};onResize=e=>{this.setState({dimensions:e.detail})};render(e,i){let{settings:r,id:n}=this.props,o=nw[r.activeBackdrop];if(!o)return r.activeBackdrop!=="none"&&console.warn(`Error: Selected Backdrop mode "${r.activeBackdrop}" not found`),null;let s=r.backdropSettings?.[r.activeBackdrop]||{},u=s.clipScroll==!0;return m("div",{className:`backdrop ${u?"clip":""}`,ref:this.backdropWrapperRef,children:[m("div",{className:`backdrop-contents ${this.state.visibility.visible?"visible":""} ${this.state.visibility.position} ${this.state.loaded>0?"loaded":""}`,ref:this.backdropRef,style:{"--backdrop-width":this.state.wrapperDimensions.width+"px","--backdrop-height":this.state.wrapperDimensions.height+"px"},children:m(o,{...this.props,wrapperDimensions:this.state.wrapperDimensions,backdropRef:this.backdropRef,id:this.props.id,path:r.activeBackdrop,settings:s,dimensions:this.state.dimensions,visibility:this.state.visibility,onLoad:this.onLoad})}),m(xo,{baseNodeRef:this.backdropWrapperRef})]})}onLoad=e=>{let i=this.backdropRef.current.querySelector("[data-backdrop]");i&&i.removeAttribute("style"),e&&(e.preventDefault(),e.stopPropagation()),this.setState(r=>({loaded:r.loaded+1})),setTimeout(()=>{this.fireBackdropLoadComplete()})};fireBackdropLoadComplete=()=>{this.backdropLoadCompleteFired||(this.backdropLoadCompleteFired=!0,window.dispatchEvent(new CustomEvent("backdrop-load-complete",{bubbles:!0,composed:!0,detail:{}})))};componentDidUpdate(e,i){if(this.state.innerVisibility!==i.innerVisibility||this.state.wrapperVisibility!==i.wrapperVisibility){let n=(this.props.settings.backdropSettings?.[this.props.settings.activeBackdrop]||{}).clipScroll==!0;this.setState({visibility:n?{...this.state.wrapperVisibility}:{...this.state.innerVisibility}})}e.settings?.activeBackdrop!==this.props.settings?.activeBackdrop&&this.setState(r=>({loaded:r.loaded-1}))}componentDidMount(){this.backdropRef.current&&(window.dispatchEvent(new CustomEvent("backdrop-load-start",{bubbles:!0,composed:!0,detail:{}})),setTimeout(()=>{this.fireBackdropLoadComplete()},3e3),this.backdropWrapperRef.current.addEventListener("legacy-backdrop-loaded",this.onLoad),this.backdropWrapperRef.current.addEventListener("contentResize",this.onWrapperResize),this.backdropRef.current.addEventListener("contentResize",this.onResize),this.backdropRef.current.addEventListener("intersectionChange",this.onIntersectionChange),this.backdropWrapperRef.current.addEventListener("intersectionChange",this.onWrapperIntersectionChange),ip.observe(this.backdropRef.current),ip.observe(this.backdropWrapperRef.current),tp.observe(this.backdropWrapperRef.current),tp.observe(this.backdropRef.current))}componentWillUnmount(){this.backdropRef.current&&(this.backdropWrapperRef.current.removeEventListener("legacy-backdrop-loaded",this.onLoad),this.backdropWrapperRef.current.removeEventListener("contentResize",this.onWrapperResize),this.backdropRef.current.removeEventListener("contentResize",this.onResize),this.backdropRef.current.removeEventListener("intersectionChange",this.onIntersectionChange),this.backdropWrapperRef.current.addEventListener("intersectionChange",this.onWrapperIntersectionChange),ip.unobserve(this.backdropRef.current),ip.unobserve(this.backdropWrapperRef.current),tp.unobserve(this.backdropWrapperRef.current),tp.unobserve(this.backdropRef.current))}},Hk=ow});var Vr,Le,Qm,Uk=T(()=>{Vr=ce(ve(),1);Re();Le={handledEmbeds:[],embedsIniting:[],embedScriptsCache:{},songKickWidgets:{},embedInitAttempts:new WeakMap,embedChangeObserver:ne?null:new MutationObserver(t=>{t.forEach(e=>{e.removedNodes.length>0&&e.target.children.length===0&&Le.add(e.target);let i=Array.from(e.addedNodes).filter(r=>r?.nodeName==="IFRAME");i.length>0&&Array.from(e.target.querySelectorAll("iframe")).forEach(r=>{i.includes(r)||r.remove()})})}),loadEmbedScript:(t,e)=>{if(Le.embedScriptsCache[t])return Le.embedScriptsCache[t];let i=new Promise(r=>{let n=document.createElement("script");n.setAttribute("src",t),n.onload=r,document.head.appendChild(n)});return Le.embedScriptsCache[t]=i,i},initializeBandsInTown:function(t,e){var i="https://widget.bandsintown.com/main.min.js";e==="v3"&&(i="https://widgetv3.bandsintown.com/main.min.js"),Le.loadEmbedScript(i).then(function(){BIT.widgetInitializer?t():BIT.onReady=t})},findEmbedsIn:function(t){t&&Vr.default.each(t.querySelectorAll("cargo-embed"),Le.add,Le)},add:function(t){if(!(!t||t.nodeType!==Node.ELEMENT_NODE)){var e=t.getAttribute("data-type");if(!(!e||Le.handledEmbeds.includes(t)&&t.children.length>0)){if(Le.embedInitAttempts.get(t)===void 0?Le.embedInitAttempts.set(t,0):Le.embedInitAttempts.set(t,Le.embedInitAttempts.get(t)+1),Le.embedInitAttempts.get(t)>10){console.log("Exceeded max init attempts");return}switch(e){case"tweet":Le.handleTwitterEmbed(t);break;case"twitter-timeline":Le.handleTwitterTimelineEmbed(t);break;case"bandsintown":Le.handleBandsIntownEmbed(t);break;case"songkick":Le.handleSongkickEmbed(t);break;case"opentable":Le.handleOpentableEmbed(t);break;case"typeform":Le.handleTypeFormEmbed(t);break;case"shoprocket":Le.handleShopRocketEmbed(t);break}}}},handleTwitterEmbed:function(t){var e=t.getAttribute("data-id");!e||e===""||Le.embedsIniting.includes(t)||(Le.embedsIniting.push(t),Le.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTweet(e,t).then(function(i){i&&(i.setAttribute("contenteditable","false"),Le.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Le.embedsIniting=Le.embedsIniting.filter(r=>r!==t)})}),Le.handledEmbeds.push(t))},handleTwitterTimelineEmbed:function(t){if(!Le.embedsIniting.includes(t)){Le.embedsIniting.push(t);try{var e=JSON.parse(t.getAttribute("data-source"))}catch{return}typeof e=="number"&&(e=t.getAttribute("data-source"));var i;if(t.hasAttribute("data-options"))try{i=JSON.parse(t.getAttribute("data-options"))}catch{}Le.loadEmbedScript("https://platform.twitter.com/widgets.js").then(()=>{t.innerHTML="",twttr.widgets.createTimeline(e,t,i).then(function(r){r&&(r.setAttribute("contenteditable","false"),Le.embedChangeObserver?.observe(t,{childList:!0,attributes:!0})),Le.embedsIniting=Le.embedsIniting.filter(n=>n!==t)})}),Le.handledEmbeds.push(t)}},handleOpentableEmbed:function(t){if(!t.ownerDocument.contains(t)||Le.embedsIniting.includes(t))return;Le.embedsIniting.push(t);let e=document.createElement("opentable-embed-anchor");e.src=t.getAttribute("data-src"),t.appendChild(e),fetch(t.getAttribute("data-src")).then(i=>i.text()).then(i=>{if(Le.embedsIniting=Le.embedsIniting.filter(r=>r!==t),!e.ownerDocument.contains(e)){Le.handleOpentableEmbed(t);return}e.id=Vr.default.uniqueId("opentable-"),i=i.replaceAll('getElementsByTagName("script")','querySelectorAll("opentable-embed-anchor#'+e.id+'")'),window.eval(i),e.remove(),Le.embedChangeObserver?.observe(t,{childList:!0,attributes:!0}),Le.handledEmbeds.push(t)})},handleBandsIntownEmbed:function(t){Le.initializeBandsInTown(()=>{t.innerHTML="";var e={},i={};Vr.default.each(t.attributes,function(o){if(/^data-/.test(o.name)&&o.name!=="data-type"){var s=o.name.substr(5).replace(/-/g,"_");e[s]=o.value;var u=s.split("_").map(function(c,d){return d>0?c.charAt(0).toUpperCase()+c.slice(1):c}).join("");i[u]=o.value}});var r=document.createElement("a");if(r.setAttribute("id","bit-widget-"+Vr.default.uniqueId()),r.setAttribute("class","bit-widget-initializer"),Vr.default.each(e,function(o,s){r.setAttribute("data-"+s.replace(/_/g,"-"),o)}),t.appendChild(r),Ri){var n=new MutationObserver(function(o){Vr.default.each(o,function(s){s.type=="childList"&&s.addedNodes.forEach(function(u){u&&u.nodeType===Node.ELEMENT_NODE&&(u.setAttribute("contenteditable",!1),u.classList.contains("bit-widget-container")&&(u.style.pointerEvents="none",n.disconnect()))})})});n.observe(t,{childList:!0})}BIT.widgetInitializer.append(r,i),Le.embedChangeObserver?.observe(t,{childList:!0}),Le.handledEmbeds.push(t)},t.getAttribute("data-bit-widget-version"))},handleSongkickEmbed:function(t){if(!Le.embedsIniting.includes(t)){Le.embedsIniting.push(t);var e={};Vr.default.each(t.attributes,function(n){if(/^data-/.test(n.name)&&n.name!=="data-type"){var o=n.name.substr(5).replace(/-/g,"_");e[o]=n.value}});var i=document.createElement("a");i.setAttribute("class","songkick-widget"),i.setAttribute("href","https://www.songkick.com/artists/"+e.id),i.setAttribute("contenteditable","false"),Vr.default.each(e,function(n,o){i.setAttribute("data-"+o.replace(/_/g,"-"),n)}),t.appendChild(i);var r="https://widget-app.songkick.com/injector/"+e.id;Le.songKickWidgets[e.id]===void 0?Le.songKickWidgets[e.id]=0:r=r+"?"+ ++Le.songKickWidgets[e.id],Le.loadEmbedScript(r).then(()=>{Le.embedsIniting=Le.embedsIniting.filter(n=>n!==t),t.children.length===0&&Le.add(t)}),Le.embedChangeObserver?.observe(t,{childList:!0}),Le.handledEmbeds.push(t)}},handleTypeFormEmbed:function(t){Le.embedsIniting.includes(t)||(Le.embedsIniting.push(t),Le.loadEmbedScript("https://embed.typeform.com/next/embed.js").then(()=>{if(t.dataset.embed)t.innerHTML=Vr.default.unescape(t.dataset.embed),window.tf.load();else{let e={};Vr.default.each(t.attributes,function(i){i.name.startsWith("data-tf")&&(e[Vr.default.camelCase(i.name.replace("data-tf",""))]=i.value)}),e.container=t,delete e.iframeProps,t.innerHTML="",window.tf.createWidget(e.widget||e.live,e),t.children[0]?.setAttribute("style",t.getAttribute("data-style")),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},100),setTimeout(()=>{t.children[0]?.setAttribute("style",t.getAttribute("data-style"))},1e3)}Le.embedsIniting=Le.embedsIniting.filter(e=>e!==t)}),Le.embedChangeObserver?.observe(t,{childList:!0}),Le.handledEmbeds.push(t))},handleShopRocketEmbed:function(t){Le.embedsIniting.includes(t)||!t.dataset.embed||(Le.embedsIniting.push(t),Le.loadEmbedScript("https://cdn.shoprocket.io/loader.js").then(()=>{if(Ri){var e=new MutationObserver(function(i){Vr.default.each(i,function(r){r.type=="childList"&&r.addedNodes.forEach(function(n){n&&n.nodeType===Node.ELEMENT_NODE&&(n.setAttribute("contenteditable",!1),n.classList.contains("sr-embed")&&(n.style.pointerEvents="none",e.disconnect()))})})});e.observe(t,{childList:!0})}t.innerHTML=Vr.default.unescape(t.dataset.embed),window.Shoprocket?.init(),Le.embedsIniting=Le.embedsIniting.filter(i=>i!==t)}),Le.embedChangeObserver?.observe(t,{childList:!0}),Le.handledEmbeds.push(t))},remove:function(){}},Qm=Le});var qk,b9e,sw,qu,eg=T(()=>{Pe();qk=ce(Sn(),1);Ua();di();ht();jt();b9e=ce(ve(),1);W();sw=class extends ae{constructor(e){super(e),this.state={error:!1}}render(e){return m(X,{children:[m("style",{children:`
					.pages > .page:only-child,
					.pages :has(.page-password) > .page:only-child {
						min-height: var(--viewport-height);
					}
					
					.pages > .page:only-child .page-content,
					.pages :has(.page-password) > .page:only-child .page-content {
						align-items: center;
					}

					.site-password,
					.page-password {
						text-align: center;
						margin: auto;
						height: 0;
						width: 340px;
						display: table;
					}

					.site-password {
						position: fixed;
						top: 0;
						bottom: 0;
						left: 0;
						right: 0;
					}

					.error {
					    transform: translate(0, 20px);
					    position: absolute;
					    width: 100%;
					    text-align: center;
					    left: 0;
					    color: rgba(0,0,0,0.75);
					    user-select: none;
					}

					.submit-wrapper {
						display: grid;
						grid-template-columns: auto 40px;
						border-radius: 100px;
					    border: 1px solid rgba(0,0,0,0.75);
						grid-gap: 5px;
						background: #fff;
					}

					.button-area {
						position: relative;
						width: 40px;
						justify-content: center;
						align-items: center;
						display: flex;
						cursor: pointer;
					}

					.submit-button {
						display: block;
						width: 36px;
						height: 36px;
						border-radius: 50%;
						background: #000;
						transform-origin: 50% 50%;
						transform: scale(1);
						border: none;
						background-image: url("data:image/svg+xml,%3Csvg width='21' height='19' viewBox='0 0 21 19' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.8438 1.9375L19.3438 9.4375L11.8438 16.9375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M19.3437 9.4375L1.40625 9.4375' stroke='%23fff' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E%0A");
						background-position: 46% 50%;
						background-repeat: no-repeat;
						background-size: 17px 17px;
						pointer-events: auto;
						cursor: pointer;
						margin-right: 1px;
					}

					.submit-button:active {
						opacity: 0.7;
					}


					input[type="password"] {
						border-radius: 100px;
					    border: none;
						padding: 10px 0px 10px 20px;
					    font-size: 14px;
					    font-family: Helvetica;
					    font-size: 18px;
					    font-style: normal;
					    font-weight: 400;
					    line-height: 21px;
					    letter-spacing: -0.004em;
					    text-align: left;
						width: auto;
					}

					input[type="password"]:placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-webkit-input-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]::-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
		            input[type="password"]:-moz-placeholder {
		                color: rgba(0,0,0,0.75);
		            }
	            `}),m("div",{className:this.props.target==="site"?"site-password":"page-password",children:[m("form",{onSubmit:this.submit,class:"submit-wrapper",children:[m("input",{name:"pw",type:"password",placeholder:"Enter password...",autofocus:"true",onKeyDown:this.onKeyDown}),m("div",{className:"button-area",children:m("button",{className:"submit-button",type:"submit"})})]}),this.state.error&&m("span",{class:"error",children:"Invalid password"})]})]})}onKeyDown=e=>{this.state.error&&this.setState({error:!1})};submit=e=>{e.preventDefault();let i;this.props.target==="site"?i=`/sites/${this.props.siteId}/validatepassword`:i=`/pages/${this.props.siteId}/id/${this.props.target}/validatepassword`,qk.default.post(ei+i,{[this.props.target==="site"?"site_password":"password"]:e.target.elements.pw.value}).then(({data:r})=>{if(!r.token){this.setState({error:!0});return}this.setState({error:!1}),this.props.setAuthentication({authenticated:!0,data:{access_token:r.token,id:null}}),this.props.onSucces?.()}).catch(r=>{console.error(r),this.setState({error:!0})})}},qu=De((t,e)=>({siteId:t.site.id}),t=>Pt({setAuthentication:He.setAuthentication},t))(sw)});var lw,Bk,Wk=T(()=>{Pe();Se();la();Di();Mt();Mt();W();lw=class extends ae{constructor(e){super(e),this.state={hover:!1,buttonHovered:!1},this.editPageButtonRef=me(),this.layoutButtonRef=me(),CargoEditor&&Object.keys(CargoEditor||{}).length>0?this.bindEditorEvents():window.addEventListener("CargoEditor-load",this.bindEditorEvents)}editorIsEmpty=(e,i)=>{requestAnimationFrame(()=>{this.setState({showEmpty:this.props.isEditingPage})})};editorHasContent=(e,i)=>{this.setState({showEmpty:!1})};bindEditorEvents=()=>{window.removeEventListener("CargoEditor-load",this.bindEditorEvents),this.CargoEditor=CargoEditor,this.CargoEditor.events.on("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.on("editor-has-content",this.editorHasContent)};componentWillUnmount=()=>{this.CargoEditor&&(this.CargoEditor.events.off("editor-no-content",this.editorIsEmpty),this.CargoEditor.events.off("editor-has-content",this.editorHasContent))};onButtonEnter=()=>{this.setState({hover:!0})};onButtonLeave=()=>{this.setState({hover:!1})};launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.layoutButtonRef.current.getBoundingClientRect(),r={x:i.x+0,y:i.y+-212,left:i.left+0,right:i.right+0,top:i.top+0+-212,bottom:i.top+27+-212,width:i.width,height:i.height};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"layouttemplate",supportsMobile:!0,positionRect:r,closeButton:!1,closeOnAllClickout:!1})};render(e){let i=this.props.isEditingPage,r=this.props.pageIsPin,n=this.state.showEmpty,o=23;return m(pr,{isEditingPage:i,name:"EditPageButton",trackResize:!0,noPointerEvents:!0,buttonHeight:o,buttonMode:"outside",baseNode:this.props.bodycopyRef.current,render:s=>{let{pointerAttention:u,overlayPosition:c,shiftButtonX:d,shifted:p}=s,g=-o,v=-2;return c.y<=o&&(g=Math.max(0,-c.y),v=0,g>c.height&&(v=-2,g=c.height+1)),i&&n||i?null:m(X,{children:[m("div",{className:`in-editor-buttons page${u?" hover button-hover":""} ${p?"shifted":""}`,style:{transform:`translate3d(${v+c.x}px, ${g+c.y}px, 0)`},children:m("div",{className:"pointer-mask",style:{transform:`translateX(${d}px)`},children:m("button",{className:"edit-page text",onMouseDown:b=>{b.button==2||b.metaKey||this.props.editPage(b)},ref:this.editPageButtonRef,children:[m("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 16H6V4H10.9875V8.09705H15V16ZM16 7.64491L11.4226 3H5V17H16V7.64491Z",fill:"black"})}),this.props.pageTitle]})})}),m("div",{className:`editor-overlay editor-outline page-outline${u?" hover button-hover":""}${this.state.showEmpty?" hover":""}`,style:{width:c.width+"px",height:c.height+"px",transform:`translate3d(${c.x}px, ${c.y}px, 0)`}})]})}})}},Bk=lw});function Use(t){return Pt({pageMounted:He.pageMounted,pageUnMounted:He.pageUnMounted,updateFrontendState:He.updateFrontendState,fetchContent:He.fetchContent,fetchCommerceProducts:He.fetchCommerceProducts},t)}var hr,Ja,tg,np,ig,ua,uw,rg,cw,Vk,$k,zse,Hse,rp,dw,ng,qse,Qa,og=T(()=>{Pe();di();ht();jt();hr=ce(ve(),1);_i();Pd();Ni();wo();Wi();el();Oi();aw();Uk();Re();eg();Wk();Ar();js();W();Ja=new WeakMap,tg=new WeakMap,np=new WeakMap,ig=new WeakMap,Vk=null,$k=t=>{t.forEach(function(e){Ja.has(e.target)&&Ja.get(e.target).onAboveViewPort(e)})},zse=hr.default.once(()=>{let t=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),e=document.createElement("style");return t.children[0].appendChild(e),e}),Hse=t=>{let e=zse();return t!==Vk&&(e.innerHTML=t,Vk=t),e},rp=0,dw=0;ne||(window.addEventListener("scroll",t=>{dw=document.scrollingElement.scrollTop},{passive:!0}),ua=new ResizeObserver(function(t){let e={};$k(rg.takeRecords()),t.forEach(function(i){let r=Ja.get(i.target);if(r&&(r.onResize(i.target.getBoundingClientRect()),e[r.props.id]=i.contentRect.height),tg.has(i.target)&&tg.get(i.target).onBodyCopyResize(i.contentRect.width),np.has(i.target)||ig.has(i.target)){var n=window.getComputedStyle(i.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(np.has(i.target)){let u=np.get(i.target);(u.state.pageContentPad.top!==o||u.state.pageContentPad.bottom!==s)&&u.setState({pageContentPad:{top:o,bottom:s}})}else{let u=ig.get(i.target);(u.state.pageLayoutPad.top!==o||u.state.pageLayoutPad.bottom!==s)&&u.setState({pageLayoutPad:{top:o,bottom:s}})}}}),wb(e)}),rg=new IntersectionObserver($k,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),cw=new IntersectionObserver((t,e)=>{t.forEach(function(i){Ja.has(i.target)&&Ja.get(i.target).onViewportBoundaryIntersection(i)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}),uw=new MutationObserver(function(t){hr.default.each(t,function(e){e.type=="childList"&&e.addedNodes.forEach(function(i){i.nodeName==="CARGO-EMBED"&&Qm.add(i)})})}));ng=class extends ae{constructor(e){super(e),this.overlayContentRef=me(),this.bodycopyRef=me(),this.pageContentRef=me(),this.pageRef=me(),this.pageLayoutRef=me(),this.lastBodycopyRef=me(),this.lastPageContentRef=me(),this.lastPageRef=me(),this.lastPageLayoutRef=me(),this.lastHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},windowHeight:null,fullyRender:!0,lastPageContainerHeight:100,overlayContentFromTransformValue:null,overlayContentToTransformValue:null},this.localStyleRef=me()}setOverlayContentTransformValues=()=>{let e=this.overlayContentRef.current?.getBoundingClientRect();if(!e)return;let i=this.pageContentRef.current?.getBoundingClientRect();if(!i)return;let r=0,n=0,o=this.props.overlayOptions?.animateOnOpen?.slideAmount/100,s=this.props.overlayOptions?.animateOnClose?.slideAmount/100;if(this.props.overlayOptions?.animateOnOpen?.speed!==0)switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":r=(i.height+(e.height-i.bottom))*o;break;case"top":r=-i.bottom*o;break;case"right":r=(i.width+(e.width-i.right))*o;break;case"left":r=-i.right*o;break}if(this.props.overlayOptions?.animateOnClose?.speed!==0)switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"bottom":n=(i.height+(e.height-i.bottom))*s;break;case"top":n=-i.bottom*s;break;case"right":n=(i.width+(e.width-i.right))*s;break;case"left":n=-i.right*s;break}if(this.state.overlayContentFromTransformValue!==r&&this.state.overlayContentToTransformValue!==n){this.setState({overlayContentFromTransformValue:r,overlayContentToTransformValue:n});return}if(this.state.overlayContentFromTransformValue!==r){this.setState({overlayContentFromTransformValue:r});return}if(this.state.overlayContentToTransformValue!==n){this.setState({overlayContentToTransformValue:n});return}};setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}let e=["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"];if(!this.localStyleRef.current)return;let i=Hse(this.props.globalStylesheet),r=!1;i.sheet&&hr.default.each(i.sheet.rules,o=>{o?.selectorText===".mobile [id] .page-layout"&&o?.style?.getPropertyValue("padding")==="0px"&&(r=!0)}),r&&e.push(`[id="${this.props.pid}"] .page-layout`);let n=lu(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:e}]);this.setState({mobileOffsetsString:n})};onBodyCopyResize=e=>{e=parseInt(e),this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=e=>{this.setState(i=>i.windowHeight===Qe.data.window.h?null:{windowHeight:Qe.data.window.h})};onResize=e=>{if(e){if(((this.isAboveViewport??e.bottom<1)||this.props.position==="above"&&this.firstResizeOccurred!==!0)&&this.lastHeight!==e.height){rp+=e.height-this.lastHeight;let i=dw-document.scrollingElement.scrollTop;i!==0&&(rp+=i)}this.lastHeight=e.height,this.firstResizeOccurred=!0,rp!==0&&(document.scrollingElement.scrollBy({top:rp,behavior:"instant"}),dw=document.scrollingElement.scrollTop,rp=0)}};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{if(e.rootBounds.height===0)return;let i=e.isIntersecting;(ne||this.props.isPin||this.props.isEditingPage)&&(i=!0),this.setFullRenderState(i)};setFullRenderState=(e,i)=>{if(this.state.fullyRender===e)return;let r={fullyRender:e,renderSparseHeightDiv:!e};e?(r.renderSparseHeightDiv=!0,setTimeout(()=>{this.state.fullyRender&&this.setState({renderSparseHeightDiv:!1})},100)):r.lastPageContainerHeight=this.pageRef.current?.getBoundingClientRect().height||100,this.setState(r,i)};updateAdminState=e=>{this.props.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let i={top:null,bottom:null},r=hr.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return hr.default.keys(r).length>0&&hr.default.each(r,function(n){i[n.location]=n.adjustedHeight}),i};determinePinCSS=()=>{if(ne||this.props.isOverlay||hr.default.isEmpty(this.context.levelData))return;let e=1,i={},r=this.context?.renderedPins&&this.props.isPin,n=this.findPageAdjusteeStatus(this.props.pid);if(i.paddingTop=n.top,i.paddingBottom=n.bottom,r){let o=this.context?.renderedPins[this.props.pid];if(o){let s=o.depth,u=hr.default.keys(this.context.levelData?.levels)?.length+e,c=u-s+e,d=c+this.zIndexLayerPosition(100-o?.pinSort);if(i.zIndex=o.type!=="adjust"?d??null:null,localStorage.getItem("pin_testing")==="true"){let g={old_zIndex:c+this.zIndexLayerPosition(100-o?.sort),new_zIndex:d,pid:this.props.pid,pageList_sort:o?.sort,renderedPageSort:o?.pinSort};console.log(g)}let p=this.context.levelData?.levels[s][o.location];o.type==="overlay"?i[o.location]=p.startingHeight-n[o.location]:o.type==="adjust"&&n[o.location]!==null&&(i[o.location]=p.adjustsSelf?null:p.startingHeight-n[o.location])}}return i["--pin-padding-top"]=(i.paddingTop||0)+"px",i["--pin-padding-bottom"]=(i.paddingBottom||0)+"px",hr.default.isEmpty(i)?null:i};getAdjustOnlyPinStartHeight=(e,i,r)=>{let n=0;return hr.default.each(this.context.renderedPins,(o,s)=>{o.depth===e&&o.location===r&&(r==="top"?o.sort<i:o.sort>i)&&o.type==="adjust"&&(n+=this.context.pageHeights[s])}),n};determinePinClassList(e){if(!e||this.props.isOverlay)return"";let i="";return i+=" pinned pinned-"+e.position,i+=e.fixed?" fixed":e.overlay?" overlay":"",i}editPage=e=>{if(e.preventDefault(),parent.window.Cargo?.Ecommerce?.View?.currentView?.saveButton?.saveEnabled===!0||parent.window.Cargo?.Ecommerce?.View?.currentView?.SaveButton?.saveEnabled===!0){parent.window.dispatchEvent(new CustomEvent("navigate-after-commerce-save",{detail:{pid:this.props.pid}}));return}parent.editorActivationEvent=e,parent.navigateAdmin("/"+this.props.pid),this.updateAdminState({pageTitleBarTransition:!0}),setTimeout(()=>{this.updateAdminState({pageTitleBarTransition:!1})},600)};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}render(){if(!this.props.hasPage||ne&&this.props.access_level!=="public")return null;let e=this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none",i=this.props.isPin&&this.props.pin_options,r=i?this.props.pin_options:null,n=null,o=null,s=this.determinePinCSS(),u=this.determinePinClassList(r),c={};this.props?.local_css?.includes("--page-layout-mix:")&&!this.props?.local_css?.includes("--page-layout-mix: normal")?c["--page-content-backdrop-filter"]="none":c["--page-content-backdrop-filter"]="";let d={},p="";if(this.props.isOverlay===!0){let v="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnOpen?.slideDirection){case"bottom":v=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"top":v=`translate3d(0, ${this.state.overlayContentFromTransformValue}px, 0)`;break;case"right":v=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break;case"left":v=`translate3d(${this.state.overlayContentFromTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnOpen?.scaleAmount){let G=1-Number(this.props.overlayOptions?.animateOnOpen?.scaleAmount)/100;v+=` scale(${G})`}this.props.overlayOptions?.animateOnOpen?.rotateAmount&&(v+=` rotate(${Number(this.props.overlayOptions?.animateOnOpen?.rotateAmount)*-1}deg)`);let b="translate3d(0, 0, 0)";switch(this.props.overlayOptions?.animateOnClose?.slideDirection){case"top":b=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"bottom":b=`translate3d(0, ${this.state.overlayContentToTransformValue}px, 0)`;break;case"left":b=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break;case"right":b=`translate3d(${this.state.overlayContentToTransformValue}px, 0, 0)`;break}if(this.props.overlayOptions?.animateOnClose?.scaleAmount){let G=1-Number(this.props.overlayOptions?.animateOnClose?.scaleAmount)/100*-1;b+=` scale(${G})`}this.props.overlayOptions?.animateOnClose?.rotateAmount&&(b+=` rotate(${this.props.overlayOptions?.animateOnClose?.rotateAmount}deg)`);let S="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":S="inset(0 0 0 100%)";break;case"left":S="inset(0 100% 0 0)";break;case"top":S="inset(0 0 100% 0)";break;case"bottom":S="inset(100% 0 0 0)";break;case"circle":S="circle(0%)";break;case"diamond":S="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":S="inset(100% 100% 100% 100%)";break}let _="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"right":case"left":case"top":case"bottom":_="inset(0 0 0 0)";break;case"circle":_="circle(125%)";break;case"diamond":_="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":_="inset(0 0 0 0)";break}let E="none";switch(this.props.overlayOptions?.animateOnOpen?.wipeShape){case"right":case"left":case"top":case"bottom":E="inset(0 0 0 0)";break;case"circle":E="circle(125%)";break;case"diamond":E="polygon(-50% 50%, 50% -50%, 150% 50%, 50% 150%)";break;case"square":E="inset(0 0 0 0)";break}let I="none";switch(this.props.overlayOptions?.animateOnClose?.wipeShape){case"left":I="inset(0 0 0 100%)";break;case"right":I="inset(0 100% 0 0)";break;case"bottom":I="inset(0 0 100% 0)";break;case"top":I="inset(100% 0 0 0)";break;case"circle":I="circle(0%)";break;case"diamond":I="polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)";break;case"square":I="inset(100% 100% 100% 100%)";break}let F="linear";switch(this.props.overlayOptions?.animateOnOpen?.easing){case"ease-in":F="ease-in";break;case"ease-out":F="ease-out";break;case"ease-in-out":F="ease-in-out";break;case"bounce":F="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":F="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":F="cubic-bezier(0,.8,1,0)";break;case"linear":default:F="linear";break}let O="linear";switch(this.props.overlayOptions?.animateOnClose?.easing){case"ease-in":O="ease-in";break;case"ease-out":O="ease-out";break;case"ease-in-out":O="ease-in-out";break;case"bounce":O="cubic-bezier(.47,1.64,.41,.8)";break;case"elastic":O="cubic-bezier(.2,.69,.41,1.12)";break;case"hesitate":O="cubic-bezier(0,.8,1,0)";break;case"linear":default:O="linear";break}d={"--overlay-open-duration":this.props.overlayOptions?.animateOnOpen?.speed?`${this.props.overlayOptions?.animateOnOpen?.speed}s`:"0s","--overlay-open-from-opacity":this.props.overlayOptions?.animateOnOpen?.fade?0:1,"--overlay-open-from-background-color":this.props.overlayOptions?.animateOnOpen?.fade?"inherit":"transparent","--overlay-open-content-from-transform":v,"--overlay-open-content-from-clip-mask":S,"--overlay-open-content-to-clip-mask":E,"--overlay-close-duration":this.props.overlayOptions?.animateOnClose?.speed?`${this.props.overlayOptions?.animateOnClose?.speed}s`:"0s","--overlay-close-to-opacity":this.props.overlayOptions?.animateOnClose?.fade?0:1,"--overlay-close-to-background-color":this.props.overlayOptions?.animateOnClose?.fade?"inherit":"transparent","--overlay-close-content-to-transform":b,"--overlay-close-content-from-clip-mask":_,"--overlay-close-content-to-clip-mask":I,"--overlay-open-easing":F,"--overlay-close-easing":O,opacity:this.state.overlayContentFromTransformValue!==null?void 0:0,zIndex:999}}if(this.state.fullyRender){let v=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom;s&&(s.paddingTop&&(v+=s.paddingTop),s.paddingBottom&&(v+=s.paddingBottom));let b=Math.max(10,this.state.windowHeight-v),S=null;this.props.access_level==="password"?S=m(qu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?S=this.lockedContent:S=this.lockedContent=this.props.content,this.maxFitHeight=b;let _=m("bodycopy",{style:{"--fit-height":b+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,dangerouslySetInnerHTML:typeof S=="string"?{__html:S}:void 0,children:Uc(S)?S:null});o=m(zf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:m("div",{className:"page-layout",ref:this.pageLayoutRef,children:m("div",{className:`page-content${this.props?.local_css?.includes("--page-content-backdrop-filter")?" has-content-backdrop-filter":""}`,ref:this.pageContentRef,style:c,children:[this.props.adminMode&&this.props.Editor_PageEditorOutlines!==!1&&m(Bk,{bodycopyRef:this.bodycopyRef,pageTitle:this.props.title,pageContent:this.props.content,pageIsPin:this.isPinned,isEditingPage:this.props.isEditingPage,editPage:this.editPage}),m(qm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[m(xo,{portalHost:_}),_]})]})})})}let g=!0;return(r?.fixed||this.props.isOverlay)&&(g=!1),this.state.renderSparseHeightDiv&&(s=s||{},s.height=this.state.lastPageContainerHeight+"px",s.overflow="hidden"),n=m("div",{id:this.props.pid,"page-url":this.props.purl?.toLowerCase(),className:`page${u!==null?u:""}${this.props.stackedPage?" stacked-page":""}${this.props?.local_css?.includes("--page-backdrop-filter")?" has-backdrop-filter":""}`,ref:this.pageRef,style:{...s},editing:this.props.isEditingPage,children:[e&&m(Hk,{id:this.props.pid,settings:this.props.backdrops}),m("a",{id:this.props.purl}),m(hu,{passthrough:g,scrollingElement:this.props.isOverlay?this.overlayContentRef:this.pageContentRef,children:[this.state.renderSparseHeightDiv&&m("div",{style:{height:this.state.lastPageContainerHeight+"px"}}),o]}),m("style",{ref:this.localStyleRef,children:this.props.local_css}),m("style",{id:`mobile-offset-styles-${this.props.pid}`,children:this.state.mobileOffsetsString})]}),this.props.isOverlay===!0?m("div",{ref:this.overlayContentRef,className:"overlay-content "+p,style:d,children:n}):n}componentDidUpdate=(e,i,r)=>{this.bindObservers(),this.setPinProperties(e),this.props.isOverlay===!0&&(this.setOverlayScrollability(),this.state.overlayContentFromTransformValue!==null&&this.overlayContentRef?.current?.classList.contains("overlay-open")===!1&&this.props.overlayOptions?.animateOnOpen!==!1&&this.props.overlayOptions?.animateOnOpen?.speed!==0&&(this.overlayContentRef?.current?.classList.add("overlay-open"),this.overlayContentRef?.current?.classList.add("overlay-animating"))),e.content===void 0&&this.props.content!==e.content&&(this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink()),this.state.fullyRender===!0&&i.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&i.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.activePID!==this.props.activePID||e.adminMode!==this.props.adminMode)&&(this.checkAndSetActiveLinks(),this.temporarySafariRenderingFix()),this.props.local_css!==e.local_css&&this.setMobileOffsets(),this.props.globalStylesheet!==e.globalStylesheet&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.hashPurl!==e.hashPurl&&this.runHashScroll()};shouldComponentUpdate(e,i,r){return!(this.props===e&&this.state===i&&this.context===r||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Lf({...this.props,content:null},{...e,content:null})&&this.state===i&&this.context===r)}setPinProperties=e=>{if(this.props.isPin&&this.pageRef.current){if(this.props.adminMode&&hr.default.isEqual(this.props.pin_options,e.pin_options)===!1&&(this.pageRef.current.scrollIntoView(),this.props.pin_options.position==="bottom")){let i=this.context.adjustPairs[this.props.pid];if(i&&i.adjusts){let r=document.body.querySelector("[id='"+i.adjusts[0]+"']");requestAnimationFrame(()=>{r.scrollIntoView({block:"end"})})}}this.props.pin_options.fixed===!0&&this.setFixedPinScrollability(),this.props.pin_options.overlay===!0&&this.props.local_css!==""&&this.checkBackgroundColor()}};checkBackgroundColor=hr.default.debounce(()=>{if(!this.pageRef.current)return;!(this.props.backdrops?.activeBackdrop&&this.props.backdrops?.activeBackdrop!="none")&&this.hasNoBackgroundColor(this.pageRef.current)?this.pageRef.current.classList.remove("accepts-pointer-events"):this.pageRef.current.classList.add("accepts-pointer-events");let i=this.pageRef.current?.querySelector(".page-content");this.hasNoBackgroundColor(i)?i.classList.remove("accepts-pointer-events"):i.classList.add("accepts-pointer-events")},100);hasNoBackgroundColor=e=>{if(e==null)return!1;let i=window.getComputedStyle(e,null),r=i.getPropertyValue("background-color"),n=r.match("rgba")?r.replace(/^.*,(.+)\)/,"$1"):null;return r==null||r=="transparent"||r=="initial"||n==0};setFixedPinScrollability=()=>{if(!this.pageRef.current)return;let e=this.pageContentRef.current,i=this.bodycopyRef.current;e&&i&&i.clientHeight>e.clientHeight?this.pageRef.current.classList.add("allow-scroll"):this.pageRef.current.classList.remove("allow-scroll")};setOverlayScrollability=()=>{this.overlayContentRef.current&&(this.overlayContentRef.current.scrollHeight>this.overlayContentRef.current.offsetHeight+1?this.overlayContentRef.current.classList.add("overlay-allow-scroll"):this.overlayContentRef.current.classList.remove("overlay-allow-scroll"))};checkAndSetActiveLinks=e=>{if(!this.pageRef.current)return;let i=e?.detail?.filter;i?.startsWith("tag:")?i=i.replace("tag:","").trim():i?i="all":i=null;let r=this.props.inAdminFrame&&this.props.adminMode===!0;if(this.props.isEditingPage&&!r)return;let n=this.pageRef.current.querySelectorAll('[rel="history"], [rel="filter-index"], [rel="home-page"]'),o=this.props.activePURL===this.props.homepagePURL||this.props.activePID==="root";hr.default.each(n,s=>{let u=s.getAttribute("href")?.toLowerCase(),c=u===this.props.activePURL||this.props.activePurlParents?.includes(u);!r&&c&&this.props.homepagePURL!==u?s.classList.add("active"):s.classList.remove("active"),!r&&this.props.enableHomeLinkActiveStates&&(this.props.homepagePURL===u||s.getAttribute("rel")==="home-page")&&(o?s.classList.add("active"):s.classList.remove("active"))})};bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(Ja.delete(this.lastPageRef.current),ua.unobserve(this.lastPageRef.current),rg.unobserve(this.lastPageRef.current),cw.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(Ja.set(this.pageRef.current,this),ua.observe(this.pageRef.current),rg.observe(this.pageRef.current),cw.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(ig.delete(this.lastPageLayoutRef.current),ua.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(ig.set(this.pageLayoutRef.current,this),ua.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(np.delete(this.lastPageContentRef.current),ua.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(np.set(this.pageContentRef.current,this),ua.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(this.lastBodycopyRef.current.removeEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks),tg.delete(this.lastBodycopyRef.current),ua.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(tg.set(this.bodycopyRef.current,this),ua.observe(this.bodycopyRef.current),this.bodycopyRef.current.addEventListener("filter-thumbnail-index",this.checkAndSetActiveLinks)),this.lastBodycopyRef.current=this.bodycopyRef.current)};runHashScroll(){if(this.props.hashPurl===this.props.purl){let e=this.pageRef.current?.getBoundingClientRect().top;if(e>0&&e<Qe.data.window.h)return;this.state.fullyRender!==!0?this.setFullRenderState(!0,()=>{this.pageRef.current.scrollIntoView()}):this.pageRef.current.scrollIntoView()}}componentDidMount(){this.runHashScroll(),this.onWindowResize(),Qe.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender(),this.context.onPageMount(this.pageRef.current),this.pageRef.current&&(Qm.findEmbedsIn(this.pageRef.current),uw&&uw.observe(this.pageRef.current,{childList:!0,subtree:!0}),this.pageRef.current.addEventListener("dom-binding-initialized",()=>{Qm.findEmbedsIn(this.pageRef.current)}),this.props.isOverlay&&(window.setTimeout(this.setOverlayContentTransformValues,100),this.calculateOverlayPassthroughClasses(),this.pageRef.current.addEventListener("animationend",this.calculateOverlayPassthroughClasses)),this.temporarySafariRenderingFix())}calculateOverlayPassthroughClasses=()=>{if(!this.pageRef.current||!this.pageContentRef.current)return;let e=window.getComputedStyle(this.pageRef.current,null),i=window.getComputedStyle(this.pageContentRef.current,null),r=e.getPropertyValue("background-color"),n=i.getPropertyValue("background-color"),o=this.props.isOverlay&&(r==="transparent"||r==="initial"||r==="rgba(0, 0, 0, 0)"),s=this.props.isOverlay&&(n==="transparent"||n==="initial"||n==="rgba(0, 0, 0, 0)")&&r.startsWith("rgba(");o?this.overlayContentRef.current.classList.add("is-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-passthrough-overlay"),s?this.overlayContentRef.current.classList.add("is-content-passthrough-overlay"):this.overlayContentRef.current.classList.remove("is-content-passthrough-overlay")};temporarySafariRenderingFix=()=>{this.props.adminMode||setTimeout(()=>{!ne&&mo()&&this.props?.pin_options?.position==="bottom"&&(this.pageRef?.current?.classList.add("loading"),setTimeout(()=>{this.pageRef?.current?.classList.remove("loading")},1200))},10)};onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(i){i.childNodes.forEach(r=>r.setSaveable(!0));for(let r of i.childNodes)e(r)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.checkAndSetActiveLinks(),this.fetchCommerceProductsByLink()})),this.props.isPin&&this.props.pin_options?.fixed===!0&&this.setFixedPinScrollability(),this.props.isOverlay===!0&&this.setOverlayScrollability(),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){this.pageRef.current&&this.pageRef.current.removeEventListener("animationend",this.calculateOverlayPassthroughClasses),Qe.off("window-resize",this.onWindowResize),Ja.delete(this.pageRef.current),this.onSparseComponentRender(!0),this.onResize({height:0}),this.context.onPageUnmount(this.pageRef.current)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),i=[];hr.default.each(e,r=>{let n=r.getAttribute("data-product");n&&i.push(n)}),this.props.fetchCommerceProducts({idArray:i,onlyNew:!0})};initializeScriptTags=()=>{let e=!1,i=function(r){e=!0};window.addEventListener("error",i,!1),hr.default.each(this.bodycopyRef.current?.querySelectorAll("script"),r=>{if(r.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...r.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=r.textContent,r.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&this.props.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",i)}};ng.contextType=Gs;qse=ln((t,e)=>t.map(i=>e[i]?.purl).filter(i=>i&&typeof i=="string").map(i=>i.toLowerCase())),Qa=_n(De((t,e)=>{let i=Je.getContentById(t,e.id),r=t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID],n,o;return r&&(n=r.purl?.toLowerCase(),o=qse(Je.getParentSetList(t,r.id),t.sets.byId)),!ne&&!n&&(n=window.location.pathname.replace(/^\//,"").toLowerCase()),{inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,isEditingPage:i?.id&&t.frontendState.PIDBeingEdited===i?.id,hasPage:i!==void 0,homepagePURL:Je.getHomepagePurl(t),pid:i?.id,purl:i?.purl,isPin:i?.pin,title:i?.title,backdrops:i?.backdrops,content:i?.content,access_level:i?.access_level,local_css:i?.local_css,pin_options:i?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,globalStylesheet:t.css?.stylesheet,enableHomeLinkActiveStates:t.siteDesign?.site?.enableHomeLinkActiveStates,activePID:t.frontendState.activePID,activePURL:n,activePurlParents:o,pageDepth:Je.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Use)(ng))});var pw,jk,Gk=T(()=>{Pe();og();W();pw=class t extends ae{constructor(e){super(e)}render=()=>{let e=this.props.children.filter(r=>r.parent===this.props.id),i=e.filter(r=>r.content.page_type=="page").length>1;return m("div",{"data-container":"set","data-id":this.props.id,children:e.map((r,n)=>r.content.page_type==="set"?m(t,{id:r.content.id,children:this.props.children,hashPurl:this.props.hashPurl,contentPad:this.props.contentPad},r.content.id):m(Qa,{id:r.content.id,position:r.position,hashPurl:this.props.hashPurl,contentPad:this.props.contentPad,stackedPage:i},r.content.id))})}},jk=pw});var nSe,hw,ag,fw=T(()=>{Pe();nSe=ce(ve(),1);W();hw=class extends ae{constructor(e){super(e)}render=()=>m(X,{children:[m("style",{children:`
					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}
				`}),this.props.message]})},ag=hw});var Kk,Yk=T(()=>{Kk={closeOnClickout:!1,closeOnNavigate:!1,animateOnOpen:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0},animateOnClose:{fade:!1,speed:0,slideAmount:0,slideDirection:"default",wipeShape:"default",easing:"linear",scaleAmount:0,rotateAmount:0}}});function $se(t,e){return{adminMode:t.frontendState.adminMode,PIDToEdit:t.frontendState.PIDToEdit,overlayBeingPreviewed:t.frontendState.overlayBeingPreviewed,overlayOptionsByPID:Vse(t.pages.byId),sortMap:t.structure.bySort,autoRenderableOverlays:Je.getAutoRenderableOverlaysForSet(t,e.pinContextPID,e.match?.params?.page)}}function jse(t){return Pt({fetchContent:He.fetchContent},t)}var cSe,ca,Bse,ww,ji,xw,Wse,Vse,mw,$i,sg,$r,lg,gw,vw,Zk,Xk,bw,yw,ug,Jk,cg=T(()=>{Pe();cSe=ce(Sn(),1);ht();di();jt();ia();ca=ce(ve(),1);Re();_i();og();Yk();Ar();Oi();js();W();Bse={top:0,bottom:0},ww=new Array,ji={closeOverlay:()=>{},openOverlay:()=>{},getOverlay:()=>{},toggleOverlay:()=>{},handleGlobalClick:()=>{},getAllOverlays:()=>{}},xw=class extends ae{constructor(e){super(e),this.state={activeOverlays:[]},this.intermediateActiveOverlays=this.state.activeOverlays,ji.openOverlay=this.openOverlay,ji.closeOverlay=this.closeOverlay,ji.toggleOverlay=this.toggleOverlay,ji.getOverlay=this.getOverlay,ji.handleGlobalClick=this.handleGlobalClick,ji.getAllOverlays=this.getAllOverlays}componentDidMount(){this.autoRenderOverlays()}autoRenderOverlays=(e=[])=>{if(this.props.adminMode){let s=[this.props.PIDToEdit,this.props.overlayBeingPreviewed].filter(u=>!!u);this.props.autoRenderableOverlays.some(u=>s.includes(u.id))&&this.openOverlay(this.props.PIDToEdit),this.state.activeOverlays.forEach(u=>{s.includes(u.pid)||this.closeOverlay(u?.pid)});return}let i=this.props.autoRenderableOverlays.map(s=>s.id),r=e.map(s=>s.id),n=ca.default.difference(r,i),o=ca.default.difference(i,r);n.forEach(s=>{this.closeOverlay(s)}),o.sort((s,u)=>this.props.sortMap[u]-this.props.sortMap[s]),o.forEach(s=>{this.openOverlay(s)})};componentDidUpdate=(e,i)=>{if((this.props.autoRenderableOverlays!==e.autoRenderableOverlays||this.props.adminMode&&!e.adminMode)&&this.autoRenderOverlays(e.autoRenderableOverlays),this.props.adminMode!==e.adminMode&&this.autoRenderOverlays([]),this.state.activeOverlays!==i.activeOverlays){let r=ca.default.difference(this.state.activeOverlays,i.activeOverlays),n=ca.default.difference(i.activeOverlays,this.state.activeOverlays);if(ww=[...this.state.activeOverlays],ug(),r.length>0)for(let o of r)(o.getOverlayOptions().animateOnOpen||o.getOverlayOptions().animateOnClose)&&o.ref?.current?.base.addEventListener("animationend",this.handleAnimationEnd)}};componentWillUnmount=()=>{};handleGlobalClick=(e,i)=>{if(this.props.adminMode||i.closest(".quick-view"))return;let n=i.closest(".page-content")?.closest(".page")?.getAttribute("id"),o=this.state.activeOverlays.find(c=>c.pid===n),s=this.state.activeOverlays[this.state.activeOverlays.length-1],u=this.props.store.getState();if(s&&s.getOverlayOptions().closeOnNavigate===!0&&e.hasAttribute("href")&&e.getAttribute("href").replace(/\//,"").toLowerCase()!=="contact-form"&&!u.frontendState.contactForm.inited&&!u.frontendState.cartOpen&&(e.getAttribute("rel")==="history"||e.getAttribute("rel")==="home-page")){requestAnimationFrame(()=>{window.__deferred_page_load_promise__?window.__deferred_page_load_promise__.then(()=>{requestAnimationFrame(()=>{this.closeOverlay(s?.pid)})}):this.closeOverlay(o?.pid)});return}if(s&&s.getOverlayOptions().closeOnClickout===!0&&!u.frontendState.contactForm.inited&&!u.frontendState.cartOpen&&n!==s?.pid&&e.tagName!=="A"){this.closeOverlay(s?.pid);return}};handleAnimationEnd=e=>{if(e.target.classList.contains("page"))switch(e.animationName){case"overlayOpen":case"overlayOpenWithoutOpacity":{let i=e.target.closest(".overlay-animating");i&&i?.classList?.remove("overlay-animating"),e.target.classList.remove("overlay-open");break}case"overlayClose":case"overlayCloseWithoutOpacity":{setTimeout(()=>{let r=e.target.closest(".overlay-animating");r&&r?.classList?.remove("overlay-animating")},101),e.target.classList.remove("overlay-close");let i=e.target.getAttribute("id");this.closeOverlay(i,!0);break}}};openOverlay=(e,i={})=>{!e||this.getOverlay(e)||(this.intermediateActiveOverlays=[...this.intermediateActiveOverlays,{pid:e,ref:me(),getOverlayOptions:()=>Wse(e,this.props.overlayOptionsByPID[e],i)}],this.setState({activeOverlays:this.intermediateActiveOverlays}))};closeOverlay=(e,i=!1)=>{if(e){if(i===!1){let r=this.getOverlay(e);if(!r)return;if(r.getOverlayOptions()?.animateOnClose?.speed>0){r.ref.current.base.classList.add("overlay-close"),r.ref.current.base.classList.add("overlay-animating");return}}this.intermediateActiveOverlays=this.intermediateActiveOverlays.filter(r=>r.pid!==e),this.setState({activeOverlays:this.intermediateActiveOverlays})}};toggleOverlay=(e,i)=>{this.getOverlay(e)?this.closeOverlay(e):this.openOverlay(e,i)};getAllOverlays=()=>this.intermediateActiveOverlays;getOverlay=e=>this.intermediateActiveOverlays.find(i=>i.pid===e);render(){return this.state.activeOverlays.map(({pid:e,getOverlayOptions:i,ref:r})=>m(Qa,{id:e,contentPad:Bse,isOverlay:!0,overlayOptions:i(),ref:r},e))}},Wse=ln((t,e,i)=>ca.default.merge({},Kk,e,i)),Vse=ln(t=>t=ca.default.mapValues(t,e=>e.overlay_options));if(!ne){mw=null,$i=null,sg=!1,$r=!1,lg=null,gw=v=>{if(clearTimeout(mw),mw=setTimeout(()=>{sg=!1,$r=!1},200),!sg){let b=[...ww].reverse().map(_=>document.getElementById(_.pid)?.closest(".overlay-content")),S=b.find(_=>_?.contains(v));if($i=null,S)if(S.classList.contains("overlay-allow-scroll"))$i=S,$r=!0;else{let _=b[0].classList?.contains("overlay-allow-scroll")?b[0]:null;if(_)$i=_,$r=!0;else{let E=S.querySelector(".page-content")?.contains(v),I=S.querySelector(".backdrop");!E&&!S.classList.contains("is-passthrough-overlay")||I||E&&!S.classList.contains("is-content-passthrough-overlay")?($r=!0,$i=null):($r=!1,$i=null)}}else{let _=b.find((E,I)=>E.classList?.contains("overlay-allow-scroll"));_?($i=_,$r=!0):($r=!1,$i=null)}sg=!0}};let t=0,e=0,i=null,r=null,n,o=null,s=0,u=null,c=!1,d=!1,p=!1,g=0;vw=v=>{t=lg-v.touches[0].clientY,e=e*.8+t*.2,lg=v.touches[0].clientY,clearTimeout(i),i=setTimeout(()=>{t=0},300),$i&&($i.scrollTop=$i.scrollTop+t),($r||c)&&($r=!0,v.preventDefault(),v.stopPropagation()),$r&&(document.scrollingElement.scrollTop=s)},Zk=v=>{t=v.deltaY,gw(v.target),$r&&v.preventDefault(),$i&&($i.scrollTop=$i.scrollTop+t)},Xk=()=>{p||(p=!0,s=document.scrollingElement.scrollTop,document.scrollingElement.style.overflow="hidden",document.scrollingElement.style.overscrollBehavior="none",document.scrollingElement.scrollTop=s)},bw=ca.default.debounce(()=>{p&&(p=!1,document.scrollingElement.style.overflow="",document.scrollingElement.style.overscrollBehavior="",document.scrollingElement.scrollTop=s)},150),yw=v=>{if(!r){bw();return}let b=n==0?16:v-n;n=v,e=e*.95;let S=r.scrollTop;r.scrollTop=r.scrollTop+e*(b/16.667),r.scrollTop-S!=0?g=0:g++,o=requestAnimationFrame(yw),(Math.abs(e)<.5||g>15)&&(r=null)},window.addEventListener("wheel",Zk,{passive:!1}),window.addEventListener("touchstart",v=>{if(g=0,d=!1,r=null,cancelAnimationFrame(o),gw(v.touches[0].target),e=0,t=0,u=v.touches[0].clientY,c=v.touches[0].target.closest(".overlay-content"),c){let b=c.querySelector(".page-content")?.contains(v.touches[0].target),S=c.querySelector(".backdrop");(!b&&c.classList.contains("is-passthrough-overlay")&&!S||b&&c.classList.contains("is-content-passthrough-overlay"))&&(c=null)}($i||c)&&(Xk(),lg=v.touches[0].clientY,document.body.addEventListener("touchmove",vw,{passive:!1}))}),document.body.addEventListener("click",v=>{d=!0}),document.body.addEventListener("touchend",v=>{document.body.removeEventListener("touchmove",vw,{passive:!1}),$i&&Math.abs(e)>2?(r=$i,clearTimeout(i),n=window?.performance?.now?.()??0,e=t*.8+e*.2,o=requestAnimationFrame(yw)):bw();let b=u-v.changedTouches[0].clientY;if(!r&&Math.abs(b)<10&&$r){let S=v.changedTouches[0].target;setTimeout(()=>{d||ji.handleGlobalClick(S,S)},330)}},{passive:!1}),Qe.on("window-resize",()=>{ug()}),ug=ca.default.debounce(()=>{let v=[...ww].reverse(),b=v.findIndex(S=>{let _=S.ref?.current?.base.closest(".overlay-content");return _?_.classList.contains("overlay-allow-scroll")&&!_.classList.contains("overlay-close"):!1});v.forEach((S,_)=>{let E=S.ref?.current?.base.closest(".overlay-content");E&&(_==0?E.classList.add("top-overlay"):E.classList.remove("top-overlay"),b==-1?(E.classList.remove("top-scrollable-overlay"),E.classList.remove("behind-top-scrollable-overlay")):_>b?(E.classList.remove("top-scrollable-overlay"),E.classList.add("behind-top-scrollable-overlay")):_==b?(E.classList.add("top-scrollable-overlay"),E.classList.remove("behind-top-scrollable-overlay")):(E.classList.remove("top-scrollable-overlay"),E.classList.remove("behind-top-scrollable-overlay")))}),b>-1?document.body.classList.add("has-scrollable-overlay"):document.body.classList.remove("has-scrollable-overlay")},30),ug()}Jk=_n(Bn(De($se,jse)(xw)))});function Yse(t,e){let i=e.idType==="purl"?Je.getContentByPurl(t,e.id):Je.getContentById(t,e.id),r,n=null,o=null;if(!i){let s=!1;if(t.frontendState.networkErrors.find(u=>u.id===e.id&&u.idType===e.idType&&u)!==void 0||t.frontendState.inAdminFrame){if(e.idType==="purl"&&(r=t.site.tags.find(u=>u.url===e.id),!r)){for(let u in t.pages.byId)if(r=t.pages.byId[u].tags.find(c=>c.url===e.id),r)break}r||(s=!0)}if(s)return{content:null,pageNotFound:s}}if(i)if(i.page_type==="set"){n=i.id;let s=Je.getContentByPurl(t,e.hashPurl),u=t.structure.indexById[s?.id]||0,c=t.sets.byId[Je.getItemParentId(t,s?.id)]||i;o=Kse(t.structure,t.pages,t.sets,c,u)}else n=Je.getItemParentId(t,i.id);else r&&(n="root",o=Object.values(t.pages.byId).filter(s=>t.structure.indexById[s.id]===null||s.crdt_state===$t.Deleted?!1:s.tags.some(u=>u.tag===r.tag)).map(s=>({content:s,position:"below"})),o.sort((s,u)=>t.structure.bySort[s.content.id]-t.structure.bySort[u.content.id]));return{tag:r,hasContent:i!==void 0,contentId:i?.id,contentType:i?.page_type,contentTitle:i?.title,contentPurl:i?.purl,contentIsStack:i?.stack,contentIsPin:i?.pin,contentIsOverlay:i?.overlay,contentCRDTState:i?.crdt_state,children:o,parentSetPID:n,isFeed:t.sets.byId.root.stack,topPins:Je.getPinsForSet(t,n,"top",i?.id),bottomPins:Je.getPinsForSet(t,n,"bottom",i?.id),adminMode:t.frontendState.adminMode}}function Zse(t){return Pt({fetchContent:He.fetchContent,fetchPagesByTag:He.fetchPagesByTag,fetchSitePackage:He.fetchSitePackage,updateFrontendState:He.updateFrontendState},t)}var Qk,Ao,Gse,Cw,op,dg,eR,Kse,Sw,_w=T(()=>{Pe();di();ht();Qk=ce(Bh(),1);js();Ao=ce(ve(),1);es();jt();Re();_i();Mt();og();Gk();fw();Pd();Ar();cg();W();Gse=async t=>{let e=[];if(!t.hasContent){let i=t.fetchContent(t.id,{idType:t.idType});e.push(i)}if(t.hashPurl){let i=t.fetchContent(t.hashPurl,{idType:"purl"});e.push(i)}ne&&e.push(eR(t,{up:!1,down:!0})),await Promise.allSettled(e).catch(i=>{})},Cw={top:0,bottom:0},op=10,dg=class extends ae{constructor(e){super(e),this.contentRef=me(),this.contentParentRef=me(),this.topPaginationWatcherRef=me(),this.bottomPaginationWatcherRef=me(),this.paginationLimitsTriggered={up:!1,down:!1},this.state={contentPad:Cw,pageRenderLimits:{above:0,below:op},completedPaginationAbove:!1,completedPaginationBelow:!1},ne||(this.paginationObserver=new IntersectionObserver(this.onPaginationObserverCallback,{root:document,rootMargin:screen.height*2+"px",threshold:[0,1]}),this.resizeObserver=new ResizeObserver(i=>{i.forEach(r=>{var n=window.getComputedStyle(r.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top"));(o!==this.state.contentPad.top||s!==this.state.contentPad.bottom)&&this.setState({contentPad:{top:o,bottom:s}})})})),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId})}getContentByPosition(e){return this.props.children?.filter(i=>i.position===e)||[]}getPageStack(){let e=this.getPageContainerPinOffsets(),i=[];return this.props.topPins.forEach(r=>{i.push(m(Qa,{id:r.id,contentPad:Cw,stackedPage:this.props.topPins.length>1},r.id))}),this.renderedChildren=[...Ao.default.takeRight(this.getContentByPosition("above"),this.state.pageRenderLimits.above),...Ao.default.take(this.getContentByPosition("below"),this.state.pageRenderLimits.below)],i.push(m("div",{className:"pages",ref:this.contentRef,style:e,children:this.props.contentType==="set"||this.props.tag?!this.props.tag&&this.props.isFeed!==!0&&this.props.contentIsStack!==!0?null:m(X,{children:[m("div",{className:`pagination-watcher ${this.state.completedPaginationAbove?"pagination-complete":""}`,"data-direction":"up",ref:this.topPaginationWatcherRef}),m(jk,{id:this.props.contentId,children:this.renderedChildren,hashPurl:this.props.hashPurl,contentPad:this.state.contentPad},this.props.contentId),m("div",{className:`pagination-watcher ${this.state.completedPaginationBelow?"pagination-complete":""}`,"data-direction":"down",ref:this.bottomPaginationWatcherRef})]}):this.props.contentIsPin||this.props.contentIsOverlay?null:m(Qa,{id:this.props.contentId,contentPad:this.state.contentPad,stackedPage:!1},this.props.contentId)})),this.props.bottomPins.forEach(r=>{i.push(m(Qa,{id:r.id,contentPad:Cw,stackedPage:this.props.bottomPins.length>1},r.id))}),i}render(){if(this.props.pageNotFound)return m(ag,{message:"Page not found."});if((!this.props.hasContent||this.props.contentCRDTState===$t.Deleted)&&!this.props.tag)return null;let e=this.getPageStack();return m("div",{className:"content",ref:this.contentParentRef,children:[m(Jk,{pinContextPID:this.props.parentSetPID}),e]})}bindContentParent=()=>{this.resizeObserver&&this.contentParentRef.current&&!this.state.contentParentRef&&(this.resizeObserver.observe(this.contentParentRef.current),this.setState({contentParentRef:this.contentParentRef.current}))};componentDidMount(){this.bindContentParent(),this.attachPaginationWatchers(),this.props.hasContent&&this.props.updateFrontendState({activePID:this.props.contentId})}shouldComponentUpdate(e,i,r){if(this.props===e&&this.state===i&&this.context===r)return!1;if(this.props.contentId!==e.contentId||this.props.hashPurl!==e.hashPurl||this.props.tag!==e.tag){let n=!1;this.props.hashPurl!==e.hashPurl&&this.renderedChildren&&this.renderedChildren.some(o=>o.content.purl===e.hashPurl)&&(n=!0),n||this.setState({pageRenderLimits:{above:0,below:op}})}return!0}componentDidUpdate(e,i,r){this.bindContentParent(),!this.props.adminMode&&e.contentCRDTState!==$t.Deleted&&this.props.contentCRDTState===$t.Deleted&&(this.props.updateFrontendState({alertModal:{message:"Page not found",type:"notice"}}),eo.replace("/"+e.contentPurl||"/")),this.props.id&&e.id!==this.props.id&&this.props.fetchContent(this.props.id,{idType:this.props.idType}),this.props.tag&&e.tag!==this.props.tag&&(this.props.updateFrontendState({activePID:void 0}),this.requestPagination()),e.hashPurl!==this.props.hashPurl&&this.props.hashPurl&&this.props.fetchContent(this.props.hashPurl,{idType:"purl"}).then(()=>{this.requestPagination()}),this.props.hasContent&&this.props.contentId!==e.contentId&&(this.props.updateFrontendState({activePID:this.props.contentId}),this.requestPagination()),this.attachPaginationWatchers(),this.props.pageNotFound!==e.pageNotFound&&this.props.updateFrontendState({pageNotFound:this.props.pageNotFound})}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.unobserve(this.contentParentRef.current),this.paginationObserver&&this.paginationObserver.disconnect(),this.props.updateFrontendState({activePID:void 0})}attachPaginationWatchers(){this.paginationObserver&&this.topPaginationWatcherRef.current&&this.bottomPaginationWatcherRef.current?(this.topPaginationWatcherRef.current!==this.topPaginationWatcherEl&&(this.topPaginationWatcherEl&&this.paginationObserver.unobserve(this.topPaginationWatcherEl),this.paginationObserver.observe(this.topPaginationWatcherRef.current),this.topPaginationWatcherEl=this.topPaginationWatcherRef.current),this.bottomPaginationWatcherRef.current!==this.bottomPaginationWatcherEl&&(this.bottomPaginationWatcherEl&&this.paginationObserver.unobserve(this.bottomPaginationWatcherEl),this.paginationObserver.observe(this.bottomPaginationWatcherRef.current),this.bottomPaginationWatcherEl=this.bottomPaginationWatcherRef.current)):(delete this.topPaginationWatcherEl,delete this.bottomPaginationWatcherEl)}onPaginationObserverCallback=e=>{let i=!1;e.forEach(r=>{let n=r.target.dataset.direction;r.isIntersecting?(this.paginationLimitsTriggered[n]=!0,i=!0):this.paginationLimitsTriggered[n]=!1}),i&&this.requestPagination()};requestPagination=async()=>{if(this.isPaginating)return;this.isPaginating=!0;let e=0;for(;this.isPaginating;){if(e++>25){console.log("Exceeded max consecutive pagination attempts...");break}(this.paginationLimitsTriggered.up||this.paginationLimitsTriggered.down)&&this.setState({pageRenderLimits:{above:(this.state.pageRenderLimits.above||0)+(this.paginationLimitsTriggered.up?op:0),below:(this.state.pageRenderLimits.below||0)+(this.paginationLimitsTriggered.down?op:0)}}),await eR(this.props,this.paginationLimitsTriggered).then(i=>{let r=i.length===0&&!(this.paginationLimitsTriggered.up&&this.state.pageRenderLimits.above<this.getContentByPosition("above").length),n=i.length===0&&!(this.paginationLimitsTriggered.down&&this.state.pageRenderLimits.below<this.getContentByPosition("below").length);this.setState({completedPaginationAbove:r,completedPaginationBelow:n}),r&&n&&(this.isPaginating=!1)}).catch(i=>{console.error(i),this.isPaginating=!1}),this.props.tag&&(this.isPaginating=!1,this.setState({pageRenderLimits:{above:9e9,below:9e9}})),await new Promise(i=>setTimeout(i,250))}};getPageContainerPinOffsets=()=>{let e={marginTop:0,marginBottom:0};if(ne)return e;let i=r=>(r.hasOverlayPins&&!r.adjustsSelf&&r.adjusterId!==null?r.totalHeight:0)-(r.adjustedLevel==="content"?r.adjusterHeight:0);return Ao.default.each(this.context.levelData.levels,(r,n)=>{e.marginTop+=i(r.top),e.marginBottom+=i(r.bottom)}),e}},eR=(t,e,i={})=>new Promise((r,n)=>{if(!t||!e)return n("Missing pagination parameters");if(t.tag)return t.fetchPagesByTag(t.tag.url).then(r).catch(n);let o=t.store.getState(),s=[];if(Ao.default.each(e,(u,c)=>{if(!u)return;let d,p;if(c==="up"){let S=Ao.default.first(t.children);S&&(p=S.index,d=S.parent)}else if(c==="down"){let S=Ao.default.last(t.children);S?(p=S.index,d=S.parent):t.contentType==="set"&&(p=0,d=t.contentId)}if(d===void 0||p===void 0)return;let g=0,v=(S,_,E=[])=>(E.push(_),S[_]?.forEach(I=>{v(S,I,E)}),E),b=v(Je.getSetsByParent(o),t.parentSetPID);au(o.structure,o.pages,o.sets,o.sets.byId[d],p,{reverse:c==="up",callback:(S,_,E)=>{if(!E&&b.includes(S)&&(s.push({parent:S,index:_}),g++),g>=op)return"break"}})}),s.length>0){let u=Ao.default.groupBy(s,"parent"),c=Ao.default.map(u,(d,p)=>t.fetchContent(p,{indexes:Ao.default.map(d,"index"),idType:"pid"}));Promise.all(c).then(r).catch(n)}else r([])}),Kse=ln((t,e,i,r,n)=>{let o=[];return au(t,e,i,r,n-1,{reverse:!0,traverseUp:!1,includeSets:!0,callback:(s,u,c)=>{if(c)c&&o.unshift({parent:s,index:u,content:c,position:"above"});else return"break"}}),au(t,e,i,r,n,{reverse:!1,traverseUp:!1,includeSets:!0,callback:(s,u,c)=>{if(c)c&&o.push({parent:s,index:u,content:c,position:"below"});else return"break"}}),o});dg.contextType=Gs;Sw=_n(De(Yse,Zse)((0,Qk.frontloadConnect)(Gse,{onMount:!0,onUpdate:!1})(dg)))});function Xse(t){return Pt({pageMounted:He.pageMounted,pageUnMounted:He.pageUnMounted,updateFrontendState:He.updateFrontendState,fetchContent:He.fetchContent,fetchCommerceProducts:He.fetchCommerceProducts},t)}var da,nl,pg,ap,hg,pa,fg,Ew,tR,Bu,sp,iR,rR=T(()=>{Pe();di();ht();jt();da=ce(ve(),1);_i();Pd();Ni();wo();Wi();el();Oi();aw();Re();eg();Ar();W();nl=new WeakMap,pg=new WeakMap,ap=new WeakMap,hg=new WeakMap,tR=t=>{t.forEach(function(e){nl.has(e.target)&&nl.get(e.target).onAboveViewPort(e)})},Bu=0;ne||(pa=new ResizeObserver(function(t){let e={};tR(fg.takeRecords()),t.forEach(function(i){let r=nl.get(i.target);if(r&&(r.onResize(i.contentRect),e[r.props.id]=i.contentRect.height),pg.has(i.target)&&pg.get(i.target).onBodyCopyResize(i.contentRect.width),ap.has(i.target)||hg.has(i.target)){var n=window.getComputedStyle(i.target);let o=parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("padding-top"))+parseFloat(n.getPropertyValue("border-top")),s=parseFloat(n.getPropertyValue("margin-bottom"))+parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("border-bottom"));if(ap.has(i.target)){let u=ap.get(i.target);(u.state.pageContentPad.top!==o||u.state.pageContentPad.bottom!==s)&&u.setState({pageContentPad:{top:o,bottom:s}})}else{let u=hg.get(i.target);(u.state.pageLayoutPad.top!==o||u.state.pageLayoutPad.bottom!==s)&&u.setState({pageLayoutPad:{top:o,bottom:s}})}}}),Bu!==0&&(document.scrollingElement.scrollTop+=Bu,Bu=0)}),fg=new IntersectionObserver(tR,{root:document,rootMargin:"0px 0px 0px 0px",threshold:[0,1]}),Ew=new IntersectionObserver((t,e)=>{t.forEach(function(i){nl.has(i.target)&&nl.get(i.target).onViewportBoundaryIntersection(i)})},{root:document,rootMargin:Math.max(screen.height*6,2500)+"px",threshold:[0,1]}));sp=class extends ae{constructor(e){super(e),this.bodycopyRef=me(),this.pageContentRef=me(),this.pageRef=me(),this.pageLayoutRef=me(),this.galleryRef=me(),this.lastBodycopyRef=me(),this.lastPageContentRef=me(),this.lastPageRef=me(),this.lastPageLayoutRef=me(),this.currentHeight=0,this.state={resizeParentWidth:"100%",mobileOffsetsString:null,pageContentPad:{top:0,bottom:0},pageLayoutPad:{top:0,bottom:0},authorized:localStorage.getItem("images-include-offline"),imageSort:"forward",windowHeight:Qe.data.window.h,fullyRender:!0,lastPageLayoutHeight:100},this.localStyleRef=me(),this.scrollingElement={current:ne?null:window}}setMobileOffsets=()=>{if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.localStyleRef.current)return;let e=lu(this.localStyleRef.current.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","small-caps"]}]);this.setState({mobileOffsetsString:e})};onBodyCopyResize=e=>{e=parseInt(e),this.lastWidth!==e&&(this.setState({resizeParentWidth:e+"px"}),this.lastWidth=e)};onWindowResize=()=>{this.setState(e=>this.state.windowHeight===Qe.data.window.h?null:{windowHeight:Qe.data.window.h})};onResize=(e,i=!0)=>{((this.isAboveViewport??this.pageRef.current?.getBoundingClientRect().bottom<1)||this.props.position==="above"&&this.firstResizeOccurred!==!0)&&(Bu+=e.height-this.currentHeight,i||(document.scrollingElement.scrollTop+=Bu,Bu=0)),this.currentHeight=e.height,this.firstResizeOccurred=!0};onAboveViewPort=e=>{e.rootBounds.height!==0&&(this.isAboveViewport=e.boundingClientRect.bottom<0)};onViewportBoundaryIntersection=e=>{let i=e.isIntersecting;ne&&(i=!0),this.setFullRenderState(i)};setFullRenderState=(e,i)=>{this.setState({fullyRender:e,lastPageLayoutHeight:this.pageLayoutRef.current?.getBoundingClientRect().height||100},i)};updateAdminState=e=>{store.dispatch({type:"UPDATE_ADMIN_STATE",payload:e})};zIndexLayerPosition=e=>e?.toString().padStart(2,"0");findPageAdjusteeStatus=e=>{let i={top:null,bottom:null},r=da.default.pickBy(this.context?.adjustPairs,n=>n.adjusts.indexOf(this.props.pid)!==-1);return da.default.keys(r).length>0&&da.default.each(r,function(n){i[n.location]=n.adjustedHeight}),i};getPageInfoContextValue(){return(this.props.isEditingPage!==this.lastProps?.isEditingPage||this.props.pid!==this.lastProps?.pid)&&(this.pageInfoContextValue={isEditing:this.props.isEditingPage,pid:this.props.pid}),this.lastProps=this.props,this.pageInfoContextValue}onItemClick=e=>{if(e.button!==2||!this.state.zoomedOut)return;let i=e?.target.closest("media-item");i&&(e.preventDefault(),this.setState({zoomedOut:!1},()=>{setTimeout(()=>{i?.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:0,preventQuickViewClose:!0,lazyScroll:!1}})),i.classList.add("hey-listen"),this.flashInterval=setInterval(()=>{i.classList.contains("hey-listen")?i.classList.remove("hey-listen"):i.classList.add("hey-listen")},300),setTimeout(()=>{i.classList.remove("hey-listen"),clearInterval(this.flashInterval)},1200)},0)}),console.log(e))};render(){if(!this.props.hasPage)return null;let e=null,i=!1;if(this.state.fullyRender){let r=this.props.contentPad.top+this.state.pageLayoutPad.top+this.state.pageContentPad.top+this.state.pageContentPad.bottom+this.state.pageLayoutPad.bottom+this.props.contentPad.bottom,n=Math.max(10,this.state.windowHeight-r),o=null;this.props.access_level==="password"?o=m(qu,{target:this.props.pid,onSucces:()=>{this.props.fetchContent(this.props.pid,{force:!0})}}):this.hasOwnProperty("lockedContent")?o=this.lockedContent:o=this.lockedContent=this.props.content,e=m(X,{children:m(zf,{pageRef:this.pageRef,value:this.getPageInfoContextValue(),children:[m("style",{id:"img-style",children:`
							body.mobile .page-content{
								${this.state.zoomedOut?"padding: 1px 1px 8rem 1px;":"padding: 2rem 2rem 8rem 2rem;"}
							}
							.page-content {
								${this.state.zoomedOut?"padding: 1px;":"padding: 3rem 3rem 8rem 3rem;"}
							}
							body.mobile .caption {
								font-size: 3rem;
							}
							.caption {

							    margin-top: 1rem;
							    font-size: .75rem;
							    font-weight: 400;
							    color: rgba(0, 0, 0, 0.35);
							    font-style: normal;
							    line-height: 1.3;
							}

							.caption a {
							    color: rgba(0, 0, 0, 0.35);
								text-decoration:none;
							}

							.hey-listen::part(media){
			                	opacity: 0.3;
							}
									

							media-item::part(media){
								transition: opacity ease-in-out 0.1s;								
								outline: 1px solid rgba(0,0,0,0.08);
								outline-offset: -1px;
							}

							media-item:hover a.original {
								display: block;
							}
							.caption a.original {
								padding: 8px;
								margin: -8px;
								display:none;
								float: right;
							}

							.quick-view-background {
								background-color: rgba(21,21,21, 0.8);
							}

							body.mobile .sort-controls text-icon {
								height: 5rem;
								border: 1rem solid white;								
							}

							.sort-controls {
								display: grid;
								position: fixed;
								bottom: 1.8rem;
								left: 1.4rem;
								z-index: 1000;
								column-gap: 1px;
								grid-template-columns: 1fr 1fr 1fr 1fr;
								filter: drop-shadow(0px 1px 2px rgba(0,0,0, 0.2));
							}

							.sort-controls text-icon.active {
								color: black;
							}

							.sort-controls text-icon:active {
								transform: translate3d(0px, 2px, 0px);
							}

							.sort-controls text-icon {
								user-select:none;
								transform: translate3d(0px, 0px, 0px);
								transition: .05s transform linear;
								color: #ccc;
								background-color: white;
								border: .5rem solid white;
								border-radius: 100%;
								height: 2.5rem;
								cursor: pointer;
							}

							.sort-controls text-icon.zoom {
								color: black;
							}

							${this.state.zoomedOut?`
							media-item:hover .caption a.page-link {
								display: block;
							}

							media-item .caption {
								margin: 0;
								padding: 0;
								position: absolute;
								inset: 0;
								pointer-events:none;
							}
							media-item .caption a {
								display: none;
								color: transparent;
								pointer-events:auto;
							}

							media-item .caption a.page-link {
								pointer-events: auto;
								overflow: hidden;
								font-size: 0;

								border-style: solid;
								position: absolute;
								top: 0px;
								right: 0px;
								z-index: 99;
							}

							media-item .caption a.page-link::after {
								display: block;
								padding: 5px;
								content: '\u{1F517}';
								font-size: 14px;
								font-family:monospace;
								color: black;
								filter:saturate(0);
							}

							`:""}
						`}),m("div",{className:"page-layout",ref:this.pageLayoutRef,children:m("div",{className:"page-content",ref:this.pageContentRef,children:[this.state.authorized?m("div",{className:"sort-controls",children:[m("text-icon",{icon:"downwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"forward"})},className:this.state.imageSort==="forward"?"active":""}),m("text-icon",{icon:"upwards-arrow",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({imageSort:"reverse"})},className:this.state.imageSort==="reverse"?"active":""}),m("text-icon",{icon:"shuffle",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.state.imageSort==="shuffle"?this.galleryRef.current.dispatchEvent(new Event("refresh-thumbnail-index")):this.setState({imageSort:"shuffle"})},className:this.state.imageSort==="shuffle"?"active":""}),m("text-icon",{icon:this.state.zoomedOut?"expand-arrows":"collapse-arrows",onPointerDown:s=>{s.preventDefault(),s.stopPropagation(),this.setState({zoomedOut:!this.state.zoomedOut})},className:"zoom"})]}):null,m(qm,{pageInfo:this.getPageInfoContextValue(),adminMode:this.props.adminMode,bodycopyRef:this.bodycopyRef,children:[m(xo,{portalHost:this.bodycopyRef}),m("bodycopy",{style:{"--fit-height":n+"px","--resize-parent-width":this.state.resizeParentWidth},ref:this.bodycopyRef,children:this.state.authorized?m("gallery-justify",{onContextMenu:this.onItemClick,ref:this.galleryRef,"thumbnail-index":"img:all",sort:this.state.imageSort,"row-height":this.state.zoomedOut?"10vw":"15vw","mobile-row-height":this.state.zoomedOut?"200px":"100vh","show-title":!0,gutter:this.state.zoomedOut?"1px":"2rem 3rem"}):null})]})]})})]})})}else e=m("div",{style:{height:this.state.lastPageLayoutHeight+"px"}});return m("div",{"page-url":this.props.purl?.toLowerCase(),className:"page",ref:this.pageRef,editing:!1,children:[m("a",{id:this.props.purl}),m(hu,{passthrough:!1,scrollingElement:this.scrollingElement,children:e})]})}componentDidUpdate=(e,i,r)=>{this.bindObservers(),this.state.fullyRender===!0&&i.fullyRender===!1?this.onFullComponentRender():this.state.fullyRender===!1&&i.fullyRender===!0&&this.onSparseComponentRender(),(e.activePURL!==this.props.activePURL||e.adminMode!==this.props.adminMode)&&this.updateShowCartLinkCounts(),this.props.local_css!==e.local_css&&this.setMobileOffsets(),e.isMobile!==this.props.isMobile&&this.setMobileOffsets(),this.props.hashPurl!==e.hashPurl&&this.runHashScroll()};shouldComponentUpdate(e,i,r){return!(this.props===e&&this.state===i&&this.context===r||this.hasOwnProperty("lockedContent")&&this.props.content!==e.content&&Lf({...this.props,content:null},{...e,content:null})&&this.state===i&&this.context===r)}bindObservers=(e=!1)=>{(this.pageRef.current!==this.lastPageRef.current||e)&&(this.lastPageRef.current&&(nl.delete(this.lastPageRef.current),pa.unobserve(this.lastPageRef.current),fg.unobserve(this.lastPageRef.current),Ew.unobserve(this.lastPageRef.current)),this.pageRef.current&&!e&&(nl.set(this.pageRef.current,this),pa.observe(this.pageRef.current),fg.observe(this.pageRef.current),Ew.observe(this.pageRef.current)),this.lastPageRef.current=this.pageRef.current),(this.pageLayoutRef.current!==this.lastPageLayoutRef.current||e)&&(this.lastPageLayoutRef.current&&(hg.delete(this.lastPageLayoutRef.current),pa.unobserve(this.lastPageLayoutRef.current)),this.pageLayoutRef.current&&!e&&(hg.set(this.pageLayoutRef.current,this),pa.observe(this.pageLayoutRef.current)),this.lastPageLayoutRef.current=this.pageLayoutRef.current),(this.pageContentRef.current!==this.lastPageContentRef.current||e)&&(this.lastPageContentRef.current&&(ap.delete(this.lastPageContentRef.current),pa.unobserve(this.lastPageContentRef.current)),this.pageContentRef.current&&!e&&(ap.set(this.pageContentRef.current,this),pa.observe(this.pageContentRef.current)),this.lastPageContentRef.current=this.pageContentRef.current),(this.bodycopyRef.current!==this.lastBodycopyRef.current||e)&&(this.lastBodycopyRef.current&&(pg.delete(this.lastBodycopyRef.current),pa.unobserve(this.lastBodycopyRef.current)),this.bodycopyRef.current&&!e&&(pg.set(this.bodycopyRef.current,this),pa.observe(this.bodycopyRef.current)),this.lastBodycopyRef.current=this.bodycopyRef.current)};runHashScroll(){this.props.hashPurl===this.props.purl&&(this.state.fullyRender!==!0?this.setFullRenderState(!0,()=>{this.pageRef.current.scrollIntoView()}):this.pageRef.current.scrollIntoView())}checkLocalStorage=()=>{localStorage.getItem("images-include-offline")&&!this.state.authorized&&(this.setState({authorized:!0}),clearInterval(this.checkStorageInterval))};onKeyDown=e=>{e.keyCode===27&&!store.getState().frontendState.quickView.inited&&(e.preventDefault(),window.location=window.location.origin)};componentDidMount(){window.addEventListener("keydown",this.onKeyDown),this.checkStorageInterval=setInterval(()=>{this.checkLocalStorage()},180);var e=document.body.querySelectorAll("style");e.forEach(i=>{i.id!=="img-style"&&(i.disabled=!0)}),setTimeout(()=>{e.forEach(i=>{i.id!=="img-style"&&(i.disabled=!0)})},100),this.runHashScroll(),Qe.on("window-resize",this.onWindowResize),this.state.fullyRender===!0&&this.onFullComponentRender()}onFullComponentRender(){if(this.pageLayoutRef.current){let e=function(i){i.childNodes.forEach(r=>r.setSaveable(!0));for(let r of i.childNodes)e(r)};e(this.pageLayoutRef.current)}this.pageRef.current&&(this.initializeScriptTags(),this.props.pageMounted(this.pageRef.current).then(()=>{this.updateShowCartLinkCounts(),this.fetchCommerceProductsByLink()})),this.props.isMobile&&this.setMobileOffsets(),this.bindObservers()}componentWillUnmount(){document.body.removeEventListener("request-scroll",this.onScrollRequest,{passive:!1}),window.removeEventListener("keydown",this.onKeyDown),clearInterval(this.checkStorageInterval);var e=document.body.querySelectorAll("style");e.forEach(i=>{i.disabled=!1}),Qe.off("window-resize",this.onWindowResize),this.onSparseComponentRender(!0),this.onResize({height:0},!1)}onSparseComponentRender(e=!1){this.bindObservers(e),this.pageRef.current&&this.props.pageUnMounted(this.pageRef.current)}fetchCommerceProductsByLink=()=>{if(!this.pageRef.current||!this.props.has_shop)return;let e=this.pageRef.current.querySelectorAll('[rel="add-to-cart"], [rel="add_to_cart"]'),i=[];da.default.each(e,r=>{let n=r.getAttribute("data-product");n&&i.push(n)}),this.props.fetchCommerceProducts({idArray:i,onlyNew:!0})};updateShowCartLinkCounts=()=>{if(!this.pageRef.current||!this.props.has_shop||!this.props.cartData||da.default.isEmpty(this.props.cartData)||this.props.adminFrame)return;let e=da.default.keys(this.props.cartData).length,i=this.pageRef.current.querySelectorAll('a[rel="show-cart"], a[rel="show_cart"]');da.default.each(i,r=>{if(r.hasAttribute("show-count")){let n=r.innerHTML.replace(/ *\([^)]*\) */g,"");r.innerText=n+" ("+e+")"}})};initializeScriptTags=()=>{let e=!1,i=function(r){e=!0};window.addEventListener("error",i,!1),da.default.each(this.bodycopyRef.current?.querySelectorAll("script"),r=>{if(r.getAttribute("type")==="text/thumbnail-metadata")return;e=!1;let n=document.createElement("script");[...r.attributes].forEach(o=>{n.setAttribute(o.nodeName,o.nodeValue)}),n.innerHTML=r.textContent,r.replaceWith(n),e&&(e=!1,n.parentNode.insertBefore(document.createComment(n.outerHTML),n),n.remove(),this.props.adminMode&&window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"One or more scripts on this page are broken and were disabled.",type:"notice"}}}))}),window.removeEventListener("error",i)}};sp.defaultProps={contentPad:{top:0,left:0,bottom:0,right:0}};sp.contextType=Gs;iR=De((t,e)=>{let i={id:"img",purl:"/img",pin:!1,title:"Images",backdrops:{},content:"",access_level:"public"},r=(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl;return!ne&&!r&&(r=window.location.pathname.replace(/^\//,"").toLowerCase()),typeof r=="string"&&(r=r.toLowerCase()),{inAdminFrame:!1,isMobile:t.frontendState.isMobile,adminMode:!1,isEditingPage:!1,hasPage:i!==void 0,pid:i?.id,purl:i?.purl,isPin:i?.pin,title:i?.title,backdrops:i?.backdrops,content:i?.content,access_level:i?.access_level,local_css:i?.local_css,pin_options:i?.pin_options,PIDBeingEdited:t.frontendState.PIDBeingEdited,activePID:t.frontendState.activePID,activePURL:r,pageDepth:Je.getParentSetList(t,e.id).length-1,has_shop:t.site.shop_id!==null,cartData:t.commerce?.cart,Editor_PageEditorOutlines:t.adminState?.localStorage?.Editor_PageEditorOutlines}},Xse)(sp)});var nR,c8e,Pw,oR,aR=T(()=>{Pe();nR=ce(Sn(),1);Ua();Re();c8e=ce(ve(),1);W();Pw=class extends ae{constructor(e){super(e),this.state={error:!1},this.inputRef=me()}submit=e=>{e.preventDefault(),this.setState({error:!1,downloadStarted:!1});let i=this.inputRef.current?.value;if(!i)return this.setState({error:"Email address is not valid."});nR.default.post(`https://${Qh?ru:"dev.cargo.site"}/c3filedownload/validate/${i}/${this.props.hash}`).then(r=>{if(r?.data?.jdata?.valid)return this.setState({error:!1,downloadStarted:!0}),window.location.href=`https://${Qh?ru:"dev.cargo.site"}/c3filedownload/download/${i}/${this.props.hash}`;this.setState({error:r?.data?.error||"Email address is not valid."})}).catch(r=>{this.setState({error:"Email address is not valid."})})};onKeyDown=e=>{this.setState({error:!1})};render(){return m(X,{children:[m("style",{children:`

					body {
						letter-spacing: 0;
						padding: 30px;
						color: rgba(0,0,0,.85);
						font-size: 18px;
						line-height: 1;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons;
					}

					.message {
						margin-bottom: 15px;
					}

					.error {
						color: #f00;
					}

					input[type="email"] {
						border-radius: 100px;
						border: 1px solid rgba(0,0,0,0.75);
						padding: 10px 20px;
						font-family: Helvetica;
						font-size: 18px;
						font-style: normal;
						font-weight: 400;
						line-height: 21px;
						letter-spacing: -0.004em;
						text-align: left;
						width: 340px;
					}

					input[type="email"]:placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-webkit-input-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]::-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					input[type="email"]:-moz-placeholder {
						color: rgba(0,0,0,0.75);
					}
					
					.submit {
						-webkit-appearance: none;
						border: none;
						cursor: pointer;
						font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
						font-size: 14.5px;
						white-space: nowrap;
						display: flex;
						margin: 0;
						width: 130px;
						justify-content: flex-start;
						padding: 6.5px 12px 7.5px 15px;
						font-weight: 500;
						flex: 1 1;
						text-align: center;
						height: auto;
						min-height: 28.5px;
						line-height: 1;
						border-radius: 100px;
						user-select: none;
						position: relative;
						background: #262626;
						color: #fff;
						padding-right: 5px;
						margin-top: 10px;
					}
					.submit:active {
						opacity: .7;
					}
				`}),this.state.downloadStarted?m("span",{className:"message",children:"Your download will begin shortly..."}):m(X,{children:[m("span",{className:"message",children:"Please verify your email address:"}),m("form",{noValidate:!0,onSubmit:this.submit,children:[m("input",{name:"email",type:"Email",placeholder:"Email address...",autofocus:"true",onKeyDown:this.onKeyDown,ref:this.inputRef,formNoValidate:!0}),m("button",{className:"submit",type:"submit",children:"Submit"})]}),this.state.error&&m(X,{children:[m("br",{}),m("span",{class:"error",children:this.state.error})]})]})]})}},oR=Pw});var uR={};ai(uR,{default:()=>ile});function Qse(t,e){return{siteId:t.site.id,contactForm:t.frontendState.contactForm,colorTheme:t.siteDesign?.contact_form?.theme||"auto",adminMode:Ri}}function ele(t){return Pt({updateFrontendState:He.updateFrontendState},t)}var sR,lR,mg,Aw,Iw,w8e,Tw,Jse,tle,ile,cR=T(()=>{Pe();Se();Ra();sR=ce(Sn(),1);ht();di();jt();lR=ce(ve(),1);Re();W();mg={},Aw=window.matchMedia("(max-aspect-ratio: 1/1)"),Iw=Aw.matches,w8e=Aw.addEventListener("change",t=>{Iw=t.matches,mg[1]&&mg[1].setState({isMobile:Iw})}),Tw=class extends ae{constructor(e){super(e),this.state={loaded:!1,showContents:!1,animate:!1,sent:!1,loading:!1,emailValue:"",messageValue:"",emailError:!1,messageError:!1,isMobile:Iw,shadowRoot:null,systemTheme:window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light",transitioningTheme:!1},this.cssLinkRef=me(),this.contactFormRef=me(),this.startTime=null,this.inputRef=me(),this.throttledResize=lR.default.throttle(this.resizeHandler,200)}componentDidMount(){this.contactFormRef.current&&!this.contactFormRef.current.shadowRoot&&this.contactFormRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.contactFormRef.current?.shadowRoot}),this.props.contactForm.inited||this.props.updateFrontendState({contactForm:{transition:!1,inited:!0}}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.darkModeMediaQueryCallback),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})}darkModeMediaQueryCallback=e=>{let i=window.matchMedia("(prefers-color-scheme: dark)");this.setState({systemTheme:i.matches?"dark":"light"})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,i=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${i}px`)};handleEmailChange=e=>{this.setState({emailValue:e.target.value,emailError:!1})};handleMessageChange=e=>{this.setState({messageValue:e.target.value,messageError:!1})};submitForm=()=>{this.validate()&&this.setState({loading:!0},()=>{this.startTime=new Date;let e={from:this.state.emailValue,site_id:this.props.siteId,message:this.state.messageValue};sR.default.post("https://cargo.site/dispatch/notifications/sendContactMessage",e,{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(r=>{let o=new Date-this.startTime;if(this.startTime=null,o<=2500){let s=2500-o;setTimeout(()=>{this.closeForm(null,"submit")},s)}else this.closeForm(null,"submit")}).catch(r=>{window.store.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{message:"Message failed to send, please try again.",type:"notice"}}}),this.startTime=null,this.handleFormError()})})};closeForm=(e,i)=>{this.startTime===null&&(document.body.style.overflow="",window.removeEventListener("resize",this.throttledResize),i?window.requestAnimationFrame(()=>{this.setState({sent:!0},()=>{this.resetForm()})}):window.requestAnimationFrame(()=>{this.setState({animate:!1},()=>{this.resetForm()})}))};resetForm=()=>{delete mg[1],setTimeout(()=>{this.props.closeOverlay()},280)};componentDidUpdate=e=>{this.props.contactForm.transition!==e.contactForm.transition&&!e.contactForm.transition&&this.props.contactForm.transition&&this.startTime===null&&this.state.animate&&this.closeForm(),this.props.colorTheme!==e.colorTheme&&this.setState({transitioningTheme:!0},()=>{setTimeout(()=>{this.setState({transitioningTheme:!1})},500)})};componentWillUnmount=()=>{this.props.contactForm.inited&&this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}}),this.props.adminMode&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),document.body.style.overflow="",document.documentElement.style.removeProperty("--contact-form-vh"),document.documentElement.style.removeProperty("--contact-form-vw")};handleFormError=()=>{this.setState({loading:!1})};handleTransitionEnd=()=>{};focusInput=()=>{this.inputRef?.current?.focus()};validate=()=>{let e=/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+$/i,i=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)+$/i,r=!0,n=!0,o=this.state.emailValue,s=this.state.messageValue;o.length<=0&&(r=!1),s.length<=0&&(n=!1);let u=o.split("@");return u.length!==2&&(r=!1),e.test(u[0])||(r=!1),i.test(u[1])||(r=!1),r||this.setState({emailError:!0}),n||this.setState({messageError:!0}),!(!r||!n)};onCSSLoad=()=>{this.setState({showContents:!0,isMobile:Aw.matches},()=>{let e=(window.innerHeight-30)*.01,i=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--contact-form-vh",`${e}px`),document.documentElement.style.setProperty("--contact-form-vw",`${i}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",mg[1]=this,setTimeout(()=>{this.setState({animate:!0})},33)})};render(){let e=this.props.colorTheme==="auto"||!this.props.colorTheme?this.state.systemTheme:this.props.colorTheme;return m("div",{className:"contact-form",ref:this.contactFormRef,children:[" ",this.state.shadowRoot&&je(m(X,{children:[m("link",{rel:"stylesheet",onLoad:this.onCSSLoad,ref:this.cssLinkRef,type:"text/css",href:"https://build.cargo.site/frontend/b164f5/css/front-end/contact-form.css"}),this.state.showContents===!0?m("div",{className:`background${this.state.animate?" active":""}${this.state.sent?" sent":""}${e?" "+e:""}${this.state.transitioningTheme?" transitioning-theme":""}`,children:m("div",{className:`modal${this.state.animate?" active":""}${this.state.sent?" sent":""}${this.state.isMobile?" mobile":""}`,onTransitionEnd:i=>{this.state.sent===!0&&this.handleTransitionEnd(i)},children:m("div",{className:"modal-inner",children:[m("div",{className:"header",children:[m("div",{className:"title"}),m("div",{className:"exit",onPointerUp:i=>{this.closeForm(i)},children:m("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[m("circle",{opacity:"var(--contact-form-close-circle-opacity)",cx:"10",cy:"10",r:"10",fill:"var(--contact-form-color-flat-reverse)"}),m("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0002 11.0607L14.3099 15.3703L15.3705 14.3096L11.0609 10L15.3705 5.69036L14.3099 4.6297L10.0002 8.93934L5.69054 4.62964L4.62988 5.6903L8.93958 10L4.62988 14.3097L5.69054 15.3704L10.0002 11.0607Z",fill:"var(--contact-form-color-flat)"})]})})]}),m("hr",{}),m("div",{onPointerUp:i=>{this.focusInput(i)},className:"email",children:[m("label",{htmlfor:"email",children:["From:","\xA0"]}),m("div",{className:`text-input${this.state.emailError?" error":""}`,children:m("input",{ref:this.inputRef,type:"email",name:"email",autocomplete:"email",value:this.state.emailValue,onChange:i=>{this.handleEmailChange(i)},placeholder:"(enter your email address)..."})})]}),m("hr",{}),m("div",{className:`text-area${this.state.messageError?" error":""}`,children:m("textarea",{name:"message",type:"text",placeholder:"Write your message...",rows:"1",resize:"false",value:this.state.messageValue,onChange:i=>{this.handleMessageChange(i)}})}),m("hr",{}),m("div",{className:"button-area",children:this.state.loading?m(X,{children:m("button",{className:"send",children:["Sending",m(Jse,{})]})}):m(X,{children:[m("button",{className:"cancel",onPointerUp:i=>{this.closeForm(i)},children:"Cancel"}),m("button",{className:"send",onPointerUp:i=>{this.submitForm(i)},children:"Send"})]})})]})})}):null]}),this.state.shadowRoot)]})}},Jse=()=>m("div",{className:"caution-processing"});tle=De(Qse,ele)(Tw),ile=tle});var dR={};ai(dR,{default:()=>ole,validateShopModel:()=>bg});function rle(t){return Pt({updateFrontendState:He.updateFrontendState,fetchCommerceProducts:He.fetchCommerceProducts,fetchContent:He.fetchContent,fetchShopModel:He.fetchShopModel,addCommerceProductToCart:He.addCommerceProductToCart,resetCommerceCart:He.resetCommerceCart},t)}var A8e,vg,gg,lp,Mw,bg,kw,nle,ole,Rw=T(()=>{Pe();Se();ia();ht();di();jt();es();Re();A8e=ce(Sn(),1),vg=ce(ve(),1);W();ne||(gg=window.matchMedia("(prefers-color-scheme: dark)"),lp=window.matchMedia("(max-aspect-ratio: 1/1)"),lp.addEventListener("change",()=>{Mw?.setState({isMobile:lp.matches})}));bg=async()=>{if(Dt.getState().site.shop_id===null)throw"site does not have shop setup";let e=await Dt.dispatch(He.fetchShopModel());if(vg.default.isEmpty(e))throw"no model data";if(Ri===!1&&e.has_valid_config===!1&&!Dt.getState().site?.is_template)throw Dt.dispatch({type:"UPDATE_FRONTEND_STATE",payload:{alertModal:{header:"Coming Soon",type:"notice"}}}),"shop modal contains invalid config";return e},kw=class extends ae{constructor(e){super(e),bg().then(i=>{this.setState({shopModel:i},()=>{this.openOverlay()})}).catch(i=>{console.warn(i),this.closeOverlay()}),this.state={shopModel:null,loaded:!1,animate:!1,isMobile:lp.matches,shadowRoot:null,theme:this.getTheme()},this.cartElementRef=me(),this.iframeRef=me(),this.startTime=null,this.inputRef=me(),this.throttledResize=vg.default.throttle(this.resizeHandler,200)}closeOverlay=()=>{Dt.getState().frontendState.cartOpen!==!0?this.props.closeOverlay({replaceHistory:!0}):window.requestAnimationFrame(()=>{this.setState({closing:!0},()=>{setTimeout(this.props.closeOverlay,280)}),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")})};onKeyDown=e=>{if(e.key==="Escape"||e.keyCode===9){let r=window.store?.getState()?.frontendState.alertModal!==!1,n=document.querySelector(".alert-window")!==null;if(r||n)return;this.closeOverlay(e)}};openOverlay(){this.cartElementRef.current&&!this.cartElementRef.current.shadowRoot&&this.cartElementRef.current.attachShadow({mode:"open"}),this.setState({shadowRoot:this.cartElementRef.current?.shadowRoot}),this.props.updateFrontendState({cartOpen:!0}),window.addEventListener("keydown",this.onKeyDown,!0),requestAnimationFrame(()=>{this.iframeRef.current&&(document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1"),this.iframeRef.current.src="/following_frame.html")})}onBeforeCartInit=()=>{this.iframeRef.current.contentWindow.__fetchCommerceProducts__=this.props.fetchCommerceProducts,this.iframeRef.current.contentWindow.__fetchContent__=this.props.fetchContent,this.iframeRef.current.contentWindow.__frontend_history__=this.props.history,this.iframeRef.current.contentWindow.__add_to_cart__=this.props.addCommerceProductToCart,this.iframeRef.current.contentWindow.__reset_cart__=this.props.resetCommerceCart,this.iframeRef.current.contentWindow.__close_overlay__=()=>{this.closeOverlay()}};onCartReady=()=>{this.proxyRoute(),this.proxyTheme()};onCSSLoad=()=>{this.setState({loaded:!0,isMobile:lp.matches},()=>{let e=(window.innerHeight-30)*.01,i=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${i}px`),window.addEventListener("resize",this.throttledResize),document.body.style.overflow="hidden",document.scrollingElement.style.overflow="hidden",requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.setState({animate:!0})})})})})})})};resizeHandler=()=>{let e=(window.innerHeight-30)*.01,i=(window.innerWidth-30)*.01;document.documentElement.style.setProperty("--cart-vh",`${e}px`),document.documentElement.style.setProperty("--cart-vw",`${i}px`)};componentWillUnmount=()=>{this.props.updateFrontendState({cartOpen:!1}),Mw=null,gg.removeEventListener("change",this.onThemeChange),window.removeEventListener("cart-before-init",this.onBeforeCartInit),window.removeEventListener("cart-ready",this.onCartReady),document.body.style.overflow="",document.scrollingElement.style.overflow="",window.removeEventListener("resize",this.throttledResize),window.removeEventListener("keydown",this.onKeyDown,!0),document.documentElement.style.removeProperty("--cart-vh"),document.documentElement.style.removeProperty("--cart-vw"),document.querySelector('[name="viewport"]')?.setAttribute("content","width=device-width, initial-scale=1, shrink-to-fit=no")};componentDidMount(){Mw=this,gg.addEventListener("change",this.onThemeChange),window.addEventListener("cart-before-init",this.onBeforeCartInit,!1),window.addEventListener("cart-ready",this.onCartReady,!1)}componentDidUpdate(e,i){this.props.requestedTheme!==e.requestedTheme&&this.onThemeChange(),this.state.theme!==i.theme&&this.proxyTheme(),this.proxyRoute()}onThemeChange=()=>{this.setState({theme:this.getTheme()})};getTheme=()=>this.props.requestedTheme==="auto"?gg.matches?"dark":"light":this.props.requestedTheme;proxyRoute(){!this.iframeRef||!this.iframeRef.current||vg.default.isEqual(this.props.match,this.currentMatch)||this.iframeRef.current.contentWindow.renderRoute&&(this.currentMatch=this.props.match,this.iframeRef.current.contentWindow.renderRoute?.(this.currentMatch))}proxyTheme(){try{this.iframeRef.current.contentWindow.dispatchEvent(new CustomEvent("colorScheme",{detail:this.state.theme}))}catch{}}render(){return this.state.shopModel?m("div",{className:"cart",ref:this.cartElementRef,children:[" ",this.state.shadowRoot&&je(m(X,{children:[m("link",{rel:"stylesheet",onLoad:this.onCSSLoad,type:"text/css",href:"https://build.cargo.site/frontend/b164f5/css/front-end/cart.css"}),m("div",{className:`background${this.state.animate?" active":""}${this.state.closing?" closing ":" "}${this.state.theme}`,onMouseDown:()=>{this.currentMatch&&!this.currentMatch.url.match("checkout")&&this.closeOverlay()},style:{height:this.state.loaded?"":"0"},children:m("div",{className:`modal${this.state.animate?" active":""}${this.state.closing?" closing":""}${this.state.isMobile?" mobile":""}`,style:{visibility:this.state.loaded?"":"hidden"},children:m("div",{className:"modal-inner",children:m("iframe",{ref:this.iframeRef,src:"about:blank"})})})})]}),this.state.shadowRoot)]}):null}};nle=Bn(De(t=>({requestedTheme:t.siteDesign.cart?.theme||"light"}),rle)(kw)),ole=nle});function ale(t){return Pt({fetchContent:He.fetchContent,updateFrontendState:He.updateFrontendState},t)}var Nw,ol,yg,pR,hR,Ow,fR,mR=T(()=>{Pe();ia();di();J8();ht();Re();jt();js();_i();Pd();_w();rR();aR();Nw=ce(ve(),1);W();ol={ROOT_PATH:"/",IMG_PATH:"/siteimages",SITE_PREVIEW_PROXY_PATH:"/site.preview/*",ADMIN_CLIENT_SIDE_RENDERING_PATH:"/client-side-rendering.html",PAGE_PATH:"/:page",PAGE_BY_ID_PATH:"/pid/:pid/:args?",DIGITAL_PRODUCT_DOWNLOAD:"/filedownload/:hash"},yg={CART:"/cart/:section?/:order_id?",CONTACT:"/contact-form"};ne||(pR=(cR(),Lc(uR)).default,hR=(Rw(),Lc(dR)).default);Ow=class extends ae{constructor(e){super(e),this.checkForOverlayPath(this.props.location)}shouldComponentUpdate(e){return this.props.location!==e.location&&this.checkForOverlayPath(e.location),!0}checkForOverlayPath=e=>{for(let i in yg){let r=yg[i],n=Ds(e.pathname,{path:r});if(n){if(Nw.default.isEqual(n,this.lastMatch))return;this.lastMatch=n,this.lockedUnderlayLocation||(this.lockedUnderlayLocation={...this.props.location},this.lockedUnderlayLocation.pathname===n.url&&(this.lockedUnderlayLocation.pathname="/"));return}else delete this.lastMatch}this.lockedUnderlayLocation&&(this.lockedUnderlayLocation=null)};deferredContentRenderer(e,i){let r=this.props.store.getState(),n=i==="purl"?Je.getContentByPurl(r,e):Je.getContentById(r,e);return n?.overlay&&(e=ov(r,Je,n.id),i="pid"),ne?m(Sw,{id:e,idType:i}):(this.lastRequestedId=e,this.lastRequestedIdType=i,this.currentId?(this.currentId!==this.lastRequestedId||this.currentIdType!==this.lastRequestedIdType)&&(window.__deferred_page_load_promise__=new Promise(o=>{Nw.default.defer(s=>{this.props.fetchContent(s,{idType:i}).catch(()=>{}).finally(()=>{this.lastRequestedId===s&&(this.currentId=this.lastRequestedId,this.currentIdType=this.lastRequestedIdType,this.forceUpdate()),delete window.__deferred_page_load_promise__,o()})},this.lastRequestedId)})):(this.currentId=this.lastRequestedId,this.currentIdType=this.lastRequestedIdType),m(r_,{children:m(Sw,{id:this.currentId,idType:this.currentIdType,hashPurl:this.props.hashPurl})}))}setHomepageClass=()=>{this.props.location?.pathname==="/"||this.props.location?.pathname.includes(this.props.homepageId)?document.querySelector("body").classList.add("home"):document.querySelector("body").classList.remove("home")};componentDidUpdate=()=>{this.setHomepageClass()};componentDidMount=()=>{this.setHomepageClass()};render(){if(this.props.adminMode&&this.props.adminInitialized===!1||!this.props.hasSite)return null;let e=null,i=null,r=this.props.location;return this.lockedUnderlayLocation&&(r=this.lockedUnderlayLocation,i=this.props.location,e=m("div",{class:"overlay",children:m(Zh,{location:i,children:[m(Cn,{exact:!0,path:yg.CART,render:({match:n})=>m(hR,{closeOverlay:(o={})=>{this.props.history[o.replaceHistory?"replace":"push"](this.lockedUnderlayLocation.pathname,{preventScrollReset:!0})}})}),m(Cn,{exact:!0,path:yg.CONTACT,render:({match:n})=>m(pR,{closeOverlay:()=>{this.props.history.push(this.lockedUnderlayLocation.pathname,{preventScrollReset:!0})}})})]})})),m(X,{children:[e,m(Zh,{location:r,children:[m(Cn,{exact:!0,path:ol.ROOT_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),m(Cn,{exact:!0,path:ol.DIGITAL_PRODUCT_DOWNLOAD,render:({match:n})=>m(oR,{hash:n.params.hash})}),m(Cn,{exact:!0,path:ol.IMG_PATH,render:({match:n})=>m(iR,{})}),m(Cn,{exact:!0,path:ol.SITE_PREVIEW_PROXY_PATH,render:({match:n})=>this.props.isFeed?this.deferredContentRenderer("root","pid"):this.deferredContentRenderer(this.props.homepageId||"root","pid")}),m(Cn,{exact:!0,path:ol.ADMIN_CLIENT_SIDE_RENDERING_PATH,render:({match:n})=>null}),m(Cn,{exact:!0,path:ol.PAGE_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.page.toLowerCase(),"purl")}),m(Cn,{exact:!0,path:ol.PAGE_BY_ID_PATH,render:({match:n})=>this.deferredContentRenderer(n.params.pid,"pid")}),m(Cn,{path:"*",render:({location:n})=>this.deferredContentRenderer(n.pathname.substring(1),"purl")})]})]})}};fR=_n(Bn(De((t,e)=>{let i=ne?null:window.location.hash.substring(1).toLowerCase();return{hasSite:!!t.site,homepageId:Je.getHomepageId(t),isFeed:t.sets.byId.root.stack,adminInitialized:t.adminState?.initialized||!1,adminMode:t.frontendState.adminMode,hashPurl:i}},ale)(Ow)))});var gR,vR,bR=T(()=>{Mr();up();gR=ce(ve(),1);Re();vR={};ne||(vR=window.lightbox={});(function(){"use strict";(function(r,n){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipe=n()})(this,function(){"use strict";var r=function(n,o,s,u){var c={features:null,bind:function(C,M,D,R){var pe=(R?"remove":"add")+"EventListener";M=M.split(" ");for(var Ce=0;Ce<M.length;Ce++)M[Ce]&&C[pe](M[Ce],D,!1)},isArray:function(C){return C instanceof Array},createEl:function(C,M){var D=document.createElement(M||"div");return C&&(D.className=C),D},getScrollY:function(){var C=window.pageYOffset;return C!==void 0?C:document.documentElement.scrollTop},unbind:function(C,M,D){c.bind(C,M,D,!0)},removeClass:function(C,M){var D=new RegExp("(\\s|^)"+M+"(\\s|$)");C.className=C.className.replace(D," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(C,M){c.hasClass(C,M)||(C.className+=(C.className?" ":"")+M)},hasClass:function(C,M){return C.className&&new RegExp("(^|\\s)"+M+"(\\s|$)").test(C.className)},getChildByClass:function(C,M){for(var D=C.firstChild;D;){if(c.hasClass(D,M))return D;D=D.nextSibling}},arraySearch:function(C,M,D){for(var R=C.length;R--;)if(C[R][D]===M)return R;return-1},extend:function(C,M,D){for(var R in M)if(M.hasOwnProperty(R)){if(D&&C.hasOwnProperty(R))continue;C[R]=M[R]}},easing:{sine:{out:function(C){return Math.sin(C*(Math.PI/2))},inOut:function(C){return-(Math.cos(Math.PI*C)-1)/2}},cubic:{out:function(C){return--C*C*C+1}}},detectFeatures:function(){if(c.features)return c.features;var C=c.createEl(),M=C.style,D="",R={};if(R.oldIE=document.all&&!document.addEventListener,R.touch="ontouchstart"in window,window.requestAnimationFrame&&(R.raf=window.requestAnimationFrame,R.caf=window.cancelAnimationFrame),R.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!R.pointerEvent){var pe=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var Ce=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);Ce&&Ce.length>0&&(Ce=parseInt(Ce[1],10),Ce>=1&&Ce<8&&(R.isOldIOSPhone=!0))}var ke=pe.match(/Android\s([0-9\.]*)/),We=ke?ke[1]:0;We=parseFloat(We),We>=1&&(We<4.4&&(R.isOldAndroid=!0),R.androidVersion=We),R.isMobileOpera=/opera mini|opera mobi/i.test(pe)}for(var Ye=["transform","perspective","animationName"],lt=["","webkit","Moz","ms","O"],ut,wi,kt=0;kt<4;kt++){D=lt[kt];for(var Ii=0;Ii<3;Ii++)ut=Ye[Ii],wi=D+(D?ut.charAt(0).toUpperCase()+ut.slice(1):ut),!R[ut]&&wi in M&&(R[ut]=wi);D&&!R.raf&&(D=D.toLowerCase(),R.raf=window[D+"RequestAnimationFrame"],R.raf&&(R.caf=window[D+"CancelAnimationFrame"]||window[D+"CancelRequestAnimationFrame"]))}if(!R.raf){var Sr=0;R.raf=function(ui){var ni=new Date().getTime(),mi=Math.max(0,16-(ni-Sr)),Fi=window.setTimeout(function(){ui(ni+mi)},mi);return Sr=ni+mi,Fi},R.caf=function(ui){clearTimeout(ui)}}return R.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,c.features=R,R}};c.detectFeatures(),c.features.oldIE&&(c.bind=function(C,M,D,R){M=M.split(" ");for(var pe=(R?"detach":"attach")+"Event",Ce,ke=function(){D.handleEvent.call(D)},We=0;We<M.length;We++)if(Ce=M[We],Ce)if(typeof D=="object"&&D.handleEvent){if(!R)D["oldIE"+Ce]=ke;else if(!D["oldIE"+Ce])return!1;C[pe]("on"+Ce,D["oldIE"+Ce])}else C[pe]("on"+Ce,D)});var d=this,p=25,g=3,v={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,animatedCloseOnScroll:!0,showCaption:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:222,showAnimationDuration:222,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(C){return C.tagName==="A"},getDoubleTapZoom:function(C,M){return C||M.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};c.extend(v,u);var Vo=null,b=function(){var C=c.getScrollY();Vo===null&&(Vo=C),_l||(Ji=Ji+(C-Vo),Vo=C,se<=d.currItem.fitRatio&&!Xr&&v.modal&&(!v.animatedCloseOnScroll||Do||br?Ji=0:$e&&Math.abs(Ji)>0&&!Gr&&(Dn(),wc()),Nr&&clearTimeout(Nr),v.animatedCloseOnScroll,Nr=setTimeout(function(){Dn(),gs()},200)))},S=function(){return{x:0,y:0}},_=function(){return{x:0,y:0,rotation:0}},E,I,F,O,L,z,G=S(),H=_(),N=_(),J,oe,te,K={},U={},se,re,Q,le,j,B,Y=0,ie={},de=S(),fe,be,Me=0,Ee,Fe,qe,nt,$e,ot,Ae=!0,st,ct=[],ft,Be,mt,Lt,St,Wt,rt,Ki={},ri=!1,No,Gr=!1,Mn=function(C,M){c.extend(d,M.publicMethods),ct.push(C)},fa=function(C){var M=sr();return C>M-1?C-M:C<0?M+C:C},Oo={},Ei=function(C,M){return Oo[C]||(Oo[C]=[]),Oo[C].push(M)},vt=function(C){var M=Oo[C];if(M){var D=Array.prototype.slice.call(arguments);D.shift();for(var R=0;R<M.length;R++)M[R].apply(d,D)}},kr=function(){return new Date().getTime()},gr=function(C){us=C,d.bg.style.opacity=C*v.bgOpacity},dl=function(C,M,D,R,pe,Ce){(!ri||pe&&pe!==d.currItem)&&(R=R/(pe?pe.fitRatio:d.currItem.fitRatio)),D=D+U.top,C[$e]=Q+M+"px, "+D+"px"+le+" scale("+R+") rotateZ("+Ce+"rad)"},fi=function(C){yr&&(C&&(se>d.currItem.fitRatio?ri||(pn(d.currItem,!1,!0),ri=!0):ri&&(pn(d.currItem),ri=!1)),dl(yr,N.x,N.y,se,null,N.rotation))},io=function(C){C.container&&dl(C.container.style,C.initialPosition.x,C.initialPosition.y,C.initialZoomLevel,C,0)},ma=function(C,M,D){D[$e]=Q+C+"px, "+M+"px"+le},pl=function(C,M){if(!v.loop&&M){var D=O+(de.x*Y-C)/de.x,R=C-Yr.x;(D<0&&R>0||D>=sr()-1&&R<0)&&(C=Yr.x+R*v.mainScrollEndFriction)}Yr.x=C,ma(C,0,L)},ec=function(C,M){var D=qo[C]-ie[C];return H[C]+G[C]+D-D*(M/re)},Yi=function(C,M){C.x=M.x,C.y=M.y,M.id&&(C.id=M.id)},tc=function(C){C.x=Math.round(C.x),C.y=Math.round(C.y)},ic=null,rc=function(){ic&&(c.unbind(document,"mousemove",rc),c.addClass(n,"quick-view-has-mouse"),v.mouseUsed=!0,vt("mouseUsed")),ic=setTimeout(function(){ic=null},100)},e1=function(){c.bind(document,"keydown",d),rt.transform&&c.bind(d.scrollWrap,"click",d),v.mouseUsed||c.bind(document,"mousemove",rc),c.bind(window,"resize scroll orientationchange",d),vt("bindEvents")},t1=function(){c.unbind(window,"resize scroll orientationchange",d),c.unbind(window,"scroll",te.scroll),c.unbind(document,"keydown",d),c.unbind(document,"mousemove",rc),rt.transform&&c.unbind(d.scrollWrap,"click",d),br&&c.unbind(window,J,d),clearTimeout(No),vt("unbindEvents")},hl=function(C,M){var D=ya(d.currItem,K,C);return M&&(dt=D),D},xp=function(C){return C||(C=d.currItem),C.initialZoomLevel},Cp=function(C){return C||(C=d.currItem),C.w>0?v.maxSpreadZoom:1},Sp=function(C,M,D,R){return R===d.currItem.initialZoomLevel?(D[C]=d.currItem.initialPosition[C],!0):(D[C]=ec(C,R),D[C]>M.min[C]?(D[C]=M.min[C],!0):D[C]<M.max[C]?(D[C]=M.max[C],!0):!1)},nc=function(){if($e){var C=rt.perspective&&!st;Q="translate"+(C?"3d(":"("),le=rt.perspective?", 0px)":")";return}$e="left",c.addClass(n,"quick-view-ie"),ma=function(M,D){D.left=M+"px"},io=function(M){var D=M.fitRatio>1?1:M.fitRatio,R=M.container.style,pe=D*M.w,Ce=D*M.h;R.width=pe+"px",R.height=Ce+"px",R.left=M.initialPosition.x+"px",R.top=M.initialPosition.y+"px"},fi=function(){if(yr){var M=yr,D=d.currItem,R=D.fitRatio>1?1:D.fitRatio,pe=R*D.w,Ce=R*D.h;M.width=pe+"px",M.height=Ce+"px",M.left=N.x+"px",M.top=N.y+"px"}}},i1=function(C){var M="";v.escKey&&C.keyCode===27?M="close":v.arrowKeys&&(C.keyCode===37?M="prev":C.keyCode===39&&(M="next")),C.keyCode===32&&(C.preventDefault(),C.stopImmediatePropagation(),M="close"),M&&!C.ctrlKey&&!C.altKey&&!C.shiftKey&&!C.metaKey&&(C.preventDefault?C.preventDefault():C.returnValue=!1,d[M]())},oc=function(C){C&&(kn||ro||Zi||va)&&(C.preventDefault(),C.stopPropagation())},_p=function(){d.setScrollOffset(0,c.getScrollY())};ne||window.addEventListener("scroll",b);var vr={},Do=0,ns=function(C){vr[C]&&(vr[C].raf&&Be(vr[C].raf),Do--,delete vr[C])},ac=function(C){vr[C]&&ns(C),vr[C]||(Do++,vr[C]={})},os=function(){for(var C in vr)vr.hasOwnProperty(C)&&ns(C)},ga=function(C,M,D,R,pe,Ce,ke){var We=kr(),Ye;ac(C);var lt=function(){if(vr[C]){if(Ye=kr()-We,Ye>=R){ns(C),Ce(D),ke&&ke();return}Ce((D-M)*pe(Ye/R)+M),vr[C].raf=ft(lt)}};lt()},r1={shout:vt,listen:Ei,viewportSize:K,options:v,isMainScrollAnimating:function(){return Zi},getZoomLevel:function(){return se},getCurrentIndex:function(){return O},isDragging:function(){return br},isZooming:function(){return cn},setScrollOffset:function(C,M){ie.x=C,Wt=ie.y=M,vt("updateScrollOffset",ie)},applyZoomPan:function(C,M,D,R){N.x=M,N.y=D,se=C,fi(R)},init:function(){if(!(E||I)){e("init",d);var C;d.framework=c,d.template=n,d.bg=c.getChildByClass(n,"quick-view-bg"),d.captionPositioner=c.getChildByClass(n,"quick-view-caption-positioner"),d.captionWrapper=c.getChildByClass(d.captionPositioner,"quick-view-caption-wrapper"),d.caption=c.getChildByClass(d.captionWrapper,"quick-view-caption"),mt=n.className,E=!0,rt=c.detectFeatures(),ft=rt.raf,Be=rt.caf,$e=rt.transform,St=rt.oldIE,d.scrollWrap=c.getChildByClass(n,"quick-view-scroll-wrap"),d.container=c.getChildByClass(d.scrollWrap,"quick-view-container"),L=d.container.style,d.itemHolders=fe=[{el:d.container.children[0],wrap:0,index:-1},{el:d.container.children[1],wrap:0,index:-1},{el:d.container.children[2],wrap:0,index:-1}],fe[0].el.style.display=fe[2].el.style.display="none",nc(),te={resize:d.updateSize,orientationchange:function(){clearTimeout(No),No=setTimeout(function(){K.x!==d.scrollWrap.clientWidth&&d.updateSize()},500)},scroll:_p,keydown:i1,click:oc};var M=rt.isOldIOSPhone||rt.isOldAndroid||rt.isMobileOpera;for((!rt.animationName||!rt.transform||M)&&(v.showAnimationDuration=v.hideAnimationDuration=0),C=0;C<ct.length;C++)d["init"+ct[C]]();if(o){var D=d.ui=new o(d,c);D.init()}vt("firstUpdate"),O=O||v.index||0,(isNaN(O)||O<0||O>=sr())&&(O=0),d.currItem=dn(O),(rt.isOldIOSPhone||rt.isOldAndroid)&&(Ae=!1),n.setAttribute("aria-hidden","false"),v.modal&&(Ae?n.style.position="fixed":(n.style.position="absolute",n.style.top=c.getScrollY()+"px")),n.classList.add("quick-view-vertical-align-"+v.alignVertical),n.classList.add("quick-view-horizontal-align-"+v.alignHorizontal),Wt===void 0&&(vt("initialLayout"),Wt=Lt=c.getScrollY());var R="quick-view-open ";for(v.mainClass&&(R+=v.mainClass+" "),v.showHideOpacity&&(R+="quick-view-animate_opacity "),R+=st?"quick-view-touch":"quick-view-notouch",R+=rt.animationName?" quick-view-css_animation":"",R+=rt.svg?" quick-view-svg":"",c.addClass(n,R),d.updateSize(),z=-1,Me=null,C=0;C<g;C++)ma((C+z)*de.x+U.left,0,fe[C].el.style);St||c.bind(d.scrollWrap,oe,d),Ei("initialZoomInEnd",function(){d.setContent(fe[0],O-1),d.setContent(fe[2],O+1),fe[0].el.style.display=fe[2].el.style.display="block",v.focus&&n.focus(),e1()}),d.setContent(fe[1],O),d.updateCurrItem(),setTimeout(d.updateCaption,v.showAnimationDuration+50),vt("afterInit",O),e("after-init",d),Ae||(j=setInterval(function(){!Do&&!br&&!cn&&se===d.currItem.initialZoomLevel&&d.updateSize()},1e3)),c.addClass(n,"quick-view-visible")}},close:function(){E&&(E=!1,I=!0,vt("close"),e("closing",d),t1(),vc(d.currItem,null,!0,d.destroy))},destroy:function(){vt("destroy"),e("destroy",d),wr&&clearTimeout(wr),n.setAttribute("aria-hidden","true"),n.className=mt,j&&clearInterval(j),c.unbind(d.scrollWrap,oe,d),c.unbind(window,"scroll",d),window.removeEventListener("scroll",b),pc(),os(),Oo=null},panTo:function(C,M,D){D||(C>dt.min.x?C=dt.min.x:C<dt.max.x&&(C=dt.max.x),M>dt.min.y?M=dt.min.y:M<dt.max.y&&(M=dt.max.y)),N.x=C,N.y=M,fi()},handleEvent:function(C){C=C||window.event,te[C.type]&&te[C.type](C)},goTo:function(C){C=fa(C);var M=C-O;Me=M,O=C,d.currItem=dn(O),Y-=M,pl(de.x*Y),os(),Zi=!1,d.updateCurrItem()},next:function(){d.goTo(O+1)},prev:function(){d.goTo(O-1)},updateCurrZoomItem:function(C){if(C&&(vt("beforeChange",0),e("before-slide-change",d,0)),fe[1].el.children.length){var M=fe[1].el.children[0];c.hasClass(M,"quick-view-zoom-wrap")?yr=M.style:yr=null}else yr=null;dt=d.currItem.bounds,re=se=d.currItem.initialZoomLevel,N.x=dt.center.x,N.y=dt.center.y,C&&(vt("afterChange",O),e("after-slide-change",d))},invalidateCurrItems:function(){B=!0;for(var C=0;C<g;C++)fe[C].item&&(fe[C].item.needsUpdate=!0)},updateCaption:function(){if(d.currItem.caption&&v.showCaption){for(;d.caption.childNodes.length>0;)d.caption.childNodes[0].parentNode.removeChild(d.caption.childNodes[0]);d.caption.appendChild(d.currItem.caption),Gt(d.currItem),d.caption.classList.remove("hidden")}else if(v.showCaption){var C=function(){for(;d.caption.childNodes.length>0;)d.caption.childNodes[0].parentNode.removeChild(d.caption.childNodes[0]);d.caption.removeEventListener("transitionend",C)};d.caption.classList.contains("hidden")?C():(d.caption.addEventListener("transitionend",C),d.caption.classList.add("hidden"))}},updateCurrItem:function(C){if(Me!==0){var M=Math.abs(Me),D;if(!(C&&M<2)){d.currItem=dn(O),ri=!1,vt("beforeChange",Me);var R=Me;R===null&&(R=0),e("slide-change",d,R),M>=g&&(z+=Me+(Me>0?-g:g),M=g);for(var pe=0;pe<M;pe++)Me>0?(D=fe.shift(),fe[g-1]=D,z++,ma((z+2)*de.x+U.left,0,D.el.style),d.setContent(D,O-M+pe+1+1)):(D=fe.pop(),fe.unshift(D),z--,ma(z*de.x+U.left,0,D.el.style),d.setContent(D,O+M-pe-1-1));if(yr&&Math.abs(Me)===1){var We=dn(be);We.initialZoomLevel!==se&&(ya(We,K),pn(We),io(We))}var Ce=1+-Me,ke=fe[Ce];Me=0,d.updateCurrZoomItem(),be!==void 0&&d.updateCaption();var We=dn(be),Ye=We?.container?.querySelector("media-item");Ye&&(Ye.pause?.(),Ye.getAttribute("autoplay")!="true"&&Ye.setCurrentTime?.(0),Ye.removeAttribute("autoplay"));var lt=dn(O),ut=lt?.container?.querySelector("media-item");ut&&(ut.setAttribute("force-visible",!0),ut.onload=()=>{lt.autoplay?ut.play?.():setTimeout(()=>{ut?.play?.()},400)}),be=O,vt("afterChange",O)}}},updateSize:function(C){if(!Ae&&v.modal){var M=c.getScrollY();if(Wt!==M&&(n.style.top=M+"px",Wt=M),!C&&Ki.x===window.innerWidth&&Ki.y===window.innerHeight)return;Ki.x=window.innerWidth,Ki.y=window.innerHeight,n.style.height=Ki.y+"px"}var D=window.getComputedStyle(d.template),R=parseFloat(D.getPropertyValue("padding-left"))+parseFloat(D.getPropertyValue("border-left-width")),pe=parseFloat(D.getPropertyValue("margin-left")),Ce=parseFloat(D.getPropertyValue("padding-right"))+parseFloat(D.getPropertyValue("border-right-width")),ke=parseFloat(D.getPropertyValue("margin-right")),We=parseFloat(D.getPropertyValue("padding-top"))+parseFloat(D.getPropertyValue("border-top-width")),Ye=parseFloat(D.getPropertyValue("margin-top")),lt=parseFloat(D.getPropertyValue("padding-bottom"))+parseFloat(D.getPropertyValue("border-bottom-width")),ut=parseFloat(D.getPropertyValue("margin-bottom"));let wi="quick-view-vertical-align-"+v.alignVertical,kt="quick-view-horizontal-align-"+v.alignHorizontal;wi!=="quick-view-vertical-align-center"&&n.classList.remove("quick-view-vertical-align-center"),wi!=="quick-view-vertical-align-top"&&n.classList.remove("quick-view-vertical-align-top"),wi!=="quick-view-vertical-align-bottom"&&n.classList.remove("quick-view-vertical-align-bottom"),kt!=="quick-view-horizontal-align-center"&&n.classList.remove("quick-view-horizontal-align-center"),kt!=="quick-view-horizontal-align-left"&&n.classList.remove("quick-view-horizontal-align-left"),kt!=="quick-view-horizontal-align-right"&&n.classList.remove("quick-view-horizontal-align-right"),n.classList.add(wi),n.classList.add(kt),U.top=We,U.left=R,U.bottom=lt,U.right=Ce,U.marginTop=Ye,U.marginLeft=pe,U.marginBottom=ut,U.marginRight=ke;var Ii=d.scrollWrap.getBoundingClientRect();if(K.x=Ii.width,K.y=Ii.height,_p(),de.x=K.x+K.x*v.spacing,de.y=K.y,pl(de.x*Y),vt("beforeResize"),z!==void 0){for(var Sr,ui,ni,mi=0;mi<g;mi++)Sr=fe[mi],ma((mi+z)*de.x+U.left,0,Sr.el.style),ni=O+mi-1,v.loop&&sr()>2&&(ni=fa(ni)),ui=dn(ni),ui&&(B||ui.needsUpdate||!ui.bounds)?(d.cleanSlide(ui),d.setContent(Sr,ni),mi===1&&(d.currItem=ui,d.updateCurrZoomItem(!0)),ui.needsUpdate=!1):Sr.index===-1&&ni>=0&&d.setContent(Sr,ni),ui&&ui.container&&(ya(ui,K),pn(ui),io(ui));B=!1}re=se=d.currItem.initialZoomLevel,dt=d.currItem.bounds,dt&&(N.x=dt.center.x,N.y=dt.center.y,fi(!0)),vt("resize")},zoomTo:function(C,M,D,R,pe){M&&(re=se,qo.x=Math.abs(M.x)-N.x,qo.y=Math.abs(M.y)-N.y,Yi(H,N));var Ce=hl(C,!1),ke={};Sp("x",Ce,ke,C),Sp("y",Ce,ke,C);var We=se,Ye={x:N.x,y:N.y};tc(ke);var lt=function(ut){ut===1?(se=C,N.x=ke.x,N.y=ke.y,d.currItem.caption&&v.showCaption&&(Math.abs(se-d.currItem.fitRatio)>.01?d.caption.classList.add("hidden"):d.caption.classList.remove("hidden"))):(se=(C-We)*ut+We,N.x=(ke.x-Ye.x)*ut+Ye.x,N.y=(ke.y-Ye.y)*ut+Ye.y),pe&&pe(ut),fi(ut===1)};D?ga("customZoomTo",0,1,D,R||c.easing.sine.inOut,lt):lt(1)}},sc=30,lc=10,Ep,fl,or={},Lo={},ar={},bi={},Fo={},Kr=[],zo={},as,Ho=[],Uo={},ml,va,ss,gl=0,vl=S(),uc=0,br,bl,ro,kn,yl,Rn,Li,cn,Pp,cc,dt,Yr=S(),yr,Zi,qo=S(),no=S(),Xi,wl,ls,us,cs,Ip=function(C,M){return C.x===M.x&&C.y===M.y},Tp=function(C,M){return Math.abs(C.x-M.x)<p&&Math.abs(C.y-M.y)<p},dc=function(C,M){return Uo.x=Math.abs(C.x-M.x),Uo.y=Math.abs(C.y-M.y),Math.sqrt(Uo.x*Uo.x+Uo.y*Uo.y)},pc=function(){yl&&(Be(yl),yl=null)},Ap=function(){br&&(yl=ft(Ap),l1())},n1=function(){return!(v.scaleMode==="fit"&&se===d.currItem.initialZoomLevel)},hc=function(C,M){return!C||C===document||C.getAttribute("class")&&C.getAttribute("class").indexOf("quick-view-scroll-wrap")>-1?!1:M(C)?C:hc(C.parentNode,M)},fc={},Mp=function(C,M){return fc.prevent=!hc(C.target,v.isClickableElement),vt("preventDragEvent",C,M,fc),fc.prevent},kp=function(C,M){return M.x=C.pageX+-U.left+-U.marginLeft,M.y=C.pageY+-U.top+-U.marginTop,M.clientY=C.clientY,M.id=C.identifier,M},Rp=function(C,M,D){D.x=(C.x+M.x)*.5,D.y=(C.y+M.y)*.5},mc=function(C,M,D){if(C-fl>50){var R=Ho.length>2?Ho.shift():{};R.x=M,R.y=D,Ho.push(R),fl=C}},Np=function(){var C=N.y-d.currItem.initialPosition.y;return Math.min(1.2-Math.abs(C/(K.y/2)),1)},ba={},o1={},oo=[],xl,Ft=function(C){for(;oo.length>0;)oo.pop();return ot?(xl=0,Kr.forEach(function(M){xl===0?oo[0]=M:xl===1&&(oo[1]=M),xl++})):C.type.indexOf("touch")>-1?C.touches&&C.touches.length>0&&(oo[0]=kp(C.touches[0],ba),C.touches.length>1&&(oo[1]=kp(C.touches[1],o1))):(ba.x=C.pageX,ba.y=C.pageY,ba.clientY=C.clientY,ba.id="",oo[0]=ba),oo},zt=function(C,M){var D,R=0,pe=N[C]+M[C],Ce,ke=M[C]>0,We=Yr.x+M.x,Ye=Yr.x-zo.x,lt,ut;if(pe>dt.min[C]||pe<dt.max[C]?D=v.panEndFriction:D=1,pe=N[C]+M[C]*D,(v.allowPanToNext||se===d.currItem.initialZoomLevel)&&(yr?Xi==="h"&&C==="x"&&!ro&&(ke?(pe>dt.min[C]&&(D=v.panEndFriction,R=dt.min[C]-pe,Ce=Math.round(dt.min[C]-H[C])),(Ce<=0||Ye<0)&&sr()>1?(ut=We,Ye<0&&We>zo.x&&(ut=zo.x)):dt.min.x!==dt.max.x&&(lt=pe)):(pe<dt.max[C]&&(D=v.panEndFriction,R=pe-dt.max[C],Ce=Math.round(H[C]-dt.max[C])),(Ce<=0||Ye>0)&&sr()>1?(ut=We,Ye>0&&We<zo.x&&(ut=zo.x)):dt.min.x!==dt.max.x&&(lt=pe))):ut=We,C==="x"))return ut!==void 0&&(pl(ut,!0),ut===zo.x?Rn=!1:Rn=!0),dt.min.x!==dt.max.x&&(lt!==void 0?N.x=lt:Rn||(N.x+=M.x*D)),ut!==void 0;Zi||Rn||se>d.currItem.fitRatio&&(N[C]+=M[C]*D)},Op=null,a1=function(C){if(!(C.type==="mousedown"&&C.button>0)){if(Bo){C.preventDefault();return}if(!(ss&&C.type==="mousedown")){if(Mp(C,!0)&&C.preventDefault(),ms=C.type,Op=setTimeout(function(){d.template.classList.add("mouse-down")},200),vt("pointerDown"),ot){var M=c.arraySearch(Kr,C.pointerId,"id");M<0&&(M=Kr.length),Kr[M]={x:C.pageX,y:C.pageY,clientY:C.clientY,id:C.pointerId}}var D=Ft(C),R=D.length;Li=null,os(),(!br||R===1)&&(br=wl=!0,c.bind(window,J,d),ml=Xr=cs=ls=va=Rn=kn=bl=ro=!1,Xi=null,yc=D[0].y+-Wt,vt("firstTouchStart",D),Yi(H,N),G.x=G.y=0,Yi(bi,D[0]),Yi(Fo,bi),zo.x=de.x*Y,Ho=[{x:bi.x,y:bi.y}],fl=Ep=kr(),hl(se,!0),pc(),Ap()),!cn&&R>1&&!Zi&&!Rn&&(re=se,ro=!1,cn=bl=!0,G.y=G.x=0,Yi(H,N),Yi(or,D[0]),Yi(Lo,D[1]),Rp(or,Lo,no),qo.x=Math.abs(no.x)-N.x,qo.y=Math.abs(no.y)-N.y,Pp=cc=dc(or,Lo))}}},s1=function(C){if(C.preventDefault(),ot){var M=c.arraySearch(Kr,C.pointerId,"id");if(M>-1){var D=Kr[M];D.x=C.pageX,D.y=C.pageY,D.clientY=C.clientY}}if(br){var R=Ft(C);if(!Xi&&!kn&&!cn)if(Yr.x!==de.x*Y)Xi="h";else{var pe=Math.abs(R[0].x-bi.x)-Math.abs(R[0].y-bi.y);Math.abs(pe)>=lc&&(Xi=pe>0?"h":"v",Li=R)}else Li=R;fs=fs+(yc-R[0].clientY),yc=R[0].clientY}},l1=function(){if(Li){var C=Li.length;if(C!==0)if(Yi(or,Li[0]),ar.x=or.x-bi.x,ar.y=or.y-bi.y,cn&&C>1){if(bi.x=or.x,bi.y=or.y,!ar.x&&!ar.y&&Ip(Li[1],Lo))return;Yi(Lo,Li[1]),ro||(ro=!0,vt("zoomGestureStarted"),d.currItem.caption&&v.showCaption&&d.caption.classList.add("hidden"));var M=dc(or,Lo),D=Pi(M);D>d.currItem.initialZoomLevel+d.currItem.initialZoomLevel/15&&(cs=!0);var R=1,pe=xp(),Ce=Cp();if(D<pe)if(v.pinchToClose&&!cs&&re<=d.currItem.initialZoomLevel){var ke=pe-D,We=1-ke/(pe/1.2);gr(We),vt("onPinchClose",We),ls=!0}else R=(pe-D)/pe,R>1&&(R=1),D=pe-R*(pe/3);else D>Ce&&(R=(D-Ce)/(pe*6),R>1&&(R=1),D=Ce+R*pe);R<0&&(R=0),Pp=M,Rp(or,Lo,vl),G.x+=vl.x-no.x,G.y+=vl.y-no.y,Yi(no,vl),N.x=ec("x",D),N.y=ec("y",D),ml=D>se,se=D,fi()}else{if(!Xi||(wl&&(wl=!1,Math.abs(ar.x)>=lc&&(ar.x-=Li[0].x-Fo.x),Math.abs(ar.y)>=lc&&(ar.y-=Li[0].y-Fo.y,fs-=-(Li[0].y-Fo.y))),bi.x=or.x,bi.y=or.y,ar.x===0&&ar.y===0))return;if(Xi==="v"&&v.animatedCloseOnScroll&&ms==="touchstart"){if(Ji=fs,fs=0,!Xr&&!Gr){Xr=!0,Dn(),wc();var Ye=!1,lt=0,ut=1,wi=0;Wo=0,fn=0;var kt=bi.y,Ii=bi.y,Sr,ui,ni=document.documentElement.scrollTop,mi=document.documentElement.scrollHeight,Fi=K.y,xa=!1,El=document.querySelectorAll(".content_container, .pinned > div:not(.fixed)"),Pl=[],xc=function(){xa||(xa=!0,ui=requestAnimationFrame(function(){El.style.transform="translateY("+-fn+"px)",Pl.each(function(Ie){var et=this.parentElement.__backdropData,wt=this.parentElement.__cached_size,oi=this.parentElement.__cached_page_size;if(et){var Et=0,$o=0,Qi=0;wt&&(Et=wt.top,$o=wt.height,Qi=$o),oi&&(Qi=oi.height);var er=parseFloat(et.yPos)||0;this.style.position==="fixed"&&(this.style.position="absolute");var Ln=ni+fn,Ca=ni+fn+Cargo.Backdrop.cache_window_data.height,Or=Et+ni,ys=Et+ni+Qi;if(Or<=Ln&&ys>=Ca){var Il=Or-Ln;this.style.transform="translateY("+-Il+"px)"}else ys<Ca?this.style.transform="translateY("+(Qi-Cargo.Backdrop.cache_window_data.height)+"px)":this.style.transform="translateY(0px)"}}),xa=!1}))},bs=function(Ie){if(Ie.touches.length==0||Ie.touches.length>1){Jr(),lr();return}Ie.preventDefault(),Wo=Ii-Ie.touches[0].pageY,fn=Wo,Wo+ni<=0?(scrollMonitor.__frozen=!0,fn=-ni):Wo+ni+Fi>=mi?(scrollMonitor.__frozen=!0,fn=0):scrollMonitor.__frozen&&delete scrollMonitor.__frozen,wi=kt-Ie.touches[0].pageY,kt=Ie.touches[0].pageY,xc()},Jr=function(){window.removeEventListener("touchmove",bs),window.removeEventListener("touchend",Jr),window.addEventListener("touchstart",lr),cancelAnimationFrame(ui),El.style.transform="",Pl.each(function(){this.__cacheStyle&&(this.style=this.__cacheStyle,delete this.__cacheStyle)}),document.documentElement.scrollTop=document.documentElement.scrollTop+Wo,Z(),requestAnimationFrame(function(){scrollMonitor.__frozen&&delete scrollMonitor.__frozen,Cargo.View.Backdrop.updateBackdropScrollPosition(!0),Cargo.Event.trigger("lightbox-scroll-finished")})},lr=function(){wi=0,cancelAnimationFrame(Sr),window.removeEventListener("touchstart",lr)},Z=function(){ut=ut*.95;var Ie=wi*ut;document.documentElement.scrollTop=document.documentElement.scrollTop+Ie,Math.abs(Ie)>.5?Sr=requestAnimationFrame(function(){Z()}):lr()};window.addEventListener("touchmove",bs),window.addEventListener("touchend",Jr)}return}else if(Xi==="v"&&v.closeOnVerticalDrag&&!n1()){G.y+=ar.y,N.y+=ar.y;var he=Np();va=!0,vt("onVerticalDrag",he),gr(he),fi();return}mc(kr(),or.x,or.y),Xi==="h"&&v.showCaption&&!kn&&d.caption.classList.add("hidden"),kn=!0,dt=d.currItem.bounds;var ue=zt("x",ar);ue||(zt("y",ar),tc(N),fi())}}},u1=function(C){if(ms="",rt.isOldAndroid){if(ss&&C.type==="mouseup")return;C.type.indexOf("touch")>-1&&(clearTimeout(ss),ss=setTimeout(function(){ss=0},600))}clearTimeout(Op),d.template.classList.remove("mouse-down"),vt("pointerUp"),Mp(C,!1)&&C.preventDefault();var M;if(ot){var D=c.arraySearch(Kr,C.pointerId,"id");if(D>-1)if(M=Kr.splice(D,1)[0],navigator.pointerEnabled)M.type=C.pointerType||"mouse";else{var R={4:"mouse",2:"touch",3:"pen"};M.type=R[C.pointerType],M.type||(M.type=C.pointerType||"mouse")}}var pe=Ft(C),Ce,ke=pe.length;if(C.type==="mouseup"&&(ke=0),ke===2)return Li=null,!0;ke===1&&Yi(Fo,pe[0]),ke===0&&!Xi&&!Zi&&(M||(C.type==="mouseup"?M={x:C.pageX+-U.left+-U.marginLeft,y:C.pageY+-U.top+-U.marginTop,type:"mouse"}:C.changedTouches&&C.changedTouches[0]&&(M={x:C.changedTouches[0].pageX+-U.left+-U.marginLeft,y:C.changedTouches[0].pageY+-U.top+-U.marginTop,type:"touch"})),vt("touchRelease",C,M));var We=-1;if(ke===0&&(br=!1,c.unbind(window,J,d),pc(),cn?We=0:uc!==-1&&(We=kr()-uc)),uc=ke===1?kr():-1,We!==-1&&We<150?Ce="zoom":Ce="swipe",cn&&ke<2&&(cn=!1,ke===1&&(Ce="zoomPointerUp"),vt("zoomGestureEnded")),Li=null,!(!kn&&!ro&&!Zi&&!va&&!Xr)){if(os(),as||(as=c1()),as.calculateSwipeSpeed("x"),Xr)Nr&&clearTimeout(Nr),Xr=!1,Dn(),gs();else if(va){var Ye=Np();if(Ye<v.verticalDragRange)d.close();else{var lt=N.y,ut=us;ga("verticalDrag",0,1,300,c.easing.cubic.out,function(kt){N.y=(d.currItem.initialPosition.y-lt)*kt+lt,gr((1-ut)*kt+ut),fi()}),vt("onVerticalDrag",1)}return}if((Rn||Zi)&&ke===0){var wi=d1(Ce,as);if(wi)return;Ce="zoomPointerUp"}if(!Zi){if(Ce!=="swipe"){gc();return}!Rn&&se>d.currItem.fitRatio&&Dp(as)}}},c1=function(){var C,M,D={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(R){Ho.length>1?(C=kr()-fl+50,M=Ho[Ho.length-2][R]):(C=kr()-Ep,M=Fo[R]),D.lastFlickOffset[R]=bi[R]-M,D.lastFlickDist[R]=Math.abs(D.lastFlickOffset[R]),D.lastFlickDist[R]>20?D.lastFlickSpeed[R]=D.lastFlickOffset[R]/C:D.lastFlickSpeed[R]=0,Math.abs(D.lastFlickSpeed[R])<.1&&(D.lastFlickSpeed[R]=0),D.slowDownRatio[R]=.95,D.slowDownRatioReverse[R]=1-D.slowDownRatio[R],D.speedDecelerationRatio[R]=1},calculateOverBoundsAnimOffset:function(R,pe){D.backAnimStarted[R]||(N[R]>dt.min[R]?D.backAnimDestination[R]=dt.min[R]:N[R]<dt.max[R]&&(D.backAnimDestination[R]=dt.max[R]),D.backAnimDestination[R]!==void 0&&(D.slowDownRatio[R]=.7,D.slowDownRatioReverse[R]=1-D.slowDownRatio[R],D.speedDecelerationRatioAbs[R]<.05&&(D.lastFlickSpeed[R]=0,D.backAnimStarted[R]=!0,ga("bounceZoomPan"+R,N[R],D.backAnimDestination[R],pe||300,c.easing.sine.out,function(Ce){N[R]=Ce,fi()}))))},calculateAnimOffset:function(R){D.backAnimStarted[R]||(D.speedDecelerationRatio[R]=D.speedDecelerationRatio[R]*(D.slowDownRatio[R]+D.slowDownRatioReverse[R]-D.slowDownRatioReverse[R]*D.timeDiff/10),D.speedDecelerationRatioAbs[R]=Math.abs(D.lastFlickSpeed[R]*D.speedDecelerationRatio[R]),D.distanceOffset[R]=D.lastFlickSpeed[R]*D.speedDecelerationRatio[R]*D.timeDiff,N[R]+=D.distanceOffset[R])},panAnimLoop:function(){if(vr.zoomPan&&(vr.zoomPan.raf=ft(D.panAnimLoop),D.now=kr(),D.timeDiff=D.now-D.lastNow,D.lastNow=D.now,D.calculateAnimOffset("x"),D.calculateAnimOffset("y"),fi(),D.calculateOverBoundsAnimOffset("x"),D.calculateOverBoundsAnimOffset("y"),D.speedDecelerationRatioAbs.x<.05&&D.speedDecelerationRatioAbs.y<.05)){N.x=N.x,N.y=N.y,fi(),ns("zoomPan");return}}};return D},Dp=function(C){if(C.calculateSwipeSpeed("y"),dt=d.currItem.bounds,C.backAnimDestination={},C.backAnimStarted={},Math.abs(C.lastFlickSpeed.x)<=.05&&Math.abs(C.lastFlickSpeed.y)<=.05)return C.speedDecelerationRatioAbs.x=C.speedDecelerationRatioAbs.y=0,C.calculateOverBoundsAnimOffset("x"),C.calculateOverBoundsAnimOffset("y"),!0;ac("zoomPan"),C.lastNow=kr(),C.panAnimLoop()},d1=function(C,M){var D;Zi||(gl=O);var R;if(C==="swipe"){var pe=bi.x-Fo.x,Ce=M.lastFlickDist.x<10;pe>sc&&(Ce||M.lastFlickOffset.x>20)?R=-1:pe<-sc&&(Ce||M.lastFlickOffset.x<-20)&&(R=1)}var ke;R&&(O+=R,O<0?(O=v.loop?sr()-1:0,ke=!0):O>=sr()&&(O=v.loop?0:sr()-1,ke=!0),(!ke||v.loop)&&(Me+=R,Y-=R,D=!0));var We=de.x*Y,Ye=Math.abs(We-Yr.x),lt;return!D&&We>Yr.x!=M.lastFlickSpeed.x>0?lt=333:(lt=Math.abs(M.lastFlickSpeed.x)>0?Ye/Math.abs(M.lastFlickSpeed.x):333,lt=Math.min(lt,400),lt=Math.max(lt,250)),gl===O&&(D=!1),Zi=!0,vt("mainScrollAnimStart"),ga("mainScroll",Yr.x,We,lt,c.easing.cubic.out,pl,function(){os(),Zi=!1,gl=-1,(D||gl!==O)&&d.updateCurrItem(),vt("mainScrollAnimComplete")}),D?d.updateCurrItem(!0):d.updateCaption(),D},Pi=function(C){return 1/cc*C*re},gc=function(){var C=se,M=xp(),D=Cp();se<M?C=M:se>D&&(C=D);var R=1,pe,Ce=us;return ls&&!ml&&!cs&&se<M?(d.close(),!0):(ls&&(pe=function(ke){gr((R-Ce)*ke+Ce)}),d.zoomTo(C,0,200,c.easing.cubic.out,pe),!0)};Mn("Gestures",{publicMethods:{initGestures:function(){var C=function(M,D,R,pe,Ce){Ee=M+D,Fe=M+R,qe=M+pe,Ce?nt=M+Ce:nt=""};ot=rt.pointerEvent,ot&&rt.touch&&(rt.touch=!1),ot?navigator.pointerEnabled?C("pointer","down","move","up","cancel"):C("MSPointer","Down","Move","Up","Cancel"):rt.touch?(C("touch","start","move","end","cancel"),st=!0):C("mouse","down","move","up"),J=Fe+" "+qe+" "+nt,oe=Ee,ot&&!st&&(st=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),d.likelyTouchDevice=st,te[Ee]=a1,te[Fe]=s1,te[qe]=u1,nt&&(te[nt]=te[qe]),rt.touch&&(oe+=" mousedown",J+=" mousemove mouseup",te.mousedown=te[Ee],te.mousemove=te[Fe],te.mouseup=te[qe]),st||(v.allowPanToNext=!1)}}});var wr,vc=function(C,M,D,R){if(wr&&clearTimeout(wr),Bo=!0,Cl=!0,D){let Ye=C.el?.closest?.("gallery-slideshow");if(Ye){let lt=C.el?.assignedSlot?.name?.replace("slot-","")??-1;lt!==-1&&Ye.goToSlide(parseInt(lt))}}var pe;C.initialLayout?(pe=C.initialLayout,C.initialLayout=null):pe=v.getThumbBoundsFn&&v.getThumbBoundsFn(O);var Ce=D?v.hideAnimationDuration:v.showAnimationDuration,ke=function(){if(ns("initialZoom"),D)d.template.removeAttribute("style"),d.bg.removeAttribute("style");else{if(gr(1),M&&(M.style.display="block"),C.autoplay){let Ye=C.container.querySelector("media-item");Ye&&(Ye.onload=()=>{Ye.play?.()})}c.addClass(n,"quick-view-hide-overflow"),c.addClass(n,"quick-view-animated-in"),vt("initialZoom"+(D?"OutEnd":"InEnd"))}R&&R(),Bo=!1};if(!Ce||!pe||pe.x===void 0){vt("initialZoom"+(D?"Out":"In")),se=C.initialZoomLevel,Yi(N,C.initialPosition),fi(),n.style.opacity=D?0:1,gr(1),Ce?setTimeout(function(){ke()},Ce):ke();return}var We=function(){var Ye=F,lt=d.currItem.loadError||v.showHideOpacity,ut=Xr,wi=D?25:90;Ye&&(wi=0),C.miniImg&&(C.miniImg.style.webkitBackfaceVisibility="hidden");var kt=parseFloat(C.w),Ii=parseFloat(C.h);C.useViewportWidth&&(kt=(K.x-(U.left+U.right))*C.viewportWidthPercentage),C.useViewportHeight&&(Ii=(K.y-(U.top+U.bottom))*C.viewportHeightPercentage);var Sr=pe.w/pe.h,ui=kt/Ii,ni=Sr>ui;if(!D){se=ni?pe.h/Ii:pe.w/kt;var mi=(pe.w-kt*se)*.5,Fi=(pe.h-Ii*se)*.5,xa=mi*Math.cos(pe.transform.rotation)-Fi*Math.sin(pe.transform.rotation),El=mi*Math.sin(pe.transform.rotation)+Fi*Math.cos(pe.transform.rotation);N.rotation=pe.transform.rotation,N.y=pe.y+-(U.top+U.marginTop)+El,N.x=pe.x+-(U.left+U.marginLeft)+xa,d[lt?"template":"bg"].style.opacity=.001,fi(),N.rotation=0}if(ac("initialZoom"),D&&!Ye&&c.removeClass(n,"quick-view-animated-in"),D){c.removeClass(n,"quick-view-hide-overflow");var Pl=d.getCurrentIndex();gR.default.each(d.itemHolders,function(Jr){Jr.index!==Pl&&(Jr.el.style.display="none")}),v.showCaption&&d.caption.classList.add("hidden")}let xc=d.currItem.el?.getAttribute?.("rel")==="quick-view";(lt||ut||xc)&&(D?c[(Ye?"remove":"add")+"Class"](n,"quick-view-animate_opacity"):setTimeout(function(){c.addClass(n,"quick-view-animate_opacity")},30));var bs=function(){if(vt("initialZoom"+(D?"Out":"In")),D){var Jr=ni?pe.h/Ii:pe.w/kt,lr=(pe.w-kt*Jr)*.5,Z=(pe.h-Ii*Jr)*.5,he=lr*Math.cos(pe.transform.rotation)-Z*Math.sin(pe.transform.rotation),ue=lr*Math.sin(pe.transform.rotation)+Z*Math.cos(pe.transform.rotation),Ie={x:N.x,y:N.y,rotation:0},et=se,wt=us,oi=document.documentElement.scrollTop,Et=fn,$o=function(Qi){var er=oi-document.documentElement.scrollTop,Ln=Et-fn;if(Qi===1?(se=Jr,N.x=pe.x+-(U.left+U.marginLeft)+he,N.y=pe.y+er+Ln+-(U.top+U.marginTop)+ue,N.rotation=pe.transform.rotation):(se=(Jr-et)*Qi+et,N.x=(pe.x+-Ie.x+-(U.left+U.marginLeft)+he)*Qi+Ie.x,N.y=(pe.y+er+Ln+-(U.top+U.marginTop)+ue)*Qi+(1-Qi)*(Ie.y+er+Ln),N.rotation=(pe.transform.rotation-Ie.rotation)*Qi+Ie.rotation),fi(),ut){var Ca=1-Qi;if(Math.hasOwnProperty("cbrt")){var Or=1-Math.cbrt(Ca);Ca=1-Or*Or*Or*Or}n.style.opacity=Ca}else lt?n.style.opacity=1-Qi:gr(wt-Qi*wt)};Ye?ga("initialZoom",0,1,Ce,c.easing.cubic.out,$o,ke):($o(1),wr=setTimeout(ke,Ce+20))}else{if(se=C.initialZoomLevel,Yi(N,C.initialPosition),fi(),gr(1),yr){yr.opacity="",yr.transitionDuration="";let Qi=C.container.offsetHeight}lt?n.style.opacity=1:gr(1),wr=setTimeout(ke,Ce+20)}};wi===0?bs():wr=setTimeout(function(){bs()},wi)};We()},ao,Ht={},so=[],Cl,Bo,Lp={index:0,errorMsg:'<div class="quick-view-error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return ao.length}},dn,sr,xr,p1=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},Rr=function(C,M,D){var R=C.bounds;v.alignHorizontal==="left"?R.center.x=0:v.alignHorizontal==="right"?R.center.x=Ht.x-M+C.hGap.left:R.center.x=(Ht.x-M)/2+C.hGap.left,v.alignVertical==="top"?R.center.y=0:v.alignVertical==="bottom"?R.center.y=Ht.y-D+C.vGap.top:R.center.y=(Ht.y-D)/2+C.vGap.top,R.max.x=M>Ht.x?Ht.x-M+C.hGap.left:R.center.x,R.max.y=D>Ht.y?Ht.y-D+C.vGap.top:R.center.y,R.min.x=M>Ht.x?C.hGap.left:R.center.x,R.min.y=D>Ht.y?C.vGap.top:R.center.y},ya=function(C,M,D){var R=!D;if(R&&(C.vGap||(C.vGap={top:0,bottom:0}),C.hGap||(C.hGap={left:0,right:0}),vt("parseVerticalMargin",C)),C.useViewportHeight||C.useViewportWidth?(Ht.x=M.x-C.hGap.left-C.hGap.right,Ht.y=M.y-C.vGap.top-C.vGap.bottom):(Ht.x=M.x-C.hGap.left-C.hGap.right+-(U.left+U.right),Ht.y=M.y-C.vGap.top-C.vGap.bottom+-(U.top+U.bottom)),R){var We=C.w,Ye=C.h;C.useViewportWidth&&(We=(M.x-(U.left+U.right))*C.viewportWidthPercentage),C.useViewportHeight&&(Ye=(M.y-(U.top+U.bottom))*C.viewportHeightPercentage);var pe=Ht.x/We,Ce=Ht.y/Ye;C.useViewportHeight||C.useViewportWidth?C.fitRatio=1:C.fitRatio=pe<Ce?pe:Ce;var ke=v.scaleMode;ke==="orig"?D=1:ke==="fit"&&(D=C.fitRatio),D>1&&(D=1),D==0&&(D=.01),C.initialZoomLevel=D,C.bounds||(C.bounds=p1())}if(D){var We=C.w,Ye=C.h;return C.useViewportWidth&&(We=M.x*C.viewportWidthPercentage),C.useViewportHeight&&(Ye=M.y*C.viewportHeightPercentage),(C.useViewportHeight||C.useViewportWidth)&&(D=1),Rr(C,We*D,Ye*D),R&&D===C.initialZoomLevel&&(C.initialPosition=C.bounds.center),C.bounds}},ds=function(C,M,D,R,pe,Ce){if(!M.loadError&&R){M.imageAppended=!0,pn(M,R,M===d.currItem&&ri),D.appendChild(R),Ce&&(M.placeholder&&M.placeholder.classList.remove("quick-view-item"),setTimeout(function(){M&&M.loaded&&M.placeholder&&(M.placeholder.style.display="none",M.placeholder=null)},500)),R.setAttribute("force-visible",!0),R.setAttribute("disable-scroll-animation",!0),R.setAttribute("disable-zoom",!0),R.setAttribute("width",M.w),R.setAttribute("height",M.h),R.setAttribute("disable-scroll-animation",!0),R.setAttribute("disable-zoom",!0),R.setAttribute("uses","inline-part-styles"),R.setAttribute("media-style","padding: 0px; border-width: 0px; border-radius: 0px; outline-width: 0px;"),R.style.padding=R.style.borderWidth=R.style.borderRadius=R.style.outlineWidth="0px",M.usePlaceholder?R.setAttribute("hash","placeholder"):M.hash?R.setAttribute("hash",M.hash):M.src&&R.setAttribute("src",M.src);let We=fe.find(lt=>lt.index==C);if(M.fileType=="video"||M.fileType.startsWith("vimeo")||M.fileType.startsWith("youtube"))M.fileType!=="video"&&We.el.classList.add("iframe-item"),M.autoplay?(M.el?.getCurrentTime?.().then(lt=>{R.onload=()=>{setTimeout(()=>{R.setCurrentTime?.(lt)},0)}}),R.setAttribute("muted",!0),R.setAttribute("loop",!0),R.setAttribute("autoplay",!0),R.setAttribute("browser-default",!1)):(M.poster?R.setAttribute("poster",M.poster):M.posterSrc&&R.setAttribute("poster",M.posterSrc),M.el?.pause?.(),R.setAttribute("browser-default",!0));else if(M.fileType==="image"){We.el.classList.remove("iframe-item");var ke=M.el?.shadowRoot?.querySelector('img[part*="media"]')?.src;ke&&M.src&&ke!==M.src&&(ke=M.src)}else M.fileType==="url"&&We.el.classList.add("iframe-item");M.hash&&M.hash!=="placeholder"&&R.hasAttribute("src")?(R.setAttribute("hash",M.hash),R.removeAttribute("src")):M.src&&R.getAttribute("src")!==M.src?(M.posterSrc&&!R.poster&&R.setAttribute("poster",M.posterSrc),R.setAttribute("src",M.src)):M.model&&(R.model=M.model),R.itemDragStart=lt=>{lt.preventDefault()};let Ye=R.shadowRoot.querySelector("video");Ye&&(Ye.style.display="table",setTimeout(()=>{Ye.style.display=""},0)),M.autoplay&&(R.onload=()=>{setTimeout(()=>{R?.play?.()})})}},Nn=function(C){C.loading=!0,C.loaded=!1;var M=C.img=c.createEl("quick-view-item","media-item");wg(C.el,C,!0).then(D=>{for(let[R,pe]of Object.entries(D))C[R]=pe;if(C.loaded=!0,C.loading=!1,C.loadError){C.loadComplete&&C.loadComplete(C);return}C.img&&(C.hash?C.img.setAttribute("hash",C.hash):C.src&&C.img.setAttribute("src",C.src),C.fileType=="video"&&C.autoplay&&(C.img.setAttribute("autoplay",!0),C.img.setAttribute("muted",!0),C.img.setAttribute("loop",!0))),C.loadComplete?C.loadComplete(C):C.img=null})},ps=function(C,M){if((C.src||C.hash)&&C.loadError&&C.container)return M&&(C.container.innerHTML=""),C.container.innerHTML=v.errorMsg.replace("%url%",C.src),!0},pn=function(C,M,D){M||(M=C.container.lastChild);var R=D?C.w:C.w*C.fitRatio,pe=D?C.h:C.h*C.fitRatio,Ce=C.w*C.fitRatio,ke=C.h*C.fitRatio;C.useViewportWidth&&(R=K.x*C.viewportWidthPercentage,R=Ce=R-(U.left+U.right)),C.useViewportHeight&&(pe=K.y*C.viewportHeightPercentage,pe=ke=pe-(U.top+U.bottom)),C.renderedSize={w:Ce,h:ke},C===d.currItem&&Gt(C),!br&&U.top>5&&U.right>5&&U.bottom>5&&U.left>5&&(R=Math.round(R),pe=Math.round(pe)),M&&(M.style.transform="translate3d(0,0,0)",M.style.width=R+"px",M.style.height=pe+"px",M.style.setProperty("--frame-padding",pe+"px"),M.style.setProperty("padding","0px"),M.style.setProperty("border","none"),M.style.setProperty("outline","none"))},Gt=function(C){if(C.renderedSize){var M=C.renderedSize.w,D=C.renderedSize.h,R=Math.max(1,C.fitRatio);d.captionWrapper.style.width=M/R+"px",d.captionWrapper.style.right=U.right+"px",d.captionWrapper.style.left=U.left+"px";var pe=0;switch(v.alignVertical){case"center":pe=(K.y+-U.bottom+-U.top+-D/R)*.5+U.bottom;break;case"top":pe=K.y+-U.bottom+-U.top+-D/R+U.bottom;break;case"bottom":pe=U.bottom;break}d.captionWrapper.style.height=pe+"px"}},On=function(){if(so.length){for(var C,M=0;M<so.length;M++)C=so[M],C.holder.index===C.index&&ds(C.index,C.item,C.baseDiv,C.img,!1,C.clearPlaceholder);so=[]}};Mn("Controller",{publicMethods:{lazyLoadItem:function(C){C=fa(C);var M=dn(C);!M||(M.loaded||M.loading)&&!B||(vt("gettingData",C,M),Nn(M))},initController:function(){c.extend(v,Lp,!0),d.items=ao=s,dn=d.getItemAt,sr=v.getNumItemsFn,xr=v.loop,sr()<3&&(v.loop=!1),Ei("beforeChange",function(C){var M=v.preload,D=C===null?!0:C>=0,R=Math.min(M[0],sr()),pe=Math.min(M[1],sr()),Ce;for(Ce=1;Ce<=(D?pe:R);Ce++)d.lazyLoadItem(O+Ce);for(Ce=1;Ce<=(D?R:pe);Ce++)d.lazyLoadItem(O-Ce)}),Ei("initialLayout",function(){d.currItem&&(d.currItem.initialLayout=v.getThumbBoundsFn&&v.getThumbBoundsFn(O))}),Ei("mainScrollAnimComplete",On),Ei("initialZoomInEnd",On),Ei("destroy",function(){for(var C,M=0;M<ao.length;M++)C=ao[M],C.container&&(C.container=null),C.placeholder&&(C.placeholder=null),C.img&&(C.img=null),C.preloader&&(C.preloader=null),C.loadError&&(C.loaded=C.loadError=!1);so=null})},getItemAt:function(C){return C>=0&&ao[C]!==void 0?ao[C]:!1},allowProgressiveImg:function(){return!0},setContent:function(C,M){v.loop&&(M=fa(M));var D=d.getItemAt(C.index);D&&(D.container=null);var R=d.getItemAt(M),pe;if(!R){C.el.innerHTML="";return}vt("gettingData",M,R),C.index=M,C.item=R;var Ce=R.container=c.createEl("quick-view-zoom-wrap");ps(R),ya(R,K),(R.src||R.hash||R.usePlaceholder)&&!R.loadError&&!R.loaded?(R.loadComplete=function(ke){if(E){if(C&&C.index===M){if(ps(ke,!0)){ke.loadComplete=ke.img=null,ya(ke,K),io(ke),C.index===O&&d.updateCurrZoomItem();return}ke.imageAppended?!Bo&&ke.placeholder&&(ke.placeholder.style.display="none",ke.placeholder=null):rt.transform&&(Zi||Bo)?so.push({item:ke,baseDiv:Ce,img:ke.img,index:M,holder:C,clearPlaceholder:!0}):ds(M,ke,Ce,ke.img,Zi||Bo,!0),ya(ke,K),pn(ke),io(ke)}ke.loadComplete=null,ke.img=null,vt("imageLoadComplete",M,ke)}},c.features.transform,R.loading||Nn(R),d.allowProgressiveImg()&&(!Cl&&rt.transform?so.push({item:R,baseDiv:Ce,img:R.img,index:M,holder:C}):ds(M,R,Ce,R.img,!0,!0))):(R.src||R.hash||R.usePlaceholder)&&!R.loadError?(pe=c.createEl("quick-view-item","media-item"),pe.style.opacity=1,pn(R,pe),ds(M,R,Ce,pe,!0)):!R.src&&!R.hash&&R.html&&pn(R,null),!Cl&&M===O?(R.preloadedImage&&pe&&pe.setAttribute("src",R.preloadedImage.getAttribute("src")),yr=Ce.style,vc(R,pe||R.img)):io(R),C.el.innerHTML="",C.el.appendChild(Ce)},cleanSlide:function(C){C.img&&(C.img.onload=C.img.onerror=null),C.loaded=C.loading=C.img=C.imageAppended=!1}}});var hn,bc={},hs=function(C,M,D){var R=document.createEvent("CustomEvent"),pe={origEvent:C,target:C.target,releasePoint:M,pointerType:D||"touch"};R.initCustomEvent("pswpTap",!0,!0,pe),C.target.dispatchEvent(R)};Mn("Tap",{publicMethods:{initTap:function(){Ei("firstTouchStart",d.onTapStart),Ei("touchRelease",d.onTapRelease),Ei("destroy",function(){bc={},hn=null})},onTapStart:function(C){C.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(C,M){if(M&&!kn&&!bl&&!Do){var D=M;if(hn&&(clearTimeout(hn),hn=null,Tp(D,bc))){vt("doubleTap",D);return}if(M.type==="mouse"){hs(C,M,"mouse");return}var R=C.target.tagName.toUpperCase();if(R==="BUTTON"||c.hasClass(C.target,"quick-view-single-tap")){hs(C,M);return}Yi(bc,D),hn=setTimeout(function(){hs(C,M),hn=null},300)}}}});var Sl,fs=0,yc=0,Ji=0,wa=!1,Zr=0,Xr=!1,Wo=0,fn=0,ms="",Vo=null,_l=!1,wc=function(){Gr=!0,Fp()},Dn=function(){Sl&&(Be(Sl),Sl=null,Zr=0,Ji=0,Gr=!1)},gs=function(){if(!(Gr||vs)){var C=N.y,M=N.x,D=us,R=se;ga("resetVertical",0,1,300,c.easing.cubic.out,function(pe){se=d.currItem.initialZoomLevel*pe+(1-pe)*R,N.y=(d.currItem.initialPosition.y-C)*pe+C;var Ce=(d.currItem.initialZoomLevel*parseFloat(d.currItem.w)-se*parseFloat(d.currItem.w))*.5;N.x=d.currItem.initialPosition.x+Ce,gr((1-D)*pe+D),fi()})}},Fp=function(){wa||(wa=!0,Gr&&(Sl=ft(Fp),Cr(),wa=!1))},vs=!1,Cr=function(){!Xr&&_l&&(document.documentElement.scrollTop=document.documentElement.scrollTop+Ji);var C=Math.min(K.y,K.x),M=Math.abs(Ji)/C,D=Math.max(0,Math.min(1.3-Math.abs(Zr/(C/3)),1));if(D<.85||vs||M>.2){Dn(),Nr&&clearTimeout(Nr),vs||(vs=!0,Xr?(F=!0,d.close()):setTimeout(function(){F=!0,d.close()},25));return}gr(D);var R=Math.abs(Zr)/(K.y*.75);if(d.currItem.hasOwnProperty("thumbRect")){var pe=d.currItem.initialZoomLevel*parseFloat(d.currItem.h)*.5<d.currItem.thumbRect.h;pe&&(R=0)}se=(1-R*R)*d.currItem.initialZoomLevel;var Ce=(d.currItem.initialZoomLevel*parseFloat(d.currItem.w)-se*parseFloat(d.currItem.w))*.5,ke=(d.currItem.initialZoomLevel*parseFloat(d.currItem.h)-se*parseFloat(d.currItem.h))*.5;N.y=d.currItem.initialPosition.y+ke+-Zr,N.x=d.currItem.initialPosition.x+Ce,fi(),Zr=Zr+Ji,Ji=0},Nr,yi;Mn("DesktopZoom",{publicMethods:{initDesktopZoom:function(){St||(st?d.setupDesktopZoom():d.setupDesktopZoom(!0))},setupDesktopZoom:function(C){yi={};var M="wheel mousewheel DOMMouseScroll";Ei("bindEvents",function(){c.bind(n,M,d.handleMouseWheel)}),Ei("unbindEvents",function(){yi&&c.unbind(n,M,d.handleMouseWheel)}),d.mouseZoomedIn=!1;var D,R=function(){d.mouseZoomedIn&&(c.removeClass(n,"quick-view-zoomed-in"),d.mouseZoomedIn=!1),se<1?c.addClass(n,"quick-view-zoom-allowed"):c.removeClass(n,"quick-view-zoom-allowed"),pe()},pe=function(){D&&(c.removeClass(n,"quick-view-dragging"),D=!1)};Ei("resize",R),Ei("afterChange",R),Ei("pointerDown",function(){d.mouseZoomedIn&&(D=!0,c.addClass(n,"quick-view-dragging"))}),Ei("pointerUp",pe),C||R()},handleMouseWheel:function(C){if(_l=!0,se<=d.currItem.fitRatio&&v.modal&&(!v.closeOnScroll||Do||br?C.preventDefault():$e&&Math.abs(C.deltaY)>2&&(F=!0,d.close())),yi.x=0,"deltaX"in C)C.deltaMode===1?(yi.x=C.deltaX*18,yi.y=C.deltaY*18):(yi.x=C.deltaX,yi.y=C.deltaY);else if("wheelDelta"in C)C.wheelDeltaX&&(yi.x=-.16*C.wheelDeltaX),C.wheelDeltaY?yi.y=-.16*C.wheelDeltaY:yi.y=-.16*C.wheelDelta;else if("detail"in C)yi.y=C.detail;else return;if(se<=d.currItem.fitRatio&&!Xr){Ji=Ji+yi.y,v.modal&&(!v.animatedCloseOnScroll||Do||br?(C.preventDefault(),Ji=0):$e&&Math.abs(yi.y)>0&&!Gr&&(Dn(),wc()),Nr&&clearTimeout(Nr),Nr=setTimeout(function(){Dn(),gs()},200));return}else Ji=0,C.stopPropagation();hl(se,!0);var M=N.x-yi.x,D=N.y-yi.y;(v.modal||M<=dt.min.x&&M>=dt.max.x&&D<=dt.min.y&&D>=dt.max.y)&&C.preventDefault(),d.panTo(M,D)},toggleDesktopZoom:function(C){C=C||{x:K.x/2+ie.x,y:K.y/2+ie.y};var M=v.getDoubleTapZoom(!0,d.currItem),D=se===M;d.mouseZoomedIn=!D,d.zoomTo(D?d.currItem.initialZoomLevel:M,C,333),c[(D?"remove":"add")+"Class"](n,"quick-view-zoomed-in"),d.currItem.caption&&v.showCaption&&(D?d.caption.classList.remove("hidden"):d.caption.classList.add("hidden"))}}}),c.extend(d,r1)};return r}),this.template=`<div class="quick-view" tabindex="-1" role="dialog" aria-hidden="true"> 
	

</div>`;var t=function(){var r=document.querySelector(".quick-view-container");r.outerHTML=this.template,r=null}.bind(this),e=function(){};this.setEventProxy=function(r){typeof r=="function"&&(e=r)};var i=function(r,n,o,s,u,c,d){var p=Math.acos,g=Math.atan,v=Math.sqrt,b=Math.PI,S={x:u,y:c},_=0,E={x:1,y:1},I={x:0,y:0},F=r*s-n*o;if(d)r?(I={x:g(o/r),y:g(n/r)},E={x:r,y:F/r}):n?(_=b*.5,E={x:n,y:F/n},I.x=g(s/n)):(E={x:o,y:s},I.x=b*.25);else if(r||n){var O=v(r*r+n*n);_=n>0?p(r/O):-p(r/O),E={x:O,y:F/O},I.x=g((r*o+n*s)/(O*O))}else if(o||s){var L=v(o*o+s*s);_=b*.5-(s>0?p(-o/L):-p(o/L)),E={x:F/L,y:L},I.y=g((r*o+n*s)/(L*L))}else E={x:0,y:0};return{scale:E,translate:S,rotation:_,skew:I}};this.isActive=!1,this.activeGallery=void 0,this.openImageArray=function(r,n,o){if(!(r===void 0||this.activeGallery!==void 0)){var s=document.querySelectorAll(".quick-view")[0],u=this,c=o.alignVertical||"center",d=o.alignHorizontal||"center",p=o.useControls,g=o.animatedCloseOnScroll,v=o.showCaption,b={index:n,maxSpreadZoom:1,getThumbBoundsFn:function(O){if(o&&o.preventAnimation||u.activeGallery==null)return!1;var L=u.activeGallery.getItemAt(O),z;if(!L||!L.el)return!1;L.el.tagName==="A"?z=L.el.querySelector("media-item, video, iframe, img")||L.el:z=L.el;let G=z.closest("marquee-set");if(G){let Ae=G.querySelector('marquee-inner[slot="contents"]'),st=G.querySelector('marquee-inner[slot="contents-clone"]');if(u.isActive&&st)return!1}if(z&&z.tagName==="MEDIA-ITEM"&&(z=z.shadowRoot.querySelector('[part*="media"]')),!z)return!1;let H=z.getRootNode();for(;H&&H!==document;)H instanceof ShadowRoot?H=H.host.getRootNode():H=void 0;if(!H)return!1;let N=getComputedStyle(z),J=parseFloat(N.getPropertyValue("padding-top"))||0,oe=parseFloat(N.getPropertyValue("padding-bottom"))||0,te=parseFloat(N.getPropertyValue("padding-left"))||0,K=parseFloat(N.getPropertyValue("padding-right"))||0,U=parseFloat(N.getPropertyValue("border-top"))||0,se=parseFloat(N.getPropertyValue("border-bottom"))||0,re=parseFloat(N.getPropertyValue("border-left"))||0,Q=parseFloat(N.getPropertyValue("border-right"))||0,le={rotation:0,scale:{x:1,y:1},skew:{x:0,y:0},translate:{x:0,y:0}},j=z,B=z,Y=0,ie=0,de=0,fe=0;for(;j;)N=getComputedStyle(j),J=parseFloat(N.getPropertyValue("padding-top"))||0,oe=parseFloat(N.getPropertyValue("padding-bottom"))||0,te=parseFloat(N.getPropertyValue("padding-left"))||0,K=parseFloat(N.getPropertyValue("padding-right"))||0,U=parseFloat(N.getPropertyValue("border-top"))||0,se=parseFloat(N.getPropertyValue("border-bottom"))||0,re=parseFloat(N.getPropertyValue("border-left"))||0,Q=parseFloat(N.getPropertyValue("border-right"))||0,j==z?(de=j.offsetWidth-(te+re+K+Q),fe=j.offsetHeight-(J+U+oe+se),Y=Y+j.offsetLeft+re+te,ie=ie+j.offsetTop+U+J):(Y=Y+j.offsetLeft+re,ie=ie+j.offsetTop+U),j=j.offsetParent;let be=[];for(;B;){let Ae=[],st=getComputedStyle(B),ct=st.getPropertyValue("transform"),ft=st.getPropertyValue("position")==="fixed",Be;var Me=ct.indexOf("matrix(")>-1,Ee=ct.indexOf("matrix3d(")>-1,Fe=Me||Ee;if(Me){Ae=ct.replace(")","").replace("matrix(","").split(",");for(var qe=0;qe<Ae.length;qe++)Ae[qe]=parseFloat(Ae[qe]);Be=i(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],!1)}else if(Ee){Ae=ct.replace(")","").replace("matrix3d(","").split(",");for(var qe=0;qe<Ae.length;qe++)Ae[qe]=parseFloat(Ae[qe]);Be=i(Ae[0],Ae[1],Ae[4],Ae[5],Ae[12],Ae[13],!1)}else Be={rotation:0,scale:{x:1,y:1},skew:{x:0,y:0},translate:{x:0,y:0}};if(Fe){let mt=Y+de*.5,Lt=ie+fe*.5,St=Y-mt,Wt=ie-Lt,rt=St*Math.cos(Be.rotation)-Wt*Math.sin(Be.rotation),Ki=St*Math.sin(Be.rotation)+Wt*Math.cos(Be.rotation);Y=rt+mt,ie=Ki+Lt,Y+=Be.translate.x,ie+=Be.translate.y,le.rotation=Be.rotation+le.rotation,le.scale.x=Be.scale.x+le.scale.x,le.scale.y=Be.scale.y+le.scale.y,le.translate.y=Be.translate.y+le.translate.y,le.translate.x=Be.translate.x+le.translate.x}B?.assignedSlot?B=B.assignedSlot:B=B.parentNode,B?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(B=B.host),B?.nodeType!==Node.ELEMENT_NODE&&(B=null),B&&(ft?be.push("fixed"):be.push(B.scrollTop))}let nt=be.findIndex(Ae=>Ae==="fixed");nt!==-1&&(be=be.slice(0,nt));let $e=be.reduce((Ae,st=0)=>Ae+st);ie=ie-$e;var ot={x:Y,y:ie,w:de,h:fe,padding:{top:J,bottom:oe,left:te,right:K},border:{top:U,bottom:se,left:re,right:Q},transform:le};return L.thumbRect=ot,ot},closeEl:!0,arrowEl:!1,tapToClose:!0,closeOnScroll:!1,alignHorizontal:d,alignVertical:c,useControls:p,animatedCloseOnScroll:g,showCaption:v},S=!1,_=!1,E=function(){_=!0},I=function(){_=!1};if(window.addEventListener("touchend",I),window.addEventListener("touchstart",E),o!==void 0&&typeof o=="object"){for(var F in o)o.hasOwnProperty(F)&&(b[F]=o[F]);o.disableZoom===!0&&(S=!0,b.zoomEl=!1,b.getDoubleTapZoom=function(O,L){return L.initialZoomLevel},b.pinchToClose=!1)}return this.activeGallery=new this.PhotoSwipe(s,this.PhotoSwipeUI_Default,r,b),o.afterInit&&this.activeGallery.listen("afterInit",o.afterInit),S?s.classList.add("quick-view-zoom-disabled"):s.classList.remove("quick-view-zoom-disabled"),this.activeGallery.init(),this.isActive=!0,this.activeGallery.elementArray=r,this.activeGallery.listen("destroy",function(){s.parentNode!==null?(s.parentNode.removeChild(s),window.removeEventListener("touchend",I),window.removeEventListener("touchstart",E)):(window.removeEventListener("touchend",I),window.removeEventListener("touchstart",E)),u.isActive=!1,u.activeGallery=void 0}),this.activeGallery}};(function(r,n){r===void 0&&window!==void 0&&(r=window),r.PhotoSwipeUI_Default=n()})(this,function(){"use strict";var r=function(n,o){var s=this,u=!1,c=!0,d,p,g,v,b,S,_,E={closeElClasses:["holder","caption","zoom-wrap","ui","top-menu-bar","container"],timeToIdle:1500,timeToIdleOutside:1500,closeEl:!0,fullscreenEl:!0,zoomEl:!0,counterEl:!0,arrowEl:!0,tapToClose:!1,tapToToggleControls:!0,useControls:!1,clickToCloseNonZoomable:!0,fitControlsWidth:1200},I,F,O=function(j){if(I)return!0;j=j||window.event,_.timeToIdle&&_.mouseUsed&&!v&&te();for(var B=j.target||j.srcElement;B.nodeName==="svg"||B.nodeName==="path"||B.nodeName==="circle"||B.nodeName==="polyline"||B.nodeName==="g"||B.nodeName==="foreignObject"||B.nodeName==="line";)B=B.parentNode;for(var Y,ie=B.getAttribute("class")||"",de,fe=0;fe<Q.length;fe++)Y=Q[fe],Y.onTap&&ie.indexOf("quick-view-"+Y.name)>-1&&(Y.onTap(),de=!0);if(de){j.stopPropagation&&j.stopPropagation(),I=!0;var be=o.features.isOldAndroid?600:30;F=setTimeout(function(){I=!1},be)}},L=function(){return!n.likelyTouchDevice||_.mouseUsed||screen.width>_.fitControlsWidth},z=function(j,B,Y){o[(Y?"add":"remove")+"Class"](j,"quick-view-"+B)},G=function(j){for(var B=0;B<_.closeElClasses.length;B++)if(o.hasClass(j,"quick-view-"+_.closeElClasses[B]))return!0},H,N,J=0,oe=!1,te=function(j){if(j){var B=Fs(j.target,function(Y){if(Y&&Y.nodeType===Node.ELEMENT_NODE)return Y.classList.contains("left-arrow")||Y.classList.contains("right-arrow")||Y.classList.contains("close-button")});oe=!!B}clearTimeout(N),J=0,v&&s.setIdle(!1)},K=function(j){j=j||window.event;var B=j.relatedTarget||j.toElement;(!B||B.nodeName==="HTML")&&(clearTimeout(N),N=setTimeout(function(){s.setIdle(!0)},_.timeToIdleOutside))},U=function(){_.fullscreenEl&&!o.features.isOldAndroid&&(d||(d=s.getFullscreenAPI()),d?(o.bind(document,d.eventK,s.updateFullscreen),s.updateFullscreen(),o.addClass(n.template,"quick-view-supports-fs")):o.removeClass(n.template,"quick-view-supports-fs"))},se=function(){_.timeToIdle&&b("mouseUsed",function(){o.bind(document,"mousemove",te),o.bind(document,"mouseout",K),H=setInterval(function(){J++,J===2&&s.setIdle(!0)},_.timeToIdle/2)})},re=function(){b("onVerticalDrag",function(B){c&&B<.95?s.hideControls():!c&&B>=.95&&s.showControls()});var j;b("onPinchClose",function(B){c&&B<.9?(s.hideControls(),j=!0):j&&!c&&B>.9&&s.showControls()}),b("zoomGestureEnded",function(){j=!1,j&&!c&&s.showControls()})},Q=[{name:"button--zoom",option:"zoomEl",onTap:n.toggleDesktopZoom},{name:"button-close",option:"closeEl",onTap:n.close},{name:"button-prev",option:"arrowEl",onTap:n.prev},{name:"button-next",option:"arrowEl",onTap:n.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){d.isFullscreen()?d.exit():d.enter()}}],le=function(){var j,B,Y,ie=function(be){if(be){for(var Me=be.length,Ee=[],Fe=0;Fe<Me;Fe++){j=be[Fe],B=j.className;for(var qe=0;qe<Q.length;qe++)Y=Q[qe],B.indexOf("quick-view-"+Y.name)>-1&&(_[Y.option]?(o.removeClass(j,"quick-view-element--disabled"),Ee.push(j),Y.onInit&&Y.onInit(j)):o.addClass(j,"quick-view-element--disabled"))}Ee.length>0}};ie(p.children);for(var de=p.querySelectorAll(".quick-view-group"),fe=0;fe<de.length;fe++)ie(de[fe].children)};s.init=function(){o.extend(n.options,E,!0),_=n.options,p=o.getChildByClass(n.scrollWrap,"quick-view-ui"),b=n.listen,b("beforeChange",s.update),b("doubleTap",function(j){var B=n.currItem.initialZoomLevel;n.getZoomLevel()!==B?n.zoomTo(B,j,333):n.zoomTo(_.getDoubleTapZoom(!1,n.currItem),j,333)}),b("preventDragEvent",function(j,B,Y){var ie=j.target||j.srcElement;ie&&ie.getAttribute("class")&&j.type.indexOf("mouse")>-1&&(ie.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(ie.tagName))&&(Y.prevent=!1)}),b("destroy",function(){_.captionEl&&(_fakeCaptionContainer&&p.removeChild(_fakeCaptionContainer),o.removeClass(_captionContainer,"quick-view-caption--empty"))}),s.bindEvents(),U()},s.unbindEvents=function(){H&&clearInterval(H),o.unbind(document,"mouseout",K),o.unbind(document,"mousemove",te),o.unbind(n.scrollWrap,"pswpTap",s.onGlobalTap),window.removeEventListener("mousedown",s.onGlobalClick),d&&(o.unbind(document,d.eventK,s.updateFullscreen),d.isFullscreen()&&(_.hideAnimationDuration=0,d.exit()),d=null)},s.setupIdle=function(){se()},s.bindEvents=function(){_.useControls,window.addEventListener("mousedown",s.onGlobalClick),o.bind(n.scrollWrap,"pswpTap",s.onGlobalTap),n.likelyTouchDevice},s.setIdle=function(j){window.store?.getState()?.frontendState?.adminMode||oe||(v=j)},s.update=function(){c&&n.currItem?u=!0:u=!1},s.updateFullscreen=function(j){j&&setTimeout(function(){n.setScrollOffset(0,o.getScrollY())},50),o[(d.isFullscreen()?"add":"remove")+"Class"](n.template,"quick-view-fs")},s.onGlobalClick=function(j){let B=j.target.closest('.quick-view, media-item:not([disable-zoom="true"]), href[rel="quick-view"]');B&&(B.getAttribute("rel")=="quick-view"||B.nodeName==="MEDIA-ITEM")?n.elementArray.findIndex(ie=>ie.el==B)===-1&&n.close():B||n.close()},s.onGlobalTap=function(j){j=j||window.event;var B=j.target||j.srcElement;if(!I){if(j.detail&&j.detail.pointerType==="mouse"){if(G(B)){n.close();return}if(o.hasClass(B,"quick-view-item")){if(_.disableZoom){let Y=B.getFileType?.();if(Y&&!n.currItem.autoplay&&(Y.startsWith("vimeo")||Y.startsWith("youtube")||Y==="video"))return;n.close();return}if(n.getZoomLevel()===1&&n.getZoomLevel()<=n.currItem.fitRatio){if(_.clickToCloseNonZoomable){n.close();return}}else n.toggleDesktopZoom(j.detail.releasePoint)}}else if(_.tapToToggleControls&&(c?s.hideControls():s.showControls()),_.tapToClose&&(o.hasClass(B,"quick-view-item")||G(B))){(!B.getFileType||B.getFileType?.()==="image")&&n.close();return}}},s.onMouseOver=function(j){j=j||window.event;var B=j.target||j.srcElement;z(p,"ui--over-close",G(B))},s.hideControls=function(){},s.showControls=function(){},s.toggleFullscreen=function(){d.isFullscreen()?d.exit():d.enter()},s.supportsFullscreen=function(){var j=document;return!!(j.exitFullscreen||j.mozCancelFullScreen||j.webkitExitFullscreen||j.msExitFullscreen)},s.getFullscreenAPI=function(){var j=document.documentElement,B,Y="fullscreenchange";return j.requestFullscreen?B={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:Y}:j.mozRequestFullScreen?B={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+Y}:j.webkitRequestFullscreen?B={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+Y}:j.msRequestFullscreen&&(B={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),B&&(B.enter=function(){if(g=_.closeOnScroll,_.closeOnScroll=!1,this.enterK==="webkitRequestFullscreen")n.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);else return n.template[this.enterK]()},B.exit=function(){return _.closeOnScroll=g,document[this.exitK]()},B.isFullscreen=function(){return document[this.elementK]}),B}};return r})}).call(vR)});var yR=$((X8e,sle)=>{sle.exports={}});var Fw={};ai(Fw,{default:()=>cle,getLightboxItemAndPreloadFromElement:()=>wg,openQuickViewFromElement:()=>Lw});function lle(t,e){return{imageSettings:t.siteDesign.images,settings:t.siteDesign.quick_view,quickView:t.frontendState.quickView,adminMode:t.frontendState.adminMode}}function ule(t){return Pt({updateFrontendState:actions.updateFrontendState},t)}var xg,Dw,xR,wR,wg,Lw,cle,up=T(()=>{Pe();Se();ht();di();_i();Mr();Re();es();ia();bR();xg=ce(ve(),1);W();Dw=class extends ae{constructor(e){super(e),this.state={lightboxActive:!1,navigationElement:null,showInterface:!1,showArrows:!0,navTransitioning:!1,pointerDown:!1},this.template=me(),this.navigationRef=me(),this.lightbox=window.lightbox,this.QuickView=window.QuickView,Promise.resolve().then(()=>ce(yR(),1)),this.htmlTemplate=`
			<div class="quick-view-bg quick-view-background"></div> 
			<div class="quick-view-scroll-wrap"> 

				<div class="quick-view-container"> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
					<div class="quick-view-holder"></div> 
				</div> 

			</div>

			<div class="quick-view-caption-positioner"> 
				<div class="quick-view-caption-wrapper"> 
					<div class="quick-view-caption caption hidden" data-quick-view-caption><span></span></div>
				</div> 
			</div>`}onPointerDown=e=>{this.setState({pointerDown:!0}),fo&&this.hideArrows()};onPointerUp=e=>{this.setState({pointerDown:!1})};onPointerMove=e=>{if(!this.state.showInterface&&!fo&&!this.state.pointerDown&&this.setState({showInterface:!0}),fo)return;let i=document.querySelector(".quick-view-caption");e&&e.target&&(this.state.navigationElement?.contains(e.target)||e.target===i||i&&i.contains(e.target))?this.hideInterface.cancel():!fo&&this.hideInterface()};isInAdmin=()=>Ri&&this.props.adminMode===!0;hideInterface=xg.default.debounce(()=>{this.isInAdmin()||this.setState({showInterface:!1})},1500);hideArrows=xg.default.debounce(()=>{this.isInAdmin()||this.setState({showArrows:!1})},500);bindEvents(){fo||document.addEventListener("pointerleave",this.hideInterface),window.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerdown",this.onPointerMove)}unbindEvents(){fo||document.removeEventListener("pointerleave",this.hideInterface),window.removeEventListener("pointerdown",this.onPointerDown),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerdown",this.onPointerMove)}componentDidUpdate(e,i){this.state.navigationElement!==this.navigationRef.current&&(this.navigationRef.current&&!this.navigationRef.current.shadowRoot&&this.navigationRef.current.attachShadow({mode:"open"}),this.setState({navigationElement:this.navigationRef.current})),this.props.location!==e.location&&this.closeQuickView(),!e.quickView.inited&&this.props.quickView.inited&&this.setState({lightboxActive:!0,showInterface:!1},()=>{this.props.quickView.mode==="preview"?(window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}}),this.previewInAdmin()):this.launchQuickView(),this.bindEvents(),this.lightbox.activeGallery?.listen("initialZoomInEnd",()=>{this.setState({showInterface:!0,showArrows:!1}),!fo&&this.hideInterface()}),this.lightbox.activeGallery?.listen("onVerticalDrag",n=>{this.state.showInterface&&n<.95?this.setState({showInterface:!1}):!this.state.showInterface&&n>=.95&&this.setState({showInterface:!0})});var r;this.lightbox.activeGallery?.listen("onPinchClose",n=>{this.state.showInterface&&n<.9?(this.setState({showInterface:!1}),r=!0):r&&!this.state.showInterface&&n>.9&&this.setState({showInterface:!0})}),this.lightbox.activeGallery?.listen("zoomGestureEnded",()=>{r=!1,r&&!this.state.showInterface&&this.setState({showInterface:!1})}),this.lightbox?.activeGallery?.listen("close",()=>{this.setState({showInterface:!1,showArrows:!0}),this.unbindEvents()}),this.lightbox?.activeGallery?.listen("destroy",()=>{window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}}),this.props.updateFrontendState({quickView:{mode:"default",inited:!1,autoScrolling:!1,activeGallery:null,elementArray:void 0,activeIndex:0}}),this.setState({lightboxActive:!1,showInterface:!1,showArrows:!0})})}),e.quickView.inited&&!this.props.quickView.inited&&this.lightbox.isActive&&this.lightbox.activeGallery.close(),e.quickView.autoScrolling!==this.props.quickView.autoScrolling&&this.lightbox.activeGallery&&(this.props.quickView.autoScrolling?this.lightbox.activeGallery.options.animatedCloseOnScroll=!1:this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll),!xg.default.isEqual(e.settings,this.props.settings)&&this.lightbox.activeGallery&&(e.settings.show_ui!==this.props.settings.show_ui&&this.props.settings.show_ui&&(this.setState({showInterface:!0}),this.hideInterface()),this.lightbox.activeGallery.options.alignHorizontal=this.props.settings.contentAlignHorizontal,this.lightbox.activeGallery.options.alignVertical=this.props.settings.contentAlignVertical,this.lightbox.activeGallery.options.animatedCloseOnScroll=this.props.settings.close_on_scroll,this.props.settings.captions!==e.settings.captions&&(this.lightbox.activeGallery.options.showCaption=this.props.settings.captions,this.props.settings.captions?(this.lightbox.activeGallery.caption.style.display="",this.lightbox.activeGallery.updateCaption()):this.lightbox.activeGallery.caption.style.display="none"),this.lightbox.activeGallery.updateSize(!0))}closeQuickView=e=>{Dt.getState().frontendState?.quickView?.inited!==!1&&this.props.updateFrontendState({quickView:{inited:!1}})};render(){return this.state.lightboxActive||this.state.navTransitioning?m(X,{children:[m("div",{ref:this.template,className:"quick-view",dangerouslySetInnerHTML:{__html:this.htmlTemplate}}),this.props.settings.show_ui?m("div",{className:"quick-view nav",ref:this.navigationRef,children:[this.state.navigationElement?m("style",{children:`
							.quick-view-caption {
								opacity: ${this.state.showInterface?"1":"0"};
							}
						`}):null,this.state.navigationElement?je(m(X,{children:[m("style",{children:`
								[part*="slideshow-nav"],
								.quick-view-caption {
									opacity: ${this.state.showInterface?"1":"0"};
								}
								${fo&&`
									[part*="slideshow-nav-next-button"],
									[part*="slideshow-nav-previous-button"]{
										opacity: ${this.state.showArrows?"1":"0"};
										${this.state.showArrows?"":"pointer-events: none !important;"}
								}`}
								
							`}),m("div",{part:"slideshow-nav",onTransitionStart:e=>{this.setState({navTransitioning:!0})},onTransitionEnd:e=>{this.setState({navTransitioning:!1})},children:[this.isInAdmin()||this.props.quickView.elementArray?.length>1?m(X,{children:[m("div",{part:"slideshow-nav-previous-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.prev()},children:m("svg",{part:"slideshow-nav-prev",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})}),m("div",{part:"slideshow-nav-next-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.next()},children:m("svg",{part:"slideshow-nav-next",x:"0px",y:"0px",viewBox:"0 0 36 36",style:"enable-background:new 0 0 36 36;",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-arrow",d:"M22.3,28l-10-10l10-10"})]})})]},"slideshow-nav-buttons"):null,m("div",{part:"slideshow-nav-close-button",onClick:e=>{e.preventDefault(),this.lightbox?.activeGallery?.close()},children:m("svg",{part:"slideshow-nav-close",x:"0px",y:"0px",width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",children:[m("rect",{part:"slideshow-nav-background",width:"36",height:"36",rx:"36"}),m("path",{part:"slideshow-nav-x",d:"M9.3,9.3L18,18l-8.7,8.7 M26.7,9.3L18,18l8.7,8.7"})]})})]})]}),this.state.navigationElement.shadowRoot):null]}):null]}):null}launchQuickView=()=>{if(!this.props.quickView.elementArray)return;let e=this.props.quickView.activeIndex;(e===-1||isNaN(e))&&(e=0);let i=this.props.quickView.elementArray[e],r=!1,n=i?.el?.getAttribute?.("rel")==="quick-view";lightbox.openImageArray(this.props.quickView.elementArray,e,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,showHideOpacity:n,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1,afterInit:o=>{let s=lightbox.activeGallery.template,u=window.getComputedStyle(s),c=parseInt(u.getPropertyValue("width")),d=parseInt(u.getPropertyValue("height"));this.props.updateFrontendState({quickView:{activeIndex:o}})}}),lightbox?.activeGallery?.listen("afterChange",o=>{if(!this.props.quickView.inited)return;this.props.updateFrontendState({quickView:{activeIndex:o}}),this.props.quickView.elementArray[o]?.el?.dispatchEvent(new CustomEvent("request-scroll",{bubbles:!0,cancelable:!0,composed:!0,detail:{transitionTime:250,preventQuickViewClose:!0,lazyScroll:!0}}))})};previewInAdmin=()=>{let i=[[6800,5e3],[5e3,6800],[5e3,5e3]].map(r=>{let n=document.createElement("media-item"),o=document.createElement("span");return o.classList.add("caption-background"),o.innerHTML="Lorem ipsum dolor sit amet, consectetur adipiscing",n.setAttribute("width",r[0]),n.setAttribute("height",r[1]),{useViewportWidth:!1,useViewportHeight:!1,viewportWidthPercentage:1,viewportHeightPercentage:1,autoplay:!1,fileType:"placeholder",w:r[0],h:r[1],caption:o,hash:"placeholder",src:null,usePlaceholder:!1,el:n}});this.lightbox.openImageArray(i,0,{disableZoom:!this.props.imageSettings.image_full_zoom,preventAnimation:!1,animatedCloseOnScroll:!!this.props.settings?.close_on_scroll,alignHorizontal:this.props.settings?.contentAlignHorizontal||"center",alignVertical:this.props.settings?.contentAlignVertical||"center",useControls:!1,showCaption:!!this.props.settings?.captions,isAdmin:!1})}};xR=De(lle,ule)(Dw),wR=(t="")=>{let e="none";if(t){let s=t.toLowerCase();if(s.endsWith(".mov")||s.endsWith(".mp4")||s.endsWith(".webm"))e="video";else if(s.endsWith(".png")||s.endsWith(".webp")||s.endsWith(".jpg")||s.endsWith(".jpeg")||s.endsWith(".gif")||s.endsWith(".avif")||s.endsWith(".apng")||s.endsWith(".svg"))e="image";else{e="url";var i,r=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,o=t.match(r);if(o&&o[3]){i=o[3];let u=t.split("/");u[u.length-1]!=i&&(i+="/"+u[u.length-1]),e="vimeo:"+i}var n=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,o=t.match(n);o&&o[7].length==11&&(i=o[7],e="youtube:"+i)}}return e},wg=(t,e={},i=!0)=>{var r=!1,n=t?.querySelector("figcaption"),o=n?.innerHTML;n&&o!==""&&(r=document.createElement("span"),r.classList.add("caption-background"),r.innerHTML=o);let s=!1,u=!1,c=1,d=1,p=1600,g=1600,v=!1,b="url",S=t.getAttribute("hash")||null,_=t.getAttribute("href")||null;t.getAttribute("rel")=="quick-view"?b=wR(t.getAttribute("href")):t.tagName==="MEDIA-ITEM"&&t.getFileType?b=t.getFileType():b=wR(t.getAttribute("src"));let E=_||t.getAttribute("src");return _&&(S=null),new Promise(I=>{if(S&&S!=="placeholder"&&t.tagName==="MEDIA-ITEM"&&!_){let O=t.getAttribute("poster");var F=t?.shadowRoot?.querySelector("video")?.getAttribute("poster");F||(F=t?.shadowRoot?.querySelector('img[part*="poster"]')?.getAttribute("src"));let L=screen.width,z=screen.height,G=Math.max(Math.ceil(screen.width/t._size.width),Math.ceil(screen.height/t._size.height));switch(!0){case b==="url":s=!0,u=!0;break;case b.startsWith("youtube"):case b.startsWith("vimeo"):case b=="video":p=t._size.width*G,g=t._size.height*G;break;default:p=t._size.width*G,g=t._size.height*G;break}let H,N=()=>{I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,fileType:b,poster:t.getAttribute("poster"),loaded:!0,loading:!1,w:p,h:g,caption:r,hash:S,src:E,posterSrc:F,autoplay:t.getAttribute("autoplay")=="true",usePlaceholder:!1,el:t,model:t.model,preloadedImage:H})},J=t.shadowRoot.querySelector("img")?.getAttribute("src");i&&b=="image"&&J?(H=document.createElement("img"),H.onload=()=>{H.onload=void 0,H.decode().then(()=>{N()})},H.src=J):N()}else if(S&&S=="placeholder")I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:!1,fileType:b,w:t.getAttribute("width")||16e3,h:t.getAttribute("height")||9e3,caption:r,hash:"placeholder",src:E,loaded:!1,loading:!1,usePlaceholder:!0,el:t,model:t.model});else if(t.hasAttribute("width")&&t.hasAttribute("height")?t.getAttribute("width").indexOf("%")>-1&&t.getAttribute("height").indexOf("%")>-1?(s=!0,u=!0,c=parseFloat(t.getAttribute("width"))/100,d=parseFloat(t.getAttribute("height"))/100):(p=parseFloat(t.getAttribute("width")),g=parseFloat(t.getAttribute("height"))):b==="url"&&(s=!0,u=!0,c=1,d=1),b.startsWith("vimeo")||b.startsWith("youtube")){let O="";b.startsWith("vimeo")?O="https://vimeo.com/api/oembed.json?url="+E+"&width=640":O="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+E,i?fetch(O,{mode:"cors"}).then(L=>{L.json().then(z=>{I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:t.getAttribute("autoplay")=="true",fileType:b,w:z.width*20,h:z.height*20,caption:r,hash:null,src:E,loaded:!0,loading:!1,usePlaceholder:!1,el:t,model:t.model})})}):I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:t.getAttribute("autoplay")=="true",fileType:b,w:1600,h:900,caption:r,hash:null,src:E,loaded:!1,loading:!1,usePlaceholder:!1,el:t,model:t.model})}else if(b==="url"){let O=ld()&&E.indexOf(".pdf")>-1&&E.indexOf("docs.google.com/viewer")==-1,L=O?`https://docs.google.com/viewer?url=${E}&embedded=true&chrome=false`:E;I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,fileType:b,loaded:!0,loading:!1,noLazyLoading:!!O,w:3200,h:2e3,caption:r,hash:null,src:L,usePlaceholder:!1,el:t,model:t.model})}else if(b==="image")if(i){let O=document.createElement("img");O.onerror=function(){O.onload=null,I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,loadError:!0,autoplay:!1,fileType:b,loaded:!0,loading:!1,w:1600,h:1e3,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null})},O.onload=L=>{O.onload=null,p=O.naturalWidth,g=O.naturalHeight,s=!1,u=!1,O.decode().then(()=>{I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:!1,fileType:b,loaded:!0,loading:!1,w:p*100,h:g*100,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null,preloadedImage:O})})},O.setAttribute("src",E)}else I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:!1,fileType:b,loaded:!1,loading:!1,w:1600,h:900,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null});else if(b==="video")if(i){let O=document.createElement("video");O.setAttribute("preload","metadata"),O.onerror=function(L){O.onloadedmetadata=null,O.onerror=null,O.src="",O.load(),I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,loadError:!0,loaded:!0,loading:!1,autoplay:!1,fileType:b,w:1600,h:1e3,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null})},O.onloadedmetadata=L=>{O.onloadedmetadata=null,O.onerror=null,p=O.videoWidth,g=O.videoHeight,s=!1,u=!1,O.src="",O.load(),I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:t.getAttribute("autoplay")=="true",loaded:!0,loading:!1,fileType:b,w:p*100,h:g*100,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null})},O.setAttribute("src",E),O.load()}else I({...e,useViewportWidth:s,useViewportHeight:u,viewportWidthPercentage:c,viewportHeightPercentage:d,autoplay:t.getAttribute("autoplay")=="true",loaded:!1,loading:!1,fileType:b,w:1600,h:900,caption:r,hash:null,src:E,usePlaceholder:!1,el:t,model:null})})},Lw=t=>{let e=Dt.getState();if(t&&t.nodeName!=="MEDIA-ITEM"&&(t=t.closest('a[rel="quick-view"]')||t),window.lightbox.activeGallery&&e.frontendState.quickView.elementArray){let p=e.frontendState.quickView.elementArray.findIndex(g=>g.el==t);if(p!==-1){window.lightbox.activeGallery.goTo(p);return}}let i=t.closest(".page"),r=t.getAttribute("hash"),n=[],o=Fs(t,p=>p?.tagName?.startsWith("GALLERY-")),s=!1,u=t.closest("marquee-set");if(o){if(o.getAttribute("thumbnail-index")==="img:all")s=!0;else if(o&&o.getAttribute("disable-zoom")==="true")return;n=Array.from(o.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]'))}else{i?n=Array.from(i.querySelector("bodycopy")?.querySelectorAll('media-item:not([disable-zoom="true"]):not([href]), a[rel="quick-view"], media-item[rel="quick-view"], media-item[force-quick-view="true"]')):n=Array.from(document.querySelectorAll('bodycopy media-item:not([disable-zoom="true"]):not([href]), bodycopy a[rel="quick-view"], bodycopy media-item[rel="quick-view"], bodycopy media-item[force-quick-view="true"]'));let p=u&&t.closest('[slot="contents-clone"]');n=n.filter(g=>!Fs(g,v=>!!(v?.tagName?.startsWith("GALLERY-")||v?.classList?.contains("flying-object")||v.tagName==="MARQUEE-INNER"&&(v.slot==="contents-clone"&&!p||v.slot==="contents"&&p))))}n=n.filter(p=>{if(p.tagName!=="A")return!0;let g=p.getAttribute("href")||"";return!(g===""||g=="#"||g.indexOf("mailto:")==0||g.indexOf("tel:")==0)});let c=n.indexOf(t),d=0;Promise.all(n.map((p,g)=>{let v=n.length*.5,b=v-Math.abs((c+-g)%(2*v)-v);return b<-v&&b<0&&(b=b+n.length),wg(p,{},Math.abs(b)<=d)})).then(p=>{Dt.dispatch(actions.updateFrontendState({quickView:{mode:"default",inited:!0,autoScrolling:!1,elementArray:p,activeIndex:c===-1?0:c}}))})};xR.defaultProps={settings:{show_ui:!0,captions:!1,quickViewAlignment:"center-center",contentAlignVertical:"center",contentAlignHorizontal:"center"}};cle=Bn(xR)});var ts,zw,Hw,CR=T(()=>{Pe();Re();ia();js();di();ht();jt();_i();ts=ce(ve(),1);cg();Rw();ne||(window.logSiteStructure=()=>{let t=window.store.getState(),e=t.structure.bySort,i=Object.keys(e);i.sort((n,o)=>e[n]-e[o]);let r={};i.forEach(n=>{let o=t.pages.byId[n]||t.sets.byId[n];r[n]={title:o.title,sort:e[n],index:t.structure.indexById[n],page_count:o.page_count}}),console.table(r)});zw=class extends ae{constructor(e){super(e),this.state={},this.isMac=!1,ne||(Promise.resolve().then(()=>(up(),Fw)).then(({openQuickViewFromElement:i})=>{this.setState({openQuickViewFromElement:i})}),this.isMac=sd())}handleGlobalClick=e=>{let i=e.target,r=i;i.shadowRoot?i=e.composedPath().find(s=>s.tagName==="A")||i:i.closest("a")&&(i=i.closest("a")),ji.handleGlobalClick(i,r);let n=document.querySelectorAll('cargo-map[follow-navigation="true"]');for(let s of n)s.handleGlobalClick(i,r);if(!e.defaultPrevented&&i&&(i.nodeName==="A"||i.nodeName==="a")&&i.getAttribute("href")&&i.getAttribute("href")!==""){let s=i.getAttribute("rel");if(this.props.adminMode){e.preventDefault();return}let u=i.getAttribute("href")||"",c=i.getAttribute("target"),d;switch(s){case"history":e.preventDefault();let p=this.props.store.getState(),g=Je.getContentByPurl(store.getState(),u.replace(/\//,""));if(g?.overlay){ji.toggleOverlay(g.id);return}d=i.getAttribute("data-tags");let v=!1;if(d?.length>0)u=d;else{let E=Je.getHomepagePurl(p);u.toLowerCase()===E&&!p.sets.byId.root.stack&&(u="/")}u.startsWith("/")||(u="/"+u),u==="/contact-form"&&(v=!0),r.nodeName==="MEDIA-ITEM"&&r?.classList.contains("thumbnail")&&u.replace(/\//,"")===this.props.activePURL&&window.scrollTo(0,0),this.isMac&&e.metaKey===!0||!this.isMac&&e.ctrlKey===!0?window.open(u,"_blank"):this.props.history.push(u,{preventScrollReset:v});break;case"prev_page":case"prev-page":e.preventDefault(),this.loadPrevPage();break;case"next_page":case"next-page":e.preventDefault(),this.loadNextPage();break;case"home_page":case"home-page":e.preventDefault(),this.props.history.push("/");break;case"random_page":case"random-page":e.preventDefault(),this.loadRandomPage();break;case"top":e.preventDefault();let b=i.closest?.(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll");b?this.scrollToTop(b):(this.scrollToTop(document.scrollingElement),ts.default.each(document.querySelectorAll(".pinned.allow-scroll .page-content, .overlay-content.overlay-allow-scroll"),this.scrollToTop));break;case"quick-view":case"quick_view":e.preventDefault(),this.state.openQuickViewFromElement?.(e.target);break;case"close-overlay":case"close_overlay":e.preventDefault();let S=r.closest("[page-url]")?.id;ji.getOverlay(S)?ji.closeOverlay(S):this.props.history.push("/");break;case"map-coordinates":e.preventDefault();break;case"map-marker":e.preventDefault();break;case"add-to-cart":case"add_to_cart":e.preventDefault(),this.props.addCommerceProductToCart((i.getAttribute("data-product")||e.target.getAttribute("data-product"))??null,(i.getAttribute("data-variant")||e.target.getAttribute("data-variant"))??null,{callback:()=>{this.props.history.push("/cart",{preventScrollReset:!0})},failureCallback:E=>{this.props.updateFrontendState({alertModal:{header:E,type:"notice"}})}});break;case"show_cart":case"show-cart":e.preventDefault(),bg().then(E=>{this.props.history.push("/cart",{preventScrollReset:!0})}).catch(E=>{console.warn(E)});break;case"filter-index":case"filter_index":e.preventDefault(),d=i.getAttribute("data-tags");let _=i.getAttribute("data-set");var o=new CustomEvent("filter-thumbnail-index",{bubbles:!0,cancelable:!0,composed:!0,detail:{filter:d?"tag:"+d:_?"set:"+_:"all"}});i.dispatchEvent(o);break;default:this.props.isInHomepagePreview?(e.preventDefault(),parent.window.open(u)):c!=="_blank"&&(e.preventDefault(),parent.location.href=u);break}}};openAdmin=()=>{if(window.parent!==window)return;let e=this.props.activePID;if(this.props.store.getState().sets.byId[e]!==void 0){let i=document.querySelector(".content .pages .page");i?e=i.id:e=""}e?window.location.href="/edit/"+e:window.location.href="/edit"};showCargoSiteIndicator=()=>{let e=new Image;e.onload=function(){let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.zIndex="2147483647",i.style.position="fixed",i.style.background='url("https://static.cargo.site/assets/C3/c3label.svg") center center / contain no-repeat',i.style.backgroundSize="60%",i.style.transform="rotate(-30deg)",setTimeout(function(){i.style.transition="opacity 500ms",setTimeout(function(){i.parentNode.removeChild(i)},700),setTimeout(function(){i.style.opacity="0"})},1e3),document.body.appendChild(i)},e.src="https://static.cargo.site/assets/C3/c3label.svg"};handleGlobalKeyDown=e=>{if(e.target.nodeName==="INPUT"||e.target.nodeName==="TEXTAREA"||e.target.closest?.('[contenteditable]:not([contenteditable="false"])'))return;let i=this.props.store.getState();if(!this.props.adminMode){if(this.isMac&&e.metaKey&&e.which===191||!this.isMac&&e.ctrlKey&&e.which===191){this.showCargoSiteIndicator();return}if(this.isMac&&e.metaKey&&e.which===27||!this.isMac&&e.ctrlKey&&e.which===27){this.openAdmin();return}if(e.shiftKey&&(e.keyCode===65||e.keyCode===69)&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&(this.props.inAdminFrame?this.props.editorRole!=="Viewer"&&(this.props.activePID&&this.props.activePID.length>0&&this.props.activePID!=="root"?parent.navigateAdmin("/"+this.props.activePID):parent.navigateAdmin("/")):this.openAdmin()),e.keyCode===82&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadRandomPage()):e.keyCode===37&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey?(e.preventDefault(),this.loadPrevPage()):e.keyCode===39&&!i.frontendState.contactForm.inited&&!i.frontendState.cartOpen&&!i.frontendState?.quickView?.inited&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),this.loadNextPage()),e.which===27&&!e.metaKey&&!e.ctrlKey){if(i.frontendState?.contactForm?.inited){this.props.updateFrontendState({contactForm:{transition:!0,inited:!0}}),setTimeout(()=>{this.props.updateFrontendState({contactForm:{transition:!1,inited:!1}})},300);return}if(i.frontendState.quickView.inited||i.frontendState.cartOpen||i.frontendState?.contactForm?.inited||i.frontendState.alertModal)return;if(!this.props.inAdminFrame){let r=ji.getAllOverlays();r.length>0?ji.closeOverlay(r[r.length-1].pid):this.props.history.location.pathname!=="/"&&this.props.history.push("/")}}}};componentDidMount(){ne||(window.addEventListener("click",this.handleGlobalClick),window.addEventListener("keydown",this.handleGlobalKeyDown))}componentWillUnmount(){ne||(window.removeEventListener("click",this.handleGlobalClick),window.removeEventListener("keydown",this.handleGlobalKeyDown))}render(){return this.props.children}loadRandomPage=()=>{let e=this.props.store.getState(),i=[];if(ts.default.each(e.sets.byId,o=>{if(o.stack&&o.id!=="root")o.page_count>0&&e.frontendState.activePID!==o.id&&i.push([o.id]);else{let s=Array.apply(null,{length:o.page_count}).map(Number.call,c=>[o.id,c]),u=Je.getSetContentsByIndex(e,o.id);i=i.concat(s.filter(([c,d])=>{let p=u[d];return!(p&&(p.id===e.frontendState.activePID||p.id===e.site.homepage_id||p.id===e.site.mobile_homepage_id||p.page_type==="set"||p.pin===!0))}))}}),i.length===0)return;let r=i[Math.floor(Math.random()*i.length)],n=e.sets.byId[r[0]];r.length===2?this.props.fetchContent(n.id,{indexes:[r[1]],idType:"pid"}).then(o=>{o.data&&o.data[0]?this.props.history.push("/"+o.data[0].purl):this.loadRandomPage()}):r.length===1&&this.props.history.push("/"+n.purl)};doScroll=(e,i,r,n)=>{let s=i-r,u=s/(12*12);s!==0&&(n+=(n+u)/s);let c=Math.abs(r-i)<1,d=c?r+s:r+s*(-Math.pow(2,-20*n/1)+1);n>0&&e.scrollTo(0,d),c||requestAnimationFrame(()=>{this.doScroll(e,i,d,n)})};scrollToTop=e=>{let i=e.scrollTop,r=Math.round(i*.2);i>e.clientHeight?this.doScroll(e,0,r,0):this.doScroll(e,0,i,0)};loadNextPage=()=>{let e=this.props.store.getState(),i=e.pages.byId[this.props.activePID]||e.sets.byId[this.props.activePID];if(!i||i.page_type==="set"&&!i.stack)return;let r=e.structure.indexById[i.id];if(r===null){e.adminState?.crdt.initializedAdminList?this.loadNearestContentNeighbor(i,"next"):this.props.fetchContent(i.id,{next:!0}).then(c=>{c?.data&&c.data[0]&&this.props.history.push("/"+c.data[0].purl)});return}let n=e.sets.byId[ts.default.findKey(e.structure.byParent,c=>c.includes(i.id))];if(!n||n.page_count===void 0||n.page_count<=1)return;let o=ts.default.without(e.structure.byParent[n.id]?.map(c=>e.pages.byId[c]||e.sets.byId[c]).map(function(c){if(c&&(c.page_type==="set"&&(c.stack===!1||c.page_count===0)||c.id===e.site.homepage_id||c.id===e.site.mobile_homepage_id))return e.structure.indexById[c.id]}),void 0);if(o.length===n.page_count)return;for(let c=0;c<n.page_count&&(r++,r>=n.page_count&&(r=0),!!o.includes(r));c++);let u=(e.structure.byParent[n.id]?.reduce((c,d)=>(e.structure.indexById[d]!==null&&(c[e.structure.indexById[d]]=d),c),{}))[r];u?this.props.history.push("/"+(e.pages.byId[u]||e.sets.byId[u])?.purl):this.props.fetchContent(n.id,{indexes:[r],idType:"pid"}).then(c=>{this.loadNextPage()})};loadPrevPage=()=>{let e=this.props.store.getState(),i=e.pages.byId[this.props.activePID]||e.sets.byId[this.props.activePID];if(!i||i.page_type==="set"&&!i.stack)return;let r=e.structure.indexById[i.id];if(r===null){e.adminState?.crdt.initializedAdminList?this.loadNearestContentNeighbor(i,"prev"):this.props.fetchContent(i.id,{prev:!0}).then(c=>{c.data&&c.data[0]&&this.props.history.push("/"+c.data[0].purl)});return}let n=e.sets.byId[ts.default.findKey(e.structure.byParent,c=>c.includes(i.id))];if(!n||n.page_count===void 0||n.page_count<=1)return;let o=ts.default.without(e.structure.byParent[n.id]?.map(c=>e.pages.byId[c]||e.sets.byId[c]).map(function(c){if(c&&(c.page_type==="set"&&(c.stack===!1||c.page_count===0)||c.id===e.site.homepage_id||c.id===e.site.mobile_homepage_id))return e.structure.indexById[c.id]}),void 0);if(o.length===n.page_count)return;for(let c=0;c<=n.page_count&&(r--,r<0&&(r=n.page_count-1),!!o.includes(r));c++);let u=(e.structure.byParent[n.id]?.reduce((c,d)=>(c[e.structure.indexById[d]]=d,c),{}))[r];u?this.props.history.push("/"+(e.pages.byId[u]||e.sets.byId[u])?.purl):this.props.fetchContent(n.id,{indexes:[r],idType:"pid"}).then(c=>{this.loadPrevPage()})};loadNearestContentNeighbor=(e,i)=>{let r=this.props.store.getState();if(i!=="next"&&i!=="prev")throw'direction needs to be "next" or "prev"';let n=Object.keys(r.structure.bySort).sort((c,d)=>r.structure.bySort[c]-r.structure.bySort[d]);i==="prev"&&n.reverse();let o=n.indexOf(e.id);if(o===-1)throw"Unable to locate current id in sort list";let s;for(let c=1;c<n.length+1;c++){let d=n[(o+c)%n.length],p=r.structure.byParent.hasOwnProperty(d);if(p&&r.sets.byId[d]?.stack===!0){s=d;break}else if(!p&&r.structure.indexById[d]!==null&&d!==r.site.homepage_id&&d!==r.site.mobile_homepage_id){s=d;break}}let u=r.pages.byId[s]||r.sets.byId[s];u?this.props.history.push("/"+u.purl):this.props.fetchContent(s,{idType:"pid"}).then(c=>{c.data&&c.data[0]&&this.props.history.push("/"+c.data[0].purl)})}},Hw=_n(Bn(De((t,e)=>{let i;return t.auth.data?.id&&(i=ts.default.find(t.site?.editors,r=>r.id===parseInt(t.auth.data.id))?.role),{editorRole:i,adminMode:t.frontendState.adminMode,inAdminFrame:t.frontendState.inAdminFrame,activePID:t.frontendState.activePID,isInHomepagePreview:t.auth.previewing,activePURL:(t.pages.byId[t.frontendState.activePID]||t.sets.byId[t.frontendState.activePID])?.purl}},t=>Pt({updateFrontendState:He.updateFrontendState,fetchContent:He.fetchContent,addCommerceProductToCart:He.addCommerceProductToCart},t))(zw)))});var SR=T(()=>{});var Cg=T(()=>{Se();SR();W()});var _R=T(()=>{});var ER,Sg,Uw=T(()=>{Se();ER=ce(ve());Cg();nu();_R();W();Sg=class extends ae{constructor(e){super(e),this.ref=_e.createRef(),this.maxValue=100,this.speed=9,this.currValue=null,this.rafID=null,this.state={value:0,complete:!1,successLoading:!1}}componentDidMount=()=>{this.ref.current.addEventListener("mousestart",this.unlockStartHandler,!1)};unlockStartHandler=()=>{window.cancelAnimationFrame(this.rafID),this.currValue=this.state.value};unlockEndHandler=()=>{this.currValue=+this.state.value,this.currValue>=this.maxValue?this.successHandler():(this.rafID=window.requestAnimationFrame(this.animateHandler),this.setState({complete:!1}))};animateHandler=()=>{this.setState({value:this.currValue}),this.currValue>-1&&window.requestAnimationFrame(this.animateHandler),this.currValue=this.currValue-this.speed,setTimeout(ER.default.bind(function(){this.setState({value:0})},this),150)};successHandler=()=>{this.setState({successLoading:!0,complete:!1}),setTimeout(()=>{this.props.onConfirm()},800)};onRangeChange(e){e.persist(),this.setState({value:e.currentTarget.value}),this.setState({complete:e.currentTarget.value>=100})}componentWillUnmount=()=>{this.ref?.current?.removeEventListener("mousestart",this.unlockStartHandler,!1)};render(){return m("div",{className:`slide-confirm-slider${this.state.successLoading?" success-loading":""}`,ref:this.ref,onMouseDown:e=>{this.unlockStartHandler(e)},onMouseUp:e=>{this.unlockEndHandler(e)},onTouchEnd:e=>{this.unlockEndHandler(e)},children:[m("span",{className:"slide-message",children:this.props.slideMessage}),m("div",{className:"slide-progress",style:{left:"calc("+this.state.value+"% - calc("+this.state.value/100+" * 40px))"}}),m("input",{type:"range",min:"0",value:this.state.value,className:`pullee${this.state.complete?" complete":""}`,onChange:e=>{this.onRangeChange(e)}}),this.state.successLoading?m(sn,{className:"accent"}):null]})}}});var PR=T(()=>{});var dle,_g,IR=T(()=>{Se();Se();dle=ce(ve());PR();W();_g=_e.createContext({innerText:null,shortcutText:null,icon:null,onOpen:()=>null,onClose:()=>null})});var cp=T(()=>{IR()});var TR=T(()=>{});var X_e,J_e,Q_e,AR=T(()=>{X_e=Object.freeze({New:0,Published:1,Draft:2,Deleted:3}),J_e=Object.freeze({Error:-1,Publishing:0,Published:1,Draft:2,Discarding:3,Discarded:4,SavingAs:5}),Q_e=Object.freeze({Undoable:0,Publishable:1,NotUndoable:2,NotPublishable:3,NotUndoableNotPublishable:4})});var Eg=T(()=>{Se();Se();cp();TR();AR();W()});var MR=T(()=>{Se();Eg();W()});var kR=T(()=>{});var RR=T(()=>{Se();kR();W()});var NR=T(()=>{});var OR=T(()=>{});var DR=T(()=>{Se();W()});var LR=T(()=>{OR();DR()});var FR=T(()=>{Se();Se();cp();NR();LR();W()});var zR=T(()=>{});var HR=T(()=>{Se();zR();W()});var UR=T(()=>{});var ple,nPe,qR=T(()=>{Se();Se();ple=ce(ve());Cg();UR();W();nPe=_e.createContext({messageText:null,duration:null,onOpen:()=>null,onClose:()=>null})});var BR=T(()=>{Se();W()});var WR=T(()=>{});var VR,$R=T(()=>{Se();VR=ce(ve());WR();W()});var jR=T(()=>{});var GR=T(()=>{Se();jR();W()});var KR=T(()=>{});var YR=T(()=>{Se();KR();Eg();W()});var ZR=T(()=>{Se();W()});var XR,JR=T(()=>{Se();W();XR=({label:t,value:e,onCheckboxChange:i,name:r,id:n,onCheckboxBlur:o,onPointerUp:s,icon:u,classList:c,immediatePointerUp:d,...p})=>{let g=e===!0||e==="on",[v,b]=It(!1),[S,_]=It(!1),[E,I]=It(!1),[F,O]=It(!1),L=At(null);return Ke(()=>(L.current=setTimeout(()=>{O(!0)},150),()=>{clearTimeout(L.current)}),[]),m("label",{type:"checkbox",htmlFor:n,"checked-on":`${g?"true":""}`,className:`${v?"hover":""}${S?" flicker-on":""}${E?" flicker-off":""}${c?" "+c:""}`,onPointerEnter:()=>b(!0),onPointerLeave:()=>b(!1),onPointerUp:z=>{if(!F){z.stopPropagation();return}d&&d(z),I(!0),setTimeout(()=>{_(!0),I(!1),setTimeout(()=>{s(z),setTimeout(()=>{_(!1),I(!1)},90)},90)},90)},...p,children:[m("span",{className:"before"}),m("div",{className:"checkbox-label",children:t}),m("input",{type:"checkbox",name:n,id:n,checked:g,onBlur:o,readOnly:!0}),m("span",{className:`after${u?" icon":""}`,children:u})]})}});var hle,QR,eN=T(()=>{Se();Re();hle=ce(ve());W();QR=_e.createContext({children:null,innerUI:null,event:null,type:null,offset:null,updateInnerUI:()=>null,onOpen:()=>null,onConfirm:()=>null,onClose:t=>null})});var tN=T(()=>{Se();Re();W()});var iN=T(()=>{ZR();JR();eN();tN()});var rN=T(()=>{});var Wu,Bw,nN=T(()=>{Se();iN();Se();Wu=ce(ve());nu();rN();W();Bw=class extends ae{constructor(e){super(e),this.state={menuOpen:!1},this.contextSelectRef=_e.createRef()}render(){return m(X,{children:m("select",{onMouseDown:this.triggerMenu,ref:this.contextSelectRef,multiple:this.props.multiple?"":null,children:this.props.children})})}innerUI=e=>m(X,{children:e.map(i=>i.type==="option"?m(XR,{disabled:i.props.disabled,value:this.props.multiple?this.props.form.values[i.props.value]:i.props.value===this.props.field.value,label:i.props.children,onPointerUp:r=>{this.props.multiple?this.props.form.setFieldValue(i.props.value,!this.props.form.values[i.props.value]):this.props.form.setFieldValue(this.props.field.name,i.props.value)}},i.props.value+"key"):Array.isArray(i)?this.innerUI(i):i)});triggerMenu=e=>{e.preventDefault();let i=this.contextSelectRef.current.getBoundingClientRect(),n=Wu.default.flattenDeep(Array.from(this.props.children)).findIndex(o=>o.props.value==this.props.field.value);this.context.openMenu?.({innerUI:this.innerUI(this.props.children),style:{minWidth:i.width+"px"},offset:{x:i.x+-10,y:i.y},event:e,type:"select",alignToScrollIndex:!(this.props.multiple&&n>-1),scrollIndex:n,onOpen:()=>{this.setState({menuOpen:!0})},onClose:()=>{this.setState({menuOpen:!1})}})};componentDidUpdate(e){let{form:i,children:r,...n}=e,{form:o,children:s,...u}=this.props;if(this.state.menuOpen&&!this.ticking){let c=Wu.default.flattenDeep(Array.from(this.props.children)),d=Wu.default.flattenDeep(Array.from(e.children));(!Wu.default.isEqual(this.props.form.values,e.form.values)||!Wu.default.isEqual(c,d))&&(this.ticking=!0,this.context.updateInnerUI(this.innerUI(this.props.children)),requestAnimationFrame(()=>{this.ticking=!1}))}}};Bw.contextType=QR});var oN=T(()=>{});var fle,aN=T(()=>{Se();fle=ce(ve());cp();oN();W()});var sN=T(()=>{});var lN=T(()=>{Se();sN();W()});var uN=T(()=>{});var FIe,mle,gle,cN=T(()=>{Se();FIe=ce(ve());W();mle=rr((t,e)=>{let{field:i,form:r,onEnter:n,onBlur:o,onFocus:s,onKeyDown:u,setHint:c,setSuggestion:d,maxLength:p,focusOnInit:g,formatFields:v,setIsFocused:b,placeholder:S,deriveSuggestion:_,suggestion:E}=t,I=At();Ke(()=>{function H(N){N.detail.name===i.name&&(r.setFieldValue(i.name,N.detail.message,!1),L(),d(""),c(""))}return document.addEventListener("set-autofill-from-parent",H),()=>{document.removeEventListener("set-autofill-from-parent",H)}},[]),Ke(()=>{I.current.textContent=i.value,g&&L()},[]),Ke(()=>{I.current.textContent!==i.value&&(i.value===""||!i.value?I.current.innerHTML="":I.current.textContent=i.value)},[i.value]),Ke(()=>{let H=I.current,N=new MutationObserver(function(oe){for(var te of oe)te.type==="childList"&&te.addedNodes.length>0&&te.addedNodes.forEach(function(K){K.nodeType!==Node.TEXT_NODE&&K.remove()})}),J={childList:!0,subtree:!0};return N.observe(H,J),()=>{N.disconnect()}},[]);let F=H=>{if(H&&H.which!==13&&(O(H.which)||H.which===91||H.which===93)){let N=H.target.textContent;N.replace(/\s+/g,""),r&&N!==i.value&&r.setFieldValue(i.name,N,!1),typeof value<"u"&&value!==null&&N.trim()===""&&N.length===0&&(I.current.innerHTML="")}H&&(H.which==13||H.key==="Enter")&&E&&E.length>0&&(H.preventDefault(),r.setFieldValue(i.name,E,!1),_(null),L()),H.type==="keyup"&&(H.which==13||H.key==="Enter")&&(!E||E?.length===0)&&(H.preventDefault(),n&&n(H))},O=H=>H>7&&H<14||H>45&&H<58||H==32||H>64&&H<91||H>95&&H<112||H>185&&H<193||H>218&&H<223,L=()=>{window.requestAnimationFrame(()=>{let H=i?.value.length||0;I?.current&&H!==void 0&&(I?.current.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd(),I.current.parentElement.scrollLeft=I.current.parentElement.scrollWidth)})},z=H=>{v();let N=I?.current?.textContent.length||0;if(u&&u(H),p&&N+1>=p){if(H.which==8)return;H.preventDefault(),H.nativeEvent.stopImmediatePropagation();return}return H&&(H.which==9||H.key==="Tab")&&E&&E.length>0&&(H.preventDefault(),r.setFieldValue(i.name,E,!1),_(null),L()),H.which==13&&H.preventDefault(),H.which!=13},G=H=>{let N=H.nativeEvent.clipboardData.getData("text/plain");H.stopPropagation(),H.preventDefault(),N=N.replace(/\s+/g," ").trim(),I.current.textContent=N,_(I.current.textContent),L()};return m("span",{ref:I,contentEditable:!0,suppressContentEditableWarning:!0,className:"editable-value admin-content-editable-input",tabIndex:"0",maxLength:p,placeholder:S,onFocus:H=>{b(!0),s&&s(H),F(H)},onBlur:H=>{b(!1),o&&o(H)},onKeyDown:H=>{z(H)},onPaste:H=>{G(H)},onKeyUp:H=>{F(H)},onChange:H=>{F(H)},onInput:H=>{_(I.current.textContent)}})},(t,e)=>t.field.value===e.field.value&&t.form===e.form),gle=_e.memo(mle)});var vle,dN=T(()=>{Se();Re();vle=ce(ve());uN();cN();W()});var pN=T(()=>{});var hN=T(()=>{Se();cp();pN();al();W()});var fN=T(()=>{Se();W()});var Ww=T(()=>{});var mN=T(()=>{Se();al();Ww();W()});var gN=T(()=>{Se();al();Ww();W()});var ble,ITe,vN=T(()=>{Se();W();ble=({initialValue:t,style:e,tag:i="div"})=>{let[r,n]=It(t),o=At(null),s=u=>{n(u.target.innerText)};return Ke(()=>{o.current&&o.current.innerText!==t&&(o.current.innerText=t)},[t]),m(i,{ref:o,contentEditable:"true",spellCheck:!1,onInput:s,style:e,suppressContentEditableWarning:!0})},ITe=_e.memo(ble,(t,e)=>t.initialValue===e.initialValue&&t.style===e.style)});var bN=T(()=>{});var yN=T(()=>{Se();Re()});var wN=T(()=>{Se();W()});var Vw,yle,xN,$w,Vu,jw=T(()=>{Um();Vw=ce(ve()),yle=0,xN=Ge.isMac(),$w=class t{constructor(){if(!Ge.isServer)return t.instance||(this.shortcuts={},this.scopeOrder=[],this.onKeyDown=this.onKeyDown.bind(this),typeof window<"u"&&window.addEventListener("keydown",this.onKeyDown),t.instance=this),t.instance}setScopeOrder(e){this.scopeOrder&&Vw.default.isEmpty(this.scopeOrder)&&Vw.default.each(e,i=>{this.scopeOrder.push(i)})}getConfigKey(e){let{keyCode:i,metaKey:r="false",shiftKey:n="false",altKey:o="false",macCtrlKey:s="false"}=e;return`${i}-${r}-${n}-${o}-${s}`}getEventConfig(e){return{keyCode:e.keyCode,metaKey:xN?e.metaKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,macCtrlKey:xN?e.ctrlKey:!1}}registerHotKey(e,i,r,n="default"){let o=yle++,s=this.getConfigKey(i);return this.shortcuts[n]||(this.shortcuts[n]={}),this.shortcuts[n][s]||(this.shortcuts[n][s]=[]),this.shortcuts[n][s].push({id:o,callback:r}),()=>{let u=this.shortcuts[n][s];if(u){let c=u.findIndex(d=>d.id===o);c!==-1&&(u.splice(c,1),u.length===0&&(delete this.shortcuts[n][s],Object.keys(this.shortcuts[n]).length===0&&delete this.shortcuts[n]))}}}onKeyDown(e){if(e.repeat)return;let i=this.getEventConfig(e),r=this.getConfigKey(i);for(let n=0;n<this.scopeOrder.length;n++){let o=this.scopeOrder[n],s=this.shortcuts[o];if(s&&s[r]){let u=s[r];if(u&&u.length>0){let c=u[u.length-1];if(c&&c.callback){e.preventDefault(),c.callback(e);return}}}}if(!this.scopeOrder.includes("default")&&this.shortcuts.default&&this.shortcuts.default[r]){let n=this.shortcuts.default[r];if(n&&n.length>0){let o=n[n.length-1];o&&o.callback&&(e.preventDefault(),o.callback(e))}}}},Vu=new $w;Object.freeze(Vu)});var CN=T(()=>{Se();al()});var SN=T(()=>{Se();jw()});var _N=T(()=>{Se();al()});var al=T(()=>{Eg();MR();RR();FR();HR();Gw();qR();Uw();Cg();BR();$R();GR();nu();YR();nN();aN();lN();dN();hN();fN();mN();gN();vN();bN();yN();wN();jw();CN();SN();_N()});var EN=T(()=>{});var Kw,Pg,Ig,Gw=T(()=>{Se();Kw=ce(ve());Uw();nu();al();EN();W();Pg=_e.createContext({header:null,message:null,slideMessage:null,placeholder:null,existingValue:null,type:"alert",children:null,customElement:null,preventCancel:!1,preventClose:!1,cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,confirmButton:"Yes",denyButton:"No",maxInputLength:null,validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null}),Ig=class extends ae{constructor(e){super(e),this.modalDefaults={header:null,htmlHeader:null,message:null,slideMessage:null,htmlMessage:null,type:"alert",children:null,customElement:null,preventCancel:!1,preventClose:!1,confirmButton:"OK",denyButton:"Cancel",cancelButton:!1,overCart:!1,checkBoxConfirmation:null,checkBoxConfirmationValue:!1,frontendData:null,maxInputLength:null,closeManually:!1,validateInput:()=>!0,onOpen:()=>null,onConfirm:()=>null,onCancel:()=>null,onDeny:()=>null,onClose:()=>null},this.state={modalOpen:!1,animate:!1,processConfirm:!1,...this.modalDefaults},this.overlayRef=_e.createRef(),this.inputRef=_e.createRef(),this.transitioning=!1,this.ignoreUnmount=!1,this.internalHotKeySet=!1,this.alterEventExecution=!0,this.clickStartedInModal=!1,this.unregisterEscapeHotKey=null,this.unregisterEnterHotKey=null}openModal=e=>{if(this.transitioning||this.state.modalOpen||this.state.animate)return;document.activeElement?.blur(),this.transitioning=!0;let i=Kw.default.defaults(e,this.modalDefaults),r=new Event("openAlertModal");window.dispatchEvent(r),i.onOpen&&i.onOpen(),window.__c3_admin__===!0&&(window.store.getState().adminState.pauseGlobalEventExecution?this.alterEventExecution=!1:window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!0}})),i.manuallyBindHotkeys&&(this.internalHotKeySet=!0,window.addEventListener("keydown",this.onKeyDown,!0)),!this.state.HotKeyProxy&&!i.manuallyBindHotkeys&&!this.unregisterEscHotKey&&(this.unregisterEscHotKey=Vu.registerHotKey("escape",{keyCode:27},this.cancelModal,"alert")),!this.state.HotKeyProxy&&!i.manuallyBindHotkeys&&!this.unregisterEnterHotKey&&(this.unregisterEnterHotKey=Vu.registerHotKey("enter",{keyCode:13},this.confirmModal,"alert")),window.addEventListener("keydown",this.onTabKeyDown),i.ignoreUnmount&&(this.ignoreUnmount=!0),this.originalStyle=window.getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1,...i},()=>{window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!0},()=>{setTimeout(()=>{this.transitioning=!1},280)})})})}),i.frontendData&&i.frontendData.contentWindow.getSelection().removeAllRanges(),window.focus()};dispatchCloseEvents=()=>{let e=new Event("closeAlertModal");window.dispatchEvent(e),window.__c3_admin__===!0&&this.alterEventExecution&&window.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{pauseGlobalEventExecution:!1}})};unbindInternalHotkeys=()=>{this.internalHotKeySet&&(this.internalHotKeySet=!1,window.removeEventListener("keydown",this.onKeyDown,!0)),this.unregisterEscHotKey&&(this.unregisterEscHotKey(),this.unregisterEscHotKey=null),this.unregisterEnterHotKey&&(this.unregisterEnterHotKey(),this.unregisterEnterHotKey=null),window.removeEventListener("keydown",this.onTabKeyDown)};closeModal=e=>{if(!this.state.modalOpen)return;let i=Kw.default.defaults(e,this.modalDefaults);this.transitioning=!0,this.dispatchCloseEvents(),this.unbindInternalHotkeys(),document.body.style.overflow=this.originalStyle,window.requestAnimationFrame(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!0,animate:!1},()=>{setTimeout(()=>{this.unmounted&&!this.ignoreUnmount||this.setState({modalOpen:!1,animate:!1},()=>{this.state.onClose&&(this.state.onClose(),this.setState({modalOpen:!1,animate:!1,processConfirm:!1,existingValue:null,...this.modalDefaults},()=>{this.transitioning=!1}))})},280)})})};validateInput=()=>{};confirmModal=e=>{if(this.state.closeManually){this.setState({processConfirm:!0}),this.state.onConfirm();return}if(this.state.type==="dialog"&&this.inputRef.current){if(this.state.onConfirm){let i=this.inputRef.current.value;this.setState({existingValue:i},()=>{this.state.onConfirm(i)})}}else{let i={};i.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onConfirm(i)}this.closeModal()};onKeyDown=e=>{e?.key==="Enter"&&this.state.type!=="slide-confirm"&&this.confirmModal(e),e?.key==="Escape"&&(e.preventDefault(),e.stopImmediatePropagation(),this.cancelModal(e))};denyModal=()=>{if(!this.state.processConfirm){if(this.state.onDeny){let e={};e.checkBoxConfirmationValue=this.state.checkBoxConfirmationValue??null,this.state.onDeny(e)}this.closeModal()}};cancelModal=e=>{this.state.preventCancel||this.state.preventClose||(this.state.onDeny&&e==="action"&&this.state.onDeny(),e?.type==="keydown"&&(e.preventDefault(),e.stopImmediatePropagation()),this.state.onCancel&&this.state.onCancel(),this.closeModal())};overlayClick=e=>{if(this.clickStartedInModal){this.clickStartedInModal=!1;return}e.target==this.overlayRef.current&&this.cancelModal()};onMouseDown=e=>{this.clickStartedInModal=!0};onTabKeyDown=e=>{let i=e.key==="Tab"||e.keyCode===9;this.state.modalOpen&&i&&e.preventDefault()};componentDidMount(){}componentWillUnmount(){this.unmounted=!0}render(){let e=this.state.confirmButton||"OK",i=this.state.denyButton||"Cancel",r=this.state.header&&m("div",{className:"header",children:this.state.header}),n=this.state.message&&m("div",{className:"sub-message",children:this.state.message}),o=this.state.htmlHeader&&m("div",{className:"header",dangerouslySetInnerHTML:{__html:this.state.htmlHeader}}),s=this.state.htmlMessage&&m("div",{className:"sub-message",dangerouslySetInnerHTML:{__html:this.state.htmlMessage}}),u=this.state.placeholder?this.state.placeholder:"",c=this.state.existingValue?this.state.existingValue:"",d=this.state.confirmButton!==!1&&m("button",{"button-style":"rounded-2",className:"confirm",onClick:I=>this.confirmModal(I,null),children:[e,this.state.processConfirm?m(sn,{className:"default-border-radius"}):""]}),p=!this.state.preventCancel&&m("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:i}),g=this.state.children&&!this.state.wrapperlessChildren?m("div",{className:"form",children:this.state.children}):this.state.wrapperlessChildren?this.state.children:null,v=()=>m(X,{children:[m("div",{className:"message",children:[r,n]}),m("div",{className:"opt-buttons",children:[p,d]})]}),b=()=>m(X,{children:[m("div",{className:"message",children:[r,n,o,s]}),m("div",{className:"input"}),m("div",{className:"buttons",children:d})]}),S=()=>m(X,{children:[m("div",{className:"message",children:[r,o,n,s]}),g,m("div",{className:"input"}),m("div",{className:"buttons",children:[p,d]})]}),_=()=>m(X,{children:[m("div",{className:"message",children:[r,n]}),m("div",{className:"input",children:this.state.maxInputLength?m("input",{type:"text",maxLength:this.state.maxInputLength,placeholder:u,autoFocus:!0,defaultValue:c,ref:this.inputRef}):m("input",{type:"text",placeholder:u,autoFocus:!0,defaultValue:c,ref:this.inputRef})}),m("div",{className:"buttons",children:[m("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:"Cancel"}),m("button",{"button-style":"rounded-2",className:"confirm",onClick:I=>this.confirmModal(I,null),children:"OK"})]})]}),E=()=>m(X,{children:[m("div",{className:"message",children:[r,n]}),this.state.checkBoxConfirmation?m("div",{className:"footer",children:m("label",{onClick:I=>{I.preventDefault(),this.setState({checkBoxConfirmationValue:!this.state.checkBoxConfirmationValue})},className:"checkbox",htmlFor:"alert_checkbox_confirmation",children:[this.state.checkBoxConfirmation,m("input",{readOnly:!0,name:"alert_checkbox_confirmation",id:"alert_checkbox_confirmation",type:"checkbox",checked:this.state.checkBoxConfirmationValue?"checked":""})]})}):null,m("div",{className:"buttons",children:[this.state.cancelButton?m("button",{"button-style":"rounded-2",className:"deny",onClick:this.cancelModal,children:"Cancel"}):null,m("button",{"button-style":"rounded-2",className:"deny",onClick:this.denyModal,children:this.state.denyButton}),m("button",{"button-style":"rounded-2",className:"confirm",onClick:I=>this.confirmModal(I,null),children:this.state.confirmButton})]})]});return m(Pg.Provider,{value:{openModal:this.openModal,closeModal:this.closeModal},children:[this.state.modalOpen?m(X,{children:[this.state.HotKeyProxy?m(X,{children:[this.state.type!=="slide-confirm"&&this.state.HotKeyProxy("enter","all",this.confirmModal),this.state.HotKeyProxy("escape","all",this.cancelModal)]}):null,m("div",{className:`alert-window${this.state.animate?" active":""}${this.state.preventCancel||this.state.preventClose?" no-exit":""}${this.state.overCart?" over-cart":""}`,onClick:this.overlayClick,ref:this.overlayRef,children:this.state.customElement?this.state.customElement:m("div",{onMouseDown:this.onMouseDown,className:`alert-modal${" "+this.state.type}${this.state.className?" "+this.state.className:""}`,children:[this.state.type==="alert"&&m(v,{}),this.state.type==="notice"&&m(b,{}),this.state.type==="confirm"&&m(S,{}),this.state.type==="dialog"&&m(_,{}),this.state.type==="publish"&&m(E,{}),this.state.type==="custom"&&m(X,{children:[m("div",{className:"message",children:[r,n]}),g]}),this.state.type==="slide-confirm"&&m(X,{children:[m("div",{className:"message",children:[r,n,o,s,g]}),m("div",{className:"buttons",children:[m("br",{}),m("br",{}),m("button",{className:"deny",onClick:this.denyModal,children:"Cancel"}),m(Sg,{onConfirm:I=>this.confirmModal(I,null),slideMessage:this.state.slideMessage??"Slide to delete"})]})]})]})})]}):null,this.props.children]})}}});function xle(t,e){return{alertModal:t.frontendState.alertModal,adminMode:t.frontendState.adminMode}}function Cle(t){return Pt({updateFrontendState:He.updateFrontendState},t)}var $Ae,wle,Sle,PN,IN=T(()=>{Pe();ht();di();jt();$Ae=ce(ve(),1);Gw();W();wle=({alertModal:t,adminMode:e,...i})=>m(Ig,{children:m(Pg.Consumer,{children:r=>{t&&!e&&r.openModal({...t,manuallyBindHotkeys:!0,onConfirm:n=>{i.onConfirm&&i.onConfirm(),i.updateFrontendState({alertModal:!1})},onClose:n=>{i.onClose&&i.onclose(),i.updateFrontendState({alertModal:!1})},onCancel:n=>{i.onCancel&&i.onCancel(),i.updateFrontendState({alertModal:!1})}})}})});Sle=De(xle,Cle)(wle),PN=Sle});var Tg,Yw=T(()=>{Tg=(t,e=window)=>new Promise((i,r)=>{var n=e.document.getElementsByTagName("head")[0],o=e.document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t,o.media="all",o.onload=i,o.onError=r,n.appendChild(o)})});var TN,AN,MN=T(()=>{Yw();TN="https://api.cargo.site/v1/fonts/css?family=",AN=(t,e)=>new Promise((i,r)=>{if(!e||e.length===0)return i();let n=e.join("%7C").replace(/[\. -]+/g,"");if(n+="&c=3",t.context==="server"){fetch(TN+n).then(async s=>{let u=await s.text();i(u)}).catch(r);return}let o=e.map(s=>{let u=t.context.document.createElement("span");return u.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,u.textContent="BESbswy",u});o.forEach(s=>t.context.document.body.appendChild(s)),Tg(TN+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(u=>u.remove()),i()})}).catch(r)})});var _le,Ele,kN,RN=T(()=>{Yw();_le="https://fonts.googleapis.com/css?family=",Ele=["100","100italic","200","200italic","300","300italic","400","400italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"],kN=(t,e)=>new Promise((i,r)=>{if(!e||e.length===0)return i();if(t.context==="server")return r("Google fonts should only be loaded by the client");let n=e.map(s=>s.indexOf(":")===-1?s+":"+Ele.join(","):s).join("%7C").replace(/ /g,"+"),o=e.map(s=>{let u=t.context.document.createElement("span");return u.style=`display:block;position:absolute;top:-9999px;left:-9999px;
			font-size:300px;width:auto;height:auto;line-height:normal;margin:0;
			padding:0;font-variant:normal;white-space:nowrap;font-family:${s};`,u.textContent="BESbswy",u});o.forEach(s=>t.context.document.body.appendChild(s)),Tg(_le+n,t.context).then(s=>{t.context.document.fonts.ready.then(()=>{o.forEach(u=>u.remove()),i()})}).catch(r)})});var Zw,NN=T(()=>{MN();RN();Zw=t=>{if(!t)throw"No config given";t.context=t.context||window,t.active=t.active||function(){};let e=[];return e.push(kN(t,t.families?.reduce?.((i,r)=>(r.provider==="google"&&i.push(r.family),i),[]))),e.push(AN(t,t.families?.reduce?.((i,r)=>(r.provider==="cargo"&&i.push(r.family),i),[]))),Promise.all(e).catch(i=>{console.log("something went wrong while loading the site's fonts...",i)}).finally(i=>{t.active?.(i)})}});var ON,Xw,Jw,dp,Qw=T(()=>{Pe();Se();ht();ON=ce(ve(),1);Re();_i();Ar();W();Xw=new Set,Jw=class extends ae{constructor(e){super(e),this.state={src:null,lastSrc:null,loaded:!1},this.uid=ON.default.uniqueId(),this.decodingQueue=[]}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e,i){let{model:r,adminMode:n,isZoomable:o,alt:s,hash:u,src:c,decoding:d}=e,p=e.width??r?.width??1600,g=e.height??r?.height??1600,v=this.state.src||this.blankURI;return Xw.has(this.state.src)||(v=this.state.lastSrc||this.blankURI),v=this.props.isLazyLoadable?v:this.blankURI,Tt("img",{onClick:this.props.onClick,crossorigin:"",alt:s||null,src:v,width:p,height:g,className:`media${o?" image-zoom":""} `+(this.props.className||""),ref:this.props.mediaRef,onLoad:this.onLoad,decoding:"sync",part:this.props.part||void 0})}onLoad=e=>{this.props.mediaRef.current&&(this.props.mediaRef.current.src===this.blankURI||this.props.mediaRef.current.src===""||(this.setState({loaded:!0}),this.props.onLoad&&(this.props.model?this.props.onLoad({width:this.props.model.width,height:this.props.model.width}):this.props.onLoad({width:this.props.mediaRef.current.naturalWidth,height:this.props.mediaRef.current.naturalHeight}))))};componentDidUpdate(e,i){let r=this.props["dynamic-src"]||this.props.src||void 0,n=e["dynamic-src"]||e.src||void 0;(this.props.renderWidth!==e.renderWidth||this.props.renderHeight!==e.renderHeight||e.isLazyLoadable!==this.props.isLazyLoadable||r!==n||this.props.model&&this.props.model?.hash!==e.model?.hash)&&this.onSizeChange()}componentDidMount(){this.firstLoad=!0,this.onSizeChange()}decodeImage=(e,i)=>{if(this.decodingQueue.indexOf(e)>-1)return;this.decodingQueue.push(e);let r=document.createElement("img"),n=()=>{r.onload=null,Xw.has(r.src)?this.forceUpdate():(Xw.add(r.src),this.state.src==r.src&&this.forceUpdate())};this.firstLoad?(r.decoding="async",r.onload=n,r.onerror=this.props.onError,r.src=e):(r.decoding="async",r.src=e,r.onerror=this.props.onError,r.decode().then(o=>{n()}).catch(o=>{n()}))};onSizeChange=()=>{let e=this.props["dynamic-src"]||this.props.src||void 0,i=this.props.renderWidth,r=this.props.renderHeight,n=i<500?50:250,o=Math.ceil(i/n)*n,s=r<500?50:250,u=Math.ceil(r/s)*s;this.props.model&&o!==0&&u!==0&&(e=su({w:o,h:u},this.props.model).url),this.props.isLazyLoadable&&e&&this.decodeImage(e),this.setState(c=>e==c.src||!e?null:(this.firstLoad=!1,{lastSrc:c.src,src:e}))}},dp=rr((t,e)=>{let i=t.model?.is_video&&t.model?.poster?t.model.poster:t.model;return i&&i.loading&&(i=null),m(Jw,{...t,model:i,mediaRef:e})})});var DN,sl,pp,Ple,ll,hp,Ile,e2,LN,FN=T(()=>{Pe();Se();DN=ce(ve(),1);W();sl=new Set,pp="unloaded",Ple=function(){if(window?.YT&&(pp="loaded"),pp==="unloaded"){let i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{pp="loaded",sl.forEach(r=>{r.initYoutubePlayer()}),sl.clear(),typeof i=="function"&&i()},pp="loading";var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}pp==="loaded"&&(sl.forEach(i=>{i.initYoutubePlayer()}),sl.clear())},ll=new Set,hp="unloaded",Ile=function(){if(window?.Vimeo&&(hp="loaded"),hp==="unloaded"){hp="loading";var t=document.createElement("script");t.onload=()=>{hp="loaded",ll.forEach(i=>{i.initVimeoPlayer()}),ll.clear()},t.src="https://player.vimeo.com/api/player.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}hp==="loaded"&&(ll.forEach(i=>{i.initVimeoPlayer()}),ll.clear())},e2=class extends ae{constructor(e){super(e),this.state={apiPlayer:null,nativeSize:{width:1,height:1},wasInLazyLoadRange:e.isLazyLoadable},this.uid=DN.default.uniqueId(),this.html="",this.divRef=me()}render(e){let{src:i,width:r,height:n,model:o}=e;return m(X,{children:[e.adminMode?m("div",{style:{position:"absolute",zIndex:9999,pointerEvents:"auto",background:"transparent",inset:0}}):null,m("div",{onPointerEnter:this.props.onPointerEnter,onPointerOut:this.props.onPointerOut,dangerouslySetInnerHTML:{__html:this.html},style:{position:"absolute",inset:0},ref:this.divRef})]})}setIframeStyles=()=>{if(!this.divRef.current)return;let e=this.divRef.current.querySelector("iframe");if(e||this.props.fileType.startsWith("youtube:")||this.props.fileType.startsWith("vimeo:")&&this.state.apiPlayer&&(e=this.state.apiPlayer.element),!e)return;let i="margin: auto; position: absolute;";i+="width: 100%; height: 100%; inset: 0;",e.setAttribute("part","iframe iframe"+this.props.statusPartAppendix),e.setAttribute("style",i)};loadAPIPlayer=()=>{ll.delete(this),sl.delete(this),this.props.fileType.startsWith("youtube:")?(sl.add(this),Ple()):this.props.fileType.startsWith("vimeo:")&&(ll.add(this),Ile())};initVimeoPlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=this.props.fileType.replace("vimeo:","").split("/"),i=new window.Vimeo.Player(this.divRef.current,{id:e.length>1&&this.props.src?this.props.src:e[0],h:e[1]||void 0,width:this.props.width||640,height:this.props.height||480,loop:this.props.loop,autopause:!1,autoplay:!1,volume:this.props.autoplay||this.props.muted?0:1,background:!this.props["browser-default"],pip:!1,speed:!0,portrait:!1,muted:this.props.autoplay||this.props.muted});this.setState({apiPlayer:i},()=>{Promise.all([i.getVideoWidth(),i.getVideoHeight()]).then(r=>{i.on("loaded",()=>{i.element?.setAttribute("id","vimeo-player-"+this.uid),i.element?.setAttribute("frameborder","0"),this.setIframeStyles()}),i.on("play",()=>{this.props.onPlay?.()}),i.on("pause",()=>{this.props.onPause?.()}),i.on("ended",()=>{this.props.onEnded?.()}),i.pause().then(i.setCurrentTime(0));var n=r[0],o=r[1];this.setState({nativeSize:{width:n,height:o}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((s,u)=>{this.props.muted||this.props.autoplay?this.state.apiPlayer.setVolume(0).then(()=>{this.state.apiPlayer.play().then(()=>{s(!0)}).catch(c=>{u(c)})}).catch(c=>{u(c)}):this.state.apiPlayer.play().then(c=>{s(!0)}).catch(c=>{u(c)})}),pause:()=>new Promise((s,u)=>{this.state.apiPlayer.pause().then(c=>{s(!0)})}),setCurrentTime:s=>new Promise((u,c)=>{this.state.apiPlayer.setCurrentTime(s).then(d=>{u(!0)})}),getCurrentTime:()=>new Promise((s,u)=>{this.state.apiPlayer.getCurrentTime().then(c=>{s(c)})}),setVolume:s=>new Promise((u,c)=>{this.state.apiPlayer.setVolume(s).then(d=>{u(!0)})}),getVolume:()=>new Promise((s,u)=>{this.state.apiPlayer.getVolume().then(c=>{s(c)})}),getDuration:()=>new Promise((s,u)=>{this.state.apiPlayer.getDuration().then(c=>{s(!0)})}),stop:()=>new Promise((s,u)=>{Promise.all([i.pause(),i.setCurrentTime(0)]).then(()=>{s(!0)})}),setPlaybackRate:s=>new Promise((u,c)=>{this.state.apiPlayer.setPlaybackRate(s).then(d=>{u(!0)})}),size:{width:n,height:o}})})})};initYoutubePlayer=()=>{for(;this.divRef.current?.childNodes?.[0];)this.divRef.current.childNodes[0].remove();let e=document.createElement("iframe"),i=this.props.fileType.replace("youtube:","");e.setAttribute("style","display:none;"),this.divRef.current.appendChild(e);let r=this.props.src.indexOf("?")>-1?this.props.src.split("?")[0]:this.props.src,n=this.props.fileType?.replace("youtube:","")||null,o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url="+r;n&&n.length>0&&(o="https://cargo.site/_api/v2/proxy/url?url=https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v="+n),fetch(o,{mode:"cors"}).then(s=>{s.json().then(u=>{let c=u.width*2||640,d=u.height*2||480;e.setAttribute("id","youtube-player"),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"),e.setAttribute("allowfullscreen",""),e.setAttribute("frameborder","0");let p={autoplay:0,width:c,height:d,modestbranding:1,loop:this.props.loop,host:"https://www.youtube.com",controls:this.props["browser-default"]?void 0:0,disablekb:this.props["browser-default"]?1:0,enablejsapi:1,origin:window.location.origin,rel:0},g=Object.entries(p).filter(([b,S])=>S!==void 0).map(([b,S])=>b+"="+S).join("&");e.setAttribute("src","https://www.youtube.com/embed/"+i+"?"+g),this.setState({nativeSize:{width:c,height:d}}),this.setIframeStyles();let v=new YT.Player(e,{videoId:i,playerVars:p,events:{onReady:()=>{this.setState({nativeSize:{width:c,height:d}}),this.props.onNewPlayer&&this.props.onNewPlayer({play:()=>new Promise((b,S)=>{this.state.apiPlayer.playVideo(),b(!0)}),pause:()=>new Promise((b,S)=>{this.state.apiPlayer.pauseVideo(),b(!0)}),stop:()=>new Promise((b,S)=>{this.state.apiPlayer.stopVideo(),esolve(!0)}),size:{width:c,height:d},setCurrentTime:b=>new Promise((S,_)=>{switch(this.state.apiPlayer.getPlayerState()){case 0:case 1:case 2:this.state.apiPlayer.seekTo(b,!1)}S(!0)}),getCurrentTime:()=>new Promise((b,S)=>{b(this.state.apiPlayer.getCurrentTime())}),setVolume:b=>new Promise((S,_)=>{b==0?this.state.apiPlayer.mute():this.state.apiPlayer.unMute(),this.state.apiPlayer.setVolume(b*100),S(!0)}),getVolume:b=>new Promise((S,_)=>{S(this.state.apiPlayer.getVolume()/100)}),getDuration:()=>new Promise((b,S)=>{b(this.state.apiPlayer.getDuration())}),setPlaybackRate:b=>new Promise((S,_)=>{this.state.apiPlayer.setPlaybackRate(b),S(!0)})})},onStateChange:b=>{switch(b.data){case YT.PlayerState.ENDED:this.props.onEnded?.();break;case YT.PlayerState.PAUSED:this.props.onPause?.();break;case YT.PlayerState.PLAYING:this.props.onPlay?.();break}}}});this.setState({apiPlayer:v})})})};componentDidUpdate(e,i){if((this.props.width!==e.width||this.props.height!==e.height||this.state.nativeSize!==i.nativeSize||this.props["image-fit"]!==e["image-fit"])&&this.setIframeStyles(),this.props.statusPartAppendix!==e.statusPartAppendix){let r=this.divRef.current?.querySelector("iframe");r&&r.setAttribute("part","iframe iframe"+this.props.statusPartAppendix)}e.isLazyLoadable!==this.props.isLazyLoadable&&this.props.isLazyLoadable&&this.setState({wasInLazyLoadRange:!0}),(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted||i.wasInLazyLoadRange!==this.state.wasInLazyLoadRange)&&(e.src&&this.props.onNewPlayer(null),clearTimeout(this.initPlayerTimeout),this.initPlayerTimeout=setTimeout(()=>{e.fileType.startsWith("youtube")&&this.state.apiPlayer&&(this.state.apiPlayer?.destroy(),this.loadAPIPlayer()),e.fileType.startsWith("vimeo")&&this.state.apiPlayer&&(this.state.apiPlayer.off("loaded"),this.state.apiPlayer.off("play"),this.state.apiPlayer.off("pause"),this.state.apiPlayer?.destroy().then(()=>{this.loadAPIPlayer()}))},0))}componentDidMount(){this.loadAPIPlayer()}componentWillUnmount(){clearTimeout(this.initPlayerTimeout),sl.delete(this),ll.delete(this)}},LN=rr((t,e)=>m(e2,{...t,mediaRef:e}))});var zN,t2,HN,UN=T(()=>{Pe();ht();Qw();FN();Ar();Re();Se();zN=ce(ve(),1);W();t2=class extends ae{constructor(e){super(e),this.nullPlayer={play:()=>new Promise((i,r)=>{r("null player play")}),pause:()=>new Promise((i,r)=>{r("null player pause")}),stop:()=>new Promise((i,r)=>{r("null player stop")}),getDuration:()=>new Promise((i,r)=>{r("null player getDuration")}),getCurrentTime:()=>new Promise((i,r)=>{r("null player getCurrentTime")}),setCurrentTime:()=>new Promise((i,r)=>{r("null player setCurrentTime")}),getVolume:()=>new Promise((i,r)=>{r("null player getVolume")}),setVolume:()=>new Promise((i,r)=>{r("null player setVolume")}),setPlaybackRate:()=>new Promise((i,r)=>{r("null player setPlaybackRate")}),size:{width:0,height:0}},this.state={playing:!1,paused:!0,stopped:!0,hasPlayedThrough:!1,interacted:!1,hasAttention:!1,videoLoaded:!1,posterLoaded:!1,activePlayer:this.nullPlayer},this.posterRef=me(),this.videoRef=me(),this.videoPlayerRef=me()}blankURI="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";render(e){let{model:i,posterModel:r,adminMode:n,isZoomable:o,alt:s,hash:u,src:c,fileType:d,decoding:p,"browser-default":g,"dynamic-src":v}=e,b=e.width??i?.width??1600,S=e.height??i?.height??1600,_=v||c||"",E=null;i&&(i.is_url?E=i.url:E="https://freight.cargo.site/i/"+i.hash+"/"+i.name);let I="";i?.loading||!E?I=_||"":I=E||"";let F=!this.props.muted&&!this.props.autoplay&&this.state.playing;d==="video"&&(I=F||this.props.isLazyLoadable?I:"");let O=null;r&&!r.loading?r.is_video&&r.poster?O=su({w:this.props.renderWidth},r.poster).url||"":O=su({w:this.props.renderWidth},r).url||"":i&&i.poster&&!i.poster.loading?O=su({w:this.props.renderWidth},i.poster).url||"":(this.props["dynamic-poster"]||this.props.poster)&&(O=this.props["dynamic-poster"]||this.props.poster||null,O=O.startsWith("https://")?O:""),O=this.props.isLazyLoadable?O:"";let L=this.state.playing?"-playing":this.state.stopped?"-stopped":this.state.paused?"-paused":"",z=!g;return m("div",{onPointerEnter:this.onPointerEnter,onPointerOut:this.onPointerOut,part:"media video-player"+(L?" video-player"+L:""),ref:this.props.mediaRef,className:`media${o?" image-zoom":""}`,children:m("div",{className:"video-player-crop",children:[z?m(dp,{ref:this.posterRef,src:O||this.blankURI,isZoomable:o,onLoad:this.onPosterLoad,isLazyLoadable:this.props.isLazyLoadable,renderWidth:this.props.renderWidth,renderHeight:this.props.renderHeight,width:b,height:S,style:{transform:"rotate(1deg)"},part:"poster"+(L?" poster"+L:"")}):null,d==="video"?m("video",{ref:this.videoRef,playsinline:"true",autoplay:this.props.autoplay,loop:this.props.loop,muted:this.props.muted||this.props.autoplay,src:I,controls:g,onLoadedMetadata:this.onVideoLoad,preload:"metadata",part:"video"+(L?" video"+L:""),poster:g?O+"?cachebreak="+this.state.forceUpdate:null,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,width:b,height:S}):m(LN,{...this.props,statusPartAppendix:L,fileType:d,ref:this.videoRef,loop:this.props.loop,width:b,height:S,onPlay:this.onPlay,onPause:this.onPause,onEnded:this.onEnded,onNewPlayer:this.onNewPlayer,src:I})]})})}componentDidMount(){this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,Object.defineProperty(this.props.baseNode,"playing",{get:()=>this.state.playing,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,configurable:!0}),Object.defineProperty(this.props.baseNode,"stopped",{get:()=>this.state.stopped,configurable:!0}),this.autoplayInterval=setInterval(()=>{this.props.autoplay&&!this.state.playing&&this.props.visible&&!this.state.interacted&&(this.props.loop||!this.state.hasPlayedThrough)&&this.state.activePlayer.setVolume(0).then(()=>{this.state.activePlayer.getVolume().then(e=>{this.play()})}).catch(e=>{clearInterval(this.autoplayInterval)})},1200),this.configurePlayer(),this.props.visible&&this.enteredView()}configurePlayer=()=>{this.props.muted||this.props.autoplay?this.state.activePlayer.setVolume(0).then(()=>{this.props.visible&&this.enteredView()}).catch(e=>{}):this.state.activePlayer.setVolume(1).catch(e=>{}),this.props["playback-rate"]!=1&&this.state.activePlayer.setPlaybackRate(this.props["playback-rate"]).catch(e=>{})};componentDidUpdate(e,i){i.activePlayer!=this.state.activePlayer&&(this.configurePlayer(),this.setState({interacted:!1})),(this.props.visible!=e.visible||i.activePlayer!=this.state.activePlayer)&&(this.props.visible?this.enteredView():this.exitedView()),this.props.poster!==e.poster&&this.resetVideoPlayer(),this.props.isLazyLoadable!==e.isLazyLoadable&&(this.props.isLazyLoadable||(this.videoRef.current?.pause(),this.videoRef.current?.removeAttribute("src"),this.videoRef.current?.load())),this.props.muted!==e.muted&&this.state.activePlayer.setVolume(this.props.muted||this.props.autoplay?0:1),this.props.fileType==="video"&&(i.videoLoaded!==this.state.videoLoaded||i.posterLoaded!==this.state.posterLoaded)&&(this.props.poster&&this.state.posterLoaded&&this.state.videoLoaded?this.initializeVideoElementPlayer():this.state.videoLoaded&&this.initializeVideoElementPlayer()),(e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"])&&(this.setState({interacted:!1}),this.state.activePlayer.setCurrentTime(0),this.props.autoplay?this.play():this.stop())}componentWillUnmount(){clearInterval(this.autoplayInterval),this.pause(),this.exitedView.cancel(),delete this.props.baseNode.playing,delete this.props.baseNode.paused,delete this.props.baseNode.stopped,delete this.props.baseNode.play,delete this.props.baseNode.pause,delete this.props.baseNode.getCurrentTime,delete this.props.baseNode.setCurrentTime}play=()=>{this.state.activePlayer&&this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(e=>{this.state.activePlayer.getVolume().then(i=>{i!==0&&this.state.activePlayer.setVolume(0).then(()=>{this.state.activePlayer.play().then(()=>{this.setState({playing:!0,paused:!1,stopped:!1})}).catch(r=>{})}).catch(r=>{})}).catch(i=>{})})};pause=()=>{this.state.activePlayer&&this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0})}).catch(e=>{})};stop=()=>{this.state.activePlayer&&(this.pause(),this.state.activePlayer.pause().then(()=>{this.setState({playing:!1,paused:!0,stopped:!0}),this.state.activePlayer.setCurrentTime(0)}).catch(e=>{}))};onPointerEnter=e=>{this.props["play-on"]==="hover"&&(this.props.poster&&this.state.activePlayer.setCurrentTime(0),this.play()),this.setState({hasAttention:!0})};onPointerOut=e=>{this.props["play-on"]==="hover"&&this.pause(),this.setState({hasAttention:!1})};onPosterLoad=()=>{this.setState({posterLoaded:!0})};onVideoLoad=()=>{this.setState({videoLoaded:!0})};onNewPlayer=e=>{if(!e){this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:this.nullPlayer},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime});return}this.setState({playing:!1,stopped:!0,paused:!0,hasPlayedThrough:!1,activePlayer:e},()=>{this.props.baseNode.play=this.state.activePlayer.play,this.props.baseNode.pause=this.state.activePlayer.pause,this.props.baseNode.getCurrentTime=this.state.activePlayer.getCurrentTime,this.props.baseNode.setCurrentTime=this.state.activePlayer.setCurrentTime,this.props.onLoad&&this.props.onLoad({width:e.size.width,height:e.size.height}),this.props.visible&&this.enteredView()})};initializeVideoElementPlayer=()=>{this.videoRef.current.paused&&this.videoRef.current.currentTime!==0&&(this.videoRef.current.currentTime=0),this.onNewPlayer({play:()=>new Promise((e,i)=>{this.videoRef.current.play().then(function(){e(!0)}).catch(function(r){i(r)})}),pause:()=>new Promise((e,i)=>{this.videoRef.current.pause(),e(!0)}),stop:()=>new Promise((e,i)=>{this.videoRef.current.pause(),this.videoRef.current.currentTime=0,e(!0)}),getDuration:()=>new Promise((e,i)=>{e(this.videoRef.current.duration)}),getCurrentTime:()=>new Promise((e,i)=>{e(this.videoRef.current.currentTime)}),setCurrentTime:e=>new Promise((i,r)=>{this.videoRef.current.currentTime===e?i(!0):(this.videoRef.current.currentTime=e,this.videoRef.current.addEventListener("seeked",()=>{i(!0)},{once:!0}))}),getVolume:()=>new Promise((e,i)=>{e(this.videoRef.current.volume)}),setVolume:e=>new Promise((i,r)=>{this.videoRef.current.volume=e,e==0&&(this.videoRef.current.muted=!0),i(!0)}),setPlaybackRate:e=>new Promise((i,r)=>{this.videoRef.current.playbackRate=Math.max(.1,Math.min(2,parseFloat(e))),"preservesPitch"in this.videoRef.current?this.videoRef.current.preservesPitch=!1:"mozPreservesPitch"in this.videoRef.current?this.videoRef.current.mozPreservesPitch=!1:"webkitPreservesPitch"in this.videoRef.current&&(this.videoRef.current.webkitPreservesPitch=!1),i(!0)}),size:{width:this.videoRef.current.videoWidth||320,height:this.videoRef.current.videoHeight||240}})};onPlay=()=>{this.setState(e=>{let i={...e};return e.hasAttention&&(i.interacted=!0),i.playing=!0,i.paused=!1,i.stopped=!1,i})};onPause=()=>{this.setState(e=>{let i={...e};return e.hasAttention&&(i.interacted=!0),i.playing=!1,i.paused=!0,i})};onEnded=()=>{this.setState({hasPlayedThrough:!0})};resetVideoPlayer=()=>{Promise.all([this.state.activePlayer.setCurrentTime(0),this.state.activePlayer.pause()]).then(()=>{this.setState({hasPlayedThrough:!1,paused:!0,stopped:!0},()=>{if(this.props.poster&&this.videoRef.current&&this.props["browser-default"]){if(mo()&&this.videoRef.current){let e=this.videoRef.current.cloneNode();this.videoRef.current.replaceWith(e),this.videoRef.current=e}this.videoRef.current.load()}})})};enteredView(){this.exitedView.cancel(),(this.props.autoplay==!0||this.props["play-on"]==="hover"&&this.state.hasAttention)&&!this.state.playing&&this.play()}exitedView=zN.default.debounce(()=>{!this.props.muted&&!this.props.autoplay&&this.state.playing||(this.pause(),Promise.all([this.state.activePlayer.pause(),this.state.activePlayer.getCurrentTime(),this.state.activePlayer.getDuration()]).then(([i,r,n=0])=>{(n-r<.1&&!this.props.loop||Number.isNaN(n)||r==0&&i)&&this.resetVideoPlayer()}))},500)},HN=rr((t,e)=>m(t2,{...t,mediaRef:e}))});var WMe,i2,qN,BN=T(()=>{Pe();ht();Ar();Se();WMe=ce(ve(),1);W();i2=class extends ae{constructor(e){super(e)}render(e){let{model:i,src:r,isLazyLoadable:n}=e,o=(i?.is_url?i.url:r)||"",s=["soundcloud.","mixcloud.","bandcamp."].some(u=>o.includes(u));return!n&&!s&&(o=""),m("iframe",{part:"media iframe",allowfullscreen:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0,frameborder:"0",className:this.props.loaded?"loaded":"",onload:this.onLoad,ref:this.props.mediaRef,src:o})}onLoad=()=>{this.props.onLoad&&this.props.onLoad()};componentDidMount(){this.props.isLazyLoadable&&this.startGDocsLoadCheck()}componentDidUpdate(e,i){this.props.loaded!==e.loaded&&(clearInterval(this.gDocsTimeoutCheck),this.props.loaded||this.startGDocsLoadCheck()),this.props.isLazyLoadable!==e.isLazyLoadable&&(clearInterval(this.gDocsTimeoutCheck),this.props.isLazyLoadable&&this.startGDocsLoadCheck())}componentWillUnmount(){clearInterval(this.gDocsTimeoutCheck)}startGDocsLoadCheck=()=>{let e=this.props.model?.is_url?this.props.model.url:this.props.src;if(e.indexOf("https://docs.google.com/viewer")==0){let i=2500;this.gDocsTimeoutCheck=setInterval(()=>{this.props.mediaRef.current?.contentDocument?(this.props.mediaRef.current.setAttribute("src",""),this.props.mediaRef.current.setAttribute("src",e)):clearInterval(this.gDocsTimeoutCheck),i=i+500,i>4e3&&(console.warn("Google Docs Viewer failed to load"),clearInterval(this.gDocsTimeoutCheck))},i)}}},qN=rr((t,e)=>m(i2,{...t,mediaRef:e}))});var is,$u,r2,n2,WN,VN=T(()=>{Pe();Se();Mt();Re();Di();Gn();Oi();is=ce(ve(),1);W();$u=new Set,r2=is.default.debounce(()=>{let t=Array.from($u),e=[],i=t.filter(o=>o.state.selected).length>1,r=0;if(i){let o=t.map(c=>{let d;return c.state.selected?d=c.props.baseNode.getBoundingClientRect():d={top:-9e9},{component:c,rect:d}});e=is.default.sortBy(o,(c,d)=>c.rect.top);let s=e.filter(c=>c.component.state.selected),u=s[s.length-1].component.props.baseNode._size;r=s[s.length-1].rect.bottom+-s[0].rect.top+-u.mediaItemSize.padSize+-u.mediaSize.padSize,e=e.map(c=>c.component)}else e=t;let n=!1;e.forEach(o=>{!i||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:r},()=>{o.setEditorFrame()}),n=!0)})},100);ne||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",r2):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",r2)}),document.addEventListener("selectionchange",r2));n2=class extends ae{constructor(e){super(e),this.state={selected:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,overlayPosition:{x:0,y:0},mediaItemEditorInfo:{},resizeCorner:0,pointerAttention:!1,pointerProxyAttention:!1,activeGallery:null,disabledFigureOptions:[],editorFramePosition:{x:0,y:0},editorMediaFramePosition:{x:0,y:0},UIWindow:!1,cursorOrientation:"nwse-resize",isResizing:!1,dragStartPosition:{x:0,y:0},dragDelta:{x:0,y:0},scalingLimit:1e3,resizeDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},initialDimensions:{scale:"100%",scaleArray:[100,"%"],newWidth:"auto",newHeight:"auto",width:0,height:0,displayScale:null},handlePos:{x:100,y:100,w:100,h:100},contextPos:{x:100,y:100,w:100,h:100},mediaCornerPositions:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],multiSelectHeight:null},this.renderElement=Ue.getPortal(this.props.baseNode,{noPointerEvents:!1,trackResize:!1,extraMargins:!1,component:this}),this.mediaGhostRef=me(),this.observer=new MutationObserver(this.checkForEmptyCaption)}render(e,i){let{mediaItemEditorInfo:r,overlayPosition:n,resizeCorner:o,pointerAttention:s,pointerProxyAttention:u,disabledFigureOptions:c,editorFramePosition:d,editorMediaFramePosition:p,isResizing:g,dragStartPosition:v,dragDelta:b,scalingLimit:S,resizeDimensions:_,handlePos:E,mediaCornerPositions:I,cursorOrientation:F,partOfMultipleSelection:O,showMultipleSelectionButton:L,UIWindow:z,contextPos:G}=i,{rotation:H,dimensions:N,mediaDimensions:J,baseNode:oe,size:te}=e;if(r?.disableAll==!0)return null;let K=_.width*_.overSize/te.mediaSize.width,U=_.height*_.overSize/te.mediaSize.height,se=1/K||1,re=e.scale;g&&(_.displayScale?re=_.displayScale:_.scaleArray[1]=="px"?re=parseFloat(_.scaleArray[0]).toFixed(0)+_.scaleArray[1]+"":re=parseFloat(_.scaleArray[0]).toFixed(1)+_.scaleArray[1]+""),re=re==="100.0%"?"100%":re;let Q=e.rotation+"\xB0",le=null;(s||u)&&!r?.disableButton&&!z&&!g&&(L&&O?le=m("button",{"data-editor-overlay":"true",class:"media-options-button multiple",style:{transform:`translate(${Math.floor(G.x*2)/2}px, ${Math.floor(G.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!L&&!O&&(le=m("button",{"data-editor-overlay":"true",class:"media-options-button",style:{transform:`translate(${Math.floor(G.x*2)/2}px, ${Math.floor(G.y*2)/2}px)`},onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:m("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),m("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),m("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),m("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),m("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})));let j=null;!g&&s&&!r?.disableResize&&!O&&(j=m("button",{class:`resize-handle ${F}`,style:{transform:`translate(${Math.floor(E.x*2)/2}px, ${Math.floor(E.y*2)/2}px)`},onMouseDown:this.onResizePointerDown,children:m("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32",style:"enable-background:new 0 0 32 32;",children:[m("polygon",{class:"outline",points:"24,18 28,15 30,14 30,30 14,30 15,28 18,24 8,14 4,17 2,18 2,2 18,2 17,4 14,8 "}),m("polygon",{class:"inner",points:"8,11 4,14 4,4 14,4 11,8 24,21 28,18 28,28 18,28 21,24 "})]})}));let B=r?.additionalUI?.(this,oe)||null;return m(X,{children:[m("style",{children:`:host {
				${g?"visibility: hidden!important;":""}
			}
			`}),m(Vi,{baseNode:oe,onSelectionChange:this.onSelectionChange}),je(m("div",{class:"editor-overlay",style:{height:te.mediaItemSize.height+"px",width:te.mediaItemSize.width+"px",display:s||g||u?"block":"none",transform:`translate3d(${n.x}px, ${n.y}px, 1px) rotate(${e.rotation}deg)`},children:[m("div",{class:`figure-outline${this.state.usingLocalScale?" using-local-scale":""}`,style:{width:te.mediaItemSize.width+"px",height:te.mediaItemSize.height+"px",top:d.y+"px",left:d.x+"px",transform:`rotate(${-e.rotation}deg)`},children:[g&&s&&m("div",{className:"tool-tip figure-sizing visible",style:{transform:`translate(${Math.floor(G.x*2)/2}px, ${Math.floor(G.y*2)/2}px)`},children:m("div",{className:"tooltip-content",children:m("span",{children:`${this.props.limitBy}: ${re}`})})}),le,j,B]}),m("div",{class:"media-ghost-container",style:{display:g?"block":"none",width:_.width+te.mediaSize.padSize+"px",height:_.height+te.mediaSize.padSize+"px",top:o===2||o===3?"0":"auto",right:o===1||o===2?"auto":"0",left:o===1||o===2?"0":"auto",bottom:o===2||o===3?"auto":"0"},children:m("div",{class:"media-ghost",ref:this.mediaGhostRef})})]}),this.renderElement)]},"media-item-editor")}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onOptionsButtonClick=e=>{if(this.state.mediaItemEditorInfo?.disableAll||e.metaKey||e.target.closest("figcaption"))return;e.preventDefault();let i=[];$u.forEach(o=>{o.state.selected&&i.push(o.props.baseNode)}),i.indexOf(this.props.baseNode)===-1&&(i=[this.props.baseNode]);let r=this.props.baseNode.getBoundingClientRect(),n={x:r.x+10,y:r.y+10,left:r.left+10,right:r.right+10,top:r.top+10,bottom:r.top+10,width:r.width,height:0};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"imageoptions",positionRect:n,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,props:{selectedMediaItems:i,clickedMediaItem:this.props.baseNode}})};setUIWindow=e=>{this.setState({UIWindow:e})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1,pointerAttention:!1}),this.setState({selected:e})};checkForEmptyCaption=()=>{let e=this.props.figCaptionElement;if(e){e.classList.contains("caption")||e.classList.add("caption");let i=Array.from(e.childNodes).every(r=>r.nodeType==Node.TEXT_NODE&&r.nodeValue.trim()==="");i&&!e.classList.contains("empty")?e.classList.add("empty"):!i&&e.classList.contains("empty")&&e.classList.remove("empty")}};componentDidMount(){$u.add(this),this.props.baseNode._editorInterface=this,this.checkZoomable(),this.checkHref(),this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),we.globalDragEventController.on("dragend",this.updatePosition),we.globalDragEventController.on("drop",this.updatePosition),this.props.baseNode.addEventListener("contextmenu",this.onOptionsButtonClick),this.checkForEmptyCaption(),this.props.figCaptionElement&&this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0})}componentWillUnmount(){if(cancelAnimationFrame(this.onScrollAnimFrame),$u.delete(this),this.observer.disconnect(),we.globalDragEventController.off("dragend",this.updatePosition),we.globalDragEventController.off("drop",this.updatePosition),this.state.UIWindow)if(this.props.baseNode.__willBeReplacedWith){let e=[...this.state.UIWindow.state.selectedMediaItems],i=e.indexOf(this.props.baseNode);i>-1&&(e[i]=this.props.baseNode.__willBeReplacedWith);let r=this.state.UIWindow.state.clickedMediaItem;this.props.baseNode==r&&(r=this.props.baseNode.__willBeReplacedWith),this.state.UIWindow.setState({selectedMediaItems:e,clickedMediaItem:r},()=>{this.state.UIWindow?.getSettingsFromNodes()})}else this.state.UIWindow?.onMutate();delete this.props.baseNode._editorInterface,Ue.removePortal(this.props.baseNode,this.renderElement),this.props.baseNode.removeEventListener("contextmenu",this.onOptionsButtonClick)}updatePosition=()=>{(this.state.pointerAttention||this.state.pointerProxyAttention||this.state.selected)&&this.onScroll()};onScroll=e=>{this.ticking||(this.ticking=!0,this.onScrollAnimFrame=requestAnimationFrame(()=>{let i=this.props.scrollContext.getScrollPosition().y,r=i-this.scrollPos;this.scrollPos=i,this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(r),Ue.testHover(),this.setEditorFrame(),this.ticking=!1}))};checkZoomable(e=this.props){let i=this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.props.zoomTemporarilyDisabled,r=e["force-quick-view"]||e.imageSettings.image_zoom&&!e["disable-zoom"]&&!e.href&&!e.zoomTemporarilyDisabled;(i!=r||i&&!this.props.baseNode.classList.contains("zoomable")||!i&&this.props.baseNode.classList.contains("zoomable"))&&CargoEditor?.mutationManager?.execute?.(()=>{i?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")},{preventDraft:!0})}checkHref(e=this.props){let i=this.props.href!==void 0&&this.props.href!==null,r=e.href!==void 0&&e.href!==null;(i!=r||i&&!this.props.baseNode.classList.contains("linked")||!i&&this.props.baseNode.classList.contains("linked"))&&CargoEditor?.mutationManager?.execute?.(()=>{i&&this.props.baseNode.classList.add("linked"),this.props.baseNode.classList.remove("linked")},{preventDraft:!0})}componentDidUpdate(e,i){this.checkZoomable(e),this.checkHref(e),this.props.figCaptionElement!==e.figCaptionElement&&(this.observer.disconnect(),this.props.figCaptionElement&&(this.checkForEmptyCaption(),this.observer.observe(this.props.figCaptionElement,{characterData:!0,subtree:!0,childList:!0}))),(!this.props.height||!this.props.width)&&(!this.props.model?.width||!this.props.model?.height)&&this.props.nativeMediaDimensions.width&&this.props.nativeMediaDimensions.height&&(this.props.nativeMediaDimensions.width!==e.nativeMediaDimensions.width||this.props.nativeMediaDimensions.height!==e.nativeMediaDimensions.height||this.props.height!==e.height||this.props.width!==e.width)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.setAttribute("width",this.props.nativeMediaDimensions.width),this.props.baseNode.setAttribute("height",this.props.nativeMediaDimensions.height)},{preventDraft:!0}),(this.props.src!==e.src||this.props.hash!==e.hash)&&CargoEditor?.mutationManager?.execute?.(()=>{this.props.baseNode.removeAttribute("width"),this.props.baseNode.removeAttribute("height"),this.props.baseNode.removeAttribute("poster")},{preventDraft:!0}),(this.state.UIWindow!==i.UIWindow||this.state.pointerAttention!==i.pointerAttention||this.state.pointerProxyAttention!==i.pointerProxyAttention||this.props.scrollContext.scrollingElement!==e.scrollContext.scrollingElement)&&(this.props.scrollContext.scrollingElement&&(this.state.UIWindow||this.state.pointerProxyAttention||this.state.pointerAttention)?(this.scrollPos=this.props.scrollContext.getScrollPosition().y,this.props.scrollContext.scrollingElement.addEventListener("scroll",this.onScroll)):e.scrollContext.scrollingElement&&e.scrollContext.scrollingElement.removeEventListener("scroll",this.onScroll)),(this.props.size.mediaSize.width!==e.size.mediaSize.width||this.props.size.mediaSize.height!==e.size.mediaSize.height||this.props.size.mediaItemSize.width!==e.size.mediaItemSize.width||this.props.size.mediaItemSize.height!==e.size.mediaItemSize.height||this.props.size.mediaSize.padSize!==e.size.mediaSize.padSize||this.props.size.mediaItemSize.padSize!==e.size.mediaItemSize.padSize||this.props.rotation!==e.rotation)&&(this.state.pointerAttention||this.state.pointerProxyAttention)&&(this.setState({usingLocalScale:this.props.baseNode?.hasAttribute("scale")&&this.props.baseNode?.hasAttribute("limit-by")}),Ue.testHover(),this.setEditorFrame())}pointerIn=()=>{let e=this.props.baseNode?.parentNode?._mediaItemEditorInfo||{},i=this.props.baseNode.parentElement?.nodeName=="GALLERY-SLIDESHOW"?this.props.baseNode.parentElement:null;if(i&&!i.thumbnailsVisible&&!this.props.baseNode.assignedSlot?.parentElement?.hasAttribute?.("data-active-slide")){this.pointerOut();return}this.setState({mediaItemEditorInfo:e}),this.state.selected&&$u.forEach(r=>{r.state.showMultipleSelectionButton&&r.setState({pointerProxyAttention:!0})}),this.setState({pointerAttention:!0},()=>{this.setEditorFrame()})};pointerOut=()=>{this.state.selected&&$u.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onResizePointerDown=e=>{if(e.button==2)return;let i=this.props.mediaElement,r=this.mediaGhostRef.current;if(!i||!r||this.props.size.width?.indexOf?.("%")>-1)return;for(;r.lastChild;)r.lastChild.remove();if(i.tagName=="IMG"){let o=i.cloneNode(!0);o.setAttribute("decoding","sync"),r.appendChild(o)}else if(i.tagName==="VIDEO"&&i.hasAttribute("poster")){let o=document.createElement("img");o.setAttribute("decoding","sync"),o.setAttribute("src",i.getAttribute("poster")),r.appendChild(o)}else i.classList.contains("placeholder")?r.appendChild(i.cloneNode(!0)):r.appendChild(document.createElement("div"));let n=window.getComputedStyle(i);r.firstChild.style.border=n.getPropertyValue("border"),r.firstChild.style.borderRadius=n.getPropertyValue("border-radius"),r.firstChild.style.padding=n.getPropertyValue("padding"),r.firstChild.style.outline=n.getPropertyValue("outline"),this.startDrag(e)};startDrag=e=>{let{handlePos:i,mediaCornerPositions:r,cursorOrientation:n}=this.state,{baseNode:o,rotation:s,limitBy:u,size:c}=this.props,d=this.props.baseNode.closest("bodycopy, column-unit, gallery-freeform"),p=0;if(d){let E=window.getComputedStyle(d);p=d.offsetWidth+-parseFloat(E.getPropertyValue("padding-left"))+-parseFloat(E.getPropertyValue("padding-right"))}else p=window.innerWidth;p=p+-c.mediaSize.padSize+-c.mediaItemSize.padSize;let g={x:e.clientX,y:e.clientY};e.preventDefault();let v=this.props.scale??100,b=Jt(v,u==="width"?"%":"rem");u!=="width"&&u!=="height"&&(b[1]=""),b[0]=parseFloat(b[0]),(b[0]===""||b[1].indexOf("calc(")>-1||b[1].indexOf("var(")>-1)&&(u==="width"?(b[0]=c.mediaSize.width/p*100,b[1]="%"):(b[0]=c.mediaSize.height/window.innerHeight*100,b[1]="vh"));let S=Math.min(b[0].toString().indexOf(".")>-1?b[0].toString().split(".").pop().length:0,3);b[0]=parseFloat(parseFloat(b[0]).toFixed(S));let _={width:c.mediaSize.width,height:c.mediaSize.height,atLimit:Math.abs(c.mediaSize.width-p)<2,scaleArray:b,scale:v,overSize:1,displayScale:null};this.state.mediaItemEditorInfo.beforeScaleChange&&(_=this.state.mediaItemEditorInfo.beforeScaleChange(this.props.baseNode,_)),this.setState({dragStartPosition:g,scalingLimit:p,dragDelta:{x:0,y:0},resizeDimensions:_,initialDimensions:{..._,scaleArray:[..._.scaleArray]},isResizing:!0},()=>{Ue.lock(),document.body.style.setProperty("cursor",n,"important"),document.body.classList.add("dragging-figure-in-editor"),we.adminWindow.addEventListener("mouseup",this.onPointerUp),we.adminWindow.addEventListener("pointermove",this.onDrag),window.addEventListener("pointermove",this.onDrag),window.addEventListener("mouseup",this.onPointerUp)})};onDrag=e=>{e.preventDefault();let{dragStartPosition:i,mediaCornerPositions:r,scalingLimit:n,resizeCorner:o,handlePos:s,handleTrack:u,initialDimensions:c}=this.state,{rotation:d,limitBy:p,baseNode:g,size:v}=this.props,{resizeDimensions:b}=this.state,{scale:S,scaleArray:_}=c,E={x:e.clientX-i.x,y:e.clientY+-i.y},I=d*(Math.PI/180)||0,F=r[o],O=r[(o+1)%4],L=r[(o+2)%4],z=r[(o+3)%4],G=this.getDistance(z,s),H=this.getDistance(L,s),N=parseInt(v.width),J=parseInt(v.height),oe=45,te=this.getAngle(z,F),K=this.getAngle(F,O),U={x:s.x+E.x,y:s.y+E.y},se=[{x:s.x+Math.cos(K)*10,y:u.y+u.h+-oe+Math.sin(K+Math.PI)*10},{x:s.x,y:u.y+u.h+-oe}],re=[{x:s.x+Math.cos(te)*10,y:u.y+u.h+-oe+Math.sin(te+Math.PI)*10},{x:s.x,y:u.y+u.h+-oe}],Q=0,le=0,j=0,B,Y;if(o%2==0){let Fe=this.getIntersection(se,[O,L]),qe=this.getIntersection(re,[L,z]),nt=this.getDistance(L,s),$e=this.getDistance(L,U),ot=this.getAngle(L,U),Ae=this.getDistance(L,s);j=$e/Ae;let st=this.getDistance(L,Fe);le=$e/st;let ct=Math.abs(Math.sin(ot+I));le*=ct;let ft=this.getDistance(qe,L);Q=$e/ft;let Be=Math.cos(ot+I);Q*=Be}else{let Fe=this.getIntersection(se,[z,F]),qe=this.getIntersection(re,[F,O]),nt=this.getDistance(L,s),$e=this.getDistance(L,U),ot=this.getAngle(L,U),Ae=this.getDistance(L,s);j=$e/Ae;let st=this.getDistance(L,Fe);le=$e/st;let ct=Math.abs(Math.sin(ot+I));le*=ct;let ft=this.getDistance(qe,L);Q=$e/ft;let Be=Math.cos(ot+I);Q*=Be}let ie=Math.max(Q,j,le),de=Math.min(v.mediaSize.width/N,v.mediaSize.height/J),fe=N/J;B=N*de*ie,Y=J*de*ie;let be=!1,Me=1;if(B>n){let Fe=n/B;be=!0,B=n,Y=Y*Fe}let Ee=e.altKey||e.metaKey;p==="width"?([_,B]=this.scaleDimension(_,B+v.mediaSize.padSize+v.mediaItemSize.padSize,v.mediaSize.width+v.mediaSize.padSize+v.mediaItemSize.padSize,Ee),B=B+-v.mediaSize.padSize+-v.mediaItemSize.padSize,Y=B/fe):([_,Y]=this.scaleDimension(_,Y+v.mediaSize.padSize+v.mediaItemSize.padSize,v.mediaSize.height+v.mediaSize.padSize+v.mediaItemSize.padSize,Ee),B=fe*(Y+-v.mediaSize.padSize+-v.mediaItemSize.padSize),Y=B/fe),_[0]=parseFloat(_[0]),b={scale:_.join(""),scaleArray:_,limitBy:p,width:B,height:Y,atLimit:be,overSize:Me,displayScale:null},_[1]=="%"&&p=="width"&&parseFloat(_[0])>=100&&(b.scale="100%",b.scaleArray=[100,"%"]),this.state.mediaItemEditorInfo.whileScaleChange&&(b=this.state.mediaItemEditorInfo.whileScaleChange(this.props.baseNode,{...b})),this.setState({resizeDimensions:b})};scaleDimension=(e,i,r,n)=>{let o=e[0]*(i/r),s=o;n?e[1]=="%"||e[1]=="vh"||e[1]=="vw"||e[1]=="vmax"||e[1]=="vmin"?o=Math.round(o/.5)*.5:o=Math.round(o/10)*10:e[1]=="px"?o=Math.round(o):o=Math.round(o*10)/10,o=Math.max(1,o);let u=o/s||0;return[[o,e[1]],i*u]};onPointerUp=e=>{let{resizeDimensions:i,scalingLimit:r}=this.state;e.preventDefault(),CargoEditor.mutationManager.execute(()=>{this.state.mediaItemEditorInfo.afterScaleChange?this.state.mediaItemEditorInfo.afterScaleChange(this.props.baseNode,i):this.props.baseNode.setAttribute("scale",i.scale),this.props.baseNode.flushMutationQueue()}),Ue.unlock(),this.setState({isResizing:!1},()=>{document.body.style.cursor="",we.adminWindow.removeEventListener("mouseup",this.onPointerUp),we.adminWindow.removeEventListener("pointermove",this.onDrag),document.body.classList.remove("dragging-figure-in-editor"),window.removeEventListener("pointermove",this.onDrag),window.removeEventListener("mouseup",this.onPointerUp)})};setEditorFrame=()=>{let{figureElement:e,mediaElement:i,sizingFrameElement:r,baseNode:n,rotation:o,size:s}=this.props;if(!e||!i||!i.parentElement||s.mediaItemSize.width==0||s.mediaItemSize.height==0||!r||!this.state.pointerAttention&&!this.state.pointerProxyAttention)return;let u=o*(Math.PI/180)||0,c=n.getBoundingClientRect(),d={w:s.mediaItemSize.width*Math.cos(u)-s.mediaItemSize.height*Math.sin(u),h:s.mediaItemSize.width*Math.sin(u)+s.mediaItemSize.height*Math.cos(u)},v={x:c.left+(c.width-d.w)*.5+-0,y:c.top+(c.height-d.h)*.5+-0},b=r.getBoundingClientRect(),S=45,_=45,E=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight,I={x:e.offsetLeft,y:e.offsetTop,w:e.offsetWidth,h:e.offsetHeight};E&&(I.h=this.state.multiSelectHeight);let F=i.offsetLeft,O=i.offsetTop,L=i;for(;L&&L.parentNode&&L.parentNode!==n.shadowRoot&&L.parentNode!==e&&L.parentNode!==n;)F=F+L.offsetLeft,O=O+L.offsetTop,L=L.offsetParent;let z={x:F||0,y:O||0},G=[{x:z.x,y:z.y},{x:z.x+s.mediaSize.width+s.mediaSize.padSize,y:z.y},{x:z.x+s.mediaSize.width+s.mediaSize.padSize,y:z.y+s.mediaSize.height+s.mediaSize.padSize},{x:z.x,y:z.y+s.mediaSize.height+s.mediaSize.padSize}],H=[];if(E)H=G,H[2].y=z.y+this.state.multiSelectHeight,H[3].y=z.y+this.state.multiSelectHeight;else{let Ae={x:I.w*.5,y:I.h*.5};H=G.map(st=>{let ct={x:st.x-Ae.x,y:st.y-Ae.y},ft={x:ct.x*Math.cos(u)-ct.y*Math.sin(u),y:ct.x*Math.sin(u)+ct.y*Math.cos(u)};return{x:ft.x+Ae.x,y:ft.y+Ae.y}})}if(is.default.isEqual(H))return;let N,J,oe,te;N=is.default.minBy(H,Ae=>Ae.y);let K=H.indexOf(N);J=H[(K+1)%4],oe=H[(K+2)%4],te=H[(K+3)%4];let U={x:0,y:0,w:S,h:_},se={x:0,y:0},re={x:N.x,y:N.y},Q={w:J.x-te.x,h:oe.y-N.y,x:te.x,y:N.y},le=[{x:Q.x+Q.w*.5,y:Q.y+Q.h*.5},{x:Q.x+Q.w,y:Q.y+Q.h}],j=this.getIntersection(le,[J,oe]),B=this.getIntersection(le,[te,oe]),Y=!1,ie=is.default.minBy([B,j],Ae=>Ae.y<le[0].y?9e9:Ae.y);if(ie==B)U.x=oe.x,U.y=oe.y;else{let Ae=this.getDistance(J,ie);this.getDistance(oe,ie)<Ae?(U.x=oe.x,U.y=oe.y):(U.x=J.x,U.y=J.y,Y=!0)}let de,fe=0,be=0;if(Y){let Ae=this.getAngle(J,N),st=Math.PI-(Math.abs(Ae)+Math.PI*.5),ct=_*Math.cos(st),ft=-Math.cos(st+Math.PI*.5)*ct,Be=-Math.sin(st+Math.PI*.5)*ct;re={x:te.x+-ft,y:te.y+-Be+_},U.x=U.x+ft+-S,de=U.y+Be+_;let mt=[{x:N.x-S,y:de},{x:N.x-S,y:de-10}],Lt=[{x:N.x,y:de},{x:N.x,y:de-10}],St=[this.getIntersection(mt,[te,N]),this.getIntersection(mt,[N,J]),this.getIntersection(Lt,[te,N]),this.getIntersection(Lt,[N,J])],Wt=is.default.maxBy(St,ri=>ri.y);U.y=Wt.y,U.h=de-U.y;let rt=Math.max(0,b.bottom+(_+Be)+-Qe.data.window.h+-(oe.y-J.y));be=U.h-_+-rt,fe=this.getIntersection([{x:U.x,y:U.y+be},{x:U.x-10,y:U.y+be}],[N,J]).x-U.x+-S}else{let Ae=this.getAngle(oe,J),st=Math.PI-(Math.abs(Ae)+Math.PI*.5),ct=S*Math.cos(st),ft=-Math.cos(st)*ct,Be=-Math.sin(st)*ct;if(de=U.y+Be,U.x=U.x+ft,U.y=J.y,U.h=de-J.y,re={x:N.x+-ft+-S,y:N.y+-Be},Math.abs(this.getSlope(J,oe))>1&&b.bottom+Be>=Qe.data.window.h){let Lt=b.bottom+-Qe.data.window.h,St={x:oe.x,y:oe.y-Lt},Wt=this.getIntersection([St,{x:St.x+10,y:St.y}],[oe,J]);fe=Wt.x-(U.x+U.w),be=Wt.y-U.y+-_}else{let Lt=[{x:U.x,y:de},{x:U.x,y:de-10}],St=[{x:U.x+U.w,y:de},{x:U.x+U.w,y:de-10}],Wt=[this.getIntersection(Lt,[te,N]),this.getIntersection(Lt,[N,J]),this.getIntersection(St,[te,N]),this.getIntersection(St,[N,J])],rt=is.default.maxBy(Wt,ri=>ri.y);U.y=rt.y,U.h=de-U.y;let Ki=Math.max(0,b.bottom+-Qe.data.window.h+Be);be=U.h-_+-Ki,fe=0}}se.x=U.x+fe,se.y=Math.max(U.y,U.y+be);let Me=Math.max(0,b.left+b.width+-Qe.data.window.w);se.x=Math.min(se.x,J.x-(Me+S));let Ee=Math.min(0,b.left),Fe=Math.min(0,b.top);re.x=Math.max(re.x,-Ee+te.x),re.y=Math.max(re.y,-Fe+N.y);let qe=this.getIntersection([re,{x:re.x,y:re.y+10}],[te,oe]);re.y=Math.min(re.y,qe.y+-_);let nt=(K+2)%4;Y&&(nt=(nt+3)%4);let $e="nwse-resize",ot=this.getAngle(se,H[(nt+2)%4]);Math.abs(Math.PI*.5-ot)<.4?$e="ns-resize":Math.abs(Math.PI-Math.abs(ot))<.4&&($e="ew-resize"),this.setState({mediaCornerPositions:H,resizeCorner:nt,contextPos:re,handlePos:se,cursorOrientation:$e,handleTrack:U,overlayPosition:v,editorMediaFramePosition:{x:z.x,y:z.y},editorFramePosition:{x:0,y:0}})};getAngle=(e,i)=>Math.atan2(-(i.y-e.y),i.x-e.x);getDistance=(e,i)=>Math.sqrt(Math.pow(i.y-e.y,2)+Math.pow(i.x-e.x,2));getSlope=(e,i)=>(i.y-e.y)/(i.x-e.x);getIntersection=(e,i)=>{let r=this.getSlope(...e),n=this.getSlope(...i),o,s;return r==0?(isFinite(n)?o=(n*i[0].x-(i[0].y-e[0].y))/n:o=i[0].x,s=e[0].y):isFinite(r)?(o=(n*i[0].x-r*e[0].x-(i[0].y-e[0].y))/(n-r),s=r*(o-e[0].x)+e[0].y):(o=e[0].x,s=n*(o-i[0].x)+i[0].y),isFinite(o)||(o=null),isFinite(s)||(s=null),{x:o,y:s}}},WN=n2});function Tle(t){return Pt({updateFrontendState:actions.updateFrontendState},t)}var $N,fp,Ag,Ale,Mle,jN=T(()=>{Pe();Se();di();ht();$N=ce(ve(),1);Re();Mr();Ni();up();_i();Qw();UN();BN();Wi();VN();el();W();Pe();ne||(fp=new ResizeObserver(function(t){t.forEach(function(e){if(e.contentRect.width==0&&e.contentRect.height==0&e.contentRect.top==0&&e.contentRect.left==0)return;let i=0,r=0,n=0,o=0,s=0,u=0,c=0,d=0,p=0,g=0,v=e.target.tagName==="DIV";if(e.contentBoxSize&&e.borderBoxSize&&!v)e.borderBoxSize.length?(i=e.borderBoxSize[0].blockSize-e.contentBoxSize[0].blockSize,r=e.borderBoxSize[0].inlineSize-e.contentBoxSize[0].inlineSize):(i=e.borderBoxSize.blockSize-e.contentBoxSize.blockSize,r=e.borderBoxSize.inlineSize-e.contentBoxSize.inlineSize);else{let b=window.getComputedStyle(e.target);n=parseFloat(b.getPropertyValue("padding-left"))||0,o=parseFloat(b.getPropertyValue("padding-right"))||0,s=parseFloat(b.getPropertyValue("border-right-width"))||0,u=parseFloat(b.getPropertyValue("border-left-width"))||0,c=parseFloat(b.getPropertyValue("padding-top"))||0,d=parseFloat(b.getPropertyValue("padding-bottom"))||0,p=parseFloat(b.getPropertyValue("border-bottom-width"))||0,g=parseFloat(b.getPropertyValue("border-top-width"))||0,i=c+d+g+p,r=n+o+s+u}Ot(e.target,"elementResize",{padSize:r,vertPadSize:i,horizPadSize:r,width:e.contentRect.width,height:e.contentRect.height,leftPad:n,rightPad:o,leftBorder:s,rightBorder:u,topPad:c,bottomPad:d,bottomBorder:p,topBorder:g},{bubbles:!1})})}));Ag=class extends Ti{constructor(e){super(e),this.state={zoomTemporarilyDisabled:!1,scrollTransitionDisabled:!1,slottedMediaNode:null,nativeMediaDimensions:{width:null,height:null},dimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0},mediaDimensions:{padSize:0,vertPadSize:0,horizPadSize:0,width:0,height:0,leftPad:0,rightPad:0,leftBorder:0,rightBorder:0,topPad:0,bottomPad:0,bottomBorder:0,topBorder:0},isVisible:!1,viewportIntersection:{hasLayout:!1,visible:!1,position:"unknown"},isLazyLoadable:!1,loaded:!1},this.uid=$N.default.uniqueId(),this.figureRef=me(),this.mediaRef=me(),this.lastMediaRef=me(),this.figCaptionRef=me(),this.sizingFrameRef=me(),Object.defineProperty(this.props.baseNode,"_size",{get:()=>({width:this.props.width??this.props.model?.width??this.state.nativeMediaDimensions.width??1600,height:this.props.height??this.props.model?.height??this.state.nativeMediaDimensions.height??1e3,mediaItemSize:this.state.dimensions,mediaSize:this.state.mediaDimensions}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_nativeMediaDimensions",{get:()=>({width:this.state.nativeMediaDimensions.width??1600,height:this.state.nativeMediaDimensions.height??1600}),configurable:!0}),Object.defineProperty(this.props.baseNode,"_model",{get:()=>this.props.model||null,configurable:!0});let i=this.props.baseNode.onload;Object.defineProperty(this.props.baseNode,"onload",{get:()=>this.onloadCallback,set:n=>{this.onloadCallback=n,this.state.loaded&&n&&this.onLoad()},configurable:!0}),this.props.baseNode.onload=i;let r=this.props.baseNode.onerror;Object.defineProperty(this.props.baseNode,"onerror",{get:()=>this.onErrorCallback,set:n=>{this.onErrorCallback=n},configurable:!0}),this.props.baseNode.onerror=r,this.props.baseNode._setZoomStatus=n=>{this.setState(o=>o.zoomTemporarilyDisabled===n?null:{zoomTemporarilyDisabled:n})},this.props.baseNode._setScrollTransitionStatus=n=>{this.setState(o=>o.scrollTransitionDisabled===n?null:{scrollTransitionDisabled:n})},this.props.baseNode._forceRedraw=n=>{this.setState({forceRedraw:Math.random()})},this.props.baseNode.getFileType=this.getFileType}handleClick=e=>{if(e?.defaultPrevented)return;let i=e.composedPath();if(i.find(d=>d.tagName==="A"))return;let n=this.props.baseNode.shadowRoot.querySelector("a.sizing-frame"),o=!1,s=window.getSelection();if(s&&s.rangeCount>0&&!this.props.adminMode){let d=s.getRangeAt(0);d&&d.commonAncestorContainer&&!d.collapsed&&this.props.baseNode.contains(d.commonAncestorContainer)&&(o=!0)}if(n&&!o&&!this.props.adminMode){n.click();return}let u=this.getFileType(),c=this.isZoomable();if((u==="video"||u.startsWith("vimeo")||u.startsWith("youtube"))&&(!this.props.adminMode&&e.detail==1||e.detail==2)&&!this.props.autoplay&&!c){if(i.some(d=>d.nodeName=="VIDEO"||d.nodeName==="IFRAME")&&this.props["browser-default"])return;e.preventDefault(),this.props.baseNode.playing?this.props.baseNode.pause():this.props.baseNode.play();return}!c||o||!i.find(d=>d&&d.classList?.contains("sizing-frame"))||this.props.adminMode||(e.preventDefault(),Lw(this.props.baseNode))};isZoomable=()=>this.props["force-quick-view"]||this.props.imageSettings.image_zoom&&!this.props["disable-zoom"]&&!this.props.href&&!this.state.zoomTemporarilyDisabled;getFileType=()=>{let{model:e,src:i,"dynamic-src":r}=this.props;if(i=r||i,this.props["dynamic-filetype"]!==void 0&&this.props["dynamic-filetype"]!==null)return this.props["dynamic-filetype"];let n="none";if(e)e.is_image?n="image":e.is_video?n="video":e.is_url&&(n="url",e.url_type&&!e.url_id?n=e.url_type:e.url_id&&e.url_type&&(n=e.url_type+":"+e.url_id));else if(i){let p=i.toLowerCase();if(p.endsWith(".mov")||p.endsWith(".mp4")||p.endsWith(".webm"))n="video";else if(p.endsWith(".png")||p.endsWith(".webp")||p.endsWith(".jpg")||p.endsWith(".jpeg")||p.endsWith(".gif")||p.endsWith(".avif")||p.endsWith(".apng")||p.endsWith(".svg"))n="image";else{n="url";var o="",s=/(?:<iframe [^>]*src=")?(?:https?:\/\/(?:[\w]+\.)*vimeo\.com(?:[\/\w:]*(?:\/videos)?)?\/([0-9]+)[^\s]*)"?(?:[^>]*><\/iframe>)?(?:<p>.*<\/p>)?/,d=i.match(s);if(d&&d[0]){let g=d[0].split(/\/|\?h=|&|\?/);for(var u=0;u<g.length;u++)!g[u].includes(":")&&!g[u].includes(".")&&!g[u].includes("vimeo")&&!g[u].includes("=")&&!g[u].includes("video")&&!g[u].includes("showcase")&&!g[u].includes("player")&&g[u].length>3&&(o.length==0?o=g[u]:o+="/"+g[u]);n="vimeo:"+o}var c=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,d=i.match(c);d&&d[7].length==11&&(o=d[7],n="youtube:"+o)}}return n};onCaptionClick=e=>{this.props.adminMode||e.target.closest("a")&&e.stopPropagation()};render(e,i,r){let{dimensions:n,mediaDimensions:o,viewportIntersection:s,loading:u,nativeMediaDimensions:c,scrollTransitionDisabled:d}=i,{rotation:p,drag:g,"force-visible":v,"dynamic-src":b,adminMode:S,imageSettings:_,pageInfo:E,width:I,height:F,baseNode:O,model:L,posterModel:z,href:G,src:H,hash:N,isMobile:J}=e,oe=v??this.state.isVisible,te=v??this.state.isLazyLoadable,{uid:K}=this,U=this.props.scale!==void 0?this.props.scale:J&&_.mobile_image_width_maximize?"100%":_.scale,se=this.props["limit-by"]!==void 0?this.props["limit-by"]:J&&_.mobile_image_width_maximize?"width":_.limit_by;H=b||H;let re=I??L?.width??c.width??1600,Q=F??L?.height??c.height??1e3,le=Jt(U,se=="height"?"rem":"%"),j=Q/re,Y=o.width*j,ie=o.horizPadSize+n.horizPadSize,de=o.vertPadSize+n.vertPadSize,fe=o.width+o.horizPadSize,Me=(Y+o.vertPadSize)/fe,Ee=le.join(""),Fe,qe=null;isNaN(Me)&&(Me=Q/re);let nt=re.toString().trim().endsWith("%"),$e=Q.toString().trim().endsWith("%"),ot=Jt(re,"%"),Ae=Jt(Q,"%");if(nt&&$e)se==="width"||se=="height"?(Ee=`calc(${ot[0]*.01} * var(--resize-parent-width, 100%) )`,qe=`calc( var(--fit-height) * ${Ae[0]*.01} )`,Fe="var(--custom-fit-height)"):(Ee=`calc(${ot[0]*le[0]*1e-4} * var(--resize-parent-width, 100%) )`,qe=`calc( var(--fit-height) * ${Ae[0]*le[0]*1e-4} )`,Fe="var(--custom-fit-height)");else if(se=="height")if($e)qe=`calc( var(--fit-height) * ${Ae[0]*.01} )`,Fe="var(--custom-fit-height)",Ee=`${ot[0]*.01}px`;else{let rt="";le[1]=="%"?rt=`( ${le[0]*.01} * var(--resize-parent-width, 100%) )`:le[1].indexOf("calc(")>-1?(le[1]=le[1].replace(/[\d*\.]+%/g,function(Ki){return`( ${Jt(Ki,"%")[0]*.01} * var(--resize-parent-width, 100%) )`}),rt=le[1].replace("calc(","(")):rt=le.join(""),nt?(Ee=`calc( ${ot[0]*.01} * var(--resize-parent-width, 100%) )`,Fe=`calc( ${rt} )`):(Ee=`calc( ( ${rt} - ${de}px ) * ( 1 / ${j} ) + ${ie}px )`,Fe=Me*100+"%")}else se==="width"?nt?(Ee=`calc( ${ot[0]*.01} * var(--resize-parent-width, 100%) )`,Fe=`${Ae[0]}px`):(le[1]=="%"?Ee=`calc(${le[0]*.01} * var(--resize-parent-width, 100%) )`:(le[1].indexOf("calc(")>-1&&(le[1]=le[1].replace(/[\d*\.]+%/g,function(rt){return`( ${Jt(rt,"%")[0]*.01} * var(--resize-parent-width, 100%) )`})),Ee=le.join("")),$e?(qe=`calc( var(--fit-height) * ${Ae[0]*.01} )`,Fe="var(--custom-fit-height)"):Fe=Me*100+"%"):nt?(Ee=`calc(${ot[0]*le[0]*1e-4} * var(--resize-parent-width, 100%) )`,qe=`calc( min( var(--fit-height) * ${le[0]*.01} , ${Ae[0]*le[0]*.01}px ) )`,Fe="var(--custom-fit-height)"):$e?(Ee=`calc( min( ${le[0]*.01} * var(--resize-parent-width, 100%) , ${ot[0]*le[0]*.01}px ) )`,qe=`calc(  var(--fit-height) * ${le[0]*Ae[0]*1e-4}  )`,Fe="var(--custom-fit-height)"):(Ee=`calc( ( ( var(--fit-height, 50vh) * ${le[0]/100} ) - ${ie}px ) * ( 1 / ${j} ) + ${ie}px )`,Fe=Me*100+"%");let st=_?.scroll_animation&&e["disable-scroll-animation"]!==!0&&!d&&this.props.scrollContext.scrollUid!=="default",ct=this.props.uses||"";ct.indexOf("scroll-transition")===-1&&st&&(ct=ct+" scroll-transition");let ft=null,Be=this.getFileType()||"",mt=this.isZoomable(),Lt=e.autoplay&&e.muted;switch(!0){case(!Lt&&mt&&Be.startsWith("youtube")&&z&&!e["browser-default"]):case(!Lt&&mt&&Be.startsWith("vimeo")&&z&&!e["browser-default"]):case(!Lt&&mt&&Be==="video"&&z&&!e["browser-default"]):case(mt&&Be==="url"&&z):ft=m(dp,{...e,model:z,isZoomable:mt,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:te,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case Be=="video":case Be.startsWith("vimeo:"):case Be.startsWith("youtube:"):ft=m(HN,{...e,baseNode:this.props.baseNode,isZoomable:mt,ref:this.mediaRef,onLoad:this.onLoad,visible:oe,fileType:Be,isLazyLoadable:te,renderWidth:n.width,renderHeight:n.height,src:H});break;case Be=="image":ft=m(dp,{...e,isZoomable:mt,ref:this.mediaRef,onLoad:this.onLoad,isLazyLoadable:te,renderWidth:o.width,renderHeight:o.height,part:"media",onError:this.onErrorCallback});break;case Be=="url":ft=m(qN,{...e,loaded:this.state.loaded,onLoad:this.onLoad,ref:this.mediaRef,isLazyLoadable:te,src:H});break;default:ft=m("div",{ref:this.mediaRef,className:"placeholder",part:"media placeholder",width:"1600",height:"1000",draggable:"true",children:m("svg",{preserveAspectRatio:"none",part:"placeholder-svg",viewBox:"0 0 1600 1600",style:{display:"block",width:"100%",height:"100%"},children:[m("rect",{part:"placeholder-rect"}),m("line",{part:"placeholder-line","vector-effect":"non-scaling-stroke",x1:"0",y1:"0",x2:"1600",y2:"1600",stroke:"rgb(200,200,200)","stroke-width":"1"})]})});break}let St=m("slot",{onSlotChange:this.onMediaSlotChange,name:"custom-media",children:ft},"media-slot-key"),Wt=m(X,{children:[m("style",{id:"media-item",children:`
:host {
	 ${this.state.forceRedraw?`/* ${this.state.forceRedraw} */`:""}
	${!S&&G&&G!==""?"cursor: pointer;":""}
	display: inline-flex;
	vertical-align: bottom;
	flex-direction: column; 
	position: relative;

	width: var(--resize-parent-width, 100%);
	max-width: ${Ee||"100%"};
	${qe?`--custom-fit-height: ${qe};`:""}
	transform-origin: center center;
	margin: 0;
	padding: 0;
	z-index: var(--z-index, initial);    
}
 :host, * {
	box-sizing: border-box;
}
a {
	cursor: inherit;
}

${!S&&mt?`[part*="media"]:active {
    opacity: 0.7;
}`:""}

${!S&&G?`:host(:active) {
    opacity: 0.1;
}`:""}

figure {
	flex-direction: column;
	position: relative;
	display: flex;
	width: 100%;
	margin: 0;
	padding: 0;
	z-index: 2;
}

::slotted(figcaption){
	-webkit-user-select: text;	
	user-select: text;
	width: 100%;
}

:host([image-fit="fit"]) {
	--object-fit: contain;
}
:host([image-fit="fill"]) {
	--object-fit: cover;
}
:host([image-fit="stretch"]) {
	--object-fit: fill;
}

[part*="media"],
[part*="video"],
[part*="poster"] {
	object-fit: var(--object-fit, cover);
}

[part*="media"]:-webkit-full-screen,
[part*="media"]:fullscreen,
[part*="video"]:-webkit-full-screen,
[part*="video"]:fullscreen {
	object-fit: contain!important;
}


.sizing-frame {
	display: block;
	width: 100%;
	flex-grow: 1;
	height: 0;
	padding-bottom: var(--frame-padding, ${Fe});
	position: relative;
}

.frame {
	display:contents;
}

/* for images and custom media */
::slotted([slot="custom-media"]),
[part*="media"] {
	object-position: center center;
	display: block;
	margin: 0;
	width: 100%;
	min-width: 100%;
	min-height: 100%;
	height: 100%;
	position: absolute;
	overflow: clip;
	overflow-clip-margin: content-box;
	inset: 0;
}

/*
	for URL fileType and default setup for iframe-videos
*/
iframe {
	opacity: 0;
	pointer-events: ${!S&&!this.props.href&&!mt?"auto":"none"};
}

iframe.loaded {
	opacity: 1;
}

/* enable proper padding cropping for videos, in most scenarios */
.video-player-crop {
	all: inherit;
	filter: unset;
	will-change: unset;
	width: unset;
	height: unset;
	padding: 0;
	border-left-width: ${o.leftPad+o.leftBorder}px;
	border-right-width: ${o.rightPad+o.rightBorder}px;
	border-top-width: ${o.topPad+o.topBorder}px;
	border-bottom-width: ${o.bottomPad+o.bottomBorder}px;
	top: ${-o.topBorder}px;
	left: ${-o.leftBorder}px;
	right: ${-o.rightBorder}px;
	bottom: ${-o.bottomBorder}px;

	min-width: unset;
	min-height: unset;

	margin: auto;
	border-color: transparent;
	background: transparent;
}

/* for video filetype */
[part*="video"], [part*="poster"] {
	object-position: 50% 50%;	
	display: block;
	margin: 0;
	width: 100%;
	height: 100%;
	position: absolute;
	inset: 0;
}

[part*="video"] iframe[part*="iframe"] {
	opacity: 1;
}

[part*="poster"] {
	object-fit: cover;
	z-index: 2;
	opacity: 0;
}
${e["browser-default"]?`[part*="poster-playing"],
[part*="poster-paused"]{
	pointer-events:none;
}
`:""}	
[part*="poster-stopped"]{
	opacity: 1;
}
${u?`[part*="media"] {
	opacity: 0;
}`:""}

${S?`
::slotted(video[slot="custom-media"]),
::slotted(iframe[slot="custom-media"]){
	pointer-events:none;
}

[part*="media"] iframe {
	pointer-events:none!important;
}

`:`
[part*="media"].image-zoom {
	cursor: -webkit-zoom-in;
	cursor: -moz-zoom-in;
	cursor: zoom-in;
}	
`}

${E.isEditing?`
:host, * {
	-webkit-user-select: text;
	user-select: text;	
}
`:""}

				`}),m(In,{scrollContext:this.props.scrollContext,uses:ct,visibility:s,onLazyLoadChange:this.onlazyLoadChange,adminMode:S,customElementMode:!0,baseNode:O,children:m("figure",{draggable:this.props.adminMode?"true":null,part:"figure",ref:this.figureRef,children:[m("div",{part:"frame",className:"frame",children:this.props.href!==void 0?m("a",{ref:this.sizingFrameRef,className:"sizing-frame",part:"link sizing-frame",href:this.props.href,rel:this.props.rel,target:this.props.target,"data-tags":this.props["data-tags"],children:St}):m("div",{ref:this.sizingFrameRef,className:"sizing-frame",part:"sizing-frame",children:St})}),m("slot",{name:"caption"})]})},"media-host"),E.isEditing&&S&&Tt(WN,{...this.props,zoomTemporarilyDisabled:this.state.zoomTemporarilyDisabled,fileType:Be,limitBy:se,width:I,height:F,rotation:p||0,scale:U,scrollContext:this.props.scrollContext,key:`media-item-editor-${this.uid}`,baseNode:O,nativeMediaDimensions:this.state.nativeMediaDimensions,figCaptionElement:this.figCaptionRef.current,sizingFrameElement:this.sizingFrameRef.current,figureElement:this.figureRef.current,mediaElement:this.mediaRef.current,size:this.props.baseNode._size,uid:this.uid})]},"media-item-fragment");return je(Wt,O.shadowRoot)}onViewportIntersectionChange=e=>{this.state.viewportIntersection?.position!==e.position?this.setState({isVisible:e.position==="inside",viewportIntersection:e}):(this.state.viewportIntersection.hasLayout!==e.hasLayout||this.state.viewportIntersection.visibility!==e.visibility)&&this.setState({viewportIntersection:e})};onLazyloadIntersectionChange=e=>{let i=e.position==="inside";this.state.isLazyLoadable!==i&&this.setState({isLazyLoadable:i})};onMediaSlotChange=e=>{let i=e.target.assignedNodes();i[0]?(this.setState({nativeMediaDimensions:{width:parseFloat(i[0].getAttribute("width"))||null,height:parseFloat(i[0].getAttribute("height"))||null},slottedMediaNode:i[0]}),this.mediaRef.current=i[0]):this.setState({nativeMediaDimensions:{width:null,height:null},slottedMediaNode:null})};bindMediaListeners=e=>{if(!e)return;let i=parseFloat(e.getAttribute("width"))||null,r=parseFloat(e.getAttribute("height"))||null;i&&r&&this.state.nativeMediaDimensions.width!==i&&this.state.nativeMediaDimensions.height!==r&&this.setState({nativeMediaDimensions:{width:i,height:r}}),ti(e,"elementResize",this.onMediaResize),fp.observe(e)};unbindMediaListeners=e=>{e&&(this.setState({nativeMediaDimensions:{width:null,height:null}}),si(e,"elementResize",this.onMediaResize),fp.unobserve(e))};componentDidMount(){if(ne)return;this.props.adminMode||(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable"),this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked"));let e=this.props["dynamic-src"]||this.props.modelSrc||this.props.src;this.props.hash==="placeholder"&&!e&&!this.props.baseNode.hasAttribute("hash")&&this.onLoad(),ti(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),ti(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),ti(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.addEventListener("click",this.handleClick),this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current,fp.observe(this.props.baseNode)}componentWillUnmount(){ne||(cancelAnimationFrame(this.itemResizeAfterModelChange),si(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),si(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),si(this.props.baseNode,"elementResize",this.onResize),this.props.baseNode.removeEventListener("dragstart",this.onDragStart),this.props.baseNode.removeEventListener("click",this.handleClick),fp.unobserve(this.props.baseNode),this.unbindMediaListeners(this.mediaRef.current))}componentDidUpdate(e,i){(this.props.hash!==e.hash||this.props.src!==e.src)&&this.setState({nativeMediaDimensions:{width:null,height:null}});let r=this.getFileType();(r.startsWith("vimeo")||r.startsWith("youtube"))&&(e.src!==this.props.src||e.autoplay!==this.props.autoplay||e["browser-default"]!==this.props["browser-default"]||e.loop!==this.props.loop||e.muted!==this.props.muted)&&this.setState({loaded:!1}),(this.props.imageSettings.image_zoom!==e.imageSettings.image_zoom||this.props["disable-zoom"]!==e["disable-zoom"]||this.state.zoomTemporarilyDisabled!==i.zoomTemporarilyDisabled)&&(this.isZoomable()?this.props.baseNode.classList.add("zoomable"):this.props.baseNode.classList.remove("zoomable")),this.props.href!==e.href&&(this.props.href!==void 0?this.props.baseNode.classList.add("linked"):this.props.baseNode.classList.remove("linked")),this.props.itemLoad!==e.itemLoad&&this.props.itemLoad&&this.state.loaded&&this.onLoad(),this.props.itemResize&&!(this.props.baseNode.slot&&!this.props.baseNode.assignedSlot)&&(this.props.model&&e.model&&e.model.hash!==this.props.model.hash||this.props.width!==e.width||this.props.height!==e.height||this.state.nativeMediaDimensions.width!==i.nativeMediaDimensions.width||this.state.nativeMediaDimensions.height!==i.nativeMediaDimensions.height||this.state.dimensions.width!=i.dimensions.width||this.state.dimensions.height!=i.dimensions.height||this.state.dimensions.padSize!=i.dimensions.padSize||this.state.mediaDimensions.padSize!=i.mediaDimensions.padSize)&&this.props.itemResize(this.props.baseNode._size,this.props.baseNode),e.hash!=="placeholder"&&this.props.hash==="placeholder"&&this.onLoad(),this.lastMediaRef.current!==this.mediaRef.current&&(this.unbindMediaListeners(this.lastMediaRef.current),this.bindMediaListeners(this.mediaRef.current),this.lastMediaRef.current=this.mediaRef.current)}onSetZoomDisabled=e=>{};onResize=e=>{this.setState({dimensions:{...e}})};onMediaResize=e=>{(e.width!==this.state.mediaDimensions.width||e.horizPadSize!==this.state.mediaDimensions.horizPadSize||e.vertPadSize!==this.state.mediaDimensions.vertPadSize||e.height!==this.state.mediaDimensions.height)&&this.setState({mediaDimensions:{...e}})};onDragStart=e=>{typeof this.props.itemDragStart=="function"&&this.props.itemDragStart(e);let i=this.props.baseNode.querySelector("figcaption");this.props.baseNode.contains(e.target)&&(i&&!i.contains(e.target)||!i)&&this.props.adminMode&&this.props.pageInfo.isEditing&&e.dataTransfer.setData("media-drag","true")};onLoad=e=>{this.setState(i=>e&&(e.width!==i.nativeMediaDimensions.width||e.height!==i.nativeMediaDimensions.height)?{nativeMediaDimensions:{...e},loaded:!0}:{loaded:!0},()=>{this.onloadCallback&&this.onloadCallback(this.props.baseNode),this.props.itemLoad&&this.props.itemLoad(this.props.baseNode)})}};Ag.defaultProps={scale:void 0,"limit-by":void 0,"force-quick-view":!1,"disable-zoom":!1,"disable-scroll-animation":!1,width:void 0,height:void 0,hash:"placeholder",src:void 0,rotation:0,model:null,"image-fit":"fill","play-on":"click",autoplay:!1,muted:!1,loop:!1,"browser-default":!1,"playback-rate":1};Ale=Nt(De((t,e)=>{let i=e["dynamic-hash"]||e.hash||null,r=i?Je.getMediaByHash(t)[i]:null;e.model&&(r=e.model);let n=e.poster||null,o=null,s;return e.posterModel?o=e.posterModel:n&&!n.includes?.(".")&&(o=Je.getMediaByHash(t)[n]||null),{posterModel:o,model:r,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,imageSettings:{limit_by:"width",scale:"100%",...t.siteDesign.images}}},Tle)(Ag)),Mle=["itemResize","itemLoad","itemDragStart","model","dynamic-hash","dynamic-filetype","dynamic-src","rotation","limit-by","disable-zoom","disable-scroll-animation","scale","hash","src","force-visible","alt","href","rel","target","tag-text","autoplay","muted","loop","poster","play","browser-default","playback-rate","image-fit","width","height"];Zt(Ale,"media-item",Mle)});var kle,ju,Mg=T(()=>{kle=ce(ve(),1);Re();ju=(t,e,i)=>{let r=(ne?1:window.devicePixelRatio)>1,n=i/t-e*((t-1)/t);n=Math.max(n,1);let o=[];n*t+e*(t-1)>i+.001&&(e=Math.floor(i/(t-1)-n));let u=r?Math.round(e*2)/2:Math.round(e);for(let c=0;c<t;c++){let d={left:n*c+e*c,right:n*c+e*c+n};c<t-1?d.right=r?Math.round(d.right*2)/2:Math.round(d.right):d.right=i,c>0&&(d.left=o[c-1].right+u),o.push(d)}return{columnAndGutterMap:o,columnWidth:n,gutterPixelWidth:u,halfPixels:r}}});var Eke,o2,GN,KN=T(()=>{Pe();Eke=ce(ve(),1);Mt();Hu();W();o2=class extends ae{constructor(e){super(e)}render(e,i){let{galleryInstance:r,"vertical-align":n}=e,o=!!e?.["blog-gallery"],s=o?!0:!!this.props.disableResize,u=o?!0:!!e?.["disable-button"];return m(Po,{...e,disabledFigureOptions:["scale"],gallerySpecificAttributes:this.props.gallerySpecificAttributes,mediaItemEditorInfo:{disableResize:s,disableButton:u,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},galleryInstance:r,onCleanUp:(c,d,p,g,v,b)=>{p.forEach(S=>{S.getAttribute("grid-vertical-align")===n&&S.removeAttribute("grid-vertical-align"),S.getAttribute("grid-span")===1&&S.removeAttribute("grid-span")}),d.forEach(S=>{S&&(S.classList.remove("last-column"),S.classList.remove("last-row"),S.classList.remove("orphaned-item"))}),this.props.onCleanUp&&this.props.onCleanUp(c,d,p,g,v,b)}})}spanResize=(e,i)=>{let r=this.convertWidthToSpans(i);return{...i,displayScale:r>1?r+" columns":r+" column"}};afterScaleChange=(e,i)=>{let r=this.convertWidthToSpans(i);r===1?e.removeAttribute("grid-span"):e.setAttribute("grid-span",r),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:i}=this.props,r=i.findIndex((n,o)=>{let s=i[o+1]?.left||9e9,u=n.right-n.left;return e.width>=n.left+u*.5&&e.width<=s+u*.5})+1;return Math.max(1,r)}},GN=o2});var kg,Tn,Rg,a2,Ng=T(()=>{Pe();Se();ht();Za();Uu();Re();Mg();Xa();Ni();Oi();KN();kg=ce(ve(),1);Wi();W();Tn={name:"grid",displayName:"Grid",tagName:"GALLERY-GRID",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Spans",name:"grid-span",type:"scrubber",value:1,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Vertical Align",name:"grid-vertical-align",type:"radio",value:"inherit",inheritsFrom:"vertical-align",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]}],options:[{labelName:"Columns",name:"columns",type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}]},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}]}]};Tn.mediaItemDefaults=at(Tn.mediaItemOptions);Tn.defaults=at(Tn.options);Tn.mobileDefaults=at(Tn.mobileOptions);Rg=class extends ae{constructor(e){super(e),this.state={isMobile:Qe.data.mobile.active,sizeIncrement:0,elWidth:1e3,gutterWidth:0,gutterHeight:0,hasSizes:!1,renderLimit:250},this.uid=kg.default.uniqueId(),this.paginationWatcherRef=me(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let i=this.state.renderLimit+100;if(this.setState({renderLimit:i}),i>=this.getMediaItems().length)break;await new Promise(r=>setTimeout(r,250))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,i){let{adminMode:r,baseNode:n,pageInfo:o}=e,{isMobile:s,gutterWidth:u,gutterHeight:c,hasSizes:d}=i,{elWidth:p}=i;d||(p=this.props.baseNode.offsetWidth);let g=this.state.isMobile&&this.props["mobile-vertical-align"]!==void 0?this.props["mobile-vertical-align"]:this.props["vertical-align"];this.props.verticalAlign&&(g=this.props.verticalAlign);let v=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;v=Math.max(1,parseInt(v))||1;let S=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),_=(S.length>1,S[0]);_=Jt(_,"rem"),_[1]=="rem"&&s&&(_=["","calc( var(--mobile-padding-offset, 1) * "+_.join("")+" )"]);let E=S.length>1?S[1]:S[0];E=Jt(E,"rem"),E[1]=="rem"&&s&&(E=["","calc( var(--mobile-padding-offset, 1) * "+E.join("")+" )"]);let{columnAndGutterMap:I,columnWidth:F,gutterPixelWidth:O}=ju(v,u,p),L=this.getMediaItems(),z=[],G=0,H=0,N=s&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns);L.forEach((U,se)=>{if(se>this.state.renderLimit)return;z[G]||(z[G]=[]);let re=N?1:parseInt(U.getAttribute("grid-span"))||1;H%v+re>v&&(re=v-H%v);let Q=U.getAttribute("grid-vertical-align")||null;z[G].push({index:se,spans:re,hasOrphans:!1,verticalAlign:Q,el:U}),H=H+re,H%v==0&&G++,H%v!=0&&se==L.length-1&&(z[z.length-1].hasOrphans=!0)});let J=L.length%v,oe=[],te=[];z.forEach((U,se)=>{let re=kg.default.sumBy(U,de=>de.spans),Q=0,le=[],j=0,B=0,Y=U.map((de,fe)=>{let be=de.spans,Me=de.el._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0,horizPadSize:0,vertPadSize:0},mediaItemSize:{width:0,height:0,padSize:0,vertPadSize:0,horizPadSize:0}},Ee=Q,Fe=Q+be+-1,qe=F*be+u*(be-1),nt=(qe+-Me.mediaItemSize.horizPadSize+-Me.mediaSize.horizPadSize)/Me.width||1,$e=Math.round(Me.height*nt+Me.mediaSize.vertPadSize)||300;qe=I[Fe].right-I[Ee].left,Q+=be,j=Math.max(j,$e);let ot={},Ae=` --grid-width: ${qe}px;`;return ot.orphanedItem=U.hasOrphans,fe===U.length-1?(ot.lastColumn=!0,de.index<L.length-1&&(Ae=` --grid-width: ${p-B}px;`),B=0):(fe==0&&(ot.firstColumn=!0),B=B+qe+u),se==z.length-1&&(ot.lastRow=!0),ot.gridItemPixelHeight=$e,ot.gridItemPixelWidth=qe,ot.gridWidthStyle=Ae,ot});var ie=kg.default.maxBy(Y,de=>de.gridItemPixelHeight);j=ie.gridItemPixelHeight,U.forEach((de,fe)=>{let be=Y[fe],Me=0,Ee=g;switch(de.verticalAlign){case"top":case"center":case"bottom":Ee=de.verticalAlign;break}switch(Ee){case"top":Me=0;break;case"center":Me=(j-be.gridItemPixelHeight)*.5;break;case"bottom":Me=j-be.gridItemPixelHeight;break}let Fe=`margin-top: ${Me}px; --frame-padding: ${be.gridItemPixelHeight}px; ${be.gridWidthStyle}`,qe=se==0?" first-row":be.lastRow?" last-row":"",nt=be.firstColumn?" first-in-row":be.lastColumn?" last-in-row":"",$e="row-"+se+"-"+de.index+qe+nt;oe.push({slot:$e,itemResize:this.onItemResize,"limit-by":null}),te.push({slot:$e,style:Fe,itemStatuses:be})})}),L.forEach((U,se)=>{let re=oe[se]||{slot:null},Q=U._props||{};Io(U,{...Q,...re},Q,!1,!1)});let K=[];return z.forEach((U,se)=>{K.push(m("div",{part:se==0?"first-row":se===z.length-1?"last-row":"row",className:`row ${U.hasOrphans?"has-orphans":""}`,children:U.map(re=>m("slot",{name:oe[re.index].slot},"slot-"+se+"-"+re.index))},"row-"+se))}),m(X,{children:[this.props.children,je(m(X,{children:[m("style",{children:`
						:host {
							display: block;
							width: var(--resize-parent-width, 100%);
							max-width: 100%;
							position: relative;							
			 				--grid-gutter-width: ${O}px;
							--grid-gutter-height: ${c}px;
							--grid-columns: ${v};
							margin-top: calc(var(--gutter-expand, 0) * ${c}px );	
						}				

						* {
							box-sizing: border-box;
						}

						${te.map((U,se)=>`::slotted(media-item[slot="${U.slot}"]) {
								${U.style}
								${U.itemStatuses.lastColumn&&!U.itemStatuses.orphanedItem?"flex-grow: 1; --object-fit: fill;":""}
								${U.itemStatuses.lastColumn?"":"margin-right: var(--grid-gutter-width);"}
								${U.itemStatuses.lastRow?"":"margin-bottom: var(--grid-gutter-height);"}
							} `).join("")}
								

						.row {
							max-width: ${p}px;
						    align-items: flex-start;
						    justify-content: flex-start;
							position: relative;
							display: flex;
							flex-direction: row;
							flex-wrap: nowrap;					
							width: 100%;
							clear: both;
						}				
		
						.row.has-orphans {
						    justify-content: flex-start;
						}

						${s&&e["mobile-horizontal-align"]?`
							:host([mobile-horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([mobile-horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([mobile-horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`:`
							:host([horizontal-align="left"]) .row.has-orphans {
								justify-content: flex-start;
							}
			
							:host([horizontal-align="center"]) .row.has-orphans {
								justify-content: center;
							}
			
							:host([horizontal-align="right"]) .row.has-orphans {
								justify-content: flex-end;
							}
						`}
		
						:host([hidden]) {
							display: none;
						}
		
						::slotted(media-item) {
							${r?"pointer-events: auto;":""}
							position: relative;
						    display: flex;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: var(--grid-width);
						    width: var(--grid-width);
						}
		

		
					`}),m(Br,{values:{elWidth:"100%",gutterWidth:_.join(""),gutterHeight:E.join("")},onResize:this.onResize}),r&&o.isEditing&&!ne&&m(GN,{...e,disableResize:N,gallerySpecificAttributes:["grid-span","grid-vertical-align"],galleryInstance:n,galleryComponent:this,columnAndGutterMap:I}),K,m("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){Qe.on("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current)}componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))};onResize=(e,i)=>{this.setState(r=>{let n={...r};return n[e]=i,n.hasSizes=!0,n})}};Rg.defaultProps={"show-tags":!0,"show-title":!0,columns:Tn.defaults.columns.value,gutter:Tn.defaults.gutter.value,"vertical-align":Tn.defaults["vertical-align"].value,"horizontal-align":Tn.defaults["horizontal-align"].value};a2=Nt(To(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Rg)));Zt(a2,"gallery-grid",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","columns","gutter","mobile-columns","mobile-gutter","vertical-align","horizontal-align","mobile-horizontal-align","mobile-vertical-align"])});var Yke,s2,YN,ZN=T(()=>{Pe();Yke=ce(ve(),1);Mt();Hu();W();s2=class extends ae{constructor(e){super(e)}render(e,i){let{galleryInstance:r,gutterWidth:n,elWidth:o,elHeight:s,disabledAttributes:u}=e;return m(Po,{...e,dragIndicationType:"columns",gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:r,mediaItemEditorInfo:{disableResize:this.props.disableResize,disableButton:!1,afterScaleChange:this.afterScaleChange,beforeScaleChange:this.spanResize,whileScaleChange:this.spanResize},disabledAttributes:u})}spanResize=(e,i)=>{let r=this.convertWidthToSpans(i);return{...i,displayScale:r>1?r+" columns":r+" column"}};afterScaleChange=(e,i)=>{let r=this.convertWidthToSpans(i);r===1?e.removeAttribute("columnized-span"):e.setAttribute("columnized-span",r),this.props.galleryComponent.onItemResize()};convertWidthToSpans=e=>{let{columnAndGutterMap:i}=this.props,r=i.findIndex((n,o)=>{let s=i[o+1]?.left||9e9,u=n.right-n.left;return e.width>=n.left+u*.5&&e.width<=s+u*.5})+1;return Math.max(1,r)}},YN=s2});var l2,Mo,Og,Rle,u2=T(()=>{Pe();Se();ht();Za();Re();Mg();Xa();Uu();Ni();ZN();Oi();l2=ce(ve(),1);Wi();W();Mo={name:"columnized",displayName:"Columnized",tagName:"GALLERY-COLUMNIZED",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"Column Span",name:"columnized-span",type:"scrubber",value:1,min:1,max:11,step:1,numberOnlyMode:!0}],options:[{labelName:"Columns",name:"columns",type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}],mobileOptions:[{labelName:"Columns",name:"mobile-columns",type:"scrubber",value:3,min:1,max:12,step:1,numberOnlyMode:!0},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]}]};Mo.mediaItemDefaults=at(Mo.mediaItemOptions);Mo.defaults=at(Mo.options);Mo.mobileDefaults=at(Mo.mobileOptions);Og=class extends ae{constructor(e){super(e),this.state={elWidth:1e3,gutterWidth:0,gutterHeight:0,isMobile:Qe.data.mobile.active,sizeIncrement:0,hasSizes:!1}}render(e,i){let{gutterWidth:r,gutterHeight:n,isMobile:o,hasSizes:s}=i,{baseNode:u,adminMode:c,pageInfo:d}=e,{elWidth:p}=i;s||(p=this.props.baseNode.offsetWidth);let v=(this.state.isMobile&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter).split(" "),b=(v.length>1,v[0]);b.includes("rem")&&o&&(b="calc( var(--mobile-padding-offset, 1) * "+b+" )");let S=v.length>1?v[1]:v[0];S.includes("rem")&&o&&(S="calc( var(--mobile-padding-offset, 1) * "+S+" )");let _=this.state.isMobile&&this.props["mobile-columns"]!==void 0?this.props["mobile-columns"]:this.props.columns;_=Math.max(1,parseInt(_))||1;let{columnAndGutterMap:E,columnWidth:I,gutterPixelWidth:F,halfPixels:O}=ju(_,r,p),L=Array.from(u.children).filter(Q=>Q.tagName=="MEDIA-ITEM"),z=[],G=[],H=[],N=[],J=0;J=(p-(_-1)*r)/_;for(let Q=0;Q<Math.min(L.length,_);Q++)z[Q]=[],N[Q]=[];for(let Q=0;Q<_;Q++)G[Q]={height:0,marginTop:-r,index:Q};let oe=!0,te=0,K=0;for(te=0;te<12;){let Q=parseInt(L[K]?.getAttribute("columnized-span"))||1;if(te=te+Q,te>=_){te=_,oe=!1;break}K++}let U=[],se=o&&!isNaN(parseInt(this.props["mobile-columns"]))&&parseInt(this.props["mobile-columns"])!==parseInt(this.props.columns),re=[];L.forEach((Q,le)=>{let j=se?1:Math.min(parseInt(Q.getAttribute("columnized-span"))||1,_);j=Math.min(j,L.length);let B=-1,Y=l2.default.minBy(G,Be=>{B++;let mt=G.slice(B+1,B+j).map(St=>St.height);if(mt.length+1<j)return 9e9;let Lt=Be.height==0?0:Math.abs((B+(B%2==0?.25:.75))*2-_);return l2.default.mean([Be.height,...mt])+Lt}),ie=`column-${Y.index}-slot-${le}`,de=Y.height;Y.index+j>_&&(j=_-Y.index),H[Y.index]=le;let fe=0,be=null,Me=I*j+r*(j-1),Ee=Q._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};fe=Ee.mediaItemSize.height+Ee.mediaItemSize.padSize;let Fe=Y.index,qe=Y.index+j+-1;Me=E[qe].right-E[Fe].left;let nt=(Me+-Ee.mediaItemSize.padSize+-Ee.mediaSize.padSize)/Ee.width||1;be=O?Math.round((Ee.height*nt+Ee.mediaSize.padSize)*2)/2||NaN:Math.round(Ee.height*nt+Ee.mediaSize.padSize)||NaN,Number.isNaN(be)&&(be=300);let $e=Y,ot=Y.height;for(let Be=1;Be<j;Be++){let mt=Y.index+Be;G[mt].height>=ot&&($e=G[mt],ot=G[mt].height)}let Ae=$e.height,st=$e.height+Ee.mediaItemSize.height+Ee.mediaItemSize.padSize+r;for(let Be=0;Be<j;Be++){let mt=Y.index+Be;Be===0?(G[mt].marginTop=G[mt].marginTop+(Ae-G[mt].height),G[mt].height=st):(G[mt].marginTop=G[mt].marginTop+(st-G[mt].height),G[mt].height=st)}let ct={},ft=G[Y.index].marginTop;G[Y.index].marginTop=0,ct.styleString="",ft!==n&&(ct.styleString+=` --column-gutter-height: ${ft+n}px;`),j>1&&(ct.styleString+=` --resize-parent-width:${Me}px; min-width: ${Me}px;`),be!==null&&(ct.styleString+=` --frame-padding: ${be}px;`),de===0&&(ct.firstColumnItem=!0),ct.slotName=ie,re.push(ct),z[Y.index]||(z[Y.index]=[]),z[Y.index].push(m("slot",{name:ie},ie)),U.push({slot:ie})});for(let Q=0;Q<te;Q++)z[Q]||(z[Q]=[]);return H.forEach(Q=>{re[Q].lastInColumn=!0}),L.forEach((Q,le)=>{let j=U[le]||{};j.itemResize=this.onItemResize;let B=Q._props||{};Io(Q,{...B,...j},B,!1,!1)}),m(X,{children:[this.props.children,je(m(X,{children:[m("style",{children:`
				:host {
					width: var(--resize-parent-width, 100%);
					max-width: 100%;
					${oe?"display: block;":`display: flex;
					    flex-direction: row;
					    flex-wrap: wrap;
					    align-content: flex-start;
					    justify-content: center;`}
				    position: relative;					
					--column-gutter-width: ${F}px;
					--column-gutter-height: ${n}px;
					margin-top: calc(var(--gutter-expand, 0) * ${n}px);
				}

				${re.map((Q,le)=>`::slotted(media-item[slot="${Q.slotName}"]){
						margin-top: ${Q.firstColumnItem?"0;":"var(--column-gutter-height, 0px);"}
						${Q.lastInColumn?`
						    flex-grow: 1;
						    flex-shrink: 1;
						    flex-basis: ${_===1?"100%":0};						
						`:""}
						${Q.styleString}
					} `).join("")}

				* {
					box-sizing: border-box;
				}	

				:host[hidden] {
					display:none;
				}

				:host .columns-column {
					${oe?`
						display: inline-flex;
						vertical-align: top;
					`:`
					    max-width: ${Math.ceil(p/_)}px;
					`}
					min-height: 10px;			
					flex-grow: 0;
					flex-shrink: 0;
				}

				:host .columns-column.last-column {
				    flex-grow: 1;
				    flex-shrink: 1;
				    flex-basis: ${_===1?"100%":0};
				}
				

				:host .columns-column:not(:last-child){
				    margin-right: var(--column-gutter-width, 0px);
				}

				::slotted(media-item) {
					position: relative;
				    width: 100%;
				    max-width: none;
				    display: flex;
				}




				`}),m(Br,{values:{gutterWidth:b,gutterHeight:S,elWidth:"100%"},onResize:this.onResize}),c&&d.isEditing&&!ne&&m(YN,{...this.props,disableResize:se,isMobile:o,gallerySpecificAttributes:["columnized-span"],columnAndGutterMap:E,galleryInstance:u,galleryComponent:this}),z.map((Q,le)=>{let j=E[le];return m("div",{className:`columns-column${le===_-1?" last-column":""}`,style:{width:j.right-j.left+"px"},children:Q},`columns-column-${le}`)})]}),this.props.baseNode.shadowRoot)]})}componentDidMount(){Qe.on("mobile-change",this.onMobileChange)}componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange)}onMobileChange=e=>{this.setState({isMobile:e})};onResize=(e,i)=>{this.setState(r=>{let n={...r};return n[e]=i,n.hasSizes=!0,n})};onItemResize=(e,i)=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))}};Og.defaultProps={"show-tags":!0,"show-title":!0,columns:Mo.defaults.columns.value,gutter:Mo.defaults.gutter.value};Rle=Nt(To(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Og)));Zt(Rle,"gallery-columnized",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","columns","gutter","mobile-columns","mobile-gutter"],{renderIntoShadow:!0})});var jr,c2,XN,JN=T(()=>{Pe();jr=ce(ve(),1);Hu();Di();Mt();W();c2=class extends ae{constructor(e){super(e),this.state={pauseRealignment:!1,waitingForRealignment:!1,currentZoom:100,currentHorizontalShift:0,transform:{x:0,y:0},previewShifts:[],previewingTransform:!1,dragStartPosition:{x:0,y:0},scrollDelta:{x:0,y:0},dragDelta:{x:0,y:0},initialPosition:{x:0,y:0},ghostRect:{significantShift:!1,width:0,height:0,x:0,y:0},minHeight:0,overrideHeight:!1,dragSrcIndex:-1,UIWindow:!1,draggedItemIndex:-1,isDragging:!1,showDropTarget:!1,breakOutOfGallery:!1,draggedMediaItem:null,timer:0},this.draggedItem=me(),this.dragGhostRef=me(),this.lastPosition=null,this.debouncedCommitTransform=jr.default.debounce(this.commitTransform,500)}render(e,i){let{showDropTarget:r,draggedMediaItem:n,isDragging:o,dragDelta:s,draggedItemIndex:u,initialPosition:c,dragSrcIndex:d,ghostRect:p}=i,{galleryInstance:g}=e;return m(X,{children:[m("style",{id:"freeform-editor",children:[d>-1&&o?`
			::slotted(media-item:nth-child(${d+1})){
				pointer-events:none;
				opacity: 0;
			}

			.drag-ghost {
				position: absolute;
				top: 0;
				left: 0;
				z-index: 1001;	
				pointer-events: none;
				outline: 1px solid #ccc;
			}

			.drag-ghost.snapping {
				outline: 1px solid var(--baseColor-accent);
			}

			.drag-ghost img {
				position: absolute;
				inset: 0;
				width: 100%;
				height: 100%;
				opacity: 0.5;
				transition: none;
				object-fit: cover;
				transform:translateZ(0);
			}

			`:`

			#freeform-holder {
				transform: scale(${this.state.currentZoom}%) translateX(${this.state.currentHorizontalShift}%);
				transform-origin: center top;
			}

			`,this.state.overrideHeight?`
				:host {
					min-height: ${this.state.minHeight}px;
				}
			`:"",this.state.previewingTransform?this.state.previewShifts.map(v=>`::slotted(media-item[slot="${v.slot}"]){
						--base-translate: translate(${v.x}px , ${v.y}px)!important;
					} `):""]}),m(Po,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,galleryInstance:g,mediaItemEditorInfo:{disableResize:!1,disableButton:!1,afterScaleChange:this.afterScaleChange,whileScaleChange:this.whileScaling,beforeScaleChange:this.beforeScaleChange},onScrollWhileHovered:this.onScrollWhileHovered,onUIWindowSet:this.getUIWindow,onUIWindowRelease:this.releaseUIWindow,disableDragOver:!0,onCleanUp:this.onCleanUp}),m("div",{className:`drag-ghost ${p.significantShift?"snapping":""}`,style:{display:o&&p.width>0&&p.height>0?"block":"none",transform:`translate3d(${p.x}px, ${p.y}px, 1001px)`,width:p.width+"px",height:p.height+"px"},dangerouslySetInnerHTML:{__html:""},ref:this.dragGhostRef})]})}onScrollWhileHovered=e=>{this.setState(i=>i.isDragging?{scrollDelta:{x:0,y:i.scrollDelta.y+e}}:null)};getUIWindow=e=>{this.setState({UIWindow:e})};releaseUIWindow=e=>{this.setState({UIWindow:!1})};beforeScaleChange=(e,i)=>{let r=e.hasAttribute("freeform-scale")?e.getAttribute("freeform-scale"):20;return{...i,scaleArray:[parseFloat(r),"%"],scale:r+""}};whileScaling=(e,i)=>{let{magneticSnap:r,magneticSnapMargin:n}=this.props,o=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};if(!r)return i;let{width:s,height:u,scaleArray:c,overSize:d,atLimit:p,scale:g}=i,{elWidth:v,attributeMap:b}=this.props;v=v+-o.mediaItemSize.padSize+-o.mediaSize.padSize;let S=n*.01*v,_=s/u,E={width:!1,height:!1},I=Array.from(this.props.galleryInstance.children).filter(G=>G.tagName==="MEDIA-ITEM").indexOf(e),F=b[I],O={x1:F.xPx,y1:F.yPx,x2:F.xPx+s,y2:F.yPx+u},L={top:!0,left:!0,right:!1,bottom:!1},z=this.calculateMagnetism(e,O,L);return Math.abs(z.x)<Math.abs(z.y)&&Math.abs(z.x)>.1?E.width=!0:Math.abs(z.y)>.1&&(E.height=!0),Math.abs(z.x)>15&&(E.width=!1,z.x=0),Math.abs(z.y)>15&&(E.height=!1,z.y=0),E.width?(s=s+z.x,u=s/_):E.height&&(u=u+z.y,s=u*_),c[0]=s/v*100,{...i,scale:c.join(""),width:s,height:u,scaleArray:c,overSize:d,atLimit:p}};afterScaleChange=(e,i)=>{let{elWidth:r}=this.props,n=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};r=r+-n.mediaItemSize.padSize+-n.mediaSize.padSize;let o=(100*(i.width/r)).toFixed(2);e.setAttribute("limit-by","width"),e.setAttribute("scale",o),e.setAttribute("freeform-scale",o),this.props.galleryComponent.onItemResize()};onDragStart=(e,i,r)=>{let n=r.draggedMediaItems?.find(S=>this.props.galleryInstance.contains(S))||null;if(!n){this.setState({draggedItemIsInsideGallery:!1});return}let{attributeMap:o,elWidth:s}=this.props;this.draggedItem.current=n,Array.from(this.dragGhostRef.current?.children).forEach(S=>{S.remove()});let u=this.draggedItem.current?.shadowRoot?.querySelector('.sizing-frame [part="media"]'),c=Array.from(this.props.galleryInstance.children),d=c.indexOf(n),p=c.filter(S=>S.tagName==="MEDIA-ITEM").indexOf(n),g=o[p],v={x:g?.xPx??0,y:g?.yPx??0},b=this.props.galleryInstance.offsetHeight;this.setState(S=>(we.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),{dragDelta:{x:0,y:0},draggedItemIsInsideGallery:!0,initialPosition:v,dragStartPosition:{x:r.cursorPosition.x,y:r.cursorPosition.y},scrollDelta:{x:0,y:0},ghostRect:{x:0,y:0,width:0,height:0},dragSrcIndex:d,overrideHeight:!0,minHeight:b,isDragging:!0}))};onDragOver=(e,i,r)=>{if(this.ticking)return;this.ticking=!0,this.dragFrame=requestAnimationFrame(()=>{this.ticking=!1});let{elWidth:n,elHeight:o,mediaItems:s,magneticSnapMargin:u,magneticSnap:c,attributeArray:d}=this.props,p=r.draggedMediaItems.length>0,g=this.props.galleryInstance.contains(r.dropTarget),v=this.props.galleryInstance===r.customDropTarget;r.inAdmin||r.fromOutside||!(g||this.state.draggedItemIsInsideGallery)?we.globalDragEventController.releaseCustomDropTarget(this.props.galleryInstance):this.setState(b=>{if(we.globalDragEventController.setCustomDropTarget(this.props.galleryInstance),b.isDragging){let S={x:r.cursorPosition.x+-b.dragStartPosition.x+b.scrollDelta.x,y:r.cursorPosition.y+-b.dragStartPosition.y+b.scrollDelta.y},_={x:b.initialPosition.x+S.x,y:b.initialPosition.y+S.y};this.lastPosition||(this.lastPosition=_);let E={width:0,height:0,x1:_.x,x2:_.x,y1:_.y,y2:_.y};if(this.draggedItem.current){let L=this.draggedItem.current._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};E.x2=E.x1+L.mediaItemSize.padSize+L.mediaSize.padSize+L.mediaItemSize.width,E.y2=E.y1+L.mediaItemSize.padSize+L.mediaItemSize.height,E.width=L.mediaItemSize.padSize+L.mediaSize.padSize+L.mediaItemSize.width,E.height=L.mediaItemSize.padSize+L.mediaItemSize.height}let I=c?this.calculateMagnetism(this.draggedItem.current,E):{x:0,y:0},F=u*.01*n;Math.abs(I.x)>Math.max(F,6)?I.x=0:I.x!==0&&(_.x=(_.x+I.x)*.5+this.lastPosition.x*.5),Math.abs(I.y)>Math.max(F,6)?I.y=0:I.y!==0&&(_.y=(_.y+I.y)*.5+this.lastPosition.y*.5);let O=Math.abs(I.x)>1||Math.abs(I.y)>1;return this.lastPosition=_,{ghostRect:{significantShift:O,x:_.x,y:_.y,width:E.width,height:E.height},dragDelta:{x:S.x+I.x,y:S.y+I.y}}}else{let S=this.props.galleryInstance.getBoundingClientRect(),_={x:r.cursorPosition.x-S.left,y:r.cursorPosition.y-S.top};return this.draggedItem.current=r.draggedMediaItems[0],{dragDelta:{x:0,y:0},scrollDelta:{x:0,y:0},initialPosition:_,dragStartPosition:{x:r.cursorPosition.x,y:r.cursorPosition.y},ghostRect:{x:0,y:0,width:0,height:0},isDragging:!0,dragSrcIndex:-1}}})};calculateMagnetism=(e,i,r={top:!1,right:!1,bottom:!1,left:!1})=>{let{mediaItems:n,galleryInstance:o,elWidth:s,elHeight:u,magneticSnapMargin:c,attributeMap:d}=this.props,p=Math.round(c*.01*s*32)/32,g=[],v=[],b=[],S={};n.forEach((N,J)=>{let oe=d[J];if(N===e)return;b.length=0;let te=N._size;S.x1=oe.xPx,S.y1=oe.yPx,S.x2=te.mediaItemSize.width+te.mediaItemSize.padSize+S.x1,S.y2=te.mediaItemSize.height+te.mediaItemSize.padSize+S.y1,i.x1<S.x2+p*2&&i.x2>S.x1-p*2&&(S.x2<i.x1||S.x1>i.x2?(b.push(S.y1),b.push(S.y2)):(b.push(S.y1-p),b.push(S.y2+p)),b.forEach(K=>{g.indexOf(K)===-1&&g.push(K)})),b.length=0,i.y1<S.y2+p*2&&i.y2>S.y1-p*2&&(S.y2<i.y1||S.y1>i.y2?(b.push(S.x1),b.push(S.x2)):(b.push(S.x1-p),b.push(S.x2+p)),b.forEach(K=>{v.indexOf(K)===-1&&v.push(K)}))}),g.indexOf(0)===-1&&g.push(0),g.indexOf(u)===-1&&g.push(u),v.indexOf(0)===-1&&v.push(0),v.indexOf(s)===-1&&v.push(s);let _=jr.default.minBy(g,N=>Math.abs(N-i.y1)),E=jr.default.minBy(g,N=>Math.abs(N-i.y2)),I=_-i.y1,F=E-i.y2,O=jr.default.minBy(v,N=>Math.abs(N-i.x1)),L=jr.default.minBy(v,N=>Math.abs(N-i.x2)),z=O-i.x1,G=L-i.x2;return{x:jr.default.minBy([r.left?9e9:z,r.right?9e9:G],N=>N!==0?Math.abs(N):9e9),y:jr.default.minBy([r.top?9e9:I,r.bottom?9e9:F],N=>N!==0?Math.abs(N):9e9)}};onDragDrop=(e,i,r)=>{this.setState({isDragging:!1},()=>{this.lastPosition=null,!r.inAdmin&&r.customDropTarget===this.props.galleryInstance&&CargoEditor?.mutationManager&&(CargoEditor.rangy.getSelection().removeAllRanges(),Ue.deactivateHoverElement(this.props.galleryInstance),CargoEditor.mutationManager.execute(()=>{let n=Array.from(this.props.galleryInstance.children).filter(p=>p.tagName==="MEDIA-ITEM"),o=jr.default.sortBy(n,p=>parseFloat(p.getAttribute("freeform-y"))||0),s=(this.state.initialPosition.x+this.state.dragDelta.x)/this.props.elWidth*100,u=(this.state.initialPosition.y+this.state.dragDelta.y)/this.props.elWidth*100,c=this.draggedItem.current?.getAttribute("freeform-scale")||20,d=o.find(p=>parseFloat(p.getAttribute("freeform-y"))>u);r.draggedMediaItems.forEach((p,g)=>{p.setAttribute("freeform-z",n.length+200+g),p===this.draggedItem.current?(p.setAttribute("freeform-x",s),p.setAttribute("freeform-y",u)):(p.setAttribute("freeform-x",(s+g*5)%80),p.setAttribute("freeform-y",u+g*5)),p.hasAttribute("freeform-scale")||p.setAttribute("freeform-scale",c),this.props.galleryInstance.insertBefore(p,d),p.flushMutationQueue()}),this.stackZ(),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()}))}),this.unsetMinHeight()};unsetMinHeight=jr.default.debounce(()=>{this.setState({overrideHeight:!1})},100);onDragEnd=(e,i,r)=>{this.setState({isDragging:!1},()=>{this.lastPosition=null}),this.unsetMinHeight()};onCleanUp=(e,i,r,n)=>{CargoEditor&&Object.keys(CargoEditor).length>0&&(!jr.default.isEqual(e,i)||r.length>0)&&CargoEditor.mutationManager.execute(()=>{this.centerY(),this.alignDomWithY()}),this.props.onCleanUp&&this.props.onCleanUp(e,i,r,n)};stackZ=()=>{let e=Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM");jr.default.sortBy(e,r=>parseFloat(r.getAttribute("freeform-z"))||0).forEach((r,n)=>{r.setAttribute("freeform-z",n+1),r.flushMutationQueue()})};centerY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),i=jr.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),r=i[0]?.hasAttribute("freeform-y")?parseFloat(i[0].getAttribute("freeform-y")):0;r!==0&&i.forEach((n,o)=>{let s=n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):r;n.setAttribute("freeform-y",s-r),n.flushMutationQueue()})};alignDomWithY=()=>{let e=Array.from(this.props.galleryInstance.children).filter(n=>n.tagName==="MEDIA-ITEM"),i=jr.default.sortBy(e,n=>n.hasAttribute("freeform-y")?parseFloat(n.getAttribute("freeform-y")):0),r=e[0];i.forEach((n,o,s)=>{if(n!=r){for(let u=r,c=0;(u=u.nextElementSibling)&&c<s.length&&u!=n;c+=1);this.props.galleryInstance.insertBefore(n,r)}else r=n.nextElementSibling;n.flushMutationQueue()})};zoom=e=>{this.setState({currentZoom:e})};commitZoom=()=>{let{magneticSnapMargin:e,attributeMap:i}=this.props,{currentZoom:r}=this.state;Array.from(this.props.galleryInstance.children).filter(o=>o.tagName==="MEDIA-ITEM").forEach((o,s)=>{let u=i[s],c=u["freeform-x"],d=u["freeform-y"],p=u["freeform-scale"],g=Math.sqrt(Math.pow(c-50,2)+Math.pow(d,2)),v=Math.atan2(d,c-50);o.setAttribute("freeform-x",Math.cos(v)*g*(r*.01)+50),o.setAttribute("freeform-y",Math.sin(v)*g*(r*.01)+50*(r*.01)),o.setAttribute("freeform-scale",r*.01*p)});let n=Math.abs(r*.01*e);if(n>.1)for(;n>5;)n*=.5;this.centerY(),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":n}),this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()};previewTransform=(e,i)=>{let r=i.map(n=>{let o=(e.x+parseFloat(n.getAttribute("freeform-x")||0))*this.props.elWidth*.01,s=(e.y+parseFloat(n.getAttribute("freeform-y")||0))*this.props.elWidth*.01;return{slot:n.getAttribute("slot"),x:o,y:s}});this.setState({transform:e,previewShifts:r,previewingTransform:!0})};commitTransform=()=>{CargoEditor.mutationManager.execute(()=>{this.state.previewShifts.forEach(i=>{let r=this.props.galleryInstance.querySelector('[slot="'+i.slot+'"]');if(r){let n=parseFloat(r.getAttribute("freeform-x")||0),o=parseFloat(r.getAttribute("freeform-y")||0),s=Math.round((n+this.state.transform.x)*8)/8,u=Math.round((o+this.state.transform.y)*8)/8;r.setAttribute("freeform-x",s),r.setAttribute("freeform-y",u)}}),this.centerY(),this.alignDomWithY(),this.props.galleryInstance._editorInterface.flushMutationQueue()});let e=Array.from(this.props.galleryInstance.children).find(i=>i._editorInterface)?._editorInterface?.state?.UIWindow||null;e&&e.onChange({"shift-x":0,"shift-y":0}),this.setState({transform:{x:0,y:0},previewShifts:[],previewingTransform:!1},()=>{this.props.galleryInstance._editorInterface.flushMutationQueue(),this.props.galleryComponent.onItemResize()})};horizontalShift=e=>{this.setState({currentHorizontalShift:e})};commitHorizontalShift=()=>{let{currentHorizontalShift:e}=this.state,{attributeMap:i}=this.props;Array.from(this.props.galleryInstance.children).filter(r=>r.tagName==="MEDIA-ITEM").forEach((r,n)=>{let s=i[n]["freeform-x"];r.setAttribute("freeform-x",s+e)}),this.state.UIWindow?.onChange?.({horizontalShift:0}),this.props.galleryComponent.onItemResize()};fitToWidth=()=>{let{magneticSnapMargin:e,attributeMap:i}=this.props;CargoEditor.mutationManager.execute(()=>{let{elWidth:r,attributeMap:n}=this.props,o=Array.from(this.props.galleryInstance.children).filter(g=>g.tagName==="MEDIA-ITEM"),s=9e9,u=-9e9;o.forEach((g,v)=>{let b=n[v];s=Math.min(s,b["freeform-x"]),u=Math.max(u,b["freeform-x"]+b["freeform-scale"])});let c=100/(u-s),d=s,p=Math.abs(c*e);if(p>.1)for(;p>5;)p*=.5;o.forEach((g,v)=>{let b=n[v],S=b["freeform-scale"]||30,_=b["freeform-x"],E=b["freeform-y"],I=(_+-d)*c,F=E*c;g.setAttribute("freeform-x",I),g.setAttribute("freeform-y",F),g.setAttribute("freeform-scale",c*S)}),this.state.UIWindow?.onChange?.({zoom:100,"magnetic-snap-margin":p})})};componentDidMount(){we.globalDragEventController.on("dragstart",this.onDragStart),we.globalDragEventController.on("dragover",this.onDragOver),we.globalDragEventController.on("drop",this.onDragDrop),we.globalDragEventController.on("dragend",this.onDragEnd),this.props.galleryInstance._freeformEditor=this}componentWillUnmount(){this.debouncedCommitTransform.cancel(),this.unsetMinHeight.cancel(),cancelAnimationFrame(this.dragFrame),clearTimeout(this.breakOutTimer),delete this.props.galleryInstance._freeformEditor,we.globalDragEventController.off("dragstart",this.onDragStart),we.globalDragEventController.off("dragover",this.onDragOver),we.globalDragEventController.off("drop",this.onDragDrop),we.globalDragEventController.off("dragend",this.onDragEnd)}componentDidUpdate(e,i){i.pauseRealignment!==this.state.pauseRealignment&&!this.state.pauseRealignment&&this.state.waitingForRealignment}},XN=c2});var QN,Dg,Nle,Gi,d2=T(()=>{Pe();Se();Xa();Za();Ng();ht();Re();JN();Uu();Ni();Oi();QN=ce(ve(),1);Wi();W();Dg=class extends ae{constructor(e){super(e),this.state={elWidth:1e3,sizeIncrement:0},this.holderRef=me()}render(e,i){let{adminMode:r,baseNode:n,pageInfo:o,"mobile-grid":s,"mobile-gutter":u,"mobile-columns":c,"mobile-horizontal-align":d,"mobile-vertical-align":p,"hover-pop":g,"magnetic-snap":v,"magnetic-snap-margin":b}=e;if(s&&e.isMobile)return this.renderedMobileGrid=!0,m(a2,{...this.props,columns:c,gutter:u,verticalAlign:p,horizontalAlign:d,baseNode:n,adminMode:r,pageInfo:o});let{elWidth:S}=i,_=0,E=0,I=0,F=Array.from(n.children).filter(J=>J.tagName=="MEDIA-ITEM"),O=[],L=[],z=-1;F.forEach((J,oe)=>{let te=!1,K={"freeform-scale":parseFloat(J.getAttribute("freeform-scale")),"freeform-x":parseFloat(J.getAttribute("freeform-x")),"freeform-y":parseFloat(J.getAttribute("freeform-y")),"freeform-z":parseFloat(J.getAttribute("freeform-z"))},U={slot:"slot-"+oe,itemResize:this.onItemResize};(isNaN(K["freeform-scale"])||isNaN(K["freeform-x"])||isNaN(K["freeform-y"])||isNaN(K["freeform-z"]))&&(te=!0,K["freeform-scale"]=Number.isNaN(parseFloat(J.getAttribute("freeform-scale")))?20:parseFloat(J.getAttribute("freeform-scale")),K["freeform-x"]=Number.isNaN(parseFloat(J.getAttribute("freeform-x")))?I*1.5:parseFloat(J.getAttribute("freeform-x")),K["freeform-x"]=K["freeform-x"]%80,K["freeform-y"]=Number.isNaN(parseFloat(J.getAttribute("freeform-y")))?I*1.5:parseFloat(J.getAttribute("freeform-y")),K["freeform-z"]=9999,I++);let se=parseFloat(K["freeform-x"])*.01*S,re=parseFloat(K["freeform-y"])*.01*S,Q=parseInt(K["freeform-z"]),le=parseFloat(K["freeform-scale"])*.01*S,j=le,B=J._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};j=B.mediaItemSize.height+B.mediaItemSize.padSize,_=Math.max(re+j,_),te||(z=oe,E=_),K.widthPx=le,K.xPx=se,K.yPx=re,K.z=Q,K.writeAttributes=U,L.push(K)});let G=100*(E/S),H=0;for(var N=z+1;N<L.length;N++){let oe=F[N]._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}},te=oe.mediaItemSize.height+oe.mediaItemSize.padSize,K=H*1.5+G,U=K*.01*S;L[N]["freeform-y"]=K,L[N].yPx=U,_=Math.max(L[N].yPx+te,_),H++}return L.forEach((J,oe)=>{let te=F[oe],{widthPx:K,yPx:U,xPx:se,z:re,writeAttributes:Q}=J,le=te._props||{};this.renderedMobileGrid&&(le.itemResize=null),Io(te,{...le,...Q},le,!1,!1),O.push({width:K+"px","--base-translate":`translate(${Math.floor(se)}px, ${Math.floor(U)}px)`,"--z-index":re+1})}),this.renderedMobileGrid=!1,m(X,{children:[this.props.children,je(m(X,{children:[m("style",{children:`
					* {
						box-sizing: border-box;
					}
									
					:host {
						width: var(--resize-parent-width, 100%);
						max-width: 100%;						
						height: ${_}px;
						display: block;
						position: relative;
						contain: layout;
					}
					
					::slotted(media-item) {
						max-width: none;
						position: absolute;
						top: 0;
						left: 0;
						display: flex;
						flex-shrink: 0;
						flex-grow: 0;
					}

					::slotted(media-item)::part(sizing-frame){
						pointer-events:auto;						
					}

					${O.map((J,oe)=>`::slotted(media-item[slot="slot-${oe}"]){
							width: ${J.width};
							--base-translate: ${J["--base-translate"]};
							--z-index: ${J["--z-index"]};
						} `).join("")}						
					
					${g?`::slotted(media-item:hover) {
						z-index: 99999;	
					}`:""}
					
					#freeform-holder {
						position: absolute;
						inset: 0;
					}
				`}),m(X,{children:[m("div",{id:"freeform-holder",ref:this.holderRef,children:F.map((J,oe)=>m("slot",{name:`slot-${oe}`}))}),m(Br,{values:{elWidth:"100%"},onResize:this.onResize})]}),r&&o.isEditing&&!ne&&m(XN,{...e,gallerySpecificAttributes:["freeform-x","freeform-y","freeform-z","freeform-scale"],galleryInstance:n,galleryComponent:this,mediaItemOptions:Gi.mediaItemOptions,disabledMediaItemOptions:Gi.disabledMediaItemOptions,mediaItems:F,elWidth:S,elHeight:_,hoverPop:g,magneticSnap:v,magneticSnapMargin:b,attributeMap:L})]}),this.props.baseNode.shadowRoot)]})}componentDidUpdate(e,i){this.props.isMobile!==e.isMobile&&this.onItemResize()}onResize=(e,i)=>{this.setState(r=>{let n={...r};return n[e]=i,n})};onItemResize=(e,i)=>{this.setState(r=>({sizeIncrement:r.sizeIncrement+1}))}},Nle=Nt(To(De((t,e)=>({adminMode:t.frontendState.adminMode,isMobile:t.frontendState.isMobile}))(Dg)));Zt(Nle,"gallery-freeform",["thumbnail-index","links-filter-index","show-tags","show-title","thumbnail-index-metadata","magnetic-snap","magnetic-snap-margin","hover-pop","mobile-grid","mobile-gutter","mobile-columns","mobile-horizontal-align","mobile-vertical-align"],{renderIntoShadow:!0});Gi={name:"freeform",displayName:"Freeform",tagName:"GALLERY-FREEFORM",disabledMediaItemOptions:["limit-by","scale"],nonAttributeValues:["horizontalShift","fitToWidth","zoom","shift-x","shift-y"],mediaItemOptions:[{type:"group",className:"grid-columns-even",children:[{labelName:"X",name:"shift-x",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}},{labelName:"Y",name:"shift-y",defaultValue:0,type:"scrubber",value:0,step:.05,numberOnlyMode:!0,onScrubEnd:function(){this.state.galleryParent?._freeformEditor?.commitTransform()}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Width",name:"freeform-scale",type:"scrubber",value:20,step:.05,min:0,max:150,numberOnlyMode:!0},{labelName:"Bring to Front",name:"freeform-z",type:"button",onClick:function(t){CargoEditor.mutationManager.execute(()=>{let e=this.state.selectedMediaItems[0].closest("gallery-freeform");if(e){e._freeformEditor?.stackZ();let i=QN.default.sortBy(Array.from(e.querySelectorAll("media-item")),n=>parseInt(n.getAttribute("freeform-z")));this.state.selectedMediaItems.forEach(n=>{n.setAttribute("freeform-z",1+i.length)}),e._freeformEditor?.stackZ()}})}}]}],mobileOptions:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Use Grid",name:"mobile-grid",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-auto",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",requirements:[{option:"mobile-grid",shouldBe:!1}],renderWhenDisabled:!1,children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state.activeGallery?._freeformEditor?.commitZoom()}}]},{labelName:"Columns",name:"mobile-columns",type:"scrubber",value:2,min:1,max:12,step:1,numberOnlyMode:!0,requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Gutter",name:"mobile-gutter",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowCalc:!0,allowedUnits:["px","%","rem","vmin","vmax","vw","vh"],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Vertical Align",name:"mobile-vertical-align",type:"radio",value:"top",values:[{labelName:"Top",iconName:"alignContentTop",value:"top"},{labelName:"Middle",iconName:"alignContentMiddle",value:"center"},{labelName:"Bottom",iconName:"alignContentBottom",value:"bottom"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1},{labelName:"Horizontal Align",name:"mobile-horizontal-align",type:"radio",value:"left",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"}],requirements:[{option:"mobile-grid",shouldBe:!0}],renderWhenDisabled:!1}],options:[{type:"group",className:"grid-columns-auto",children:[{labelName:"Magnetic Snap",name:"magnetic-snap-margin",type:"scrubber",value:0,step:.05,suffix:"%",max:10,min:0,numberOnlyMode:!0,requirements:[{option:"magnetic-snap",shouldBe:!0}],renderWhenDisabled:!0},{labelName:"",className:"square",name:"magnetic-snap",type:"check-box",value:!0}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Pop on Hover",name:"hover-pop",type:"check-box",value:!1},{labelName:"Fit to Width",name:"fitToWidth",type:"button",onClick:function(t){t.preventDefault();let e=this.state.activeGallery;e&&e._freeformEditor?.setState({currentZoom:100},()=>{e._freeformEditor?.fitToWidth()})}}]},{type:"group",className:"grid-columns-even",children:[{labelName:"Shift",name:"horizontalShift",type:"scrubber",value:0,step:.05,suffix:"%",max:50,min:-50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitHorizontalShift()}},{labelName:"Zoom",name:"zoom",type:"scrubber",value:100,step:.1,suffix:"%",max:200,min:50,numberOnlyMode:!0,onScrubEnd:function(t){this.state?.activeGallery?._freeformEditor?.commitZoom()}}]}],onMediaItemChange:function(t){let e=this.state.galleryParent;return e?(Object.keys(t).forEach(i=>{let r=t[i];switch(i){case"shift-x":e._freeformEditor?.previewTransform({x:r,y:0},this.state.selectedMediaItems);break;case"shift-y":e._freeformEditor?.previewTransform({x:0,y:r},this.state.selectedMediaItems);break}}),{...t}):{...t}},onChange:function(t){let e=this.state.activeGallery;e&&Object.keys(t).forEach(i=>{let r=t[i];switch(i){case"horizontalShift":e._freeformEditor?.horizontalShift(r);break;case"zoom":e._freeformEditor?.zoom(r);break}})}};Gi.mediaItemDefaults=at(Gi.mediaItemOptions);Gi.defaults=at(Gi.options);Gi.mobileDefaults=at(Gi.mobileOptions);Dg.defaultProps={"show-tags":!0,"show-title":!0,"thumbnail-index":void 0,"magnetic-snap":Gi.defaults["magnetic-snap"].value,"magnetic-snap-margin":Gi.defaults["magnetic-snap-margin"].value,"hover-pop":Gi.defaults["hover-pop"].value,"mobile-grid":Gi.mobileDefaults["mobile-grid"].value,"mobile-gutter":Gi.mobileDefaults["mobile-gutter"].value,"mobile-columns":Gi.mobileDefaults["mobile-columns"].value,"mobile-horizontal-align":Gi.mobileDefaults["mobile-horizontal-align"].value,"mobile-vertical-align":Gi.mobileDefaults["mobile-vertical-align"].value}});var eO,p2,tO,iO=T(()=>{Pe();eO=ce(ve(),1);Mt();Di();Hu();W();p2=class extends ae{constructor(e){super(e),this.state={}}render(e,i){let{galleryInstance:r,gutterWidth:n,elWidth:o,mediaItems:s}=e;return m(Po,{...e,gallerySpecificAttributes:this.props.gallerySpecificAttributes,onAfterDrop:this.onAfterDrop,galleryInstance:r,disabledMediaItemOptions:["scale"],mediaItemEditorInfo:{disableResize:!0,disableButton:!1,additionalUI:this.props.isMobile?null:this.renderBracket}})}onBracketClick=(e,i,r)=>{this.dragStarted||(r&&(r.preventDefault(),Ue.setHoveredElements([this.props.galleryInstance])),CargoEditor.mutationManager.execute(()=>{if(e)i.removeAttribute("justify-row-end");else{let n=i.previousSibling,o=1;for(;n;)n.nodeName==="MEDIA-ITEM"&&n.assignedSlot&&n.assignedSlot.parentElement.lastChild==n.assignedSlot&&n.setAttribute("justify-row-end","true"),n=n.previousSibling;i.setAttribute("justify-row-end","true")}}),this.props.incrementLayout&&this.props.incrementLayout())};renderBracket=(e,i)=>{let{gutterWidth:r,gutterHeight:n}=this.props,o=i.assignedSlot;if(!o)return null;let s=o.parentElement.lastChild==o,u=i.getAttribute("justify-row-end")==="true",c="pointer";return u||(c="e-resize"),m("div",{className:`justify-bracket${u?" row-end":""}`,style:{"--media-item-pad":-i._size.mediaItemSize.padSize*.5+-1+"px"},onClick:d=>{this.onBracketClick(u,i,d)},onMouseDown:d=>{this.onMouseDown(i,d)}})};componentWillUnmount(){this.setRow.cancel()}onMouseDown=(e,i)=>{let r=e.assignedSlot;if(!r)return;let{mediaItems:n}=this.props;i.preventDefault();let o=r.parentElement,s=Array.from(o.children);this.delta=0,this.initialPoint=i.clientX,this.rowItems=s,this.indexOfFirstInRow=n.indexOf(this.rowItems[0].assignedNodes()[0]),this.dragStarted=!1,window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)};onPointerMove=e=>{let{mediaItems:i}=this.props;if(this.delta=e.clientX-this.initialPoint,!(Math.abs(this.delta)<3)){if(!this.dragStarted){Ue.setHoveredElements([this.props.galleryInstance]),Ue.lock(),document.body.classList.add("dragging");let r=i[this.indexOfFirstInRow-1];r&&this.onBracketClick(!1,r,null),this.attrCache=i.map(n=>n.getAttribute("justify-row-end")==="true")}this.dragStarted=!0,this.setRow()}};setRow=eO.default.throttle(()=>{CargoEditor.mutationManager.execute(()=>{let{elWidth:e,mediaItems:i,rowAlign:r}=this.props,n=e/12,o=Math.round(this.delta/n);(r=="fill"||r=="right")&&(o=o*-1);let s=Math.max(o+this.rowItems.length,1);Ue.setHoveredElements([this.props.galleryInstance]),Ue.lock(),this.attrCache.forEach((u,c)=>{c>=this.indexOfFirstInRow&&c<=this.indexOfFirstInRow+s&&(u=!1,(c==this.attrCache.length-1||c==this.indexOfFirstInRow+s+-1)&&(u=!0));let d=i[c],p=d.getAttribute("justify-row-end");u&&p!=="true"?d.setAttribute("justify-row-end",u):!u&&d.hasAttribute("justify-row-end")&&d.removeAttribute("justify-row-end")})}),this.props.incrementLayout&&this.props.incrementLayout()},80);onPointerUp=e=>{Ue.unlock(),Ue.testHover(),document.body.classList.remove("dragging"),this.setRow.cancel(),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)};onAfterDrop=(e,i,r)=>{let n=!1,o=i,s=e[e.length-1],u=e[0];for(;s&&e.indexOf(s)>-1;)s=s.nextElementSibling;for(;u&&e.indexOf(u)>-1;)u=u.previousElementSibling;r.left>-1&&r.right>-1?(i===e[e.length-1]&&(s=e[e.length-1]),i===e[0].nextElementSibling&&(u=e[0])):r.left>-1&&r.right==-1?s=null:r.right>-1&&r.left==-1&&(u=null),u&&r.left>-1&&(u.getAttribute("justify-row-end")=="true"||u.getAttribute("justify-row-end")==!0)&&(u.removeAttribute("justify-row-end"),e[e.length-1].setAttribute("justify-row-end",!0))}},tO=p2});var h2,Lg,An,Ole,f2=T(()=>{Pe();Se();Xa();Se();Za();ht();Uu();Re();Wi();iO();Oi();Ni();h2=ce(ve(),1);W();Lg=class extends Ti{constructor(e){super(e),this.state={isMobile:Qe.data.mobile.active,elWidth:0,gutterPixelWidth:0,gutterHeight:0,targetPxHeight:0,sizeIncrement:0,hasSizes:!1,renderLimit:150},this.paginationWatcherRef=me(),this.paginationObserver=new IntersectionObserver(this.requestPagination,{root:this.props.scrollContext.scrollingElement===window?document:this.props.scrollContext.scrollingElement,rootMargin:screen.height*2+"px",threshold:[0,1]})}requestPagination=async e=>{if(this.isIntersecting=e[0].isIntersecting,!(this.isPaginating||this.state.renderLimit>=this.getMediaItems().length)){for(this.isPaginating=!0;this.isIntersecting;){let i=this.state.renderLimit+150;if(this.setState({renderLimit:i}),i>=this.getMediaItems().length)break;await new Promise(r=>setTimeout(r,200))}this.isPaginating=!1}};getMediaItems(){return Array.from(this.props.baseNode.children).filter(e=>e.nodeName=="MEDIA-ITEM")}render(e,i){let{gutterPixelWidth:r,gutterHeight:n,targetPxHeight:o,elHeight:s,isMobile:u,hasSizes:c}=i,{children:d,adminMode:p,pageInfo:g,baseNode:v}=e,{elWidth:b}=i;c||(b=this.props.baseNode.offsetWidth);let{"row-align":S,"row-height":_,gutter:E}=e;E=u&&this.props["mobile-gutter"]!==void 0?this.props["mobile-gutter"]:this.props.gutter;let I="";u&&this.props["mobile-row-align"]!==void 0&&(S=this.props["mobile-row-align"],I="mobile-"),u&&this.props["mobile-row-height"]!==void 0&&(_=this.props["mobile-row-height"]);let F=E.split(" "),O=(F.length>1,F[0]);O.includes("rem")&&u&&(O="calc( var(--mobile-padding-offset, 1) * "+O+" )");let L=F.length>1?F[1]:F[0];L.includes("rem")&&u&&(L="calc( var(--mobile-padding-offset, 1) * "+L+" )");let z=Jt(_,"%").join(""),G=this.getMediaItems(),H=G.slice(0,this.state.renderLimit),N=this.brickLayout(H),J=[];return G.forEach((oe,te)=>{let K=N.attributes[te]||{slot:null},U=oe._props||{};Io(oe,{...U,...K},U,!1,!1)}),m(X,{children:[m(X,{children:this.props.children}),je(m(X,{children:[m("style",{children:`
* {
	box-sizing: border-box;
}

:host {
	width: var(--resize-parent-width, 100%);
	max-width: 100%;	
	position: relative;
	display: block;
	--gutter-width: ${r}px;
	--gutter-height: ${n}px;
	margin-top: calc(var(--gutter-expand, 0) * ${n}px );	
}

${N.shadowStyleMap.map((oe,te)=>`::slotted(media-item[slot="slot-${te}"]){
		${oe.style};
		${oe.itemStatuses.lastRow?"":"margin-bottom: var(--gutter-height);"}
		${oe.itemStatuses.lastChild?"":"margin-right: var(--gutter-width);"}
		${oe.itemStatuses.lastChild&&!oe.itemStatuses.orphanRow&&S==="fill"?`
			flex-grow: 1;
			--object-fit: fill;
		`:""}
	}`).join("")}

:host .justify-row {
	max-width: ${b+3}px;
	width: 100%;
	display:flex;
	flex-shrink: 0;
	align-items: stretch;
	justify-content: flex-start;
	position: relative;
	flex-wrap: nowrap;
}

:host .justify-row.orphan-row {
	width: ${N.orphanRowWidth}px;
	display: inline-flex;
}

::slotted(media-item) {
	position: relative;
	max-width: 100%;
	display: flex;
	flex-shrink: 0;
	flex-grow: 0;
}    


:host([${I}row-align="left"]) .justify-row {
	justify-content: flex-start;
}

:host([${I}row-align="right"]) .justify-row {
	justify-content: flex-end;
}

:host([${I}row-align="center"]) .justify-row {
	justify-content: center;
}

:host ::slotted(media-item.last-child), :host([${I}row-align="fill"]) ::slotted(media-item.last-child) {
	flex-grow: 1;
}

:host([${I}row-align="center"]) ::slotted(media-item.last-child),
:host([${I}row-align="left"]) ::slotted(media-item.last-child),
:host([${I}row-align="right"]) ::slotted(media-item.last-child) {
	flex-grow: 0;
}

					`}),m(Br,{values:{targetPxHeight:z,gutterPixelWidth:O,gutterHeight:L,elWidth:"100%"},onResize:this.onResize}),N.shadow,p&&g.isEditing&&!ne&&m(tO,{...e,isMobile:u,gallerySpecificAttributes:["justify-row-end"],galleryInstance:v,gutterWidth:r,gutterHeight:n,elWidth:b,rowHeight:z,rowAlign:S,mediaItems:G,incrementLayout:this.onItemResize}),m("div",{ref:this.paginationWatcherRef,class:"pagination-watcher"})]}),this.props.baseNode.shadowRoot)]})}onResize=(e,i)=>{e==="targetPxHeight"&&(i=Math.max(i,10)),this.setState({[e]:i,hasSizes:!0})};onMobileChange=e=>{this.setState({isMobile:e})};componentDidMount(){Qe.on("mobile-change",this.onMobileChange),this.props.baseNode._figureEditorInfo={disabledMediaItemOptions:An.disabledMediaItemOptions,galleryParent:this.props.baseNode,galleryWidth:this.state.elWidth},this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.observe(this.paginationWatcherRef.current),this.props.onMount&&this.props.onMount()}componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange),this.paginationObserver&&this.paginationWatcherRef.current&&this.paginationObserver.unobserve(this.paginationWatcherRef.current)}onItemResize=e=>{this.setState(i=>({sizeIncrement:i.sizeIncrement+1}))};brickLayout=e=>{let i=window.devicePixelRatio>1?2:1,{isMobile:r}=this.state,{"row-align":n}=this.props;r&&this.props["mobile-row-align"]!==void 0&&(n=this.props["mobile-row-align"]);let o={},s=r&&this.props["mobile-row-height"]!==void 0&&this.props["mobile-row-height"]!==this.props["row-height"],u=!1,c=e.map((O,L)=>{let z=this.getItemSize(O,s);return this.getItemSize(O,s)});for(let O=c.length-1;O>=0;O--){let L=c[O];L.rowEnd||u?(L.inDesignatedRow=!0,u=!0):L.inDesignatedRow=!1}this.findValidRowCache={},this.makeNodes(0,0,null,o,c),this.findValidRowCache=null;let d=[],p=h2.default.keys(o).sort(function(O,L){return parseInt(O)-parseInt(L)}),g=p[p.length-1];for(;g!=null;){let O=o[g];o[O.parent]&&(o[O.parent].path=o[O.parent].edges[g]),d.unshift(O),g=O.parent}let v=[],b=[],S=[],_=this.state.targetPxHeight,E=this.state.elWidth,I=this.state.gutterPixelWidth,F=0;return d.forEach((O,L)=>{let z=O.path,G=[];if(!z)return;let H=0,N=!1;for(let J=z.startIndex;J<z.breakBefore;J++){let oe=e[J],te=z.breakBefore-z.startIndex,K=J+1==z.breakBefore,U=this.getItemSize(oe,!1),se=U.mediaSize.padSize+U.mediaItemSize.padSize,re=(_+-se)/U.height||1,Q,le;Q=U.width*re+se,le=U.height*re+U.mediaSize.padSize;let j=E+-z.rowWidth;if(n!=="fill"||N)j=Math.min(0,j),F=z.rowWidth;else if(j/E>.5&&K&&L==0&&!z.position=="forcebreak"){N=!0,J=z.startIndex-1;continue}if(j!==0){let de=(Q+-se)/z.contentWidth,fe=z.rowWidth-z.contentWidth,be=E-fe;Q=de*be,le=Q*(U.height/U.width)+U.mediaSize.padSize,Q=Q+se}Q=Math.floor(Q*i)/i,H=le;let B={},Y="";J==z.startIndex&&(B.firstChild=!0),J+1==z.breakBefore&&(B.lastChild=!0),L+2==d.length&&(B.lastRow=!0),B.orphanRow=N,S[J]={style:`width: ${Q}px`,itemStatuses:B},b[J]={slot:`slot-${J}`,itemResize:this.onItemResize},G[J]=m("slot",{name:`slot-${J}`},`slot-${J}`)}H=Math.floor(H*i)/i,v.push(m("div",{className:`justify-row${N?" orphan-row":""}`,style:{"--frame-padding":H+"px"},children:G},`justify-row-${L}`))}),{shadow:v,attributes:b,shadowStyleMap:S,orphanRowWidth:F}};findValidRows=(e,i)=>{if(this.findValidRowCache[e])return this.findValidRowCache[e];e=parseInt(e);let r=e,n=0,o=0,s=0,u=0,c=0,d={},p=this.props["row-align"];this.state.isMobile&&this.props["mobile-row-align"]!==void 0&&(p=this.props["mobile-row-align"]);for(let g=e;g<i.length;g++){let v=s,b=u,S=i[g],_=S.mediaSize.padSize+S.mediaItemSize.padSize,E=(this.state.targetPxHeight+-_)/S.height;if(u=S.width*E,s=u+_,g===e?(c=1,n=s,o=s+-_):(n=n+this.state.gutterPixelWidth+s,o=o+u,c++),S.rowEnd){d[g+1]={position:"forcebreak",penalty:-9e9,itemCount:c,startIndex:e,breakBefore:g+1,rowWidth:n,contentWidth:o};break}else if(n>this.state.elWidth){if(S.inDesignatedRow)continue;d[g]={position:"under",itemCount:c+-1,penalty:0,startIndex:e,breakBefore:g,rowWidth:n+-(this.state.gutterPixelWidth+s),contentWidth:o-u},p==="fill"||g===e?d[g+1]={position:"over",penalty:0,itemCount:c,startIndex:e,breakBefore:g+1,rowWidth:n,contentWidth:o}:g-1>-1&&(d[g-1]={position:"oneunder",penalty:.11,itemCount:c+-2,startIndex:e,breakBefore:g-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+v),contentWidth:o-(u+b)});break}else if(g==i.length-1){p!=="fill"&&g==e?d[g+1]={position:"orphan",penalty:.5,itemCount:c,startIndex:e,breakBefore:g+1,rowWidth:n,contentWidth:o}:d[g+1]={position:"last",penalty:.06,itemCount:c,startIndex:e,breakBefore:g+1,rowWidth:n,contentWidth:o};break}else c+-2>0&&!S.inDesignatedRow&&p==="fill"&&(d.mid={position:"mid",penalty:.06,itemCount:c+-2,startIndex:e,breakBefore:g-1,rowWidth:n+-(this.state.gutterPixelWidth*2+s+v),contentWidth:o-(u+b)})}if(d.hasOwnProperty("mid")){let g=d.mid.breakBefore;!d.hasOwnProperty(g)&&i.length<15&&(d[d.mid.breakBefore]=d.mid),delete d.mid}for(let g in d){let v=d[g],b=v.rowWidth/this.state.elWidth;v.distance=Math.abs(1-b)*Math.abs(1-b)*Math.abs(1-b),isNaN(v.penalty)||(v.distance=v.distance+v.penalty)}return this.findValidRowCache[e]=d,d};makeNodes=(e,i,r,n,o)=>{if(e===-1)return;let s={index:parseInt(e),edges:this.findValidRows(e,o),distanceToFirstNode:i,parent:r},u=!1;if(n[e]?s.distanceToFirstNode<n[e].distanceToFirstNode&&(n[e]=s,u=!0):(n[e]=s,u=!0),u){let c=h2.default.keys(s.edges);for(let d=0;d<c.length;d++){let p=s.edges[c[d]];this.makeNodes(parseInt(c[d]),p.distance+s.distanceToFirstNode,s.index,n,o)}}};getItemSize=(e,i)=>{let r=e._size||{width:0,height:0,mediaSize:{width:0,height:0,padSize:0},mediaItemSize:{width:0,height:0,padSize:0}};isNaN(r.width)&&(r.width=300),isNaN(r.height)&&(r.height=300);let n=e.getAttribute("justify-row-end")==="true"&&!i;return{...r,rowEnd:n}}},An={name:"justify",displayName:"Justify",tagName:"GALLERY-JUSTIFY",disabledMediaItemOptions:["scale","limit-by"],mediaItemOptions:[{labelName:"End Row Here",name:"justify-row-end",type:"check-box",value:!0}],options:[{labelName:"Row Height",name:"row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{vw:30,vh:30,vmax:30,vmin:30,rem:20,em:20,px:300,etc:100},step:{px:1,rem:.1,em:.1,"%":.1,vw:.1,vmin:.1,vmax:.1,vh:.1,etc:1},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]},{type:"more-actions",children:[{labelName:"Clear Designated Rows",name:"clear-designated-rows",type:"button",className:"text-button remove",onClick:function(t){t.preventDefault(),t.stopPropagation();let e=Array.from(this.state.activeGallery.children).filter(i=>i.hasAttribute("justify-row-end")||i.hasAttribute("justify-row-start"));CargoEditor.mutationManager.execute(()=>{e.forEach(i=>{i.removeAttribute("justify-row-end")})}),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor())}}]}],mobileOptions:[{labelName:"Row Height",name:"mobile-row-height",type:"scrubber",addDefaultUnitToUnitlessNumber:!0,allowCalc:!0,allowVar:!0,value:"20%",min:1,defaultUnit:"%",allowedUnits:["px","%","rem","vmin","vmax","vw","vh","em"]},{labelName:"Gutter",name:"mobile-gutter",type:"composite-scrubber",addDefaultUnitToUnitlessNumber:!0,value:"2rem",defaultUnit:"rem",min:0,max:{rem:15,em:20,px:100,etc:10},allowedUnits:["px","%","rem","vmin","vmax","vw","vh"]},{labelName:"Row Align",name:"mobile-row-align",type:"radio",value:"fill",values:[{labelName:"Left",iconName:"alignContentLeft",value:"left"},{labelName:"Center",iconName:"alignContentCenter",value:"center"},{labelName:"Right",iconName:"alignContentRight",value:"right"},{labelName:"Fill",iconName:"alignContentFill",value:"fill"}]}]};An.mediaItemDefaults=at(An.mediaItemOptions);An.defaults=at(An.options);An.mobileDefaults=at(An.mobileOptions);Lg.defaultProps={"show-tags":!0,"show-title":!0,gutter:An.defaults.gutter.value,"row-align":An.defaults["row-align"].value,"row-height":An.defaults["row-height"].value,"mobile-gutter":void 0,"mobile-row-height":void 0,"mobile-row-align":void 0};Ole=Nt(To(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Lg)));Zt(Ole,"gallery-justify",["thumbnail-index","thumbnail-index-metadata","links-filter-index","show-tags","show-title","row-align","row-height","gutter","mobile-gutter","mobile-row-height","mobile-row-align"],{renderIntoShadow:!0})});function Dle(t,e){let i=e.pid;return{isMobileOnly:t.site.mobile_homepage_id==i||t.pages.byId[i]&&t.pages.byId[i].pin&&t.pages.byId[i].pin_options.screen_visibility==="mobile"}}var fr,Fg,m2,rO,nO=T(()=>{Pe();ht();Ni();Se();Mt();Di();la();Gn();Oi();Re();fr=ce(ve(),1);W();Fg=new Set;ne||(window.addEventListener("mousedown",t=>{Fg.forEach(e=>{e.setState({noPointerEvents:!0})})}),window.addEventListener("mouseup",t=>{Fg.forEach(e=>{e.setState({noPointerEvents:!1})})}));m2=class extends ae{constructor(e){super(e),this.handleWidth=20,this.minHandleOverlap=3,this.maxColumns=12,this.state={noPointerEvents:!1,buttonHovered:!1,focused:!1,loaded:!1,adminWindow:!1,showGhost:!1,isDraggingHandle:!1,isDragging:!1,activeIndex:-1,pointerStart:{x:0,y:0},delta:{x:0,y:0},instanceRect:{width:100,height:100,left:-999,top:-999},referenceColumnSpans:[]},this.columnAddOrRemoveObserver=new MutationObserver(this.onColumnAddOrRemove),this.columnAddOrRemoveObserverConfig={attributes:!0,childList:!0,subtree:!1},this.columnObserver=new MutationObserver(this.onColumnChange),this.columnObserverConfig={attributeFilter:["span"],childList:!1,subtree:!1},this.columnCache=[],this.columnOutlineRef=me(),this.gearReaf=me(),this.addThreshold=0,this.removeThreshold=0,this.saveColumnSettings=fr.default.debounce(this.saveColumnSettings,150),this.updateColumns=fr.default.throttle(this.updateColumns,40)}render(e,i){let{emptyColumns:r,gutter:n,columnSpans:o,displaySpans:s,layoutColumns:u,unitsToRemove:c,isMobile:d,mobileStack:p,mobileHideEmpty:g,elWidth:v,gutterWidth:b}=e,{activeIndex:S,delta:_,isDraggingHandle:E,adminWindow:I,showGhost:F,loaded:O,buttonHovered:L,focused:z,noPointerEvents:G}=i,H=fr.default.uniq(r).length==1&&r[0]==!0,N=fr.default.uniq(o).length==1&&o[0]==null,J=(v-b*(u-1))/u,oe=o.length<u,te=[],U=u%o.length==0||!N?u:o.length-c;d&&p&&(U=1);let se=Math.max(0,(v-b*(U-1))/U),re=Math.max(1,b);se=se-(re-b);let Q=23;for(let le=0;le<U;le++){let j=(se+re)*le;te.push(m("div",{className:"ghost-span",style:{transform:`translateX(${j}px)`,opacity:F?.04:0,width:se+"px"}},`ghost-${le}`))}return m(X,{children:[m(Vi,{baseNode:this.props.columnInstance}),m("style",{children:r.map((le,j)=>le?`
				::slotted(column-unit:nth-child(${j+1})){
					min-height: 1em;
				}`:"").join(`
`)}),m(pr,{onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,buttonHeight:Q,buttonMode:"outside",baseNode:this.props.columnInstance,el:this.props.columnInstance,render:le=>{let{pointerAttention:j,overlayPosition:B}=le,Y=0,ie=0,de=-Q,fe=2;return B.y<=Q&&(de=B.height+1,B.height+B.y>Qe.data.window.h+-Q&&(de=-B.y+Qe.data.window.h+-Q+1,fe=0)),m("div",{ref:this.columnOutlineRef,className:`editor-overlay editor-outline columns-outline${j?" hover":""}${j?" button-hover":""}${z?" focus":""}`,style:{transform:`translate3d(${B.x}px, ${B.y}px, 0)`,width:B.width+"px",height:B.height+"px",display:j||L||z?"block":"none"},children:[(j||z||L)&&te,(j||z||L)&&!(d&&p)?o.map((be,Me)=>{let Ee=s[Me];if(be||(be=u/o.length),Me==o.length-1||Ee=="hide"||(Y+=be,Y>=u))return null;ie+=J*be+(be-1)*b+b;let Fe=`${ie+-b*.5}px`,qe=this.handleWidth*-.5;return b<=this.handleWidth-this.minHandleOverlap&&(qe=b*-.5+-this.minHandleOverlap),m(X,{children:[oe&&Me<u&&m("div",{style:{pointerEvents:G?"none":"auto",display:j||z||L?"block":"none",transform:`translateX(${Fe})`,width:this.handleWidth+"px",marginLeft:`${qe}px`},className:"column-divider-handle",onMouseDown:nt=>this.onMouseDown(nt,Me)}),m("div",{style:{display:j||z||L?"block":"none",transform:`translateX(${Fe})`,transition:E?"transform .08s cubic-bezier(0, 0, 0.2, 1)":""},className:"column-divider"},`col-${Me}`)]})}):null,m("div",{className:"in-editor-buttons",style:{pointerEvents:G?"none":"auto",transform:`translate(${fe}px, ${de}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:m("div",{className:"pointer-mask",children:[m("button",{className:"columns text",ref:this.gearReaf,onMouseDown:this.launchUIWindow,children:"Columns"}),(!d||this.props.isMobileOnly)&&m(X,{children:[m("button",{onMouseDown:this.removeColumn,className:"remove",children:m("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:m("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"})})}),m("button",{onMouseDown:this.addColumn,className:`add ${o.length>=this.maxColumns?"disabled":""}`,children:m("svg",{width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[m("rect",{x:"4",y:"9.5",width:"12",height:"1",class:"button-fill"}),m("rect",{x:"9.5",y:"4",width:"1",height:"12",class:"button-fill"})]})})]})]})})]})}})]})}launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.gearReaf.current.getBoundingClientRect(),r=this.props.columnInstance.getBoundingClientRect(),n={x:i.x+0,y:r.y+-190,left:i.left+0,right:i.right+0,top:r.top+0+-190,bottom:r.top+27+-190,width:i.width,height:i.height};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"columns-ineditor",windowAlias:"columns",supportsMobile:!0,positionRect:n,closeButton:!1,closeOnAllClickout:!0,props:{columnNodes:[this.props.columnInstance]}})};addColumn=e=>{e?.preventDefault(),e?.stopPropagation(),!(this.props.columnSpans.length>=this.maxColumns)&&(CargoEditor.mutationManager.execute(()=>{let i=this.columnCache.pop()||document.createElement("column-unit");i.removeAttribute("span"),i.removeAttribute("slot"),i.removeAttribute("data-discarded-column"),this.props.columnInstance.appendChild(i),this.addThreshold>1&&this.updateColumns(this.props.columnSpans.map(r=>{})),this.addThreshold++,clearTimeout(this.addTimeout),this.addTimeout=setTimeout(()=>{this.addThreshold=0},500)}),this.props.columnInstance.render(),this.saveColumnSettings())};removeColumn=e=>{e?.preventDefault(),e?.stopPropagation();let i=e?.altKey||!1,r=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT");r.length!=0&&(CargoEditor.mutationManager.execute(()=>{if(this.props.columnSpans.length==1)Array.from(r[0].childNodes).forEach(n=>{this.props.columnInstance.parentNode.insertBefore(n,this.props.columnInstance)}),this.props.columnInstance.parentNode.insertBefore(document.createElement("br"),this.props.columnInstance),this.props.columnInstance.remove();else{let n=r[r.length-1];if(i){let o=r[r.length-2];Array.from(n.childNodes).forEach(s=>{o.appendChild(s)})}this.columnCache.push(n.cloneNode(!0)),this.waiting=!0,n.remove(),n.setAttribute("data-discarded-column",!0),this.removeThreshold>1&&this.updateColumns(this.props.columnSpans.map(o=>{})),this.removeThreshold++,clearTimeout(this.removeTimeout),this.removeTimeout=setTimeout(()=>{this.removeThreshold=0},500)}}),this.props.columnInstance.render())};updateUIWindowPosition=e=>{!this.state.focused||!this.state.UIWindow||(this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow.props.superBadScrollHack.scroll(e))};onMouseDown=(e,i)=>{e.button!=2&&(this.props.columnSpans.length<2||(e.preventDefault(),e.stopPropagation(),this.setState({showGhost:!0,isDraggingHandle:!0,activeIndex:i,pointerStart:{x:e.clientX,y:e.clientY},referenceColumnSpans:this.props.columnSpans,instanceRect:this.props.columnInstance.getBoundingClientRect()},()=>{this.dragTimeout=setTimeout(()=>{document.body.classList.add("dragging")},100),we.adminWindow.addEventListener("pointermove",this.onPointerMove),we.adminWindow.addEventListener("pointercancel",this.onPointerUp),we.adminWindow.addEventListener("mouseup",this.onPointerUp),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointercancel",this.onPointerUp),window.addEventListener("mouseup",this.onPointerUp)})))};onPointerUp=e=>{clearTimeout(this.dragTimeout),we.adminWindow.removeEventListener("pointermove",this.onPointerMove),we.adminWindow.removeEventListener("pointercancel",this.onPointerUp),we.adminWindow.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),this.setState({showGhost:!1,isDraggingHandle:!1,activeIndex:-1,delta:{x:0,y:0}}),document.body.classList.remove("dragging")};onPointerMove=e=>{e.preventDefault();let{activeIndex:i,pointerStart:r,instanceRect:n,referenceColumnSpans:o,isDraggingHandle:s}=this.state,{gutterWidth:u,displaySpans:c,unitsToRemove:d,layoutColumns:p,units:g}=this.props;if(s){let v=[...o];if(fr.default.uniq(o).length==1&&o[0]==null){let N=0,J=0,oe=0,te=g/v.length-Math.floor(g/v.length),K=Math.floor(g/v.length),U=v.map((se,re)=>{J=J+te;let Q=K;return J>1&&(Q=Q+1,J=J-1),re==v.length-1&&(Q=g-N),N=N+Q,Q});this.setState({referenceColumnSpans:U});return}let S=(n.width-u*(p-1))/p,_=0,E=[];v.forEach((N,J)=>{N||(N=p/v.length);let oe=S*N+(N-1)*u;(J==i||J==i+1)&&E.push({x:_,width:oe}),c[J]!="hide"&&(_+=oe+u)});let I=20,{left:F}=n,O={x:e.clientX-(E[1].x+F+-u*.5),y:e.clientY-r.y},L=v.map((N,J)=>{let oe=N,te=S*N+(N-1)*u;return J==i?(oe=(te+O.x+u)/(S+u),Math.round(Math.max(Math.min(oe,g-1),1))):c[J]=="hide"?N:Math.round(Math.max(Math.min(oe,g-1),1))}),z=i+1;for(;c[z]=="hide";)z++;let G=fr.default.sum(L)-L[z];L[z]=g-G,L[z]==0&&(L[z]+=1,L[i]-=1),fr.default.uniq(L).length==1&&fr.default.sum(L)==g&&(L=L.map(N=>{})),Math.abs(O.x)>4&&this.updateColumns(L),this.setState({delta:O})}};checkColumns=()=>{let{layoutColumns:e,columnSpans:i,units:r}=this.props;if(i.length==0||fr.default.uniq(i).length==1&&i[0]==null)return;let o=i.includes(void 0),s=fr.default.sum(i),u=[...i],c=!1;if(s!=r||o){if(s>r)c=!0;else if(s<=r)if(o){let p=r-s,g=i.filter(b=>b==null).length,v=Math.floor(p/g);i.forEach((b,S)=>{if(S==i.length-1&&p>0)u[S]=p;else if(b==null&&p==0){let _=S;for(;_>=0&&i[_]<2||i[_]==null;)_--;i[_]>1?(u[S]=Math.floor(i[_]/2),u[_]=i[_]-u[S]):c=!0}else b==null?(u[S]=v,p-=v):u[S]=b})}else{let p=r-s;u[u.length-1]=p+u[u.length-1]}(fr.default.uniq(u).length==1&&fr.default.sum(u)==r||c)&&(u=u.map(p=>{})),this.updateColumns(u)}else this.updateColumns(i)};updateColumns=e=>{let i=Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT"),r=[];i.forEach((n,o)=>{e[o]==null?r.push([n,null]):parseInt(n.getAttribute("span"))!=e[o]&&r.push([n,e[o]])}),r.length>0&&(CargoEditor?.mutationManager?.execute(()=>{r.forEach(([n,o])=>{o===null?n.removeAttribute("span"):n.setAttribute("span",o)})}),this.saveColumnSettings(),this.props.columnInstance.render())};saveColumnSettings=()=>{we.adminWindow.store.dispatch({type:"UPDATE_ADMIN_STATE",payload:{session:{"last-column-settings":this.getColumnInfo()}}})};onDragOver=(e,i,r)=>{r.fromOutside&&!r.inAdmin?(Ue.activateHoverElement(this.props.columnInstance),Ue.lockItem(this.props.columnInstance)):(Ue.unlockItem(this.props.columnInstance),Ue.deactivateHoverElement(this.props.columnInstance))};onDragStart=(e,i,r)=>{Ue.activateHoverElement(this.props.columnInstance),Ue.lockItem(this.props.columnInstance)};onDragEnd=(e,i)=>{Ue.unlockItem(this.props.columnInstance),Ue.testHover()};componentDidUpdate(e,i){(!fr.default.isEqual(e.columnSpans,this.props.columnSpans)||e.layoutColumns+e.unitsToRemove!=this.props.layoutColumns+this.props.unitsToRemove)&&(Math.abs(e.layoutColumns+e.unitsToRemove-(this.props.layoutColumns+this.props.unitsToRemove))>2?this.updateColumns(this.props.columnSpans.map(r=>{})):this.checkColumns()),(e.gutter!==this.props.gutter||e["mobile-gutter"]!==this.props["mobile-gutter"])&&this.updateEditorRect()}updateEditorRect=fr.default.throttle(()=>{Ue.updateElementRect(this.props.columnInstance)},120,{leading:!0,trailing:!0});getColumnInfo=()=>({columnSizes:this.props.columnSpans.map(e=>e??0),units:this.props.units,columns:this.props.columnSpans.length,emptySet:fr.default.uniq(this.props.emptyColumns).length==1&&this.props.emptyColumns[0]==!0});onColumnAddOrRemove=e=>{let i=!1;e.forEach(r=>{Array.from(r.addedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(i=!0),Array.from(r.removedNodes).find(n=>n.tagName=="COLUMN-UNIT")&&(i=!0)}),i&&(this.columnObserver.disconnect(),i&&(Array.from(this.props.columnInstance.children).filter(n=>n.tagName=="COLUMN-UNIT").forEach(n=>{this.columnObserver.observe(n,this.columnObserverConfig)}),this.state.UIWindow?.setState?.({activeSettings:this.state.UIWindow.getColumnSettingsFromNodes()}))),this.state.UIWindow?.onMutation?.(),this.props.columnInstance.render()};onColumnChange=e=>{let i=!0;e.forEach(r=>{r.type=="attributes"&&r.attributeName==="span"&&(i=!0)}),i&&(this.props.columnInstance.render(),this.state.UIWindow?.onMutation?.())};setColumns=e=>{let i=Array.from(this.props.columnInstance.children).filter(o=>o.tagName=="COLUMN-UNIT"),r=i.length;if(r!=e){if(r<e)for(var n=0;n<e-r;n++){let o=this.columnCache.pop()||document.createElement("column-unit");o.removeAttribute("span"),this.props.columnInstance.appendChild(o)}else if(e<r)for(var n=r-1;n>=e;n--){let s=i[n];this.columnCache.push(s.cloneNode(!0)),s.setAttribute("data-discarded-column",!0),s.remove()}this.saveColumnSettings()}};resetColumns=()=>{this.updateColumns(this.props.columnSpans.map(e=>{}))};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount(){Fg.add(this),we.globalDragEventController.on("dragover",this.onDragOver),we.globalDragEventController.on("dragstart",this.onDragStart),we.globalDragEventController.on("dragend",this.onDragEnd),we.globalDragEventController.on("drop",this.onDragEnd),this.columnAddOrRemoveObserver.observe(this.props.columnInstance,this.columnAddOrRemoveObserverConfig),Array.from(this.props.columnInstance.children).filter(r=>r.tagName=="COLUMN-UNIT").forEach(r=>{this.columnObserver.observe(r,this.columnObserverConfig)}),this.checkColumns(),this.props.columnInstance._editorInterface=this;let i=[];if(Array.from(this.props.columnInstance.childNodes).forEach((r,n)=>{r.tagName!=="COLUMN-UNIT"&&(this.props.columnInstance.removeChild(r),i.push(r))}),i.length>0&&console.warn("removed stray elements from column set",i),this.props.columnInstance._newColumnSet){delete this.props.columnInstance._newColumnSet,Ue.activateHoverElement(this.props.columnInstance),Ue.lockItem(this.props.columnInstance);let r=n=>{this.showOutlinesTimeout=setTimeout(()=>{Ue.unlockItem(this.props.columnInstance),Ue.testHover()},500),window.removeEventListener("mousedown",r)};window.addEventListener("mousedown",r)}this.testHoverTimeout=setTimeout(()=>{Ue.testHover()},300)}componentWillUnmount(){Fg.delete(this),clearTimeout(this.testHoverTimeout),this.state.UIWindow?.closeWindow?.(),clearTimeout(this.showOutlinesTimeout),this.updateColumns.cancel(),this.columnAddOrRemoveObserver.disconnect(),this.columnObserver.disconnect(),we.globalDragEventController.off("dragover",this.onDragOver),we.globalDragEventController.off("dragstart",this.onDragStart),we.globalDragEventController.off("dragend",this.onDragEnd),we.globalDragEventController.off("drop",this.onDragEnd),delete this.props.columnInstance._editorInterface}};rO=Nt(De(Dle,null)(m2))});var oO,zg,Lle,aO=T(()=>{Pe();Se();ht();Re();Za();Oi();Mg();Xa();oO=ce(ve(),1);Wi();Ni();el();nO();W();zg=class extends ae{constructor(e){super(e),this.state={mobileActive:Qe.data.mobile.active,elWidth:0,gutterWidth:0,hasSizes:!1,incrementLayout:0},this.props.baseNode.render=()=>{this.setState({incrementLayout:this.state.incrementLayout++})}}render(e,i){let{adminMode:r,baseNode:n,pageInfo:o,"mobile-stack":s,"mobile-hide-empty":u,"mobile-gutter":c,units:d}=e,{gutterWidth:p,mobileActive:g,hasSizes:v}=i,{elWidth:b}=i;v||(b=this.props.baseNode.offsetWidth);let S=[],_="";g?c===void 0?(S=Jt(e.gutter,"rem"),S[1].indexOf("calc(")>-1?_=S[1].replace("calc(","("):_=S.join(""),_="calc( var(--mobile-padding-offset, 1) * "+_+" )"):(S=Jt(c,"rem"),_=S.join(""),_.includes("rem")&&(_="calc( var(--mobile-padding-offset, 1) * "+_+" )")):(S=Jt(e.gutter,"rem"),_=S.join(""));let E=Array.from(n.children).filter(K=>K.nodeName==="COLUMN-UNIT"&&!K.hasAttribute("data-discarded-column"));Array.from(n.children).filter(K=>K.nodeName==="COLUMN-UNIT"&&K.hasAttribute("data-discarded-column")).forEach(K=>{K.remove()});let F=E.map(K=>!Array.from(K.childNodes).some(U=>U.nodeType===Node.ELEMENT_NODE||U.nodeType===Node.TEXT_NODE&&U.nodeValue.trim().length>0)),O=E.map(K=>parseInt(K.getAttribute("span"))||void 0),L=0,z=O.map((K,U)=>(g&&F[U]&&(u||s)?(L=L+(parseInt(K)||1),K="hide"):K=K||"uniform",K)),G=z.filter(K=>K=="uniform"||K=="hide").length==z.length,H=Math.max(E.length,this.props.units);G&&(L=z.filter(K=>K=="hide").length),H=H-L;let{columnAndGutterMap:N,columnWidth:J,gutterPixelWidth:oe}=ju(G?E.length-L:H,p,b),te="";if(g&&s){te=`::slotted(column-unit){
				--column-width: ${b}px;
				--resize-parent-width: ${b}px;

			}`;let K=oO.default.findLastIndex(z,U=>U!=="hide");z.forEach((U,se)=>{U=="hide"?te+=`
					::slotted(column-unit[slot="${se}"]) {
						display: none;
					}`:se<K&&(te+=`
					::slotted(column-unit[slot="${se}"]) {
						margin-bottom: ${oe}px;
					}`)})}else{let K=0;te=z.map((U,se)=>{let re,Q;switch(U){case"uniform":return re=N[K]?.right-N[K]?.left||10,K+=1,`::slotted(column-unit[slot="${se}"]) {
							--column-width: ${re}px;
							--resize-parent-width: ${re}px;
						}`;case"hide":return`::slotted(column-unit[slot="${se}"]) {
							display: none;
						}`;default:return re=N[K+(U+-1)]?.right-N[K]?.left||10,K+=U,`::slotted(column-unit[slot="${se}"]) {
							--column-width: ${re}px;
							--resize-parent-width: ${re}px;
						}`}}).join(`
				`)}return E.forEach((K,U)=>{K.setAttribute("slot",U)}),je(m(X,{children:[m(In,{adminMode:r,baseNode:n,customElementMode:!0,scrollContext:this.props.scrollContext,children:[m("style",{children:`
						:host{
							visibility: ${v?"visible":"hidden"};
			 				--columns-gutter: ${oe}px;
							margin-top: calc(var(--gutter-expand, 0) * ${oe}px);
		
							width: 100%;
							position: relative;
							contain: layout;
							clear: both;							

							${g&&s?`
									display: flex;
									align-items: start;
									justify-content: flex-start;
									flex-direction: column;
									flex-wrap: nowrap;
									height: auto;
								`:`
									display: flex;
								    align-items: stretch;
								    justify-content: flex-start;							
									flex-direction: row;
									flex-wrap: nowrap;							
								`}
						}
		
					`}),m("style",{children:`
		
						::slotted(column-unit:not(:last-child)) {
						    margin-right: ${g&&s?0:oe+"px"};
						}
		
						::slotted(column-unit) {
							display: block;
							word-wrap: break-word;
							position: relative;
						    max-width: 100%;   
						    flex-grow: 0;
						    flex-shrink: 0;
						    flex-basis: ${g&&s?"auto":"var(--column-width)"};
						    width: var(--column-width);
						}
		
						::slotted(column-unit:last-child) {
						    flex-grow: 1;
						}
		
						${te}				
					`}),m(Br,{values:{elWidth:"100%",gutterWidth:_},style:{position:"absolute",inset:"0 auto"},onResize:this.onResize}),E.map((K,U)=>m("slot",{name:U}))]}),r&&o.isEditing&&!ne&&m(rO,{elWidth:b,gutterWidth:p,emptyColumns:F,isMobile:g,mobileStack:s,mobileHideEmpty:u,layoutColumns:H,units:d,columnSpans:O,unitsToRemove:L,displaySpans:z,gutter:_,columnInstance:n})]}),this.props.baseNode.shadowRoot)}onResize=(e,i)=>{this.setState(r=>{let n={...r};return n[e]=i,n.hasSizes=!0,n})};onMobileChange=e=>{this.setState({mobileActive:e})};componentDidMount(){Qe.on("mobile-change",this.onMobileChange)}componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange)}};zg.defaultProps={units:12,gutter:"1rem","mobile-stack":!0,"mobile-hide-empty":!1,"mobile-gutter":void 0};Lle=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode}))(zg));Zt(Lle,"column-set",["units","gutter","mobile-gutter","mobile-stack","mobile-hide-empty"])});var iOe,g2,sO,lO=T(()=>{Pe();Se();Mt();la();Di();iOe=ce(ve(),1);Gn();W();g2=class extends ae{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,i){let{audioPlayerInstance:r}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:u}=i,c=23;return m(X,{children:[m("style",{id:"audio-player-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),m(pr,{hasFocus:u,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.audioPlayerInstance,render:d=>{let{pointerAttention:p,overlayPosition:g}=d,v=0;return g.y<=1&&(v=Math.min(-g.y+1,g.height+-c+1)),m(X,{children:[m(Vi,{baseNode:r,overlayPosition:g,inFront:!1,overlayMode:!0}),m("div",{className:`editor-overlay editor-outline${p?" hover":""}${p?" button-hover":""}${u?" focus":""}`,style:{transform:`translate3d(${g.x}px, ${g.y}px, 0)`,width:g.width+"px",height:g.height+"px",display:p||s||u?"block":"none",minHeight:"27px"},children:[m("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${v}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[m("button",{onMouseDown:b=>{this.launchUIWindow(b)},ref:this.AudioPlayerButtonRef,className:"text",children:"Audio Player"}),e.children]}),e.otherUI]})]})}})]})}launchUIWindow=(e,i)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.audioPlayerInstance.getBoundingClientRect(),n={x:r.x,y:r.y,left:r.right,right:r.right,top:r.top-10,bottom:r.top+27,width:r.width,height:10};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"audioplayer-ineditor",windowAlias:"audioplayer",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{audioPlayerNode:this.props.audioPlayerInstance}})};scrollIntoView=()=>{let e=this.props.audioPlayerInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.audioPlayerInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.audioPlayerInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.audioPlayerInstance._editorInterface}},sO=g2});var pOe,v2,mp,b2,Fle,uO=T(()=>{Pe();Se();Ra();pOe=ce(ve(),1);Re();ht();Wi();Ni();lO();W();ne||(v2=new ResizeObserver(t=>{t.forEach(e=>{if(mp.has(e.target)){let i=mp.get(e.target),r=e.borderBoxSize[0]||e.borderBoxSize;i.setState({size:{width:r.inlineSize,height:r.blockSize}})}})}));mp=new Map,b2=class extends ae{constructor(e){super(e);let i=this.getFiletype(e.src);this.audio_track=me(),this.bar=me(),this.track_buffer=me(),this.current_time=me(),this.progressIndicator=me(),this.state={size:{width:100,height:100},mounted:i!=="stream",filetype:i,seeking:!1,mouseInteractionDisabled:!1,mouseMoveActive:!1,dragging:!1,streaming:!1,paused:!0,playing:!1,started:!1,ended:!1,preventTransition:!1,currentProgress:0,currentBuffer:0,remainingBuffer:0,currentTime:"0:00",rawTimeStamp:0,totalTime:"0:00",progress:0,hasError:!1,hasMetadata:!1}}render(e,i){let{baseNode:r,adminMode:n,label:o,loop:s,"total-time":u,"playback-time":c,"seek-controls":d,"browser-default":p,pageInfo:g}=e,{visible:v}=i,b=!this.state.paused||this.state.started,S=this.props.src?this.props.src:null;return je(m(X,{children:[n&&g.isEditing&&m(sO,{audioPlayerInstance:r}),m("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
						--audio-player-progress: ${this.state.currentProgress/100||0};
						--audio-player-buffer-progress: ${this.state.currentBuffer/100||0};
						--audio-player-buffer-remaining: ${this.state.remainingBuffer/100||0};
						max-width: 100%;
						${p?`
						    width: 400px;
						    `:`
						    position: relative;
						    display: inline-flex;
						    align-items: stretch;
						    width: 100%;`}
					}

					${p&&`
					audio {
						width: 100%;
					}

					[part="time-bar"], 
					[part="button"],
					[part="separator"]{
						display:none!important;
					}						
					`}



					[part="buffer"],
					[part="progress"] {
						display: ${b&&!this.state.streaming?"block":"none"};
					}

					[part="label"] {
						display: ${this.state.paused&&!this.state.started?"block":"none"};
					}

					[part="current-time"] {
						display: ${!this.state.streaming&&this.state.started?"block":"none"};
					}

					[part="stream-anim"] {
						display: ${b&&this.state.streaming?"block":"none"};
					}

					[part="total-time"] {
						display: ${b&&!this.state.streaming?"block":"none"};
					}

					[part="buffer"]{
						left: calc( var(--audio-player-buffer-progress, 0) * 100% );
						width: calc( var(--audio-player-buffer-remaining, 0) * 100% );
					}

					[part="progress"]{
						width: calc( var(--audio-player-progress, 0) * 100% );
					}

					[part="stream-anim"] > span {
					  animation-name: period;
					  animation-duration: 1.5s;
					  animation-iteration-count: infinite;
					  animation-timing-function: steps(2, end);  
					}

					[part="stream-anim"] > span:before {
						content: '.';
					}

					[part="stream-anim"] > span:nth-child(1){
					  animation-delay: -.4s;
					}

					[part="stream-anim"] > span:nth-child(2){
					  animation-delay: -.2s;
					}

					[part="stream-anim"] > span:nth-child(3){
					  animation-delay: 0s;
					}

					@keyframes period {
					  from {
					    visibility: hidden;
					  }
					  to {
					    visibility: visible;
					  }
					   
					}					
				
					`}),m("div",{part:"button",onClick:_=>this.togglePlay(_),children:m("svg",{"vector-effect":"non-scaling-stroke",part:this.state.paused?"play-icon icon":"pause-icon icon",x:"0px",y:"0px",viewBox:this.state.paused?"0 0 11.3 12":"0 0 10 12",children:this.state.paused?m("polygon",{points:"0 0 0 12 11.3 6 0 0",part:"play-icon-path icon-path"}):m(X,{children:[m("polygon",{part:"pause-icon-path icon-path",points:"0 0 0 12 1 12 4 12 4 0 1 0 0 0"}),m("polygon",{part:"pause-icon-path icon-path",points:"9 0 6 0 6 12 9 12 10 12 10 0 9 0"})]})})}),m("div",{part:"separator",children:"\xA0"}),m("div",{draggable:this.props.adminMode?"true":null,part:"time-bar",ref:this.bar,onMouseDown:_=>this.onMouseDown(_),onTouchStart:_=>this.onMouseDown(_),onTouchEnd:_=>this.onMouseUp(_),children:[m("div",{ref:this.track_buffer,part:"buffer",children:" "}),m("div",{part:"progress",children:m("div",{ref:this.progressIndicator,part:"progress-indicator"})}),m("div",{part:"label",children:this.state.hasError?"Unable to load file":m(X,{children:this.props.label})}),m("div",{part:"current-time",ref:this.current_time,children:this.state.currentTime}),m("div",{part:"stream-anim",children:[m("span",{part:"animated-period period-one"}),m("span",{part:"animated-period period-two"}),m("span",{part:"animated-period period-three"})]}),m("div",{part:"total-time",children:this.state.totalTime})]}),m("audio",{draggable:this.props.adminMode?"true":null,part:"audio-element",controls:p===!0,src:this.state.mounted?S:null,ref:this.audio_track,loop:this.props.loop===!0||this.props.loop==="true"?!0:void 0,preload:this.state.filetype==="file"?"metadata":null,onProgress:_=>this.onProgress(_),onLoadedMetaData:_=>this.onLoadedMetadata(_),onTimeUpdate:_=>this.updatePlayerTime(_),onSeeking:_=>this.onSeekStart(_),onSeeked:_=>this.onSeekEnd(_),onEnded:_=>this.onTrackEnd(_),onError:_=>this.onError(_),onCanPlay:_=>this.clearError(_)})]}),r.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};setPlayState=e=>{this.setState({playing:!0,paused:!1,started:!0,streaming:this.state.filetype==="stream"},()=>{this.props.baseNode.setAttribute("status",this.state.filetype==="stream"?"streaming":"playing")})};setPauseState=e=>{this.setState({paused:!0},()=>{this.props.baseNode.setAttribute("status","stopped")}),this.state.streaming&&this.setInitialState()};setInitialState=(e,i)=>{this.state.streaming&&this.setState({started:!1}),this.setState({playing:!1,paused:!0,animIndex:0,currentTime:0,currentProgress:0,currentBuffer:0,remainingBuffer:0,rawTimeStamp:0},()=>{this.props.baseNode.setAttribute("status",i?.error===!0?"error":"stopped")})};onMouseDown=e=>{this.state.mouseInteractionDisabled||this.state.streaming||e.button===2||this.state.started===!1||(e.preventDefault(),document.body.classList.add("audio-player-dragging"),this.calculateProgressPosition(e),this.setState({mouseMoveActive:!0,preventTransition:!0,dragging:!1}),this.bar.current.addEventListener("mousemove",this.onMouseInteraction),this.bar.current.addEventListener("touchmove",this.onMouseInteraction),window.addEventListener("mousemove",this.onMouseInteraction),window.addEventListener("mouseup",this.onMouseUp))};calculateProgressPosition=e=>{let i=this.bar.current.getBoundingClientRect(),r=e.clientX||e.touches[0].clientX;r<i.left?this.audio_track.current.currentTime=0:r>i.right?this.audio_track.current.currentTime=this.audio_track.current.duration:this.audio_track.current.currentTime=this.audio_track.current.duration*((r-i.left)/this.state.size.width),this.updatePlayerTime()};onMouseInteraction=e=>{this.state.mouseInteractionDisabled||this.state.streaming||!this.state.started||!this.state.mouseMoveActive||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING||(this.calculateProgressPosition(e),this.setState({dragging:!0}))};onMouseUp=e=>{document.body.classList.remove("audio-player-dragging"),this.state.dragging===!0&&(!this.state.mouseInteractionDisabled&&!this.state.streaming&&this.state.started&&this.state.mouseMoveActive&&this.audio_track.current.readyState!==this.audio_track.current.HAVE_NOTHING&&this.calculateProgressPosition(e),this.state.paused===!1&&this.state.started===!0&&(this.audio_track.current.currentTime>=this.audio_track.current.duration-.001?this.setPauseState():this.audio_track.current.play())),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("mousemove",this.onMouseInteraction),this.bar.current.removeEventListener("touchmove",this.onMouseInteraction),this.setState({dragging:!1,mouseMoveActive:!1})};onSeekStart=e=>{this.setState({seeking:!0})};onSeekEnd=e=>{this.setState({seeking:!1})};togglePlay=e=>{if(!(this.state.mouseInteractionDisabled||!this.state.mounted))if(this.audio_track.current.paused){let i=this.audio_track.current.play();mp.forEach((r,n)=>{r!==this&&(r.audio_track.current.pause(),r.setPauseState())}),i?i.then(function(){this.setPlayState(),this.setState({preventTransition:!1})}.bind(this)).catch(this.onError).finally(function(){this.setState({preventTransition:!0})}.bind(this)):this.setPlayState()}else this.audio_track.current.pause(),this.setPauseState()};onError=e=>{this.props.adminMode||(this.setState({hasError:!0},()=>{this.setInitialState(null,{error:!0})}),e instanceof DOMException&&console.error(e))};clearError=e=>{this.state.hasError&&this.setState({hasError:!1},()=>{this.setInitialState(null,{error:!1})})};onTrackEnd=e=>{this.state.dragging!==!0&&(this.setState({ended:!0}),this.setPauseState())};onLoadedMetadata=e=>{if(!this.audio_track.current)return;let i=this.timestampToHumanReadable(this.audio_track.current.duration);this.setState({totalTime:i,streaming:!1,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","stopped")})};onProgress=e=>{this.audio_track.current&&(this.state.filetype==="stream"?this.setState({totalTime:0,streaming:!0,hasMetadata:!0},()=>{this.props.baseNode.setAttribute("status","streaming")}):this.setState({streaming:!1},()=>{this.props.baseNode.setAttribute("status","playing")}),this.updateBufferSize())};updatePlayerTime=e=>{if(cancelAnimationFrame(this.updateFrame),!this.state.started||!this.audio_track.current||this.audio_track.current.readyState===this.audio_track.current.HAVE_NOTHING)return;this.setState({rawTimeStamp:this.audio_track.current.currentTime});let{"browser-default":i}=this.props;if(i)return;let r=!1,n=this.audio_track.current.currentTime,o=this.timestampToHumanReadable(n),s=n/this.audio_track.current.duration*100,u=this.state.size.width,c=parseInt(window.getComputedStyle(this.progressIndicator.current).width);(this.props.loop==="true"||this.props.loop===!0)&&(s>=99.5||s===0)&&(r=!0),u*(s/100)<c&&(s=(100-s)*(c/u)),this.setState(d=>{let p=s;return d.dragging&&Math.abs(d.currentProgress-s)>1&&(p=s*.1+d.currentProgress*.9),this.updateBufferSize(.01*p*this.audio_track.current.duration),{currentTime:o,currentBuffer:p,currentProgress:p,preventTransition:r}}),this.state.dragging&&(this.updateFrame=requestAnimationFrame(this.updatePlayerTime))};getFiletype=(e="")=>{let i=!1;try{i=new URL(e).pathname.split("/").pop()?.indexOf(".")>-1}catch(n){console.error(n)}return i&&["m3u","pls","m3u8","asx"].some(n=>e.toLowerCase().endsWith(n))?"playlist":i?"file":"stream"};updateBufferSize=e=>{if(!this.audio_track.current)return;let i,r=e||this.audio_track.current.currentTime,n=0;for(var o=0;o<this.audio_track.current.buffered.length;o++)if(r>=this.audio_track.current.buffered.start(o)&&r<=this.audio_track.current.buffered.end(o)){i=Math.max(this.audio_track.current.buffered.end(o)-r,0),n=i/this.audio_track.current.duration*100;break}n!==0&&(n+=1),this.setState({remainingBuffer:n})};timestampToHumanReadable=e=>{if(isNaN(e))return"0:00";var i=Math.floor(e%60),r=Math.floor(e/60),n=Math.floor(r/60);return i<10&&(i="0"+i),n>0?(r=r-n*60,r<10&&(r="0"+r),n+":"+r+":"+i):r+":"+i};onDragStart=e=>{this.setState({started:!1}),this.audio_track.current.pause(),this.setInitialState(),e.dataTransfer.setData("audio-player-drag","true")};componentDidMount(){this.setPauseState(),this.state.mounted||setTimeout(()=>{this.setState({mounted:!0})},this.state.filetype==="stream"?2e3:0),ne||(this.props.baseNode.addEventListener("dragstart",this.onDragStart),mp.set(this.bar.current,this),v2.observe(this.bar.current))}componentDidUpdate(e){e.src!==this.props.src&&(this.setState({filetype:this.getFiletype(this.props.src)}),e.src&&e.src.substring(0,5)==="blob:"&&(this.state.rawTimeStamp!==0&&(this.audio_track.current.currentTime=this.state.rawTimeStamp),this.state.paused===!1&&this.audio_track.current.play()))}componentWillUnmount(){ne||(this.props.baseNode.removeEventListener("dragstart",this.onDragStart),mp.delete(this.bar.current),v2.unobserve(this.bar.current)),window.removeEventListener("mouseup",this.onMouseUp)}},Fle=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode}))(b2));Zt(Fle,"audio-player",["src","label","loop","total-time","playback-time","seek-controls","browser-default"])});var dO=$((wOe,cO)=>{"use strict";cO.exports=function t(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;var r,n,o;if(Array.isArray(e)){if(r=e.length,r!=i.length)return!1;for(n=r;n--!==0;)if(!t(e[n],i[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(i).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(i,o[n]))return!1;for(n=r;n--!==0;){var s=o[n];if(!t(e[s],i[s]))return!1}return!0}return e!==e&&i!==i}});function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},ko.apply(null,arguments)}function Ku(t,e){if(t==null)return{};var i={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;i[r]=t[r]}return i}function zle(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hle(t){var e=zle(t,"string");return typeof e=="symbol"?e:e+""}function Vle(){let[t,e]=It({});return{mapInstances:t,addMapInstance:(o,s="default")=>{e(u=>ko({},u,{[s]:o}))},removeMapInstance:(o="default")=>{e(s=>Ku(s,[o].map(Hle)))},clearMapInstances:()=>{e({})}}}function $le(t){let{onLoad:e,apiKey:i,version:r,libraries:n=[]}=t,o=Ku(t,qle),[s,u]=It(ul.loadingStatus),[c,d]=ho((b,S)=>ko({},b,{[S.name]:S.value}),{}),p=Vt(()=>n?.join(","),[n]),g=Vt(()=>JSON.stringify(ko({apiKey:i,version:r},o)),[i,r,o]),v=ka(async b=>{var S;if(c[b])return c[b];if(!((S=google)!=null&&(S=S.maps)!=null&&S.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");let _=await window.google.maps.importLibrary(b);return d({name:b,value:_}),_},[c]);return Ke(()=>{(async()=>{try{let b=ko({key:i},o);r&&(b.v=r),p?.length>0&&(b.libraries=p),b.solutionChannel===void 0?b.solutionChannel=Wle:b.solutionChannel===""&&delete b.solutionChannel,await ul.load(b,S=>u(S));for(let S of["core","maps",...n])await v(S);e&&e()}catch(b){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",b)}})()},[i,p,g]),{status:s,loadedLibraries:c,importLibrary:v}}function jle(t,e){for(let i of Zle){let r=e[i],n=gO[i];Ke(()=>{if(!t||!r)return;let o=google.maps.event.addListener(t,n,s=>{r(Gle(n,t,s))});return()=>o.remove()},[t,n,r])}}function Gle(t,e,i){let r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Kle.includes(t)){let o=r,s=e.getCenter(),u=e.getZoom(),c=e.getHeading()||0,d=e.getTilt()||0,p=e.getBounds();return(!s||!p||!Number.isFinite(u))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),o.detail={center:s?.toJSON()||{lat:0,lng:0},zoom:u||0,heading:c,tilt:d,bounds:p?.toJSON()||{north:90,east:180,south:-90,west:-180}},o}else if(Yle.includes(t)){var n;if(!i)throw new Error("[createEvent] mouse events must provide a srcEvent");let o=r;return o.domEvent=i.domEvent,o.stoppable=!0,o.stop=()=>i.stop(),o.detail={latLng:((n=i.latLng)==null?void 0:n.toJSON())||null,placeId:i.placeId},o}return r}function Xle(t,e){let i=At(void 0);(!i.current||!(0,fO.default)(e,i.current))&&(i.current=e),Ke(t,i.current)}function Qle(t,e){let i={},r=Object.keys(e);for(let n of r)Jle.has(n)&&(i[n]=e[n]);Xle(()=>{t&&t.setOptions(i)},[i])}function vO(){var t;return((t=ki(vp))==null?void 0:t.status)||ha.NOT_LOADED}function eue(t,e){let{viewport:i,viewState:r}=e,n=!!i;return ir(()=>{if(!t||!r)return;let{latitude:o,longitude:s,bearing:u,pitch:c,zoom:d}=r;t.moveCamera({center:{lat:o,lng:s},heading:u,tilt:c,zoom:d+1})},[t,r]),n}function tue(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function bO(t){return tue(t)?t:t.toJSON()}function iue(t,e,i){let r=i.center?bO(i.center):null,n=null,o=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(n=r.lat,o=r.lng);let s=Number.isFinite(i.zoom)?i.zoom:null,u=Number.isFinite(i.heading)?i.heading:null,c=Number.isFinite(i.tilt)?i.tilt:null;ir(()=>{if(!t)return;let d={},p=!1;n!==null&&o!==null&&(e.current.center.lat!==n||e.current.center.lng!==o)&&(d.center={lat:n,lng:o},p=!0),s!==null&&e.current.zoom!==s&&(d.zoom=s,p=!0),u!==null&&e.current.heading!==u&&(d.heading=u,p=!0),c!==null&&e.current.tilt!==c&&(d.tilt=c,p=!0),p&&t.moveCamera(d)})}function nue(){let[t,e]=It(null),i=ka(r=>e(r),[e]);return[t,i]}function yO(){return vO()===ha.LOADED}function oue(){let[,t]=ho(e=>e+1,0);return t}function aue(t,e){let i=t.getCenter(),r=t.getZoom(),n=t.getHeading()||0,o=t.getTilt()||0,s=t.getBounds();(!i||!s||!Number.isFinite(r))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:i?.toJSON()||{lat:0,lng:0},zoom:r||0,heading:n,tilt:o})}function sue(t){let e=oue(),i=At({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return Ke(()=>{if(!t)return;let r=google.maps.event.addListener(t,"bounds_changed",()=>{aue(t,i),e()});return()=>r.remove()},[t,e]),i}function cue(t,e){let i=yO(),[r,n]=It(null),[o,s]=nue(),u=sue(r),{id:c,defaultBounds:d,defaultCenter:p,defaultZoom:g,defaultHeading:v,defaultTilt:b,reuseMaps:S,renderingType:_,colorScheme:E}=t,I=Ku(t,lue),F=t.zoom!==void 0||t.defaultZoom!==void 0,O=t.center!==void 0||t.defaultCenter!==void 0;!d&&(!F||!O)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!I.center&&p&&(I.center=p),!I.zoom&&Number.isFinite(g)&&(I.zoom=g),!I.heading&&Number.isFinite(v)&&(I.heading=v),!I.tilt&&Number.isFinite(b)&&(I.tilt=b);for(let z of Object.keys(I))I[z]===void 0&&delete I[z];let L=At();return Ke(()=>{if(!o||!i)return;let{addMapInstance:z,removeMapInstance:G}=e,{mapId:H}=t,N=`${H||"default"}:${_||"default"}:${E||"LIGHT"}`,J,oe;if(S&&Gu.has(N)?(oe=Gu.pop(N),J=oe.getDiv(),o.appendChild(J),oe.setOptions(I),setTimeout(()=>oe.setCenter(oe.getCenter()),0)):(J=document.createElement("div"),J.style.height="100%",o.appendChild(J),oe=new google.maps.Map(J,ko({},I,_?{renderingType:_}:{},E?{colorScheme:E}:{}))),n(oe),z(oe,c),d){let{padding:te}=d,K=Ku(d,uue);oe.fitBounds(K,te)}else(!F||!O)&&oe.fitBounds({east:180,west:-180,south:-90,north:90});if(L.current){let{mapId:te,cameraState:K}=L.current;te!==H&&oe.setOptions(K)}return()=>{L.current={mapId:H,cameraState:u.current},J.remove(),S?Gu.push(N,oe):google.maps.event.clearInstanceListeners(oe),n(null),G(c)}},[o,i,c,t.mapId,t.renderingType,t.colorScheme]),[r,s,u]}function due(...t){let e=JSON.stringify(t);pO.has(e)||(pO.add(e),console.error(...t))}function pue(t){let e=yO(),i=ki(vp);return Ke(()=>{!e||!i||i.importLibrary(t)},[e,i,t]),i?.loadedLibraries[t]||null}function hue(t,e,i){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");let r=t.style;if(i==null){if(e==null)return;for(let n in e)e.hasOwnProperty(n)&&hO(r,n,e[n]);return}for(let n in i)i.hasOwnProperty(n)&&(e==null||!e.hasOwnProperty(n))&&(n.indexOf("--")===0?r.setProperty(n,""):n==="float"?r.cssFloat="":r[n]="");if(e!=null)for(let n in e){let o=e[n];e.hasOwnProperty(n)&&i[n]!==o&&hO(r,n,o)}}function hO(t,e,i){let r=e.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,i):typeof i=="number"&&i!==0&&!mue(e)?t[e]=i+"px":e==="float"?t.cssFloat=i:t[e]=(""+i).trim()}function mue(t){return fue.has(t)}function Hg(t,e,i){Ke(()=>{if(!t||!e||!i)return;let r=google.maps.event.addListener(t,e,i);return()=>r.remove()},[t,e,i])}function gp(t,e,i){Ke(()=>{t&&(t[e]=i)},[t,e,i])}function vue(t){let[e,i]=It(null),[r,n]=It(null),o=At(null),s=Ug(),u=pue("marker"),{children:c,className:d,style:p,onClick:g,onDrag:v,onDragStart:b,onDragEnd:S,collisionBehavior:_,clickable:E,draggable:I,position:F,title:O,zIndex:L}=t,z=ks.count(c);return Ke(()=>{if(!s||!u)return;let G=new u.AdvancedMarkerElement;G.map=s,i(G);let H=null;return z>0&&(H=document.createElement("div"),G.content=H,n(H)),()=>{var N;G.map=null,(N=H)==null||N.remove(),i(null),n(null)}},[s,u,z]),Ke(()=>{!e||!e.content||(e.content.className=d||"")},[e,d]),gp(r,"className",d??""),Ke(()=>{r&&(hue(r,p||null,o.current),o.current=p||null)},[r,d,p]),gp(e,"position",F),gp(e,"title",O??""),gp(e,"zIndex",L),gp(e,"collisionBehavior",_),Ke(()=>{e&&(I!==void 0?e.gmpDraggable=I:v||b||S?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,I,v,S,b]),Ke(()=>{e&&(E!==void 0?e.gmpClickable=E:g?e.gmpClickable=!0:e.gmpClickable=!1)},[e,E,g]),Hg(e,"click",g),Hg(e,"drag",v),Hg(e,"dragstart",b),Hg(e,"dragend",S),[e,r]}function yue(t){let[e,i]=It(null),r=Ug(),{onClick:n,onDrag:o,onDragStart:s,onDragEnd:u,onMouseOver:c,onMouseOut:d}=t,p=Ku(t,bue),{position:g,draggable:v}=p;return Ke(()=>{if(!r){r===void 0&&console.error("<Marker> has to be inside a Map component.");return}let b=new google.maps.Marker(p);return b.setMap(r),i(b),()=>{b.setMap(null),i(null)}},[r]),Ke(()=>{if(!e)return;let b=e,S=google.maps.event;return n&&S.addListener(b,"click",n),o&&S.addListener(b,"drag",o),s&&S.addListener(b,"dragstart",s),u&&S.addListener(b,"dragend",u),c&&S.addListener(b,"mouseover",c),d&&S.addListener(b,"mouseout",d),e.setDraggable(!!v),()=>{S.clearInstanceListeners(b)}},[e,v,n,o,s,u,c,d]),Ke(()=>{e&&p&&e.setOptions(p)},[e,p]),Ke(()=>{v||!g||!e||e.setPosition(g)},[v,g,e]),e}var fO,ha,Ule,ul,qle,Ble,Wle,vp,mO,gO,Kle,Yle,Zle,Jle,rue,lue,uue,Gu,wO,y2,pO,Ug,fue,gue,xO,bue,SOe,CO=T(()=>{Se();Se();fO=ce(dO(),1);ha={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},Ule="https://maps.googleapis.com/maps/api/js",ul=class{static async load(e,i){var r;let n=e.libraries?e.libraries.split(","):[],o=this.serializeParams(e);this.listeners.push(i),(r=window.google)!=null&&(r=r.maps)!=null&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=ha.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=o,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==o&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");let s=["maps",...n];await Promise.all(s.map(u=>google.maps.importLibrary(u)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let i=null,r=()=>i||(i=new Promise((n,o)=>{var s;let u=document.createElement("script"),c=new URLSearchParams;for(let[d,p]of Object.entries(e)){let g=d.replace(/[A-Z]/g,v=>"_"+v[0].toLowerCase());c.set(g,p)}c.set("loading","async"),c.set("callback","__googleMapsCallback__"),u.async=!0,u.src=Ule+"?"+c.toString(),u.nonce=((s=document.querySelector("script[nonce]"))==null?void 0:s.nonce)||"",u.onerror=()=>{this.loadingStatus=ha.FAILED,this.notifyLoadingStatusListeners(),o(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=ha.LOADED,this.notifyLoadingStatusListeners(),n()},window.gm_authFailure=()=>{this.loadingStatus=ha.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=ha.LOADING,this.notifyLoadingStatusListeners(),document.head.append(u)}),i);google.maps.importLibrary=n=>r().then(()=>google.maps.importLibrary(n))}static notifyLoadingStatusListeners(){for(let e of this.listeners)e(this.loadingStatus)}};ul.loadingStatus=ha.NOT_LOADED;ul.serializedApiParams=void 0;ul.listeners=[];qle=["onLoad","apiKey","version","libraries"],Ble=["children"],Wle="GMP_visgl_rgmlibrary_v1_default",vp=_e.createContext(null);mO=t=>{let{children:e}=t,i=Ku(t,Ble),{mapInstances:r,addMapInstance:n,removeMapInstance:o,clearMapInstances:s}=Vle(),{status:u,loadedLibraries:c,importLibrary:d}=$le(i),p=Vt(()=>({mapInstances:r,addMapInstance:n,removeMapInstance:o,clearMapInstances:s,status:u,loadedLibraries:c,importLibrary:d}),[r,n,o,s,u,c,d]);return _e.createElement(vp.Provider,{value:p},e)};gO={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Kle=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Yle=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Zle=Object.keys(gO);Jle=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);rue=()=>{let t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return _e.createElement("div",{style:t},_e.createElement("h2",null,"Error: AuthFailure"),_e.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",_e.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};lue=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],uue=["padding"],Gu=class{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,i){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(i)}};Gu.entries={};wO=_e.createContext(null),y2=t=>{let{children:e,id:i,className:r,style:n}=t,o=ki(vp),s=vO();if(!o)throw new Error("<Map> can only be used inside an <ApiProvider> component.");let[u,c,d]=cue(t,o);iue(u,d,t),jle(u,t),Qle(u,t);let p=eue(u,t),g=!!t.controlled;Ke(()=>{if(u)return p&&u.setOptions({disableDefaultUI:!0}),(p||g)&&u.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{u.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[u,p,g,t.gestureHandling,t.keyboardShortcuts]);let v=t.center?bO(t.center):null,b=null,S=null;v&&Number.isFinite(v.lat)&&Number.isFinite(v.lng)&&(b=v.lat,S=v.lng);let _=Vt(()=>{var F,O,L,z,G;return{center:{lat:(F=b)!=null?F:0,lng:(O=S)!=null?O:0},zoom:(L=t.zoom)!=null?L:0,heading:(z=t.heading)!=null?z:0,tilt:(G=t.tilt)!=null?G:0}},[b,S,t.zoom,t.heading,t.tilt]);ir(()=>{if(!u||!g)return;u.moveCamera(_);let F=u.addListener("bounds_changed",()=>{u.moveCamera(_)});return()=>F.remove()},[u,g,_]);let E=Vt(()=>ko({width:"100%",height:"100%",position:"relative",zIndex:p?-1:0},n),[n,p]),I=Vt(()=>({map:u}),[u]);return s===ha.AUTH_FAILURE?_e.createElement("div",{style:ko({position:"relative"},r?{}:E),className:r},_e.createElement(rue,null)):_e.createElement("div",ko({ref:c,"data-testid":"map",style:r?void 0:E,className:r},i?{id:i}:{}),u?_e.createElement(wO.Provider,{value:I},e):null)};y2.deckGLViewProps=!0;pO=new Set;Ug=(t=null)=>{let e=ki(vp),{map:i}=ki(wO)||{};if(e===null)return due("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;let{mapInstances:r}=e;return t!==null?r[t]||null:i||r.default||null};fue=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);gue=_e.createContext(null);xO=rr((t,e)=>{let{children:i}=t,[r,n]=vue(t),o=Vt(()=>r?{marker:r}:null,[r]);return Ms(e,()=>r,[r]),n?_e.createElement(gue.Provider,{value:o},je(i,n)):null}),bue=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];SOe=rr((t,e)=>{let i=yue(t);return Ms(e,()=>i,[i]),_e.createElement(_e.Fragment,null)})});var Zu,bp,SO,Yu,_O,w2,wue,EOe,Ro,POe,IOe,TOe,AOe,MOe,EO=T(()=>{Zu=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-Zu.Bounce.Out(1-t)},Out:function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375},InOut:function(t){return t<.5?Zu.Bounce.In(t*2)*.5:Zu.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),bp=function(){return performance.now()},SO=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];for(var n=0,o=i;n<o.length;n++){var s=o[n];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},t.prototype.remove=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var r=0,n=e;r<n.length;r++){var o=n[r];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,i){e===void 0&&(e=bp()),i===void 0&&(i=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var o=this._tweens[r[n]],s=!i;o&&o.update(e,s)===!1&&!i&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},t}(),Yu={Linear:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),o=Yu.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[i],t[i-1],i-r):o(t[n],t[n+1>i?i:n+1],r-n)},Bezier:function(t,e){for(var i=0,r=t.length-1,n=Math.pow,o=Yu.Utils.Bernstein,s=0;s<=r;s++)i+=n(1-e,r-s)*n(e,s)*t[s]*o(r,s);return i},CatmullRom:function(t,e){var i=t.length-1,r=i*e,n=Math.floor(r),o=Yu.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(n=Math.floor(r=i*(1+e))),o(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],r-n)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[i]-(o(t[i],t[i],t[i-1],t[i-1],r-i)-t[i]):o(t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2],r-n)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=Yu.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var r=e;r>1;r--)i*=r;return t[e]=i,i}}(),CatmullRom:function(t,e,i,r,n){var o=(i-t)*.5,s=(r-e)*.5,u=n*n,c=n*u;return(2*e-2*i+o+s)*c+(-3*e+3*i-2*o-s)*u+o*n+e}}},_O=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),w2=new SO,wue=function(){function t(e,i){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Zu.Linear.None,this._interpolationFunction=Yu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=_O.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof i=="object"?(this._group=i,i.add(this)):i===!0&&(this._group=w2,w2.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,i){if(e===void 0&&(e=bp()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var n={};for(var o in this._valuesEnd)n[o]=this._valuesEnd[o];this._valuesEnd=n}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,i,r,n,o){for(var s in r){var u=e[s],c=Array.isArray(u),d=c?"array":typeof u,p=!c&&Array.isArray(r[s]);if(!(d==="undefined"||d==="function")){if(p){var g=r[s];if(g.length===0)continue;for(var v=[u],b=0,S=g.length;b<S;b+=1){var _=this._handleRelativeValue(u,g[b]);if(isNaN(_)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}v.push(_)}p&&(r[s]=v)}if((d==="object"||c)&&u&&!p){i[s]=c?[]:{};var E=u;for(var I in E)i[s][I]=E[I];n[s]=c?[]:{};var g=r[s];if(!this._isDynamic){var F={};for(var I in g)F[I]=g[I];r[s]=g=F}this._setupProperties(E,i[s],g,n[s],o)}else(typeof i[s]>"u"||o)&&(i[s]=u),c||(i[s]*=1),p?n[s]=r[s].slice().reverse():n[s]=i[s]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=bp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=bp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=Zu.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=Yu.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,i){var r=this,n;if(e===void 0&&(e=bp()),i===void 0&&(i=t.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(i)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,u=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),c=this._duration+this._repeat*u,d=function(){if(r._duration===0||s>c)return 1;var _=Math.trunc(s/u),E=s-_*u,I=Math.min(E/r._duration,1);return I===0&&s===r._duration?1:I},p=d(),g=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,g),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||s>=this._duration)if(this._repeat>0){var v=Math.min(Math.trunc((s-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=v);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*v,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var b=0,S=this._chainedTweens.length;b<S;b++)this._chainedTweens[b].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,i,r,n){for(var o in r)if(i[o]!==void 0){var s=i[o]||0,u=r[o],c=Array.isArray(e[o]),d=Array.isArray(u),p=!c&&d;p?e[o]=this._interpolationFunction(u,n):typeof u=="object"&&u?this._updateProperties(e[o],s,u,n):(u=this._handleRelativeValue(s,u),typeof u=="number"&&(e[o]=s+(u-s)*n))}},t.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},t.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},t.autoStartOnUpdate=!1,t}(),EOe=_O.nextId,Ro=w2,POe=Ro.getAll.bind(Ro),IOe=Ro.removeAll.bind(Ro),TOe=Ro.add.bind(Ro),AOe=Ro.remove.bind(Ro),MOe=Ro.update.bind(Ro)});var PO,x2,IO,TO=T(()=>{Pe();Se();Mt();la();Di();PO=ce(ve(),1);Gn();W();x2=class extends ae{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1,map:null,markers:[]},this.onMutate=PO.default.debounce(this.onMutate,0),this.changeObserver=new MutationObserver(this.onMutate)}handleMarkerDragEnd=e=>{let{index:i,lat:r,lng:n}=e.detail;if(isNaN(r)||isNaN(n))return;let o=[...this.state.markers];o[i]={...o[i],lat:r,lng:n},CargoEditor.mutationManager.execute(()=>{this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(o)))})};onChange(e){CargoEditor.mutationManager.execute(()=>{if(Object.keys(e)[0]==="markers")if(!this.state.markers||e.markers.length!==this.state.markers.length)this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(e.markers)));else{let i=this.state.markers.map((r,n)=>e.markers[n]?{...r,...e.markers[n]}:r);console.log("newMarkers",i),this.state.map.setAttribute("markers",encodeURIComponent(JSON.stringify(i)))}})}render(e,i){let{mapInstance:r}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:u}=i,c=23;return m(X,{children:[m("style",{id:"map-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),m(pr,{hasFocus:u,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.mapInstance,render:d=>{let{pointerAttention:p,overlayPosition:g}=d,v=0;return g.y<=1&&(v=Math.min(-g.y+1,g.height+-c+1)),m(X,{children:m("div",{className:`editor-overlay ${p?" button-hover":""}${u?" focus":""}`,style:{transform:`translate3d(${g.x}px, ${g.y}px, 0)`,width:g.width+"px",height:g.height+"px",display:p||s||u?"block":"none",minHeight:"27px"},children:[m("div",{className:"in-editor-buttons map",style:{transform:`translateY(${v}px)`,padding:"10px"},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[m("button",{onMouseDown:b=>{let S=this.state.map.map.getCenter(),_="",E=S.lat(),I=S.lng(),F=this.state.markers?[...this.state.markers,{purl:_,lat:E,lng:I}]:[{purl:_,lat:E,lng:I}];this.onChange({markers:F});let O=F.length-1;setTimeout(()=>{this.state.map.dispatchEvent(new CustomEvent("marker-click",{detail:{index:F.length-1,clientY:null,clientX:null}}))},200)},ref:this.MapButtonRef,className:"text",children:"Add Marker"}),m("button",{onMouseDown:b=>{this.launchMapUIWindow(b)},ref:this.MapButtonRef,className:"text",children:"Settings"}),e.children]}),e.otherUI]})})}})]})}handleMarkerClick=e=>{this.launchMarkerUIWindow(e.detail)};launchMarkerUIWindow=({clientX:e,clientY:i,index:r})=>{let o=(this.state.map?.shadowRoot?.querySelectorAll(`.marker-${r}`)[0]).getBoundingClientRect(),s={x:o.x,y:o.y,left:o.right,right:o.right,top:o.top-10,bottom:o.top+27,width:o.width,height:10};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:s,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance,markerIndex:r}})};launchMapUIWindow=(e,i)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.mapInstance.getBoundingClientRect(),n={x:r.x-10,y:r.y,left:r.right-10,right:r.right-10,top:r.top-10,bottom:r.top+27,width:r.width,height:10};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"map-ineditor",windowAlias:"map",positionRect:n,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{mapNode:this.props.mapInstance}})};scrollIntoView=()=>{let e=this.props.mapInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.mapInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.props.onScrollWhileHovered&&this.props.onScrollWhileHovered(e),this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};onMutate=()=>{this.getSettingsFromNodes()};getSettingsFromNodes(){this.setState({...this.state,map:this.props.mapInstance,markers:JSON.parse(decodeURIComponent(this.props.mapInstance.getAttribute("markers")||"[]"))})}componentDidUpdate=(e,i)=>{this.changeObserver.disconnect(),this.changeObserver.observe(this.state.map,{attributes:!0})};componentDidMount=()=>{this.props.mapInstance._editorInterface=this,this.canMutateTimeout=setTimeout(()=>{this.setState({...this.state,canMutate:!0})},300),this.getSettingsFromNodes(),this.props.mapInstance.addEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.addEventListener("marker-click",this.handleMarkerClick)};componentWillUnmount=()=>{this.props.mapInstance.removeEventListener("marker-dragend",this.handleMarkerDragEnd),this.props.mapInstance.removeEventListener("marker-click",this.handleMarkerClick),this.state.UIWindow?.closeWindow?.(),delete this.props.mapInstance._editorInterface,clearTimeout(this.canMutateTimeout),this.onMutate.cancel(),this.changeObserver.disconnect()}},IO=x2});function qg(t,e,i,r={}){let{duration:n=1e3,easing:o=xue}=r,s=performance.now(),u=t.getCenter(),c=t.getZoom(),d=t.getProjection(),p=new google.maps.LatLng(e),g=d.fromLatLngToPoint(p),v=d.fromLatLngToPoint(u),b=i-c;function S(E,I,F){return E+(I-E)*F}function _(){let I=performance.now()-s,F=Math.min(I/n,1),O=o(F),L=S(c,i,O),z=new google.maps.Point(S(v.x,g.x,O),S(v.y,g.y,O)),G,H;b>0&&(G=Math.pow(2,Math.abs(L-c)),H=new google.maps.Point(g.x+(z.x-g.x)/G,g.y+(z.y-g.y)/G)),b<0&&(G=Math.pow(2,Math.abs(L-i)),H=new google.maps.Point(v.x+(z.x-v.x)/G,v.y+(z.y-v.y)/G)),b===0&&(Math.sqrt(Math.pow(p.lat()-u.lat(),2)+Math.pow(p.lng()-u.lng(),2))*Math.pow(2,L-c)<4?H=z:H=g);let N=d.fromPointToLatLng(H);t.moveCamera({center:N,zoom:L});let J={x:g.x-H.x,y:g.y-H.y};(b!==0||J.x!==0||J.y!==0)&&F<1&&requestAnimationFrame(_)}_()}var ZOe,C2,xue,AO,Cue,Bg,S2,Sue,MO=T(()=>{Pe();Se();ZOe=ce(ve(),1);Re();ht();Wi();Mt();_i();CO();EO();Ra();Ni();TO();_w();W();xue=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;AO=()=>m("svg",{width:"58",height:"50",viewBox:"0 0 2 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M0.112305 0.460083L28.9258 14.1374L2.10889 24.6191V49.701H0.108887V22.9724H0.112305V0.460083Z",fill:"#FF0026"})}),Cue=({targetNode:t,activePurl:e})=>{let i=Ug();return Ke(()=>{if(i){let r=t.hasAttribute("follow-navigation")?t.getAttribute("follow-navigation")==="true":!1;if(e&&r){let o=(t.hasAttribute("markers")?JSON.parse(decodeURIComponent(t.getAttribute("markers"))):[]).find(s=>s.purl===e);o&&i.moveCamera({center:{lat:o.lat,lng:o.lng},zoom:17})}t.map=i}},[i]),null};ne||(C2=new ResizeObserver(t=>{t.forEach(e=>{if(Bg.has(e.target)){let i=Bg.get(e.target),r=e.borderBoxSize[0]||e.borderBoxSize;i.setState({size:{width:r.inlineSize,height:r.blockSize}})}})}));Bg=new Map,S2=class extends ae{constructor(e){super(e),this.state={mounted:!1,tagText:null},this.mapRef=me()}parseMarkersAttr(e){return JSON.parse(decodeURIComponent(e))}encodeMarkersAttr(e){return""}render(e,i){let{baseNode:r,adminMode:n,isEditing:o,pageInfo:s,markers:u,width:c="100%",height:d="50vh","map-id":p="6f83276caebd115a","default-zoom":g,"default-center":v,"show-zoom-controls":b=!1,"show-street-view-controls":S=!1,"show-map-type-controls":_=!1,"follow-navigation":E=!1}=e,I="AIzaSyAuHt0V0nJ5qTiUoWwsOwDfkTv0n1PJUNA",F=v?JSON.parse(decodeURIComponent(v)):{lat:37.7749,lng:-122.4194},O=[];if(u&&(O=this.parseMarkersAttr(u)),this.state.tagText!==null&&E===!0){let z=this.state.tagText.split(",").reduce((G,H)=>{let N=this.props.purlsByTag[H];if(!N||N.length===0)return G;for(let J of N)G.includes(J)||G.push(J);return G},[]);O=O.filter(G=>z.includes(G.purl))}return je(m(X,{children:[n&&s.isEditing&&m(IO,{mapInstance:r}),m("style",{children:`
					* {
				    	box-sizing: border-box;						
					}

					:host {
                        width: ${c};
                        height: ${d};
                        max-width: 100%;
                        max-height: var(--fit-height);
                        display: inline-block;
                        overflow: hidden;
					}
				
					`}),I?m(mO,{apiKey:I,children:m(y2,{defaultCenter:F,defaultZoom:g?parseInt(g):11,mapId:p,ref:this.mapRef,fullscreenControl:!1,gestureHandling:"greedy",streetViewControl:S==="true"||S===!0,mapTypeControl:_==="true"||_===!0,zoomControl:b==="true"||b===!0,children:[O&&O.length?O.map((L,z)=>!L.lat||!L.lng?null:m(xO,{className:`marker-${z} ${L.id?`mid-${L.id}`:""}`,draggable:!!(n&&s.isEditing),onClick:n&&s.isEditing?G=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-click",{detail:{index:z}}))}:n===!1?()=>{}:null,onDragEnd:G=>{this.props.baseNode.dispatchEvent(new CustomEvent("marker-dragend",{detail:{index:z,lat:G.latLng.lat(),lng:G.latLng.lng()}}))},position:{lat:L.lat,lng:L.lng},children:n||L.purl==="default"||L.purl===""?m(AO,{}):m("a",{href:L.purl,rel:"history",style:{fontSize:"24px",lineHeight:1,marginBottom:"-4px"},onClick:()=>{qg(this.props.baseNode.map,{lat:L.lat,lng:L.lng},17)},children:m(AO,{})})},z)):null,m(Cue,{targetNode:r,activePurl:this.props.activePurl})]})}):m("div",{style:{width:"100%",height:"100%",background:"gray",color:"red",fontSize:"24px"},children:"API key is required for Google Maps"})]}),r.shadowRoot)}disableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!0})};enableMouseInteraction=()=>{this.setState({mouseInteractionDisabled:!1})};handleGlobalClick=(e,i)=>{if(!this.props.markers||this.props.adminMode===!0)return;let r=JSON.parse(decodeURIComponent(this.props.markers));if(i.getAttribute("rel")==="map-marker"){let s=i.getAttribute("href");if(s){let u=r.find(c=>c.id===s);u&&qg(this.props.baseNode.map,{lat:u.lat,lng:u.lng},17);return}else return}let n=i.getAttribute("href");if(!n)return;i.hasAttribute("tag-text")?this.setState({tagText:i.getAttribute("tag-text")}):this.setState({tagText:null});let o=null;for(let s of r)if(s.purl===n){o=s;break}if(o)qg(this.props.baseNode.map,{lat:o.lat,lng:o.lng},17);else{let s=this.props["default-center"]?JSON.parse(decodeURIComponent(this.props["default-center"])):{lat:37.7749,lng:-122.4194},u=this.props["default-zoom"]?parseInt(this.props["default-zoom"]):11;qg(this.props.baseNode.map,s,u)}};componentDidMount(){ne||(Bg.set(this.props.baseNode,this),C2.observe(this.props.baseNode),this.props.baseNode.handleGlobalClick=this.handleGlobalClick)}componentDidUpdate(e,i){}componentWillUnmount(){ne||(Bg.delete(this.props.baseNode),C2.unobserve(this.props.baseNode))}},Sue=Nt(De((t,e)=>{let i=t.pages.byId,o=(e.markers?JSON.parse(decodeURIComponent(e.markers)).map(u=>u.purl):[]).map(u=>Object.values(i).find(c=>c.purl===u)).reduce((u,c)=>(c&&c.tags&&c.tags.forEach(d=>{u[d.url]||(u[d.url]=[]),u[d.url].push(c.purl)}),u),{}),s=t.pages.byId[t.frontendState.activePID]?.purl;return{purlsByTag:o,activePurl:s,adminMode:t.frontendState.adminMode}})(S2));Zt(Sue,"cargo-map",["api-key"])});var E2,_ue,Eue,Xu,_2,P2,kO,RO=T(()=>{Pe();Se();Mt();la();Di();Gn();Re();E2=ce(ve(),1);W();_ue=["{day}, {month-name} {day-of-month}, {year} {hour}:{minute} {period}","{hour}:{minute}:{second} {period}","{hour}:{minute}:{second}","{day-of-month}-{month}-{year}","{day-of-month} {month-name} {year}","{month-name} {day-of-month}, {year}","{month}/{day-of-month}/{year}","{day-of-month}/{month}/{year}","{time-of-day} of the {ordinal}"],Eue={day:"Day","day-of-month":"Day of Month",ordinal:"Ordinal Date",month:"Month","month-name":"Name of Month",period:"AM/PM",year:"Year",hour:"Hour",minute:"Minute",second:"Second",centisecond:"Centisecond","roman-year":"Year in Roman Numerals","time-of-day":"Time of Day"},Xu=new Set,_2=E2.default.debounce(()=>{let t=Array.from(Xu),e=[],i=t.filter(o=>o.state.selected).length>1,r=0;if(i){let o=t.map(u=>{let c;return u.state.selected?c=u.props.baseNode.getBoundingClientRect():c={top:-9e9},{component:u,rect:c}});e=E2.default.sortBy(o,(u,c)=>u.rect.top);let s=e.filter(u=>u.component.state.selected);r=s[s.length-1].rect.bottom+-s[0].rect.top,e=e.map(u=>u.component)}else e=t;let n=!1;e.forEach(o=>{!i||!o.state.selected?o.setState({pointerProxyAttention:!1,partOfMultipleSelection:!1,showMultipleSelectionButton:!1,multiSelectHeight:null}):n?o.setState({partOfMultipleSelection:!0,showMultipleSelectionButton:!1,multiSelectHeight:null}):(o.setState({pointerProxyAttention:!0,partOfMultipleSelection:!0,showMultipleSelectionButton:!0,multiSelectHeight:r}),n=!0)})},100);ne||(CargoEditor&&Object.keys(CargoEditor||{}).length>0?CargoEditor.events.on("cursor-activity",_2):window.addEventListener("CargoEditor-load",function(){CargoEditor.events.on("cursor-activity",_2)}),document.addEventListener("selectionchange",_2));P2=class extends ae{constructor(e){super(e),this.state={UIWindow:!1,showMultipleSelectionButton:!1,partOfMultipleSelection:!1,fontSizePx:16,lineHeightPx:24,selected:!1}}render(e,i){let{}=e,{UIWindow:r,showMultipleSelectionButton:n,partOfMultipleSelection:o,pointerProxyAttention:s,fontSizePx:u,lineHeightPx:c}=i,d,p=0,g=this.state.showMultipleSelectionButton&&this.state.multiSelectHeight;return m(X,{children:[m("style",{id:"digital-clock-editor",children:`::selection{
						background-color:transparent;
					}
					:host(::selection) {
						background-color:transparent;
					}`}),m(Vi,{baseNode:this.props.clockInstance,overlayMode:!1,onSelectionChange:this.onSelectionChange}),m(pr,{hasFocus:!!r,trackResize:!0,buttonMode:"inside",baseNode:this.props.clockInstance,buttonHeight:0,onPointerIn:this.pointerIn,onPointerOut:this.pointerOut,render:v=>{let{pointerAttention:b,overlayPosition:S}=v,_=0;return S.y<=1&&(_=Math.min(-S.y+1,S.height+-p+1)),n&&o?d=m("button",{style:{transform:`translateY(${_}px)`},"data-editor-overlay":"true",class:`${S.height<30?"small":""} clock-button multiple`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,onMouseUp:this.onOptionsButtonContextMenu,children:"Edit Multiple"}):!n&&!o&&(d=m("button",{style:{transform:`translateY(${_}px)`},"data-editor-overlay":"true",class:`${S.height<30?"small":""} clock-button`,onMouseDown:this.onOptionsButtonClick,onContextMenu:this.onOptionsButtonContextMenu,children:m("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m("circle",{className:"inner-circle",cx:"8.5",cy:"8.65747",r:"7.5"}),m("circle",{className:"outer-circle",cx:"8.5",cy:"8.65747",r:"8"}),m("circle",{className:"dot",cx:"8.49977",cy:"8.65747",r:"1"}),m("circle",{className:"dot",cx:"5.07",cy:"8.65747",r:"1"}),m("circle",{className:"dot",cx:"11.9295",cy:"8.65747",r:"1"})]})})),m(X,{children:m("div",{className:`editor-overlay ${n?"edit-multiple":""} digital-clock editor-outline${b||r?" hover":""}${b||r?" button-hover":""}${r?" focus":""}`,style:{transform:`translate3d(${S.x}px, ${S.y}px, 0)`,width:S.width+"px",height:g?this.state.multiSelectHeight:S.height+"px"},children:[d,e.children]})})}})]})}onOptionsButtonContextMenu=e=>{e.metaKey||e.preventDefault()};onMouseDown=e=>{e.button==2&&!e.metaKey&&(e.preventDefault(),this.launchUIWindow(e))};onOptionsButtonClick=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation(),this.launchUIWindow()}};launchUIWindow=e=>{let i=this.props.clockInstance.getBoundingClientRect(),r=document.documentElement.clientHeight,n=document.documentElement.clientWidth,o=this.props.clockInstance.getAttribute("value"),u=_ue.includes(o)||o?.indexOf?.("{")===-1?270:360,c=220,d=15,p=i.left,g=i.top,v={x:i.left,y:i.top,left:i.left,right:i.left,top:i.top,bottom:i.top+27,width:0,height:10};r-i.bottom>u+d?g=i.top+i.height+d:r-(i.bottom+-i.height*.5)>u+d?g=i.top+i.height*.5+d:i.top>u+-d&&(g=i.top+-u+-d),n-i.left<c&&(p=i.left-c),v.x=p,v.left=p,v.right=p,v.width=0,v.height=0,v.y=g,v.top=g,v.bottom=g,we.adminWindow.UIWindowOpener.openUIWindow({windowName:"digital-clock",positionRect:v,closeButton:!1,closeOnSingleClickout:!0,ignoreEditorWindowClickout:!1,supportsMobile:!1,props:{clickedElement:this.props.clockInstance,elements:Array.from(Xu).filter(b=>b.state.selected||b.props.clockInstance===this.props.clockInstance).map(b=>b.props.clockInstance)}})};pointerIn=()=>{this.state.selected&&Xu.forEach(i=>{i.state.showMultipleSelectionButton&&i.setState({pointerProxyAttention:!0})});let e=window.getComputedStyle(this.props.clockInstance);this.setState({fontSizePx:e.getPropertyValue("font-size"),lineHeightPx:e.getPropertyValue("line-height"),pointerAttention:!0})};pointerOut=()=>{this.state.selected&&Xu.forEach(e=>{e.state.pointerProxyAttention&&e.setState({pointerProxyAttention:!1})}),this.setState({pointerAttention:!1})};onSelectionChange=e=>{!e&&this.state.showMultipleSelectionButton&&this.setState({pointerProxyAttention:!1,showMultipleSelectionButton:!1}),this.setState({selected:e})};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){Xu.add(this),this.props.clockInstance._editorInterface=this,this.props.clockInstance._newClock&&(delete this.props.clockInstance._newClock,setTimeout(()=>{this.launchUIWindow()},10)),this.props.clockInstance.addEventListener("contextmenu",this.onMouseDown)}componentWillUnmount(){this.props.clockInstance.removeEventListener("contextmenu",this.onMouseDown),Xu.delete(this),this.state.UIWindow?.closeWindow?.(),delete this.props.clockInstance._editorInterface}componentDidUpdate(e,i){this.props.value!==e.value&&this.props.clockInstance.getAttribute("value")&&this.state.UIWindow?.setState?.({customVal:Eue.hasOwnProperty(this.props.value)?"{"+this.props.value+"}":this.props.value})}},kO=P2});var qDe,yp,Wg,Pue,Iue,Tue,NO,Vg,Aue,OO=T(()=>{Pe();Se();ht();Re();Ni();Oi();Mr();RO();qDe=ce(ve(),1);Wi();W();yp=new Set,Wg=null,Pue=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Iue=["january","february","march","april","may","june","july","august","september","october","november","december"],Tue=["time-of-day","day","day-of-month","ordinal","month","month-name","period","roman-year","year","hour","minute","second","centisecond"],NO=t=>{yp.forEach(e=>{let i=new Date;e.updateTime(i)}),Wg=requestAnimationFrame(NO)},Vg=class extends ae{constructor(e){super(e),this.state={}}romanize(e){if(isNaN(e))return NaN;for(var i=String(+e).split(""),r=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],n="",o=3;o--;)n=(r[+i.pop()+o*10]||"")+n;return Array(+i.join("")+1).join("M")+n}pad=e=>e<10?"0"+e:e.toString();dateTerms=(e,i)=>{switch(e){case"{time-of-day}":return m("span",{part:"time-of-day section"},"time-of-day-"+i);case"{day-of-month}":return m("span",{part:"day-of-month section",children:this.state["day-of-month"]},"day-of-month-"+i);case"{ordinal}":return m("span",{part:"ordinal section"},"ordinal"+i);case"{month}":return m("span",{part:"month section",children:this.state.month},"month-"+i);case"{day}":return m("span",{part:"day section"},"day-"+i);case"{roman-year}":return m("span",{part:"roman-year section",children:this.state.romanYear},"roman-year-"+i);case"{centisecond}":return m("span",{part:"centisecond section",children:this.state.centisecond},"roman-year-"+i);case"{year}":return m("span",{part:"year section",children:this.state.year},"year-"+i);case"{month-name}":return m("span",{part:"month-name section"},"month-name-"+i);case"{hour}":return m("span",{part:"hour section",children:this.props["twentyfour-hour"]?this.state["24hour"]:this.state["12hour"]},"hour-"+i);case"{minute}":return m("span",{part:"minute section",children:this.state.minute},"minute-"+i);case"{second}":return m("span",{part:"second section",children:this.state.second},"second-"+i);case"{period}":return m("span",{part:"period section"},"period-"+i)}return null};updateTime=e=>{let i=this.props["pad-hour"]||this.props.pad,r=this.props["pad-minute"]||this.props.pad,n=this.props["pad-second"]||this.props.pad,o=this.props["pad-day-of-month"]||this.props.pad,s=this.props["pad-month"]||this.props.pad;if(this.props.timezone!=="local"){let E=e.getTimezoneOffset(),I=this.props.timezone;if(this.props.timezone.indexOf(":")>-1){let L=this.props.timezone.split(":");L.length=2,I=parseFloat(L[0])+parseFloat(L[1]||0)/60}let F=-(-E-parseFloat(I*60))||0,O=Date.now();e=new Date(O+F*6e4)}let u=o?this.pad(e.getDate()):e.getDate(),c=Pue[e.getDay()],d=e.getMonth(),p=e.getFullYear(),g=e.getHours(),v=e.getMinutes(),b=e.getSeconds(),S=e.getMilliseconds(),_=Math.floor(g/3)*3;this.setState({day:c,"day-of-month":u,"time-of-day":_+"-"+(parseInt(_)+3),ordinal:u,"month-name":Iue[d],month:s?this.pad(d+1):d+1,romanYear:this.romanize(p),year:this.props["truncate-year"]?p.toString().substring(2,4):p,period:g>=12?"pm":"am","12hour":i?this.pad(g%12==0?12:g%12):g%12==0?12:g%12,"24hour":i?this.pad(g):g,minute:r?this.pad(v):v,second:n?this.pad(b):b,centisecond:this.pad(Math.floor(S/10))})};render(e,i){let{pageInfo:r,adminMode:n,value:o}=this.props,s=[],u;if(o.indexOf("{")==-1&&(u=this.dateTerms("{"+o+"}")),u)s.push(u);else{let c=new RegExp("{"+Tue.join("}|{")+"}","gi"),d=[...o.matchAll(c)],p=0;d.length==0?s.push(this.dateTerms("{second}")):d.forEach((g,v)=>{let b=this.dateTerms(g[0],g.index);b&&(p!=g.index&&s.push(m("span",{part:"text",children:o.substring(p,g.index)},g.index)),p=g.index+g[0].length,s.push(b)),v===d.length-1&&s.push(m("span",{part:"text",children:o.substring(p,o.length)},g.index+"-last"))})}return je(m(X,{children:[n&&r.isEditing&&!ne&&m(kO,{...this.props,clockInstance:this.props.baseNode}),m("style",{children:`

					:host {

						--0-3: "late night";
						--3-6: "early morning";
						--6-9: "morning";
						--9-12: "late morning";
						--12-15: "afternoon";
						--15-18: "late afternoon";
						--18-21: "evening";
						--21-24: "late evening";

						--am: "AM";
						--pm: "PM";

						--sunday: "Sunday";
						--monday: "Monday";
						--tuesday: "Tuesday";
						--wednesday: "Wednesday";
						--thursday: "Thursday";
						--friday: "Friday";
						--saturday: "Saturday";

						--january: "January";
						--february: "February";
						--march: "March";
						--april: "April";
						--may: "May";
						--june: "June";
						--july: "July";
						--august: "August";
						--september: "September";
						--october: "October";
						--november: "November";
						--december: "December";

						--ordinal-1: "first";
						--ordinal-2: "second";
						--ordinal-3: "third";
						--ordinal-4: "fourth";
						--ordinal-5: "fifth";
						--ordinal-6: "sixth";
						--ordinal-7: "seventh";
						--ordinal-8: "eighth";
						--ordinal-9: "ninth";
						--ordinal-10: "tenth";
						--ordinal-11: "eleventh";
						--ordinal-12: "twelfth";
						--ordinal-13: "thirteenth";
						--ordinal-14: "fourteenth";
						--ordinal-15: "fifteenth";
						--ordinal-16: "sixteenth";
						--ordinal-17: "seventeenth";
						--ordinal-18: "eighteenth";
						--ordinal-19: "nineteenth";
						--ordinal-20: "twentieth";
						--ordinal-21: "twenty-first";
						--ordinal-22: "twenty-second";
						--ordinal-23: "twenty-third";
						--ordinal-24: "twenty-fourth";
						--ordinal-25: "twenty-fifth";
						--ordinal-26: "twenty-sixth";
						--ordinal-27: "twenty-seventh";
						--ordinal-28: "twenty-eighth";
						--ordinal-29: "twenty-ninth";
						--ordinal-30: "thirtieth";
						--ordinal-31: "thirty-first";

						cursor: inherit;
					    display: inline-block;
					    position: relative;
					}

					[part*="section"]{
						font-variant: tabular-nums;
					}

					[part="ordinal section"]:after {
						content: var(--ordinal-${this.state["day-of-month"]}, "${this.state["day-of-month"]}");
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					[part="period section"]:before {
						content: var(--${this.state.period});
					}				

					[part="day section"]:before {
						content: var(--${this.state.day});
					}

					[part="time-of-day section"]:before {
						content: var(--${this.state["time-of-day"]});
					}

					span[part="month-name section"]:before {
						content: var(--${this.state["month-name"]});
					}

					
				`}),s]}),this.props.baseNode.shadowRoot)}onViewportIntersectionChange=e=>{let i=e.position==="inside";this.setState({visible:i})};componentDidMount(){ti(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),yp.size==0&&(cancelAnimationFrame(Wg),Wg=requestAnimationFrame(NO)),this.updateTime(new Date),yp.add(this)}componentDidUpdate(e,i){}componentWillUnmount(){si(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),yp.delete(this),yp.size==0&&cancelAnimationFrame(Wg)}};Vg.defaultProps={pad:!1,"pad-day-of-month":!1,"pad-hour":!1,"pad-month":!1,"pad-minute":!0,"pad-second":!0,"twentyfour-hour":!1,"truncate-year":!1,timezone:"local",value:"second"};Aue=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Vg));Zt(Aue,"digital-clock",["pad-day-of-month","pad-hour","pad-month","pad-minute","pad-second","twentyfour-hour","truncate-year","pad","timezone","analogue","value"],{renderIntoShadow:!0})});var iLe,I2,T2,DO=T(()=>{Pe();Se();Mt();la();Di();iLe=ce(ve(),1);Gn();W();I2=class extends ae{constructor(e){super(e),this.state={buttonHovered:!1,UIWindow:null,focused:!1,isDraggingInEditor:!1,initialShowOutlines:!1,showTransition:!1,draggingOver:!1,showInsertionIndicator:!1}}render(e,i){let{shopProductInstance:r}=e,{draggingOver:n,showInsertionIndicator:o,buttonHovered:s,focused:u}=i;return m(X,{children:m(pr,{hasFocus:u,onScrollWhileHovered:this.updateUIWindowPosition,trackResize:!0,baseNode:this.props.shopProductInstance,render:c=>{let{pointerAttention:d,overlayPosition:p}=c;return m(X,{children:[m(Vi,{baseNode:r,overlayPosition:p,inFront:!1,overlayMode:!0}),m("div",{className:`editor-overlay editor-outline${d?" hover":""}${d?" button-hover":""}${u?" focus":""}`,style:{transform:`translate3d(${p.x}px, ${p.y}px, 0)`,width:p.width+"px",height:p.height+"px",display:d||s||u?"block":"none",minHeight:"27px"},children:[m("div",{className:"in-editor-buttons audio-player",style:{transform:`translateY(${p.dip}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[m("button",{onMouseDown:g=>{this.launchUIWindow(g)},ref:this.AudioPlayerButtonRef,className:"text",children:"Product"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=(e,i)=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let r=this.props.shopProductInstance.getBoundingClientRect(),n={x:r.x,y:r.y,left:r.right,right:r.right,top:r.top-10,bottom:r.top+27,width:r.width,height:20};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"shopproduct-ineditor",windowAlias:"commerce",positionRect:n,closeButton:!1,closeOnAllClickout:!1,ignoreEditorWindowClickout:!1,closeOnSingleClickout:!0,supportsMobile:!0,props:{shopProductNode:this.props.shopProductInstance}})};scrollIntoView=()=>{let e=this.props.shopProductInstance.getBoundingClientRect();(e.bottom<0||e.top>window.innerHeight)&&this.props.shopProductInstance.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};setUIWindow=e=>{this.setState({UIWindow:e,focused:!!e})};componentDidMount=()=>{this.props.shopProductInstance._editorInterface=this};componentWillUnmount=()=>{this.state.UIWindow?.closeWindow?.(),delete this.props.shopProductInstance._editorInterface}},T2=I2});function Oue(t,e,i,r){var n;if(r!==void 0&&(t=t*r),typeof e!="string")n=t/100+"";else{var o=["BIF","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","VND","VUV","XAF","XOF","XPF"],s={AED:"\u062F.\u0625",AFN:"\u060B",ALL:"L",AMD:"\u058F",ANG:"\u0192",AOA:"Kz",ARS:"$",AUD:"$",AWG:"\u0192",AZN:"\u20BC",BAM:"KM",BBD:"$",BDT:"\u09F3",BGN:"\u043B\u0432",BHD:".\u062F.\u0628",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"\u0E3F",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"\xA5",COP:"$",CRC:"\u20A1",CUC:"$",CUP:"\u20B1",CVE:"$",CZK:"K\u010D",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"\u062F\u062C",EEK:"kr",EGP:"\xA3",ERN:"Nfk",ETB:"Br",ETH:"\u039E",EUR:"\u20AC",FJD:"$",FKP:"\xA3",GBP:"\xA3",GEL:"\u20BE",GGP:"\xA3",GHC:"\u20B5",GHS:"GH\u20B5",GIP:"\xA3",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"\u20AA",IMP:"\xA3",INR:"\u20B9",IQD:"\u0639.\u062F",IRR:"\uFDFC",ISK:"kr",JEP:"\xA3",JMD:"J$",JOD:"JD",JPY:"\xA5",KES:"KSh",KGS:"\u043B\u0432",KHR:"\u17DB",KMF:"CF",KPW:"\u20A9",KRW:"\u20A9",KWD:"KD",KYD:"$",KZT:"\u043B\u0432",LAK:"\u20AD",LBP:"\xA3",LKR:"\u20A8",LRD:"$",LSL:"M",LTC:"\u0141",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"\u0434\u0435\u043D",MMK:"K",MNT:"\u20AE",MOP:"MOP$",MRO:"UM",MUR:"\u20A8",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"\u20A6",NIO:"C$",NOK:"kr",NPR:"\u20A8",NZD:"$",OMR:"\uFDFC",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"\u20B1",PKR:"\u20A8",PLN:"z\u0142",PYG:"Gs",QAR:"\uFDFC",RMB:"\uFFE5",RON:"lei",RSD:"\u0414\u0438\u043D.",RUB:"\u20BD",RWF:"R\u20A3",SAR:"\uFDFC",SBD:"$",SCR:"\u20A8",SDG:"\u062C.\u0633.",SEK:"kr",SGD:"$",SHP:"\xA3",SLL:"Le",SOS:"S",SRD:"$",SSP:"\xA3",STD:"Db",SVC:"$",SYP:"\xA3",SZL:"E",THB:"\u0E3F",TJS:"SM",TMT:"T",TND:"\u062F.\u062A",TOP:"T$",TRL:"\u20A4",TRY:"\u20BA",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"\u20B4",UGX:"USh",USD:"$",UYU:"$U",UZS:"\u043B\u0432",VEF:"Bs",VND:"\u20AB",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"\u0243",XCD:"$",XOF:"CFA",XPF:"\u20A3",YER:"\uFDFC",ZAR:"R",ZWD:"Z$"};e=e.toUpperCase(),o.indexOf(e)===-1&&(t/=100),typeof Intl<"u"?n=new Intl.NumberFormat(i,{style:"currency",currency:e,currencyDisplay:"symbol",useGrouping:!0,minimumFractionDigits:0}).format(t):n=(s.hasOwnProperty(e)?s[e]:e+" ")+""+t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}if(typeof n=="string"&&n.indexOf(".")!==-1){var u=n.split(".");u.length===2&&u[1].length===1&&(u[1]=u[1]+"0",n=u.join("."))}return n}var mr,LO,Mue,kue,Rue,cl,A2,$g,Nue,M2,Due,FO=T(()=>{Pe();Se();Ra();mr=ce(ve(),1);Re();ht();di();Wi();Ni();es();DO();el();Ar();W();LO="Product not found",Mue="Out of Stock",kue="Add to Cart",Rue="Unavailable",cl={buttonInStockText:"button-text",showPrice:"show-price",mergevariantdropdowns:"combine-variants",product:"product"},A2=[],$g=null,Nue=t=>($g||($g=new Promise((e,i)=>{requestAnimationFrame(()=>{Dt.dispatch(actions.fetchCommerceProducts({idArray:A2})).then(e).catch(i),A2.length=0,$g=null})})),A2.push(t),$g);M2=class extends ae{constructor(e){super(e),this.uid=mr.default.uniqueId(),this.state={loading:!0,selectedVariant:null},this.props.fetchShopModel().finally(()=>{this.fetchProduct().finally(()=>{this.setState({loading:!1})})}),this.props.baseNode.__commerce_widget__=this}render(){let e=this.getOptions(),{baseNode:i,adminMode:r}=this.props;if(!this.props.productData)return this.state.loading?null:je(m(X,{children:[this.props.adminMode&&this.props.pageInfo.isEditing&&m(T2,{shopProductInstance:this.props.baseNode}),m("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:LO})]}),this.props.baseNode.shadowRoot);let n=this.state.selectedVariant?.inventory!==null&&this.state.selectedVariant?.inventory<=0,o=this.props.uses||"";return je(m(In,{scrollContext:this.props.scrollContext,uses:o,adminMode:r,customElementMode:!0,baseNode:i,children:m("div",{draggable:"true",style:{display:"inline-block",width:"100%"},children:[this.props.adminMode&&m(T2,{shopProductInstance:this.props.baseNode}),this.props.productData?m(X,{children:[e.showPrice&&this.state.selectedVariant&&m("div",{part:"price",class:"price",children:Oue(this.state.selectedVariant.price,this.props.currency,this.props.locale)}),this.props.productData.attributes?e.mergevariantdropdowns?m("select",{part:"dropdown",class:"dropdown","variant-list":!0,onChange:this.getSelectedVariant,children:this.props.productData.variants.map(s=>s.is_default?null:m("option",{value:s.variant_id,dangerouslySetInnerHTML:{__html:mr.default.values(s.attributes).join(", ").replace(/</g,"&lt;")}}))}):mr.default.keys(this.props.productData.attributes).map(s=>m("select",{"variant-option":s,part:"dropdown",class:"dropdown",onChange:this.getSelectedVariant,children:[m("option",{disabled:!0,dangerouslySetInnerHTML:{__html:s?.replace?.(/</g,"&lt;")}}),this.getAttributeVariations(s).map(u=>m("option",{selected:this.state.selectedVariant?.attributes[s]===u,value:u,dangerouslySetInnerHTML:{__html:u?.replace?.(/</g,"&lt;")}}))]})):null,m("a",{part:"button",className:`button${n?" out-of-stock":""}`,onClick:s=>{n||this.addToCart(s)},children:n?Mue:this.state.selectedVariant?e.buttonInStockText:Rue})]}):LO]})},"shop-product-host"),this.props.baseNode.shadowRoot)}onDragStart=e=>{e.dataTransfer.setData("shop-product-drag","true")};getAttributeVariations(e){var i=mr.default.without(mr.default.uniq(this.props.productData.variants.map(function(n){if(n.is_available===!0&&n.is_default!==!0)return n.attributes[e]})),void 0),r=this.props.productData.attributes[e];return r&&i.sort(function(n,o){var s=r.indexOf(n),u=r.indexOf(o);return s<u?-1:s==u?0:1}),i}getProduct(){return this.props.productData}getOptions(){if(this.props.baseNode.hasAttribute("data-options"))try{let i=JSON.parse(mr.default.unescape(this.props.baseNode.getAttribute("data-options")));mr.default.each(i,(r,n)=>{cl[n]&&!this.props.baseNode.hasAttribute(cl[n])&&this.props.baseNode.setAttribute(cl[n],mr.default.escape(r))}),this.props.baseNode.removeAttribute("data-options")}catch{console.error("Unable to read old product widget options",this.props.baseNode)}let e=mr.default.mapValues(cl,(i,r)=>{if(!this.props.baseNode.hasAttribute(i))return;let n=mr.default.unescape(this.props.baseNode.getAttribute(i));return(r==="showPrice"||r==="mergevariantdropdowns")&&(n=n=="true"),n});return mr.default.defaults(e,{showPrice:!0,mergevariantdropdowns:!1,buttonInStockText:kue}),e}setOptions(e){mr.default.each(e,(i,r)=>{cl.hasOwnProperty(r)&&this.props.baseNode.setAttribute(cl[r],mr.default.escape(i))})}addToCart=e=>{this.props.adminMode||(this.props.addCommerceProductToCart(this.state.selectedVariant.product_id,this.state.selectedVariant.variant_id),eo.push("/cart",{preventScrollReset:!0}))};fetchProduct(){return this.props.productData&&this.props.productData.product_id==this.props.product||!this.props.product||!this.props.shopId?Promise.resolve():Nue(this.props.product)}getSelectedVariant=()=>{let e=null;if(this.props.productData)if(this.props.productData.use_default_variant)e=this.props.productData.variants.find(r=>r.is_default===!0);else if(this.getOptions().mergevariantdropdowns){let r=this.props.baseNode.shadowRoot.querySelector("select[variant-list]")?.value;e=this.props.productData.variants.find(n=>n.variant_id==r)}else{var i=mr.default.reduce(this.props.baseNode.shadowRoot.querySelectorAll("select[variant-option]"),function(r,n){return r[n.getAttribute("variant-option")]=n.value,r},{});e=this.props.productData.variants.find(r=>mr.default.isEqual(r.attributes,i))}this.state.selectedVariant!==e&&this.setState({selectedVariant:e})};componentDidUpdate(e,i){this.state.selectedVariant===i.selectedVariant&&this.getSelectedVariant()}componentDidMount(){this.props.baseNode.addEventListener("dragstart",this.onDragStart),this.getSelectedVariant()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}},Due=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode,productData:t.commerce.products[e.product],currency:t.commerce.shop.currency||"USD",locale:t.commerce.shop.locale||"en-US",shopId:t.site.shop_id}),t=>Pt({addCommerceProductToCart:actions.addCommerceProductToCart,fetchShopModel:actions.fetchShopModel},t))(M2));Zt(Due,"shop-product",Object.values(cl),{renderIntoShadow:!0})});var k2,zO,HO=T(()=>{Pe();W();k2=class extends ae{constructor(e){super(e),this.caveRef=me(),this.shadowRef=me()}render(){return m("div",{"aria-hidden":"true",ref:this.caveRef,tabIndex:"-1","data-nosnippet":!0,style:{position:"absolute",top:"0",left:"50px",right:"50px",margin:"0 auto 0 auto",height:"10px",lineHeight:"0",fontSize:0,pointerEvents:"none",zIndex:-99},children:m("div",{ref:this.shadowRef,tabIndex:"-1","data-nosnippet":!0,style:{display:"inline-block",margin:"0 -20px 0 -50px",width:"40px",height:"10px"}})})}componentDidMount(e,i){this.observer=new IntersectionObserver(r=>{r.forEach(n=>{let o="right";switch(n.intersectionRatio){case 0:o="left";break;case 1:o="center";break}this.props.onTextAlignmentChange?.(o)})},{root:this.caveRef.current,rootMargin:"0px",threshold:[0,.6]}),this.observer.observe(this.shadowRef.current)}componentWillUnmount(){this.observer.disconnect()}},zO=k2});var UO,R2,qO,BO=T(()=>{Pe();Se();Mt();la();Di();Gn();Mr();UO=ce(ve(),1);W();R2=class extends ae{constructor(e){super(e),this.state={UIWindow:!1,marqueeIsEmpty:!1,draggingInEditor:!1},this.observer=new MutationObserver(this.onMutation),this.innerObserver=new MutationObserver(this.onInnerMutation)}render(e,i){let{}=e,{UIWindow:r}=i,n=23;return m(X,{children:m(pr,{hasFocus:!!r,trackResize:!0,buttonMode:"inside",baseNode:this.props.marqueeInstance,buttonHeight:23,render:o=>{let{pointerAttention:s,overlayPosition:u}=o,c=0;return u.y<=1&&(c=Math.min(-u.y+1,u.height+-n+1)),m(X,{children:[m(Vi,{baseNode:this.props.marqueeInstance,overlayPosition:u,overlayMode:!0}),m("div",{className:`editor-overlay editor-outline${s||r?" hover":""}${s||r?" button-hover":""}${r?" focus":""}`,style:{transform:`translate3d(${u.x}px, ${u.y}px, 0)`,width:u.width+"px",height:u.height+"px",display:s||r?"block":"none",minHeight:"27px"},children:[m("div",{className:"in-editor-buttons marquee",style:{transform:`translateY(${c}px)`},onPointerEnter:()=>{this.setState({buttonHovered:!0})},onPointerLeave:()=>{this.setState({buttonHovered:!1})},children:[m("button",{onMouseDown:d=>{this.launchUIWindow(d)},className:"text",children:"Marquee"}),e.children]}),e.otherUI]})]})}})})}launchUIWindow=e=>{if(e){if(e.metaKey||e.button==2)return;e.preventDefault(),e.stopPropagation()}let i=this.props.marqueeInstance.getBoundingClientRect(),r={x:i.x+-10,y:i.y,left:i.right+-10,right:i.right+-10,top:i.top+0,bottom:i.top+27,width:i.width,height:20};we.adminWindow.UIWindowOpener.openUIWindow({windowName:"marquee-ineditor",windowAlias:"marquee",positionRect:r,closeButton:!1,closeOnAllClickout:!0,supportsMobile:!1,props:{activeMarquee:this.props.marqueeInstance}})};onMouseDown=e=>{if(this.state.UIWindow||e.button===2)return;let i={x:e.clientX,y:e.clientY};this.props.marqueeInstance.built&&(this.mouseDownTimeout=setTimeout(()=>{this.props.isDragging||(this.props.marqueeInstance.built=!1,setTimeout(()=>{let r=this.props.marqueeInstance.querySelector("marquee-inner"),n=CargoEditor.helpers.createRangeAtCoordinates(i.x,i.y);(!n||!r.contains(n.commonAncestorContainer))&&(n=CargoEditor.rangy.createRange(),n.setStart(r,0),n.setEnd(r,0)),CargoEditor.helpers.setActiveRange(n),CargoEditor.events.trigger("cursor-activity",CargoEditor.getActiveEditor(),e)},20))},120))};onInnerMutation=e=>{if(Array.from(e).filter(s=>{if(s.type==="attributes"){if(s.target.nodeName==="MEDIA-ITEM")return!0;if(s.target.nodeName==="MARQUEE-INNER")return!1}else return!s.target.closest?.("media-item")}).length==0)return;let r=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(s=>!s.hasAttribute("slot")||s.getAttribute("slot")==="contents");if(!r)return;let n=Array.from(r?.childNodes??[])[0],o=!0;for(;n&&o;)(n.nodeName==="IMG"||n.nodeName==="VIDEO"||n.nodeName==="IFRAME"||n.nodeName==="MEDIA-ITEM"||n.textContent.trim()!=="")&&(o=!1),n=n.nextSibling;this.setState({marqueeIsEmpty:o})};dispatchVisibility=UO.default.debounce(()=>{Array.from(this.props.marqueeInstance.querySelectorAll("*")).forEach(e=>{Ot(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1}),Ot(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})},30);onMutation=e=>{this.observer.disconnect(),this.innerObserver.disconnect();let i=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(n=>!n.hasAttribute("slot")||n.getAttribute("slot")==="contents"),r=this.props.marqueeInstance.querySelector('marquee-inner[slot="contents-clone"]');i&&r?Array.from(this.props.marqueeInstance.childNodes).forEach(n=>{n!==i&&n!==r&&n.remove()}):i&&!r&&(this.props.marqueeInstance.dirty=!0),this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1}),i&&this.innerObserver.observe(i,{childList:!0,subtree:!0,characterData:!0,attributes:!0})};onDragStart=(e,i,r)=>{this.setState({draggingInEditor:!0}),Ue.activateHoverElement(this.props.marqueeInstance),this.props.marqueeInstance.built=!1};onDragFinish=()=>{this.dragFinishTimeout=setTimeout(()=>{this.setState({draggingInEditor:!1})},100),this.props.marqueeInstance.built=!0};setUIWindow=e=>{this.setState({UIWindow:e})};updateUIWindowPosition=e=>{this.state.UIWindow&&this.state.UIWindow.props.superBadScrollHack.scroll(e)};componentDidMount(){this.observer.observe(this.props.marqueeInstance,{childList:!0,subtree:!1,characterData:!0,attributes:!1});let e=Array.from(this.props.marqueeInstance.querySelectorAll("marquee-inner")).find(i=>!i.hasAttribute("slot")||i.getAttribute("slot")==="contents");e&&this.innerObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.props.marqueeInstance.addEventListener("mousedown",this.onMouseDown),we.globalDragEventController.on("dragstart",this.onDragStart),we.globalDragEventController.on("dragend",this.onDragFinish),we.globalDragEventController.on("drop",this.onDragFinish),this.props.marqueeInstance._editorInterface=this,this.props.marqueeInstance._newMarqueeSet&&(delete this.props.marqueeInstance._newMarqueeSet,setTimeout(()=>{this.launchUIWindow()},120))}componentWillUnmount(){this.dispatchVisibility.cancel(),clearTimeout(this.mouseDownTimeout),clearTimeout(this.dragFinishTimeout),this.observer.disconnect(),this.innerObserver.disconnect(),this.props.marqueeInstance.removeEventListener("mousedown",this.onMouseDown),we.globalDragEventController.off("dragstart",this.onDragStart),we.globalDragEventController.off("dragend",this.onDragFinish),we.globalDragEventController.off("drop",this.onDragFinish),this.state.UIWindow?.closeWindow?.(),delete this.props.marqueeInstance._editorInterface}componentDidUpdate(e,i){this.props.adminMode!==e.adminMode&&(this.props.marqueeInstance.dirty=!0),this.props.isDragging!==e.isDragging&&clearTimeout(this.mouseDownTimeout),(i.marqueeIsEmpty!==this.state.marqueeIsEmpty||i.draggingInEditor!==this.state.draggingInEditor)&&!this.state.draggingInEditor&&this.state.marqueeIsEmpty&&CargoEditor?.mutationManager?.execute(()=>{this.props.marqueeInstance.remove()})}},qO=R2});var jg,rs,wp,Gg,Ju,N2,WO,Kg,Lue,VO=T(()=>{Pe();Se();Gm();ht();Re();Ni();Za();HO();Oi();BO();Mr();jg=ce(ve(),1);Wi();W();rs=new Map,wp=new Map,Gg=null;ne||(Ju=new ResizeObserver(t=>{t.forEach(e=>{wp.has(e.target)?wp.get(e.target).onMarqueeInnerResize(e):rs.has(e.target)&&rs.get(e.target).onElementResize(e)})}),window.addEventListener("dom-binding-initialized",t=>{rs.forEach((e,i)=>{t.target.contains(i)&&(i.dirty=!0)})}));N2=0,WO=t=>{let e=N2===0?0:t-N2;rs.forEach((i,r)=>{i.animate(e)}),N2=t,Gg=requestAnimationFrame(WO)},Kg=class extends ae{constructor(e){super(e),this.uid=jg.default.uniqueId(),this.initialSizeSet=!1,this.state={dirty:!0,built:!0,marqueeHeight:100,gutterPixelWidth:0,mediaItemLocations:{},contentRect:{marginLeft:0,width:0,height:0,contentWidth:0},elementRect:{horizPad:0,vertPad:0,width:0,height:0},paused:!1,pointerInfo:{pointerDown:!1,dragging:!1},marqueeInner:null,visible:!0},this.pointerMovement={start:{x:0,y:0},delta:{x:0,y:0},inertia:{x:0,y:0}},this.marqueePositionerRef=me(),this.marqueePositionerCloneRef=me(),this.contentRef=me(),this.contentsObserver=new MutationObserver(this.onContentsChange),this.resetPosition(),this.pauseCount=0,Object.defineProperty(this.props.baseNode,"dragging",{get:()=>this.state.pointerInfo.dragging,configurable:!0}),Object.defineProperty(this.props.baseNode,"paused",{get:()=>this.state.paused,set:i=>{this.setState({paused:!!i})},configurable:!0}),Object.defineProperty(this.props.baseNode,"built",{get:()=>this.state.built,set:i=>{this.setState({built:!!i})},configurable:!0}),Object.defineProperty(this.props.baseNode,"dirty",{get:()=>this.state.dirty,set:i=>{this.setState({dirty:!!i})},configurable:!0})}render(e,i){let r=e.behavior==="bounce",n=e.behavior==="scroll",o=e.direction==="vertical",s=e.direction==="horizontal",u=e.direction==="diagonal";u&&n&&(u=!1,s=!0);let{adminMode:c,pageInfo:d,baseNode:p,"vertical-height":g,gutter:v=0}=e,{contentRect:b,elementRect:S,built:_,marqueeHeight:E,gutterPixelWidth:I}=i,F=Jt(g,""),O=v!==void 0?Jt(v,"rem").join(""):"0px",L={marqueeHeight:F[1]===""?`calc( var(--fit-height) * ${F[0]*.01} )`:F.join("")};v!==void 0&&v!==0&&(L.gutterPixelWidth=O);let z=I,G=I;s&&(z=0),o&&(G=0);let H=n&&o?0:2,N=n&&s?0:2;return je(m(X,{children:[c&&d.isEditing&&m(zO,{onTextAlignmentChange:this.onTextAlignmentChange}),m("style",{children:`

					:host {
						--marquee-vertical-padding: ${H}rem;
						--marquee-horizontal-padding: ${N}rem;
						--marquee-vertical-margin: ${-H}rem;
						--marquee-horizontal-margin: ${-N}rem;
						contain: layout;
						${_?`
							cursor: default;
							min-height: .5em;
							${c&&d.isEditing?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;`:""}
						`:`
							min-height: ${r&&!s?E+"px":"auto"};
						`}
						box-sizing: border-box;
						height: ${_?o||u?E+"px":b.height+S.vertPad+"px":"auto"};
					    display: block;
					    
					    position: relative;
						--resize-parent-width: ${S.width}px;				    
					}

					.marquee-margin {
						position: relative;
						${_?`
							pointer-events:none;
							margin-top: var(--marquee-vertical-margin);
							margin-left: var(--marquee-horizontal-margin);
							margin-right: var(--marquee-horizontal-margin);
							margin-bottom: var(--marquee-vertical-margin);
							
							${o||u?"height: "+E+"px;":""}
							padding-top: var(--marquee-vertical-padding);
							padding-bottom: var(--marquee-vertical-padding);
							padding-left: var(--marquee-horizontal-padding);
							padding-right: var(--marquee-horizontal-padding);						
							overflow: hidden;
					
						`:""}
					}

					:host .marquee-contents {
						${_?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
							-moz-user-select:text;
							-webkit-user-select:text;
							user-select: text;
						`}
						-webkit-backface-visibility: hidden;
						backface-visibility: hidden;
						will-change: transform;
						position: relative;

					    display: ${_?"block":"none"};
					}

					::slotted(marquee-inner){
						pointer-events:auto;
						white-space:${_&&s?"nowrap":"normal"};					
						display: ${_?"inline-block":"block"};
						${!_&&(o||u)?"min-height: "+E+"px;":""}
						min-width: ${S.width}px;
						${_?`
							-moz-user-select:none;
							-webkit-user-select:none;
							user-select: none;
						`:`
						`}
										
					}

					.marquee-positioner {
						position: relative;		
						white-space:nowrap;
						${n?"min-width: 100%;":""}					
					}

					/** scroll mode css **/	
					.marquee-positioner.clone {
						display: ${r||!_?"none":"block"};
						left: ${s?Math.max(b.contentWidth,S.width)+G:0}px;
						top: ${o?Math.max(b.height,S.height)+z:0}px;			
					    position: absolute;
					}

					
				`}),m("div",{className:"marquee-margin",children:[!_&&m("slot",{name:"contents"}),c&&d.isEditing&&!ne&&m(qO,{...this.props,marqueeInstance:p,isDragging:this.state.pointerInfo.dragging}),m(Br,{values:L,onResize:this.onResize}),m("div",{className:"marquee-contents",style:{willChange:"transform",transform:"translate("+this.lastXClamp+"px, "+(this.lastYClamp+S.vertPad*.5)+"px)"},ref:this.contentRef,children:[m("div",{className:"marquee-positioner",ref:this.marqueePositionerRef,children:_&&m("slot",{name:"contents"})}),m("div",{"aria-hidden":"true",className:"marquee-positioner clone",ref:this.marqueePositionerCloneRef,children:_&&n&&m("slot",{name:"contents-clone"})})]})]})]}),p.shadowRoot)}onClickCapture=e=>{this.state.pointerInfo.dragging&&this.state.built&&e.preventDefault()};onDragStartCapture=e=>{this.state.built&&this.props["pointer-interaction"]==!0&&(e.preventDefault(),e.stopPropagation())};onViewportIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{Ot(e,"viewportIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};onLazyloadIntersectionChange=()=>{Array.from(this.props.baseNode.querySelectorAll("*")).forEach(e=>{Ot(e,"lazyLoadIntersectionChange",{hasLayout:!0,visible:!0,position:"inside"},{bubbles:!1})})};componentDidMount(){this.props.baseNode.addEventListener("click",this.onClickCapture,{capture:!0}),this.props.baseNode.addEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.addEventListener("mousedown",this.onMouseDown),this.props.baseNode.addEventListener("touchstart",this.onMouseDown),ti(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),ti(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),rs.size==0&&(cancelAnimationFrame(Gg),Gg=requestAnimationFrame(WO)),rs.set(this.props.baseNode,this),Ju.observe(this.props.baseNode),this.innerMarqueeChange()}componentDidUpdate(e,i){(this.props.behavior!==e.behavior||this.props.speed!==e.speed||this.props["vertical-height"]!==e["vertical-height"])&&(this.resetPosition(),this.setState({built:!0})),this.state.dirty!==i.dirty&&this.state.dirty&&this.innerMarqueeChange(),this.state.built!==i.built&&this.state.built&&(this.state.dirty&&this.innerMarqueeChange(),this.resetPosition()),e.adminMode!==this.props.adminMode&&this.setState({built:!0})}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStartCapture,{capture:!0}),this.props.baseNode.removeEventListener("mousedown",this.onMouseDown),this.props.baseNode.removeEventListener("touchstart",this.onMouseDown),this.props.baseNode.removeEventListener("click",this.onClickCapture,{capture:!0}),si(this.props.baseNode,"viewportIntersectionChange",this.onViewportIntersectionChange),si(this.props.baseNode,"lazyLoadIntersectionChange",this.onLazyloadIntersectionChange),document.body.removeEventListener("pointerleave",this.onPointerUp),Ju.unobserve(this.props.baseNode),rs.delete(this.props.baseNode),cancelAnimationFrame(this.resizeFrame),clearTimeout(this.afterPointerUp);let e=this.props.baseNode.querySelector("marquee-inner");e&&(wp.delete(e),Ju.unobserve(e)),this.contentsObserver.disconnect(),rs.size==0&&cancelAnimationFrame(Gg)}innerMarqueeChange=()=>{if(!this.state.dirty||!this.state.built||!this.marqueePositionerRef.current||!this.marqueePositionerCloneRef.current)return;let e=Array.from(this.props.baseNode.querySelectorAll("marquee-inner")).find(r=>!r.hasAttribute("slot")||r.getAttribute("slot")==="contents");e?(wp.delete(e),Ju.unobserve(e),Array.from(e.querySelectorAll("marquee-inner")).forEach(r=>{r.remove()})):(e=document.createElement("marquee-inner"),e.setAttribute("slot","contents"),Array.from(this.props.baseNode.childNodes).forEach(r=>{e.appendChild(r)}),this.props.baseNode.appendChild(e)),e.setAttribute("slot","contents"),e.setSaveable(!0),wp.set(e,this),Ju.observe(e),this.contentsObserver.observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!1});let i=this.props.baseNode.querySelector('marquee-inner[slot="contents-clone"]');for(i||(i=document.createElement("marquee-inner"),i.setAttribute("slot","contents-clone"),this.props.baseNode.appendChild(i));i.lastChild;)i.lastChild.remove();Array.from(e.childNodes).forEach(r=>{i.appendChild(r.cloneNode(!0))}),Array.from(this.props.baseNode.childNodes).forEach(r=>{r!==e&&r!==i&&r.remove()}),this.setState({dirty:!1,marqueeInner:e})};onContentsChange=()=>{this.setState({dirty:!0})};resetPosition=()=>{this.pauseCount=this.props.adminMode?-30:0,this.movingDown=this.props.speed>0,this.movingRight=this.props.speed>0,this.lastXClamp=0,this.lastYClamp=0,this.positionX=0,this.positionY=0,this.translateX=0,this.translateY=0,this.pointerMovement={start:{x:0,y:0},inertia:{x:0,y:0},delta:{x:0,y:0}},this.props.behavior==="bounce"?((this.props.direction==="diagonal"||this.props.direction==="vertical")&&(this.translateY=this.positionY=this.state.elementRect.height*.5+-this.state.contentRect.height*.5),(this.props.direction==="diagonal"||this.props.direction==="horizontal")&&(this.translateX=this.positionX=this.state.elementRect.width*.5+-this.state.contentRect.width*.5+this.state.elementRect.vertPad*.5)):this.translateX=this.positionX=this.translateY=this.positionY=0};onResize=(e,i)=>{this.setState(r=>{let n={...r};return n[e]=i,n})};onTextAlignmentChange=e=>{this.resetPosition(),this.requestTick()};requestTick=()=>{this.ticking||(this.ticking=!0,this.rAf=requestAnimationFrame(()=>{this.getContentWidthAndMargin(),this.ticking=!1}))};getContentWidthAndMargin=jg.default.debounce(()=>{let{marqueeInner:e}=this.state;if(!e)return;let{contentWidth:i,marginLeft:r,width:n}=this.state.contentRect,o=e.childNodes[0],s=e.childNodes[e.childNodes.length-1];if(o&&s){let u=document.createRange();u.setStartBefore(o),u.setEndAfter(s);let c=u.getBoundingClientRect(),d=e.getBoundingClientRect();r=c.left-d.left,i=c.width}else r=0,i=n;this.setState(u=>({contentRect:{...u.contentRect,marginLeft:r,contentWidth:i}}),()=>{this.initialSizeSet||(this.resetPosition(),this.initialSizeSet=!0)})},this.initialSizeSet?300:0,{leading:!0,trailing:!0});onMarqueeInnerResize=e=>{let i=e.borderBoxSize[0]||e.borderBoxSize,r=i.inlineSize;this.setState(n=>({contentRect:{...n.contentRect,width:i.inlineSize,height:i.blockSize}}),()=>{this.requestTick()})};onElementResize=e=>{let i=e.borderBoxSize[0]||e.borderBoxSize,r=e.contentBoxSize[0]||e.contentBoxSize;this.setState({elementRect:{width:i.inlineSize,height:i.blockSize,vertPad:i.blockSize-r.blockSize,horizPad:i.inlineSize-r.inlineSize}})};onMouseDown=e=>{if(!this.state.built||!this.props["pointer-interaction"]||e.button==2)return;let i=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY;e.target.closest("a")||e.preventDefault(),this.pointerMovement={start:{x:i,y:r},inertia:{x:0,y:0},delta:{x:0,y:0}},this.setState({pointerInfo:{pointerDown:!0,dragging:!1}}),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),window.addEventListener("pointercancel",this.onPointerUp),document.body.addEventListener("pointerleave",this.onPointerUp)};onPointerMove=e=>{let i={x:e.clientX-this.pointerMovement.start.x+this.pointerMovement.delta.x,y:e.clientY-this.pointerMovement.start.y+this.pointerMovement.delta.y},r=this.state.pointerInfo.dragging||Math.abs(e.clientX-this.pointerMovement.start.x)>3||Math.abs(e.clientY-this.pointerMovement.start.y)>3;this.pointerMovement={start:{x:e.clientX,y:e.clientY},inertia:i,delta:i},this.setState({pointerInfo:{pointerDown:!0,dragging:r}})};onPointerUp=e=>{document.body.removeEventListener("pointerleave",this.onPointerUp),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("pointercancel",this.onPointerUp),this.afterPointerUp=setTimeout(()=>{this.setState({pointerInfo:{dragging:!1,pointerDown:!1}})},0)};animate=e=>{let{built:i,paused:r,elementRect:n,contentRect:o,pointerInfo:s,mediaItemLocations:u,gutterPixelWidth:c}=this.state,{positionX:d,positionY:p,movingRight:g,movingDown:v,translateX:b,translateY:S,pointerMovement:_}=this,{speed:E,friction:I}=this.props;if(!i||!this.contentRef.current)return;let F=!1;E=r||s.dragging?0:E,this.pauseCount<0&&(this.pauseCount++,E=0),E=E*(e/16.6667);let O=this.props.behavior==="bounce",L=this.props.behavior==="scroll",z=this.props.direction==="vertical",G=this.props.direction==="horizontal",H=this.props.direction==="diagonal",N=c,J=c;H&&L&&(H=!1,G=!0),I=1-parseFloat(I)*.01,E=parseFloat(E)*.1;let oe=E,te=E,K=Math.abs(_.inertia.y)>.01||Math.abs(_.inertia.x)>.01;s.pointerDown||s.dragging?(F=!0,te=_.delta.x,oe=_.delta.y):K&&(F=!0,O?(v?oe=Math.abs(oe)+Math.abs(_.inertia.y):oe=-Math.abs(oe)+-Math.abs(_.inertia.y),g?te=Math.abs(te)+Math.abs(_.inertia.x):te=-Math.abs(te)+-Math.abs(_.inertia.x)):(te=te+_.inertia.x,oe=oe+_.inertia.y)),O&&!s.dragging&&(v?oe=Math.abs(oe):oe=-Math.abs(oe),g?te=Math.abs(te):te=-Math.abs(te)),oe!==0&&(v=oe>0),te!==0&&(g=te>0),(z||H)&&(p=oe+p),(G||H)&&(d=te+d);let U=!1;if(O){let j=o.contentWidth,B=o.height,Y=-o.marginLeft,ie=n.width+-j+-o.marginLeft,de=0,fe=n.height-B;j>=n.width&&(Y=n.width-j,ie=0),B>=n.height&&(de=n.height-B,fe=0),g&&d>ie&&(G||H)?(U="right",d=ie,g=!1):!g&&d<Y&&(G||H)&&(U="left",d=Y,g=!0),v&&p>fe&&(z||H)?(U="bottom",p=fe,v=!1):!v&&p<de&&(z||H)&&(U="top",p=de,v=!0),G?S=0:S=p,z?b=0:b=d}else if(L){G&&(J=0),z&&(N=0);let j=Math.max(o.contentWidth,n.width)+N,B=Math.max(o.height,n.height)+J;j>0&&(d=(d-j)%j),B>0&&(p=(p-B)%B),z?(b=0,S=p):G&&(b=d,S=0)}U&&this.dispatchBounceEvent(U);let se=s.dragging?{x:_.delta.x,y:_.delta.y}:{x:_.inertia.x*I,y:_.inertia.y*I};this.positionX=d,this.positionY=p,this.translateX=b,this.translateY=S,this.movingRight=g,this.movingDown=v;let re=Math.abs(E)>1?2:4,Q=Math.floor(this.translateX*re)/re,le=Math.floor(this.translateY*re)/re;(Q!==this.lastXClamp||le!==this.lastYClamp)&&(this.contentRef.current.style.transform="translate("+Q+"px, "+(le+this.state.elementRect.vertPad*.5)+"px)"),this.lastXClamp=Q,this.lastYClamp=le,F&&(this.pointerMovement={...this.pointerMovement,inertia:se,delta:{x:0,y:0}})};dispatchBounceEvent=jg.default.debounce(e=>{this.props.baseNode.dispatchEvent(new CustomEvent("marquee-bounce",{detail:{edge:e},bubbles:!1,composed:!0}))},40,{leading:!0,tailing:!1})};Kg.defaultProps={speed:-10,direction:"horizontal",behavior:"scroll","pointer-interaction":!0,"vertical-height":"100",friction:5};Lue=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Kg));Zt(Lue,"marquee-set",["gutter","speed","direction","behavior","pointer-interaction","vertical-height","friction"],{renderIntoShadow:!0})});var gFe,Qu,Yg,Fue,$O=T(()=>{Pe();Se();ht();Re();Gm();Gn();gFe=ce(ve(),1);Wi();Ni();W();Qu=new Map,Yg=class extends ae{constructor(){super(),this.state={iconElement:{imgVdom:null,customDimensions:{width:32,height:32}}}}render(e,i){let r=i.iconElement.customDimensions.width/i.iconElement.customDimensions.height;return m(X,{children:je(m(X,{children:[m("style",{id:"text-icon",children:`
		:host {
			cursor: ${e.adminMode?"text":"unset"};
			aspect-ratio: ${r};
			height: 1.2em;
			width: auto;
		    contain: layout;
		    margin-top: -1em;
		    margin-bottom: -.25em;
		    display: inline-block;
		    vertical-align: baseline;
			position: relative;
		}

		:host, *{
		    -moz-user-select: text;
		    -webkit-user-select: text;
		    -ms-user-select: text;
		    user-select: text; 		
		}

		img {
			pointer-events:none;
		}
		
		svg, img {
			object-fit: cover;
			display: block;
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			fill: currentColor;
		}
					`}),this.state.iconElement.imgVdom,this.props.adminMode?m(Vi,{baseNode:this.props.baseNode,inFront:!1}):null]}),this.props.baseNode.shadowRoot)})}getIconSVG=()=>{new Promise((e,i)=>{let r=this.props.icon||null;if(r)if(Qu.has(r))e(Qu.get(r));else{let o=r.indexOf("https://")===0?r:"https://build.cargo.site/frontend/b164f5/icon/icons/"+r+".svg",s=o.split(".")?.pop()||"";if(["jpeg","jpg","png","gif","webp"].indexOf(s.toLowerCase())!=-1){let u=document.createElement("img");u.src=o,u.onload=()=>{let c=m("img",{part:"img",src:r,width:u.naturalWidth,height:u.naturalHeight});Qu.set(r,{imgVdom:c,customDimensions:{width:u.naturalWidth,height:u.naturalHeight}}),u.onload=null,e(Qu.get(r))}}else s=="svg"?fetch(o,{mode:"cors"}).then(u=>u.ok?u.text():i("bad response")).then(u=>{let c=document.createElement("div");c.innerHTML=u;let d={width:32,height:32},p=Array.from(c.children).map((g,v)=>{let b=g.tagName.toLowerCase()=="svg";return b&&g.hasAttribute("width")&&g.hasAttribute("height")&&(d.width=g.getAttribute("width"),d.height=g.getAttribute("height")),zu(g,null,{part:b?"svg":v,key:r+"-"+v,draggable:!0})});if(p.length>0){if(Qu.set(r,{imgVdom:p,customDimensions:d}),r!==this.props.icon){i("Icon name mismatch");return}e(Qu.get(r))}else i("Icon not found at ",o)}).catch(u=>{i(u)}):i("Invalid url")}else i("Icon not found",r)}).then(e=>{this.setState({iconElement:e})}).catch(e=>{console.log("icon loading failed:",e)})};onDragStart=e=>{e.dataTransfer.setData("text-icon-drag","true")};componentDidMount(){for(this.props.baseNode.addEventListener("dragstart",this.onDragStart);this.props.baseNode.childNodes[0];)this.props.baseNode.childNodes[0].remove();this.getIconSVG()}componentWillUnmount(){this.props.baseNode.removeEventListener("dragstart",this.onDragStart)}componentDidUpdate(e){e.icon!==this.props.icon&&this.getIconSVG()}};Yg.defaultProps={icon:null};Fue=Nt(De((t,e)=>({adminMode:t.frontendState.adminMode}))(Yg));Zt(Fue,"text-icon",["icon"],{delegatesFocus:!0})});var O2,jO,GO=T(()=>{Se();Um();W();O2=class extends _e.Component{constructor(e){super(e)}render(){return m(X,{children:[m("div",{className:"colorfilter-color"}),m("div",{className:"colorfilter-base"})]})}componentDidMount(){Ge.isSafari()&&(document.querySelector("#editor-overlay")?.classList.add("safari"),document.querySelector("#cargo-dotsite")?.classList.add("safari"),document.querySelector(".colorfilter-base")?.classList.add("safari"),document.querySelector(".colorfilter-color")?.classList.add("safari"))}componentWillUnmount(){document.querySelector("#editor-overlay")?.classList.remove("safari"),document.querySelector("#cargo-dotsite")?.classList.remove("safari")}},jO=O2});function Hue(t){let e=ne?t.site?.is_template:t.site?.is_template&&parent===window;return{hasSitePackage:t.frontendState.hasSitePackage,adminInitialized:t.adminState?.initialized||!1,inAdminFrame:t.frontendState.inAdminFrame,isMobile:t.frontendState.isMobile,adminMode:t.frontendState.adminMode,showCargoLogo:!e&&t.site?.show_cargo_logo,customHTML:t.site?.custom_html,access_level:t.site?.access_level,website_title:t.site?.website_title,domain_active:t.site?.domain_active,domain:t.site?.domain,site_url:t.site?.site_url,site_id:t.site?.id,fonts:t.site?.fonts,fontsLoaded:t.frontendState.fontsLoaded,stylesheet:t.frontendState.pageNotFound?" ":t.css?.stylesheet,hasAuth:t.auth.authenticated,canDuplicate:e,activePID:t.frontendState.activePID,itemsInCart:to.default.values(t.commerce.cart).reduce((i,r)=>i+=r?.quantity||0,0),enableColorFilter:!!t.siteDesign.site?.enableColorFilter}}function Uue(t){return Pt({fetchSitePackage:He.fetchSitePackage,updateFrontendState:He.updateFrontendState,getAuthToken:He.getAuthToken},t)}var KO,to,YO,Zg,Xg,D2,zue,L2,ZO,XO=T(()=>{Pe();di();ht();KO=ce(Bh(),1),to=ce(ve(),1);Ua();Re();Z8();jt();js();mR();wo();CR();Oi();eg();IN();fw();NN();Wi();jN();Ng();Jm();u2();d2();f2();aO();uO();MO();OO();FO();VO();$O();Di();Ar();GO();W();YO=!1,Zg=!1,Xg=!0,D2=(t=!1)=>{(t||YO&&Zg&&Xg)&&setTimeout(()=>{Xg&&window.dispatchEvent(new CustomEvent("initial-content-visible",{detail:{screenshots:{hiddenIds:["dl-duplicate-site"]}}}))},1500)},zue=async t=>{let e=[];if(t.hasSitePackage!==!0&&e.push(t.fetchSitePackage()),ne&&t.fonts&&to.default.isArray(t.fonts)){let i=[...t.fonts].filter(n=>n.provider!=="google"),r=Zw({context:"server",families:i});r.then(n=>{t.updateFrontendState({fontsLoaded:to.default.uniq(t.fontsLoaded.concat(i.map(o=>o.family))),serverRenderedFontCSS:n.filter(o=>o??!1)})}),e.push(r)}await Promise.allSettled(e),YO=!0,D2()},L2=class extends ae{constructor(e){if(super(e),this.state={checkedExistingAuth:!!ne,checkedCookieAuth:!!ne,mobileOffsetsString:null,inheritableFontSizesString:null,linkStylesString:null,fontFeatureSettingsStylesString:null},!ne){if(Promise.resolve().then(()=>(up(),Fw)).then(({default:n})=>{this.setState({QuickView:n})}),e.inAdminFrame===!0){let n=document.getElementsByTagName("head")[0],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href="https://build.cargo.site/frontend/b164f5/css/front-end/frontend-interface.css",o.id="frontend-interface",n.appendChild(o)}this.setMobileClass(this.props.isMobile),this.setOSClass();let i=0,r=0;window.addEventListener("backdrop-load-start",()=>{Xg=!1,i++}),window.addEventListener("backdrop-load-complete",()=>{r++,r===i&&(Xg=!0,D2())})}this.globalStyleRef=me(),this.customHTMLRef=me(),this.scrollingElement={current:ne?null:window},this.setWindowTitle()}setWindowTitle=()=>{if(ne)return;let e=this.props.store.getState(),i,r="";this.props.activePID&&this.props.activePID!==e.site.homepage_id&&this.props.activePID!==e.site.mobile_homepage_id&&this.props.activePID!=="root"&&(e.pages.byId[this.props.activePID]?i=e.pages.byId[this.props.activePID]:e.sets.byId[this.props.activePID]&&(i=e.sets.byId[this.props.activePID])),this.props.website_title&&(r=`${i?.title?`${i.title} \u2014 `:""}${this.props.website_title}`),r!==document.title&&(document.title=r)};onFirstSiteLoad(){let e=!1;try{e=parent.__c3_admin__===!0}catch{}window.dispatchEvent(new CustomEvent("cargo-site-load",{detail:{editing:e}}))}render(){if(this.props.hasSitePackage!==!0)return null;if(!ne&&!Ri&&this.props.domain_active===!0&&this.props.domain!==window.location.host&&!Ls)return window.location.hostname=this.props.domain,null;if(this.props.access_level==="password"||this.props.access_level==="private"){let i=null;return this.props.hasAuth&&this.state.checkedExistingAuth===!1?this.fetchingSitePackage||(this.fetchingSitePackage=!0,this.props.fetchSitePackage().finally(()=>{delete this.fetchingSitePackage,this.setState({checkedExistingAuth:!0})})):this.state.checkedCookieAuth===!1?this.checkingAuth||(this.checkingAuth=!0,this.props.getAuthToken({timeout:1500,site_url:this.props.site_url,site_id:this.props.site_id}).then(()=>{this.props.fetchSitePackage().finally(()=>{delete this.checkingAuth,this.setState({checkedCookieAuth:!0})})}).catch(r=>{this.setState({checkedCookieAuth:!0})}).finally(()=>{delete this.checkingAuth})):(this.props.access_level==="password"?i=m(qu,{target:"site",onSucces:()=>{this.props.fetchSitePackage()}}):this.props.access_level==="private"&&(i=m(ag,{message:"This site is private."})),this.onFontLoad(!0)),m(X,{children:m(Hw,{children:i})})}let e=this.props.customHTML;return m(X,{children:[this.props.enableColorFilter?m(jO,{}):null,m("customhtml",{ref:this.customHTMLRef,dangerouslySetInnerHTML:{__html:e}}),m(PN,{}),m(Hw,{}),m("style",{ref:this.globalStyleRef,dangerouslySetInnerHTML:{__html:this.props.stylesheet}}),m("style",{id:"mobile-offset-styles",dangerouslySetInnerHTML:{__html:this.state.mobileOffsetsString}}),m("style",{id:"text-style-font-sizes",dangerouslySetInnerHTML:{__html:this.state.inheritableFontSizesString}}),m("style",{id:"link-styles",dangerouslySetInnerHTML:{__html:this.state.linkStylesString}}),m("style",{id:"font-feature-settings-styles",dangerouslySetInnerHTML:{__html:this.state.fontFeatureSettingsStylesString}}),m(hu,{scrollingElement:this.scrollingElement,children:[m(fR,{}),this.state.QuickView&&m(this.state.QuickView,{}),this.props.inAdminFrame&&m(w_,{}),this.state.loginBeforeDuplicatingSite&&m(Y8,{loginToUdotCargoOnly:!0,canCreateNewAccount:!this.props.isMobile,animateIn:!0,canClickout:!0,templateID:this.props.site_id,onClickout:()=>{this.setState({loginBeforeDuplicatingSite:!1})},onLoginSuccess:i=>{window.location.href=`${Ed}?duplicate=${this.props.site_id}`}}),m(xo,{portalHost:ne?null:document.body})]})]})}componentDidMount(){this.loadNewFonts(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,this.showHideAdminInterface(),Qe.on("mobile-change",this.onMobileChange),this.onMobileChange(Qe.data.mobile.active),this.updateCartCounter(),this.props.hasSitePackage&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.onFirstSiteLoad()})})}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,i){console.error(e)}onMobileChange=e=>{this.props.updateFrontendState({isMobile:e})};onFontLoad=(e=!1)=>{ne||Zg||(Zg=!0,document.documentElement.classList.remove("wf-initial-load"),D2(e))};componentWillUnmount(){Qe.off("mobile-change",this.onMobileChange)}showHideAdminInterface=()=>{this.inPreviewMode?document.querySelector("#frontend-interface")?.setAttribute("disabled",""):document.querySelector("#frontend-interface")?.removeAttribute("disabled")};setOSClass=()=>{!sd()&&!ld()&&document.body.classList.add("f-f")};setMobileClass=e=>{e?(document.body.classList.add("mobile"),document.documentElement.classList.add("mobile")):(document.body.classList.remove("mobile"),document.documentElement.classList.remove("mobile"))};setEditingClass=e=>{e?document.body.classList.add("editing"):document.body.classList.remove("editing")};loadNewFonts=()=>{if(!this.props.fonts)return;let e=this.props.fonts.filter(i=>!this.props.fontsLoaded.includes(i.family));e&&e.length>0?(this.props.updateFrontendState({fontsLoaded:to.default.uniq(this.props.fontsLoaded.concat(e.map(i=>i.family)))}),Zw({families:e}).then(()=>{Zg||document.fonts.ready.then(()=>{this.onFontLoad()})})):document.fonts.ready.then(()=>{this.onFontLoad()})};componentDidUpdate(e,i){if(!ne){if(this.setWindowTitle(),this.inPreviewMode=this.props.inAdminFrame&&this.props.adminMode===!1,typeof this.props.customHTML=="string"&&this.props.customHTML!==e.customHTML&&this.customHTMLRef.current){let r=document.createRange().createContextualFragment(this.props.customHTML);this.customHTMLRef.current.innerHTML="",this.customHTMLRef.current.appendChild(r)}this.props.stylesheet!==e.stylesheet&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles()),this.props.fonts!==e.fonts&&to.default.isArray(this.props.fonts)&&this.loadNewFonts(),this.props.inAdminFrame===!0?(this.setEditingClass(this.props.adminMode),this.props.adminInitialized!==e.adminInitialized&&(this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles())):this.setEditingClass(!1),e.isMobile!==this.props.isMobile&&(this.setMobileClass(this.props.isMobile),this.setMobileOffsets(),this.setInheritableFontSizes(),this.setLinkStyles(),this.setFontFeatureSettingsStyles()),this.props.itemsInCart!==e.itemsInCart&&this.updateCartCounter(),this.showHideAdminInterface(),this.props.hasSitePackage&&!e.hasSitePackage&&requestAnimationFrame(()=>{this.onFirstSiteLoad()})}}updateCartCounter=()=>{document.documentElement.style.setProperty("--cart-item-count",this.props.itemsInCart||""),document.documentElement.style.setProperty("--cart-item-count-display",this.props.itemsInCart?"inline":"")};setFontFeatureSettingsStyles=()=>{if(ne||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let i=e.sheet;if(!i)return null;let r=!1;for(let u of i.cssRules)if(u.selectorText==="bodycopy"&&u.style.getPropertyValue("font-feature-settings")){r=!0;break}else continue;if(!r)return;let n="",o=[],s=[];to.default.each(i.rules,u=>{!u||!u.selectorText||u.selectorText.includes(" ")||((u.style.getPropertyValue("--text-style")||u.selectorText===".caption")&&!u.style.getPropertyValue("font-feature-settings")&&o.push(u.selectorText),u.selectorText.match(/h[1-6]/gi)&&!u.style.getPropertyValue("font-feature-settings")&&s.push(u.selectorText))});for(let u of o)n+=u+" { font-feature-settings: normal; } ";for(let u of s)n+=u+" { font-feature-settings: normal; } ";this.setState({fontFeatureSettingsStylesString:n})};setLinkStyles=()=>{if(ne||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let i=e.sheet;if(!i)return null;let r="",n=[],o=[];to.default.each(i.rules,s=>{!s||!s.selectorText||((s.style.getPropertyValue("--text-style")||s.selectorText===".caption")&&n.push(s.selectorText),s.selectorText.match(/h[1-6]/gi)&&o.push(s.selectorText))}),to.default.each(i.rules,s=>{!s||!s.selectorText||(n.forEach(u=>{if(s.selectorText.startsWith(u)&&s.selectorText.includes(" a")){let c=s.selectorText.replace(/^(.*)\s(\a(?:[:.]\S*)?)$/i,(g,v,b)=>b+v);s.selectorText!==c&&(r+=c+" { "+(s.style.cssText||"")+" } ");let d=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),p=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";p!==""&&!d&&(r+=c+" { "+(s.style.cssText||"")+p+" } ",r+=s.selectorText+" { "+p+" } ")}}),o.forEach(u=>{if(s.selectorText.startsWith(u)&&s.selectorText.includes(" a")){let c=!!(s.selectorText.includes(" a::")||s.selectorText.includes(" a:")),d=s.style.getPropertyValue("text-decoration-color")===""?" text-decoration-color: unset;":"";d!==""&&!c&&(r+=s.selectorText+" { "+d+" } ")}}))}),this.setState({linkStylesString:r})};setInheritableFontSizes=()=>{if(ne||!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let i=e.sheet;if(!i)return null;let r="";to.default.each(i.rules,n=>{if(n.style?.fontSize&&n.style?.fontSize!==""){let o=n.style.fontSize,s=n.selectorText==="bodycopy"?", "+n.selectorText+" *":"";r+=n.selectorText+" {--font-size: "+o+`;}
`,r+=n.selectorText+s+` {font-size: calc(var(--font-scale) * var(--font-size));}
`}}),this.setState({inheritableFontSizesString:r})};setMobileOffsets=()=>{if(ne)return;if(!this.props.isMobile){this.setState({mobileOffsetsString:null});return}if(!this.props.stylesheet)return;let e=this.getIsolatedStyleSheet();e.innerHTML=this.props.stylesheet;let i=lu(e.sheet,[{properties:["padding-top","padding-right","padding-bottom","padding-left"],denyList:["ul","ul.lineated","ol","li","h1","h2","h3","h4","h5","h6","sub","sup","blockquote","small-caps","match:audio-player","match:cargo-map","match:shop-product",".quick-view",".quick-view .caption",".quick-view .caption-background",".mobile .quick-view",".mobile .quick-view .caption"]},{properties:["margin-top","margin-right","margin-bottom","margin-left"],allowList:[".content",".mobile .content"]}]);this.setState({mobileOffsetsString:i})};getIsolatedStyleSheet=to.default.once(e=>{let i=document.implementation.createDocument("http://www.w3.org/1999/xhtml","body",null),r=document.createElement("style");return r.innerHTML=e,i.children[0].appendChild(r),r})};ZO=_n(De(Hue,Uue)((0,KO.frontloadConnect)(zue,{onMount:!0,onUpdate:!1})(L2)))});var JO,QO=T(()=>{JO=ce(Sn(),1);JO.default.defaults.validateStatus=function(t){return t>=200&&t<300}});var Jg,Qg,eD,tD=T(()=>{Jg=ce(Sn(),1);Re();es();Qg=new Map,eD=t=>{let e;t.subscribe(()=>{let i=t.getState();if(!i.adminState||!i.adminState.crdt)return;let r=i.adminState.crdt.publishedAt;r!==e&&Qg.clear(),e=r})};ne||(Jg.default.interceptors.request.use(async t=>{if(t.use_cache===!0){let e=Jg.default.getUri(t);Qg.has(e)?t.adapter=function(i){return Qg.get(e).cachedResponsePromise}:(t.cachedResponsePromise=new Promise((i,r)=>{t.resolveCachedResponsePromise=i,t.rejectCachedResponsePromise=r}),t.cachedResponsePromise.catch(i=>i),Qg.set(e,t))}return t}),Jg.default.interceptors.response.use(t=>(t.config.resolveCachedResponsePromise&&t.config.resolveCachedResponsePromise(t),t),t=>(t.config?.rejectCachedResponsePromise&&t.config.rejectCachedResponsePromise(t),Promise.reject(t))))});var F2,iD=T(()=>{F2=ce(Sn(),1);Re();es();jt();ne||(F2.default.interceptors.request.use(async t=>{if(t.use_auth!==!1){let e=Dt?.getState();t.headers.Authorization===void 0&&e&&e.auth.data&&e.auth.data.access_token&&(t.headers.Authorization=`Bearer ${e.auth.data.access_token}`)}return t}),F2.default.interceptors.response.use(void 0,t=>(t.response?.status===403&&Dt.dispatch({type:Te.AUTHENTICATE_USER_REJECTED,payload:{}}),Promise.reject(t))))});var rD=T(()=>{});var nD=T(()=>{});var oD,aD=T(()=>{Ng();u2();Jm();d2();f2();oD={grid:Tn,columnized:Mo,slideshow:hi,freeform:Gi,justify:An}});var que={};var sD,lD=T(()=>{_i();es();sD=ce(Ov(),1);di();hb();jt();Mt();aD();Di();cg();window.getClientAPI=()=>({actions:rb,reducers:pb,selectors:Je,history:eo,store:Dt,globals:eb,addReduxMiddleWare:sD.addMiddleware,combineReducers:Vn,galleryData:oD,editorOverlayAPI:Ue,toggleOverlay:ji.toggleOverlay,openOverlay:ji.openOverlay,closeOverlay:ji.closeOverlay})});var uD,cD,Aze,Dt,eo,es=T(()=>{Pe();ht();uD=ce(Bh(),1);ia();Re();Gh();cD=ce(ve(),1),Aze=ce(Sn(),1);W8();jt();V8();XO();Oi();Ar();QO();tD();iD();rD();nD();W();!ne&&Ri&&(lD(),Lc(que));({store:Dt}=B8());if(!ne){eo=jh(),Qe.setupStore(Dt),eD(Dt);let t;try{t=localStorage.getItem("c3-auth")}catch(o){console.log("unable to retrieve stored auth",o)}let e=new URLSearchParams(window.location.search);if(e.has("auth"))try{Dt.dispatch({type:Te.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(e.get("auth"))}}),e.delete("auth");let o=e.toString();o.length>0&&(o="?"+o),window.history.replaceState({},document.title,window.location.origin+window.location.pathname+o)}catch(o){console.error("unable to use querystring auth",o)}else if(t)try{Dt.dispatch({type:Te.AUTHENTICATE_USER_FULFILLED,payload:{authenticated:!0,data:JSON.parse(t)}})}catch(o){console.error("unable to retrieve stored auth",o)}window.history.scrollRestoration&&(window.history.scrollRestoration="manual");let i={};eo.push=cD.default.wrap(eo.push,function(o){i[window.location.pathname]=document.scrollingElement.scrollTop;var s=Array.prototype.slice.call(arguments);if(!s.some(u=>u.preventScrollReset===!0)){let u=Dt.getState().frontendState.activePID,c=null,d=Dt.subscribe(()=>{if(clearTimeout(c),Dt.getState().frontendState.activePID!==u){document.scrollingElement.scrollTo(0,0);let p=document.scrollingElement.scrollHeight;bb(10,()=>{let g=document.scrollingElement.scrollHeight;p!==g&&(document.scrollingElement.scrollTo(0,0),p=g)}),d()}else c=setTimeout(()=>{d()},4e3)})}s.shift(),o.apply(this,s)}),window.addEventListener("popstate",o=>{let s=window.location.pathname,u=eo.location.pathname;i[u]=document.scrollingElement.scrollTop;let c=Dt.getState().frontendState.activePID,d=Dt.subscribe(()=>{if(Dt.getState().frontendState.activePID!==c&&i[s]){let p=Dt.getState().frontendState.activePID;setTimeout(async()=>{let g=0,v=!0;for(;v&&Dt.getState().frontendState.activePID===p;)g>10&&(v=!1),document.scrollingElement.scrollHeight>=i[s]&&(document.scrollingElement.scrollTop=i[s],v=!1),g++,await new Promise(b=>setTimeout(b,100))}),d()}})});let r=m(w0,{store:Dt,children:m(Da,{history:eo,children:m(uD.Frontload,{noServerRender:!0,children:m(ZO,{})})})}),n=document.body;n.querySelector(".content")!==null?qc(r,n):Aa(r,n),requestAnimationFrame(()=>{document.body.style.opacity=""})}});es();export{eo as history,Dt as store};
/*! lightbox - v1.0.0 Build date: 2017-10-10
	Wrapper for PhotoSwipe (http://photoswipe.com) Copyright (c) 2015 Dmitry Semenov
	*/
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
/*! PhotoSwipe Default UI - 4.1.1 - 2015-12-24
 * http://photoswipe.com
 * Copyright (c) 2015 Dmitry Semenov; */
/*! Bundled license information:

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=https://build.cargo.site/frontend/b164f5/index.js.map
